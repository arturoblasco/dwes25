## 1. Qué es una expresión regular?

Una expresión regular es una secuencia de caracteres que forma un patrón de búsqueda. Cuando buscas datos en un texto, puedes utilizar este patrón de búsqueda para describir lo que estás buscando.

Una expresión regular puede ser un solo carácter o un patrón más complicado.

Las expresiones regulares se pueden utilizar para realizar todo tipo de operaciones de búsqueda y reemplazo de texto.

Ejemplo:

```php
$exp = "/prueba/i";
```

En el ejemplo anterior, **`/`**es el **delimitador** , *prueba* es el **patrón** que se está buscando y **`i`**es un **modificador** que hace que la búsqueda no distinga entre mayúsculas y minúsculas.

El delimitador puede ser cualquier carácter que no sea una letra, un número, una barra invertida o un espacio. El delimitador más común es la barra diagonal (**`/`**), pero cuando tu patrón contiene barras diagonales es conveniente elegir otros delimitadores como `#` o `~`.

## 2. Funciones de expresión regular

PHP proporciona una variedad de funciones que le permiten utilizar expresiones regulares.

Las funciones más comunes son:

<div class="center-table">
    <table>
<tr>
	<th>función</th>
	<th>descripción</th>
</tr>
<tr>
	<td><b>preg_match(patron, cadena)</b></td>
	<td>Devuelve 1 si el patrón se encontró en la cadena y 0 si no.</td>
</tr>
<tr>
	<td><b>preg_match_all(patron, cadena)</b></td>
	<td>Devuelve el número de veces que se encontró el patrón en la cadena, que también puede ser 0.</td>
</tr>
<tr>
	<td><b>preg_replace(patron, modificado, cadena)</b></td>
	<td>Devuelve una nueva cadena donde los patrones coincidentes han sido reemplazados por otra cadena.</td>
</tr>
    </table>
</div>


=== "Ejemplo *preg_match(args)*"
    ```php
        <?php
            $cadena = "Estudia DAW en Catadaw";
            $patron = "/daw/i";
            echo preg_match($patron, $cadena); 
        ?>
    ```
=== "Resultado"
	<div style="text-align: left;"><img src="../../img/ut02/ut02_prova270.png" alt="prova 270" style="zoom:100%; border: 2px solid #fff2c9;" /></figure></div>
<br>

=== "Ejemplo *preg_match_all*"
    ```php
    <?php
        $cadena = "La lluvia en SEVILLA es una maravilla.";
    	$patron = "/vi/i";
    	echo preg_match_all($patron, $cadena);
    ?>
    ```
=== "Resultado"
	<div style="text-align: left;"><img src="../../img/ut02/ut02_prova271.png" alt="prova 271" style="zoom:100%; border: 2px solid #fff2c9;" /></figure></div>
<br>
=== "Ejemplo *preg_replace*"
    ```php
    <?php
        $cadena = "Estudia DAM";
    	$patron = "/dam/i";
    	$modificado = "DAW";
    	echo preg_replace($patron, $modificado, $cadena);
    ?>
    ```
=== "Resultado"
	<div style="text-align: left;"><img src="../../img/ut02/ut02_prova272.png" alt="prova 272" style="zoom:100%; border: 2px solid #fff2c9;" /></figure></div>


## 3. Modificadores de expresiones regulares
Los modificadores pueden cambiar cómo se realiza una búsqueda.
<div class="center-table">
    <table>
<tr>
	<th>modificación</th>
	<th>descripción</th>
</tr>
<tr>
	<td><b>i</b></td>
	<td>Realiza una búsqueda que no distingue entre mayúsculas y minúsculas.</td>
</tr>
<tr>
	<td><b>m</b></td>
	<td>Realiza una búsqueda multilínea (los patrones que buscan una coincidencia al principio o al final de una cadena ahora coincidirán con el principio o el final de cada línea).</td>
</tr>
<tr>
	<td><b>u</b></td>
	<td>Permite la coincidencia correcta de patrones codificados en UTF-8.</td>
</tr>
    </table>
</div>


=== "Ejemplo modificador "
    ```php
    <?php
        $cadena = "IES Mestre Ramon Esteve";
		$patron = "/s/i";
		echo preg_match_all($patron, $cadena);
		
		echo preg_replace($patron, "#", $cadena);
	?>
	```
=== "Resultado"
	<div style="text-align: left;"><img src="../../img/ut02/ut02_prova273.png" alt="prova 273" style="zoom:100%; border: 2px solid #fff2c9;" /></figure></div>

## 4. Patrones de expresiones regulares

Los corchetes se utilizan para encontrar un rango de caracteres:
<div class="center-table">
    <table>
<tr>
	<th>expresión</th>
	<th>descripción</th>
</tr>
<tr>
	<td><b>[abc]</b></td>
	<td>Encuentra uno o varios de los caracteres dentro de los corchetes.</td>
</tr>
<tr>
	<td><b>[^abc]</b></td>
	<td>Encuentra cualquier carácter que NO esté entre corchetes.</td>
</tr>
<tr>
	<td><b>[a-z]</b></td>
	<td>Encuentra cualquier carácter alfabéticamente entre dos letras.</td>
</tr>
<tr>
	<td><b>[A-z]</b></td>
	<td>Encuentre cualquier carácter alfabéticamente entre una letra mayúscula especificada y una letra minúscula especificada.</td>
</tr>
<tr>
	<td><b>[A-Z]</b></td>
	<td>Encuentra cualquier carácter alfabéticamente entre dos letras mayúsculas.</td>
</tr>
<tr>
	<td><b>[123]</b></td>
	<td>Encuentra uno o varios de los dígitos dentro de los corchetes.</td>
</tr>
<tr>
	<td><b>[0-5]</b></td>
	<td>Encuentra cualquier dígito entre los dos números.</td>
</tr>
<tr>
	<td><b>[0-9]</b></td>
	<td>Encuentra cualquier dígito.</td>
</tr>
    </table>
</div>

## 5. Metacaracteres

Los metacaracteres son caracteres con un significado especial:
<div class="center-table">
    <table>
<tr>
	<th>metacaracter</th>
	<th>descripción</th>
</tr>
<tr>
	<td><b>|</b></td>
    <td>Encuentra una coincidencia para cualquiera de los patrones separados por <b>|</b> como en: gato|perro|pez</td>
</tr>
<tr>
	<td><b>.</b></td>
	<td>Encuentra cualquier caracter.</td>
</tr>
<tr>
	<td><b>^</b></td>
	<td>Encuentra una coincidencia como comienzo de una cadena como en: <b>^Hola</b></td>
</tr>
<tr>
	<td><b>$</b></td>
	<td>Encuentra una coincidencia al final de la cadena como en: <b>World$</b>.</td>
</tr>
<tr>
	<td><b>\d</b></td>
	<td>Encuentra cualquier dígito.</td>
</tr>
<tr>
	<td><b>\D</b></td>
	<td>Encuentra cualquier no dígito.</td>
</tr>
<tr>
	<td><b>\s</b></td>
	<td>Encuentra cualquier carácter de espacio en blanco.</td>
</tr>
<tr>
	<td><b>\S</b></td>
	<td>Encuentra cualquier carácter que no sea un espacio en blanco.</td>
</tr>
<tr>
	<td><b>\w</b></td>
	<td>Encuentre cualquier letra alfabética (de la a a la Z) y dígito (0 a 9).</td>
</tr>
<tr>
	<td><b>\W</b></td>
	<td>Encuentra cualquier carácter no alfabético y sin dígitos.</td>
</tr>
<tr>
	<td><b>\b</b></td>
    <td>Encuentre una coincidencia al principio de una palabra como esta: \bWORD, o al final de una palabra como esta: <b>WORD\b</b>.</td>
</tr>
<tr>
	<td><b>\uxxxx</b></td>
    <td>Encuentre el carácter Unicode especificado por el número hexadecimal <b>xxxx</b>.</td>
</tr>
    </table>
</div>



=== "Ejemplos patrones"
    ```php
    <?php
		$cadena = "Hola Mundo!";
        if (preg_match($patron, $cadena)) {
            echo "La cadena empieza con 'Hola'.<br/>";
        }

        $patron = "/\.$/";  // Coincide si termina con "."
        $cadena = "Esta es una oración.";
        if (preg_match($patron, $cadena)) {
            echo "La cadena termina con un punto.<br/>";
        }
    
        $patron = "/\d/";  // Coincide con cualquier dígito
        $cadena = "Tengo 2 perros.";
        if (preg_match($patron, $cadena)) {
            echo "Se encontró un número.<br/>";
        }
    
        $cadena = "Tengo perros.";
        if (preg_match($patron, $cadena)) {
            echo "Se encontró un carácter no numérico.<br/>";
        }
    
        $patron = "/\s/";  // Coincide con cualquier espacio en blanco
        $cadena = "Hola Mundo!";
        if (preg_match($patron, $cadena)) {
            echo "Se encontró un espacio en blanco.<br/>";
        }
    
        $patron = "/\S/";  // Coincide con cualquier carácter que no sea espacio
        $cadena = "Hola!";
        if (preg_match($patron, $cadena)) {
            echo "Se encontró un carácter que no es espacio en blanco.<br/>";
        }
    
        $patron = "/\w/";  // Coincide con cualquier letra, número o guión bajo
        $cadena = "Hola_123";
        if (preg_match($patron, $cadena)) {
            echo "Se encontró un carácter alfanumérico.<br/>";
        }
    
        $patron = "/\W/";  // Coincide con cualquier carácter que no sea letra, número o guión bajo
        $cadena = "Hola Mundo!";
        if (preg_match($patron, $cadena)) {
            echo "Se encontró un carácter que no es alfanumérico.<br/>";
        }
    
        $patron = "/\bgato\b/";  // Coincide con la palabra exacta "gato"
        $cadena = "Tengo un gato en casa.";
        if (preg_match($patron, $cadena)) {
            echo "Se encontró la palabra 'gato'.<br/>";
        }
    
        $patron = "/\u{2764}/";  // Unicode del corazón
        $cadena = "Te amo ❤";
        if (preg_match($patron, $cadena)) {
            echo "Se encontró un corazón.";
        }
    ?>
    ```
=== "Resultado"
	<div style="text-align: left;"><img src="../../img/ut02/ut02_prova274.png" alt="prova 274" style="zoom:100%; border: 2px solid #fff2c9;" /></figure></div>



## 6. Cuantificadores

Los cuantificadores definen cantidades:

<div class="center-table">
    <table>
<tr>
	<th>cuantificador</th>
	<th>descripción</th>
</tr>
<tr>
	<td><b>n+</b></td>
    <td>Coincide con cualquier cadena que contenga al menos un n.</td>
</tr>
<tr>
	<td><b>n*</b></td>
	<td>Coincide con cualquier cadena que contenga cero o más apariciones de <i>n</i>.</td>
</tr>
<tr>
	<td><b>n?</b></td>
	<td>Coincide con cualquier cadena que contenga cero o una ocurrencia de <i>n</i>.</td>
</tr>
<tr>
	<td><b>n{3}</b></td>
	<td>Coincide con cualquier cadena que contenga una secuencia de 3 <i>n</i>'s.</td>
</tr>
<tr>
	<td><b>n{2, 5}</b></td>
	<td>Coincide con cualquier cadena que contenga una secuencia de al menos 2, pero no más de 5 <i>n</i>'s.</td>
</tr>
<tr>
	<td><b>n{3, }</b></td>
	<td>Coincide con cualquier cadena que contenga una secuencia de al menos 3 <i>n</i>'s.</td>
</tr>
    </table>
</div>

## 7. Agrupamiento

Puedes utilizar paréntesis `(  )`para aplicar cuantificadores a patrones completos. También se pueden utilizar para seleccionar partes del patrón que se utilizarán como coincidencia.

=== "Ejemplo patrones y agrupamiento"
    ```php
	<?php
		$cadena = "Manzanas y Bananas.";
        $patron = "/a(na){2,}/i";
        echo preg_match_all($patron, $cadena);
	?>
    ```
=== "Resultado"
	<div style="text-align: center;"><img src="../../img/ut02/ut02_prova275.png" alt="prova 275" style="zoom:100%; border: 2px solid #fff2c9;" /></figure></div>



???question "Aprender expresiones regulares"
 	Hay millones de ejemplos, pero en esto 10 ejercicios. ¿Qué cadenas de texto encontrarían las siguientes regexp?<br />
 	a) hola<br />
 	b) h.?a<br />
 	c) h+b.<br />
 	d) [2-4]?[3-9ag]<br />
 	e) aju{2,8}m[-.]z<br />
 	f) (ad)+juju.[0-9]?-<br />
 	g) (ho|la)?[4-7zu]<br />
 	h) [([0-4][0-9]|5[0-2])[0-9]{3} . Códigos Postales España<br />
 	i) ^.{3,32}#[0-9]{4}$ . Usuario Discord<br />
 	j) (b25[0-5]|b2[0-4][0-9]|b[01]?[0-9][0-9]?)(.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3} . Dirección ipv4. b es un delimitador de palabra «boundary».<br />
 	
