---
title: 4.4.Cabeceras de respuesta
---
# 4.4. Cabeceras de respuesta

Se devuelven mediante la función `header(cadena)`. Mediante las cabeceras podemos configurar el tipo de contenido, tiempo de expiración, redireccionar el navegador, especificar errores HTTP, etc.

!!! warning "La cabecera debe ser **lo primero a devolver**"
    El motivo es que en cuando un programa genera contenido HTML, el servidor genera automáticamente la información de estado y los campos de cabecera, y a continuación envía el contenido generado. Si después el programa contiene una instrucción **header()**, se produce un **error** porque las cabeceras ya se han enviado (ni siquiera debes dejar una linea en blanco).

```php
<?php 	
    header("Content-Type: text/plain");
	header("Location: http://www.ejemplo.com/inicio.html");
    exit(); 
```

> **Inspeccionando las cabeceras**
> 
> Se puede comprobar en las herramientas del desarrollador de los navegadores web mediante ***Developer Tools > Network > (doble clic ) > Headers***.
	
Es muy común configurar las cabeceras para evitar consultas a la caché o provocar su renovación.

???examplephp "Ejemplo de uso de `header`"
    ```php
    <?php
      header("Expires: Sun, 31 Jan 2025 23:59:59 GMT");

      // tres horas
      $now = time();
      $horas3 = gmstrftime("%a, %d %b %Y %H:%M:%S GMT", $now + 60 * 60 * 3); // convierte en una cadena formateada en GMT (Tiempo Universal Coordinado)
      header("Expires: {$horas3}");

      // un año
      $now = time();
      $anyo1 = gmstrftime("%a, %d %b %Y %H:%M:%S GMT", $now + 365 * 86440);
      header("Expires: {$anyo1}");

      // se marca como expirado (fecha en el pasado)
      $pasado = gmstrftime("%a, %d %b %Y %H:%M:%S GMT");
      header("Expires: {$pasado}");

      // evitamos cache de navegador y/o proxy
      header("Expires: Mon, 26 Jul 1997 05:00:00 GMT");   // Fecha en el pasado
      header("Last-Modified: " . gmdate("D, d M Y H:i:s") . " GMT"); // Fecha de última modificación
      header("Cache-Control: no-store, no-cache, must-revalidate"); // Control estricto de la caché
      header("Cache-Control: post-check=0, pre-check=0", false); // Directiva adicional para control de caché
      header("Pragma: no-cache"); // Compatibilidad con HTTP 1.0
    ```

    Estas líneas envían varias cabeceras para **evitar completamente que el navegador o el proxy almacenen el recurso en caché**:

    - **`header("Expires: Mon, 26 Jul 1997 05:00:00 GMT");`**: Marca el recurso como expirado hace mucho tiempo, lo que fuerza al navegador a solicitar siempre una copia nueva del recurso desde el servidor.
    - **`header("Last-Modified: " . gmdate("D, d M Y H:i:s") . " GMT");`**: Envía la fecha y hora actuales como la última modificación del recurso. Esto ayuda al navegador a saber cuándo fue la última vez que se actualizó el contenido, lo que puede influir en cómo maneja la caché.
    - **`header("Cache-Control: no-store, no-cache, must-revalidate");`**: Esta cabecera tiene tres partes importantes:
      - **`no-store`**: Impide que el navegador almacene el recurso en caché.
      - **`no-cache`**: Obliga al navegador a verificar siempre con el servidor si el recurso ha cambiado antes de usar una copia almacenada.
      - **`must-revalidate`**: El navegador debe validar siempre el recurso con el servidor antes de usar una versión almacenada.
    - **`header("Cache-Control: post-check=0, pre-check=0", false);`**: Esta cabecera es para navegadores y proxies antiguos, indicando que no se debe realizar ninguna verificación de caché antes o después de almacenar el recurso.
    - **`header("Pragma: no-cache");`**: Esta es una directiva utilizada en HTTP 1.0 (anterior a HTTP/1.1) que también impide la caché. Se incluye por compatibilidad con navegadores antiguos.
