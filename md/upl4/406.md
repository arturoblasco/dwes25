# 4.6. Blade Components para Layouts

En las **sesiones anteriores** aprendiste a crear vistas con Blade y componentes pequeños reutilizables. Laravel Breeze (apartado 4) utiliza una **sintaxis moderna de componentes** para layouts completos que puede resultar confusa si solo conoces la sintaxis tradicional.

Los componentes Blade no solo sirven para elementos pequeños reutilizables (como tarjetas de producto), sino que también pueden utilizarse para definir la **estructura completa** de las páginas. Laravel Breeze utiliza esta sintaxis moderna de componentes para los layouts.

## 6.1. Componentes pequeños vs componentes de Layout

En la Sesión 2 aprendiste a crear **componentes pequeños** para elementos reutilizables. Ahora veremos cómo Laravel también usa componentes para **estructuras completas de página**.


### 6.1.1. Tabla comparativa

Para entender mejor la diferencia entre componentes pequeños y componentes de layout, esta tabla muestra sus características principales.

| Aspecto | Componentes Pequeños | Componentes de Layout |
| --- | --- | --- |
| **Tamaño** | Pequeños, específicos | Grandes, estructurales |
| **Ejemplo** | `<x-product-card>`, `<x-button>` | `<x-app-layout>`, `<x-guest-layout>` |
| **Propósito** | Elemento reutilizable | Estructura completa de página |
| **Ubicación** | Dentro del contenido | Envuelve todo el contenido |
| **Aprendido en** | Sesión 2 ✅ | Sesión 4 (este tema) |

## 6.2. Sintaxis tradicional vs Sintaxis de componentes

Laravel ofrece dos formas de crear layouts: 

- la sintaxis tradicional con `@extends` y `@yield`, y 
- la sintaxis moderna con componentes. Ambas son válidas y pueden coexistir en el mismo proyecto.

### 6.2.1. Sintaxis tradicional (ya conocida)

Esta es la sintaxis que aprendiste en la Sesión 2:

```php
<?php
{{ -- resources/views/products/index.blade.php -- }}
@extends('layouts.app')

@section('title', 'Productos')

@section('content')
    <h1>Lista de Productos</h1>
    <div class="grid">
        @foreach($products as $product)
            @include('partials.product-card')
        @endforeach
    </div>
@endsection
```

```php
<?php
{{ -- resources/views/layouts/app.blade.php -- }}
<!DOCTYPE html>
<html lang="es">
<head>
    <title>@yield('title', 'Mi Tienda')</title>
</head>
<body>
    <header>
        <nav><!-- Navegación --></nav>
    </header>

    <main>
        @yield('content')
    </main>

    <footer><!-- Footer --></footer>
</body>
</html>
```

### 6.2.2. Sintaxis moderna con componentes (Laravel Breeze)
Esta es la sintaxis que Laravel Breeze genera automáticamente:

```php
<?php
{{ -- resources/views/dashboard.blade.php -- }}
<x-app-layout>
    <x-slot name="header">
        <h2 class="font-semibold text-xl text-gray-800 leading-tight">
            Dashboard
        </h2>
    </x-slot>

    <div class="py-12">
        <div class="max-w-7xl mx-auto sm:px-6 lg:px-8">
            <h1>Contenido del Dashboard</h1>
        </div>
    </div>
</x-app-layout>
```

```php
<?php
{{ -- resources/views/components/app-layout.blade.php -- }}
<!DOCTYPE html>
<html lang="es">
<head>
    <title>{{ $header ?? 'Mi Aplicación' }}</title>
</head>
<body>
    @if (isset($header))
        <header class="bg-white shadow">
            <div class="max-w-7xl mx-auto py-6 px-4">
                {{ $header }}
            </div>
        </header>
    @endif

    <main>
        {{ $slot }}
    </main>

    <footer><!-- Footer --></footer>
</body>
</html>
```

### 6.2.3. Comparación lado a lado

Esta tabla compara las características principales de ambas sintaxis para que puedas entender las equivalencias y decidir cuál usar en tu proyecto.

| Característica | Sintaxis Tradicional | Sintaxis de Componentes |
| --- | --- | --- |
| **Vista hija** | `@extends('layouts.app')` | `<x-app-layout>` |
| **Contenido principal** | `@section('content') ... @endsection` |  |
| **Secciones nombradas** | `@section('title')` | `<x-slot name="title">` |
| **Layout** | `@yield('content')` |  |
| **Usado por** | Proyectos personalizados | Laravel Breeze, Jetstream |
| **Ventajas** | Familiar, simple | Más potente, orientado a objetos |

## 6.3. Entendiendo

La variable `$slot` es el concepto clave de los componentes de layout. Representa el contenido que se pasa al componente.

### 6.3.1. ¿Qué es $slot?

**`$slot`** es una variable especial que representa todo el contenido que colocas entre las etiquetas de apertura y cierre de un componente. Es la forma de pasar contenido al componente.

```php
<?php
{{ -- Cuando escribes esto: -- }}
<x-app-layout>
    <h1>Mi contenido aquí</h1>
    <p>Más contenido</p>
</x-app-layout>

{{ -- Todo lo que está entre las etiquetas se convierte en $slot -- }}
```

En el componente,  se reemplaza por ese contenido:

```php
{{ -- resources/views/components/app-layout.blade.php -- }}
<div class="container">
    {{ $slot }}  {{ -- Aquí se insertará: <h1>Mi contenido aquí</h1><p>Más contenido</p> -- }}
</div>
```

### 6.3.2. $slot vs @yield

Son conceptos equivalentes pero con diferente sintaxis:

```php
<?php
{{ -- Sintaxis tradicional -- }}
@yield('content')  {{ -- En el layout -- }}

@section('content') ... @endsection  {{ -- En la vista -- }}
```

```php
<?php
{{ -- Sintaxis de componentes -- }}
{{ $slot }}  {{ -- En el componente -- }}

<!-- Contenido entre etiquetas -->  {{ -- En la vista -- }}
```

## 6.4. Slots nombrados

Además del `$slot` principal, puedes definir múltiples slots con nombres específicos.

### 6.4.1. Definir Slots nombrados

Para crear secciones específicas en tu layout (como header, sidebar, footer), defines slots nombrados que puedes llenar desde las vistas que usan el componente.

```php
<?php
{{ -- resources/views/components/app-layout.blade.php -- }}
<!DOCTYPE html>
<html>
<head>
    <title>{{ $title ?? 'Mi App' }}</title>
    
    {{ -- Slot para CSS adicional -- }}
    {{ $styles ?? '' }}
</head>
<body>
    {{ -- Slot para el header -- }}
    @if (isset($header))
        <header>
            {{ $header }}
        </header>
    @endif

    {{ -- Slot principal (contenido) -- }}
    <main>
        {{ $slot }}
    </main>

    {{ -- Slot para JavaScript adicional -- }}
    {{ $scripts ?? '' }}
</body>
</html>
```

### 6.4.2. Usar Slots nombrados

Desde la vista que usa el componente, rellenas cada slot nombrado usando la etiqueta **`<x-slot name="...">`**. El contenido sin slot específico se asigna automáticamente a `$slot`.

```php
<?php
{{ -- resources/views/admin/products.blade.php -- }}
<x-app-layout>
    {{ -- Slot nombrado: header -- }}
    <x-slot name="header">
        <h2>Gestión de Productos</h2>
    </x-slot>

    {{ -- Slot nombrado: styles -- }}
    <x-slot name="styles">
        <link rel="stylesheet" href="/css/admin.css">
    </x-slot>

    {{ -- Slot principal (sin nombre) -- }}
    <div class="content">
        <h1>Lista de productos</h1>
        <!-- Contenido principal -->
    </div>

    {{ -- Slot nombrado: scripts -- }}
    <x-slot name="scripts">
        <script src="/js/admin.js"></script>
    </x-slot>
</x-app-layout>
```

## 6.5. ¿Por qué coexisten ambas sintaxis en la práctica?

En la Práctica 4, verás que usamos **ambas sintaxis** en el mismo proyecto:

### 6.5.1. Páginas públicas (sintaxis tradicional)

Las páginas públicas de tu aplicación pueden seguir usando la sintaxis tradicional que aprendiste en las primeras sesiones.

```php
<?php
{{ -- resources/views/products/index.blade.php -- }}
@extends('layouts.public')

@section('content')
    <h1>Catálogo de Productos</h1>
@endsection
```

**Razón:** Creamos este layout nosotros mismos en prácticas anteriores usando la sintaxis tradicional.

### 6.5.2. Páginas de administración (sintaxis de componentes)

Las páginas de administración creadas después de instalar Laravel Breeze usarán la sintaxis moderna de componentes que Breeze genera automáticamente.

```php
<?php
{{ -- resources/views/admin/products/create.blade.php -- }}
<x-app-layout>
    <x-slot name="header">
        <h2>Crear Producto</h2>
    </x-slot>

    <form action="{{ route('products.store') }}" method="POST">
        @csrf
        <!-- Formulario -->
    </form>
</x-app-layout>
```

**Razón:** Laravel Breeze genera automáticamente `app-layout.blade.php` usando la sintaxis de componentes.

### 6.5.3. ¿Es esto un problema?

¿*Tener ambas sintaxis en el mismo proyecto puede parecer inconsistente al principio, pero en realidad es una situación muy común en aplicaciones reales*? **No.** Es completamente normal y refleja un escenario real:

* ✅ **Proyectos en evolución**: Empiezas con sintaxis tradicional, luego añades Breeze
* ✅ **Equipos de desarrollo**: Diferentes desarrolladores prefieren diferentes estilos
* ✅ **Contexto diferente**: Público (tradicional) vs Admin (componentes)
* ✅ **Laravel lo permite**: Ambas sintaxis conviven sin conflictos

Buena Práctica

En proyectos nuevos, se recomienda elegir una sintaxis y usarla consistentemente. Pero en proyectos existentes o al integrar paquetes como Breeze, es normal tener ambas.

## 6.6. Componentes de Layout de Laravel Breeze

Cuando instalas Laravel Breeze, se crean automáticamente dos componentes de layout principales:

### 6.6.1. app-layout.blade.php

Este es el layout principal que Laravel Breeze genera para todas las páginas que requieren autenticación. Incluye navegación, header opcional, y contenido principal.

**Ubicación:** `resources/views/components/app-layout.blade.php`

**Propósito:** Layout para usuarios autenticados (dashboard, perfil, admin)

```php
<?php
<!DOCTYPE html>
<html lang="{{ str_replace('_', '-', app()->getLocale()) }}">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="csrf-token" content="{{ csrf_token() }}">

        <title>{{ config('app.name', 'Laravel') }}</title>

        <!-- Fonts -->
        <link rel="preconnect" href="https://fonts.bunny.net">
        <link href="https://fonts.bunny.net/css?family=figtree:400,500,600&display=swap" rel="stylesheet" />

        <!-- Scripts -->
        @vite(['resources/css/app.css', 'resources/js/app.js'])
    </head>
    <body class="font-sans antialiased">
        <div class="min-h-screen bg-gray-100">
            @include('layouts.navigation')

            <!-- Page Heading -->
            @if (isset($header))
                <header class="bg-white shadow">
                    <div class="max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8">
                        {{ $header }}
                    </div>
                </header>
            @endif

            <!-- Page Content -->
            <main>
                {{ $slot }}
            </main>
        </div>
    </body>
</html>
```

### 6.6.2. guest-layout.blade.php

Este layout está diseñado para páginas públicas donde los usuarios no autenticados pueden registrarse o iniciar sesión. Tiene un diseño más simple y centrado.

**Ubicación:** `resources/views/components/guest-layout.blade.php`

**Propósito:** Layout para usuarios no autenticados (login, registro)

```php
<?php
<!DOCTYPE html>
<html lang="{{ str_replace('_', '-', app()->getLocale()) }}">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="csrf-token" content="{{ csrf_token() }}">

        <title>{{ config('app.name', 'Laravel') }}</title>

        <!-- Fonts -->
        <link rel="preconnect" href="https://fonts.bunny.net">
        <link href="https://fonts.bunny.net/css?family=figtree:400,500,600&display=swap" rel="stylesheet" />

        <!-- Scripts -->
        @vite(['resources/css/app.css', 'resources/js/app.js'])
    </head>
    <body class="font-sans text-gray-900 antialiased">
        <div class="min-h-screen flex flex-col sm:justify-center items-center pt-6 sm:pt-0 bg-gray-100">
            <div>
                <a href="/">
                    <x-application-logo class="w-20 h-20 fill-current text-gray-500" />
                </a>
            </div>

            <div class="w-full sm:max-w-md mt-6 px-6 py-4 bg-white shadow-md overflow-hidden sm:rounded-lg">
                {{ $slot }}
            </div>
        </div>
    </body>
</html>
```

## 6.7. Cuándo usar cada sintaxis

Elegir entre sintaxis tradicional y componentes depende del contexto de tu proyecto, tus necesidades, y tu familiaridad con cada enfoque. Aquí te ayudamos a decidir.

### 6.7.1. Usa sintaxis tradicional (@extends) Cuándo

La sintaxis tradicional es ideal para proyectos simples, equipos que ya la conocen, o cuando trabajas con código existente que usa este estilo.

* ✅ Creas layouts personalizados desde cero
* ✅ Trabajas en proyectos legacy/existentes
* ✅ Prefieres la sintaxis clásica de Blade
* ✅ No necesitas la complejidad de componentes

**Ejemplo de caso de uso:**

```php
<?php
{{ -- Layout simple para landing page -- }}
@extends('layouts.landing')

@section('hero')
    <h1>Bienvenido a Mi Tienda</h1>
@endsection

@section('content')
    <!-- Contenido de la landing -->
@endsection
```

### 6.7.2. Usa sintaxis de componentes (`<x-app-layout>`)

La sintaxis de componentes es más potente y flexible, especialmente cuando necesitas pasar datos y lógica compleja a tus layouts, o cuando trabajas con paquetes modernos.

**Cuándo:**

* ✅ Usas Laravel Breeze o Jetstream
* ✅ Necesitas layouts con lógica PHP compleja
* ✅ Quieres aprovechar props y slots
* ✅ Trabajas en proyectos modernos de Laravel

**Ejemplo de caso de uso:**

```php
<?php
{{ -- Layout con lógica compleja -- }}
<x-app-layout :show-sidebar="true" :theme="$userTheme">
    <x-slot name="header">
        <h2>Dashboard</h2>
    </x-slot>

    <!-- Contenido principal -->
    
    <x-slot name="sidebar">
        <!-- Sidebar dinámico -->
    </x-slot>
</x-app-layout>
```
