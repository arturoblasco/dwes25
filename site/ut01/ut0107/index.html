
<!doctype html>
<html lang="es" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.18">
    
    
      
        <title>1.7. Puesta en marcha - ES-OK</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.7e37652d.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#17-puesta-en-marcha" class="md-skip">
          Saltar a contenido
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Cabecera">
    <a href="../.." title="ES-OK" class="md-header__button md-logo" aria-label="ES-OK" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            ES-OK
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              1.7. Puesta en marcha
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="indigo"  aria-hidden="true"  type="radio" name="__palette" id="__palette_0">
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="blue" data-md-color-accent="indigo"  aria-hidden="true"  type="radio" name="__palette" id="__palette_1">
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
      <div class="md-header__option">
  <div class="md-select">
    
    <button class="md-header__button md-icon" aria-label="Seleccionar idioma">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12.87 15.07-2.54-2.51.03-.03A17.5 17.5 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2zm-2.62 7 1.62-4.33L19.12 17z"/></svg>
    </button>
    <div class="md-select__inner">
      <ul class="md-select__list">
        
          <li class="md-select__item">
            <a href="./" hreflang="es" class="md-select__link">
              Castellano
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="../../ca/ut01/ut0107/" hreflang="ca" class="md-select__link">
              Valencià
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</div>
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Búsqueda" placeholder="Búsqueda" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Buscar">
        
        <button type="reset" class="md-search__icon md-icon" title="Limpiar" aria-label="Limpiar" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Inicializando búsqueda
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navegación" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="ES-OK" class="md-nav__button md-logo" aria-label="ES-OK" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    ES-OK
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Inicio
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Bloque I - PHP
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Bloque I - PHP
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1" >
        
          
          <label class="md-nav__link" for="__nav_2_1" id="__nav_2_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    UT 1 Arquitectura Web
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1">
            <span class="md-nav__icon md-icon"></span>
            UT 1 Arquitectura Web
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ut0101/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    1.1. Introducción
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Tabla de contenidos">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Tabla de contenidos
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-opcion-1-xampp" class="md-nav__link">
    <span class="md-ellipsis">
      1. Opción 1: XAMPP
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-opcion-2-docker" class="md-nav__link">
    <span class="md-ellipsis">
      2. Opción 2: Docker
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. Opción 2: Docker">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21-plantilla-servidor-web-php" class="md-nav__link">
    <span class="md-ellipsis">
      2.1. Plantilla Servidor Web + PHP
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-editor-de-codigo" class="md-nav__link">
    <span class="md-ellipsis">
      3. Editor de código
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3. Editor de código">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31-configurar-llaves-php-en-vs-code" class="md-nav__link">
    <span class="md-ellipsis">
      3.1. Configurar llaves PHP en VS Code
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-hola-mundo" class="md-nav__link">
    <span class="md-ellipsis">
      4. Hola Mundo
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="17-puesta-en-marcha">1.7. Puesta en marcha</h1>
<p>Para poder trabajar con un entorno de desarrollo local, hemos de preparar nuestro entorno de desarrollo con las herramientas comentadas. </p>
<p>!!!info "Versiones"
    A lo largo del curso vamos a usar <code>PHP 8.0</code>.</p>
<h2 id="1-opcion-1-xampp">1. Opción 1: XAMPP</h2>
<p><em>XAMPP</em> ( <a href="https://www.apachefriends.org/es/index.html">https://www.apachefriends.org/es/index.html</a>{:target="_blank"}) es una distribución compuesta con el software necesario para desarrollar en entorno servidor. Se compone de las siguientes herramientas en base a sus siglas:</p>
<ul>
<li><strong>X</strong> para el sistema operativo (de ahí que se conozca también como <em>LAMP</em> o <em>WAMP</em>).</li>
<li><strong>A</strong> para Apache.</li>
<li><strong>M</strong> para <em>MySQL</em> / <em>MariaDB</em>. También incluye <em>phpMyAdmin</em> para la administración de la base de datos desde un interfaz web.</li>
<li><strong>P</strong> para <em>PHP</em>.</li>
<li><strong>P</strong> para <em>Perl</em>.</li>
</ul>
<p>Desde la propia página se puede descargar el archivo ejecutable para el sistema operativo de nuestro ordenador. Se recomienda leer la FAQ de cada sistema operativo con instrucciones para su puesta en marcha.</p>
<p>!!!tip "XAMPP vs Docker en Windows"
    Si vas a trabajar con tu propio ordenador, <em>XAMPP</em> es una solución más sencilla que <em>Docker</em>, sobre todo si trabajar con <em>Windows</em> como sistema operativo.</p>
<h2 id="2-opcion-2-docker">2. Opción 2: Docker</h2>
<p><em>Docker</em> (<a href="https://www.docker.com/">https://www.docker.com</a>{:target="_blank"}) es un gestor de contenedores; considerando un contenedor como un método de virtualización del sistema operativo.</p>
<p>El uso de contenedores requiere menos recursos que una máquina virtual, por lo tanto, su lanzamiento y detención son más rápidos que las máquinas virtuales.</p>
<p>Así pues, <em>Docker</em> permite crear, probar e implementar aplicaciones rápidamente, a partir de una serie de plantillas que se conocen como imágenes de <em>Docker</em>.</p>
<p>!!!inst "Instalación"
    === "<div style="text-align:center;"><img src="../../img/linux.png" alt="linux" width=40 height=40 /></div>"
        ### 1. Actualizar el Sistema
        Antes de comenzar, es recomendable actualizar los paquetes existentes en tu sistema:</p>
<pre><code>    ```bash
    sudo apt update
    sudo apt upgrade -y
    ```

    ### 2. Instalar las Dependencias
    Instala las dependencias necesarias para Docker:

    ```bash
    sudo apt install -y ca-certificates curl gnupg lsb-release
    ```

    ### 3. Agregar la Clave GPG de Docker
    Agrega la clave GPG oficial de Docker a tu sistema:

    ```bash
    sudo mkdir -m 0755 -p /etc/apt/keyrings
    curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /etc/apt/keyrings/docker.gpg
    ```

    ### 4. Agregar el Repositorio de Docker
    Añade el repositorio de Docker a tus fuentes de APT:

    ```bash
    echo \
      "deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/ubuntu \
      $(lsb_release -cs) stable" | sudo tee /etc/apt/sources.list.d/docker.list &gt; /dev/null
    ```

    ### 5. Actualizar el Índice de Paquetes
    Actualiza el índice de paquetes de APT nuevamente para incluir el nuevo repositorio:

    ```bash
    sudo apt update
    ```

    ### 6. Instalar Docker Engine, Docker CLI y Containerd

    Ahora, instala Docker usando el comando apt:

    ```bash
    sudo apt install -y docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin
    ```

    ### 7. Verificar la Instalación de Docker

    Para verificar que Docker se haya instalado correctamente, ejecuta:

    ```bash
    sudo docker --version
    ```

    Deberías ver la versión de Docker instalada.

    ### 8. Permitir Ejecución de Docker sin Sudo (Opcional)

    Si quieres ejecutar Docker sin usar `sudo`, agrega tu usuario al grupo `docker`:

    ```bash
    sudo usermod -aG docker $USER
    ```

    Después de ejecutar este comando, cierra la sesión y vuelve a iniciarla para que los cambios tengan efecto.

    ### 9. Probar Docker

    Verifica que Docker esté funcionando correctamente ejecutando un contenedor de prueba:

    ```bash
    docker run hello-world
    ```

    Este comando descargará una imagen de prueba y ejecutará un contenedor que debería mostrar un mensaje de confirmación en la terminal.

    ### 10. Instalar Docker Desktop en Ubuntu (Opcional)

    Si deseas usar Docker Desktop en Ubuntu, sigue estos pasos adicionales:

    10.1) **Descargar Docker Desktop para Linux**: Visita la página de descarga de Docker Desktop y descarga la versión para Linux.

    10.2) **Instalar Docker Desktop**: Descomprime el archivo descargado y ejecuta el instalador:

       ```bash
       sudo apt-get install ./docker-desktop-&lt;version&gt;-&lt;arch&gt;.deb
       ```

    10.3) **Ejecutar Docker Desktop**: Inicia Docker Desktop desde tu entorno gráfico o ejecutando `docker-desktop` en la terminal.

    10.4) **Configurar Docker Desktop**: Cuando se inicie Docker Desktop por primera vez, puedes configurarlo para usar WSL 2 o bien ejecutar contenedores nativos en Linux.

    ### 11. Configurar Docker Desktop (Opcional)

    Si deseas hacer configuraciones adicionales como la cantidad de recursos que Docker puede usar, puedes hacerlo desde la interfaz gráfica de Docker Desktop.

    Con estos pasos, deberías tener Docker y Docker Desktop completamente instalados y listos para usar en tu sistema Ubuntu.
    &lt;hr&gt;

    Si aún así no se pudiera lanzar Docker Desktop en Ubuntu, podemos instalar el **contenedor Portainer** (puedes ver cómo funciona en el siguiente punto **docker de gestión de dockers Portainer**).

=== "&lt;div style="text-align:center;"&gt;&lt;img src="../../img/windows.png" alt="windows" width=40 height=40 " /&gt;&lt;/div&gt;"
    ### 1. Instalación de Docker-Desktop
    Para una instalación en Windows lo ideal es instalar la aplicación **Docker Desktop** ( [https://www.docker.com/products/docker-desktop](https://www.docker.com/products/docker-desktop){:target="_blank"}  ) en nuestros entornos de desarrollo (el cual ya incluye en núcleo de *Docker* y la herramienta *Docker Compose*).
    Esta instalación requiere de un software adicional **WSL2**, el cual es un subsistema de *Linux* dentro de *Windows*; [aquí](https://learn.microsoft.com/es-es/windows/wsl/install){:target="_blank"}  podemos consultar sus métodos de instalación. 
    Por suerte, con la misma instalación de *Docker Desktop*, viene también la de *WSL* (solo deberemos tener en cuenta tener el check de instalación activado).

    Cuando termine la instalación, reinicia tu máquina.
    &lt;div style="text-align: center;"&gt;&lt;figure&gt;&lt;img src="../../img/ut01/dockerdesktop.png" alt="dockerdesktop" style="zoom:70%;" /&gt;&lt;figcaption style="font-size: 13px; color: #bd8f04;"&gt;Interfaz programa Docker Desktop&lt;/figcaption&gt;&lt;/figure&gt;&lt;/div&gt;

    ### 2. Verificar la instalación
    Una vez Docker esté instalado, abre **PowerShell** o **Command Prompt** y verifica la instalación:
    ````powershell
    docker --version
    docker-compose --version
    ````

    ### 3. Crear o abrir el archivo `docker-compose.yml`
    Asegúrate de tener un archivo `docker-compose.yml` en el directorio en el que vas a trabajar. Este archivo define la configuración de tus servicios.
    Ejemplo de un archivo docker-compose.yml sencillo:
    ````yaml
    version: '3'
    services:
      web:
        image: nginx
        ports:
          - "8080:80"
    ````

    ### 4. Levantar el contenedor usando Docker Compose
    4.1) Abre una ventana de PowerShell, Command Prompt o Terminal (si usas WSL).&lt;br /&gt;
    4.2) Navega al directorio donde se encuentra tu archivo docker-compose.yml.&lt;br /&gt;
    ````powershell
    cd ruta/al/directorio
    ````
    4.3) Una vez estés en el directorio adecuado, ejecuta el siguiente comando para levantar los servicios definidos en el archivo:
    ````powershell
    docker-compose up -d
    ````

    ### 5. Verificar que los contenedores están corriendo
    Después de ejecutar docker-compose up, puedes verificar que los contenedores están en ejecución con:
    ````powershell
    docker ps
    ````
        Si todo está correcto, deberías ver los contenedores definidos en el archivo `docker-compose.yml` listados.&lt;br /&gt;

    ### 6. Acceso a los servicios
    Si el archivo `docker-compose.yml` incluye servicios con puertos expuestos (como en el ejemplo de Nginx), puedes acceder a ellos desde tu navegador usando localhost y el puerto definido, por ejemplo:
    ````powershell
    http://localhost:8080
    ````
</code></pre>
<p>???note "docker de gestión de dockers Portainer"
    Portainer es una <strong>forma cómoda de gestionar entornos de contenedores distribuidos</strong>. </p>
<pre><code>El software se instala como un contenedor Docker y, por tanto, se ejecuta prácticamente en cualquier lugar. Mostramos la rutina de instalación y aportamos útiles consejos.

### Instalar

```sh
$ sudo docker volume create portainer_data
$ sudo docker run -d -p 8000:8000 -p 9443:9443 --name=portainer --restart=always -v /var/run/docker.sock:/var/run/docker.sock -v portainer_data:/data portainer/portainer-ce:latest
```

&lt;div style="text-align: center;"&gt;&lt;figure&gt;&lt;img src="../../img/ut01/docker_portainer1.png" alt="docker_portainer1" style="zoom:100%;" /&gt;&lt;figcaption style="font-size: 13px; color: #bd8f04;"&gt;Instalación del contenedor Portainer desde terminal.&lt;/figcaption&gt;&lt;/figure&gt;&lt;/div&gt;

### Lanzar

Como otro contenedor, podremos acceder a él mediante un navegador (Firefox, Chrome, ...) introduciendo la URL: **localhost:9443**

&lt;div style="text-align: center;"&gt;&lt;figure&gt;&lt;img src="../../img/ut01/docker_portainer2.png" alt="docker_portainer2" style="zoom:80%; border: 2px solid #fff2c9;" /&gt;&lt;figcaption style="font-size: 13px; color: #bd8f04;"&gt;Acceso a docker Portainer desde el puerto 9000.&lt;/figcaption&gt;&lt;/figure&gt;&lt;/div&gt;

Si muestra el siguiente texto, debemos reiniciar el contenedor del Docker Portainer:

&lt;div style="text-align: center;"&gt;&lt;figure&gt;&lt;img src="../../img/ut01/docker_portainer3.png" alt="docker_portainer3" style="zoom:80%; border: 2px solid #fff2c9;" /&gt;&lt;figcaption style="font-size: 13px; color: #bd8f04;"&gt;Pestaña indicando reiniciar el docker Portainer.&lt;/figcaption&gt;&lt;/figure&gt;&lt;/div&gt;

Volvemos a acceder vía **localhost:9000**:

&lt;div style="text-align: center;"&gt;&lt;figure&gt;&lt;img src="../../img/ut01/docker_portainer4.png" alt="docker_portainer4" style="zoom:80%; border: 2px solid #fff2c9;" /&gt;&lt;figcaption style="font-size: 13px; color: #bd8f04;"&gt;Pestaña de inicio de docker Portainer.&lt;/figcaption&gt;&lt;/figure&gt;&lt;/div&gt;

### Funciona como un docker

Para ver el ID de contenedor podemos listar los contenedores:

```sh
$ sudo docker ps -a
```

Para parar el contenedor:

```sh
$ sudo docker stop [ID]
```

Para volver a lanzar el contenedor:

```sh
$ sudo docker start [ID]
```
</code></pre>
<p>A lo largo del curso iremos creando diferentes contenedores con los servicios necesarios, de manera que cada vez sólo trabajemos con el software mínimo.</p>
<p>Respecto a <code>Docker</code>, para escribir los apuntes hemos utilizado la version <code>20.10</code> y en Docker Compose la version <code>2.19</code>.</p>
<p>Finalmente, la versión de <code>Docker Desktop</code> que hemos utilizado es la <code>4.0</code>.</p>
<h3 id="21-plantilla-servidor-web-php">2.1. Plantilla Servidor Web + PHP</h3>
<p>Docker se basa en el uso de imágenes para crear contenedores. <em>Docker Compose</em> simplifica el trabajo con múltiples contenedores, y por ello, para facilitar el arranque, nos centraremos en <em>Docker Compose</em> utilizando una plantilla que únicamente va a contener como servicios Apache/Nginx y PHP.</p>
<p>Para ello, vamos crear una carpeta de nombre <code>proyecto1</code>, y dentro de este el archivo <strong><code>docker-compose.yaml</code></strong> con:</p>
<p>!!!note "proyecto1 con distintos servidores en <code>docker-compose.yml</code>"
    === "Apache y PHP"
        * <strong>Estructura del proyecto</strong>:<br />
        <code>bash
        proyecto1/
        │
        ├── docker-compose.yml
        └── src/    # Carpeta del proyecto</code>
        * <strong>Fichero <code>docker-compose.yml</code></strong>:<br />
        ```yaml
        version: '3.8'</p>
<pre><code>    services:
      web:
        image: php:8.2-apache
        container_name: apache_php
        ports:
          - "8081:80"
        volumes:
          - ./src:/var/www/html
        environment:
          APACHE_RUN_USER: www-data
          APACHE_RUN_GROUP: www-data
          APACHE_LOG_DIR: /var/log/apache2
        networks:
          - webnet

    networks:
      webnet:
        driver: bridge
    ```             
=== "Nginx y PHP"
    * **Estructura del proyecto**:&lt;br /&gt;
    ```bash
    proyecto2/
    │
    ├── docker-compose.yml
    ├── .docker
    │   ├─── nginx
    │   │   └── conf.d
    │   │      └── php.conf  # Archivo configuración php en Nginx
    └── src/    # Carpeta del proyecto
    ```
    * **Fichero `docker-compose.yml`**:&lt;br /&gt;
    ```yaml
    version: '3.8'

    services:
      nginx:
        image: nginx:1.19
        ports:
          - "8082:80"  # Asegúrate de que el puerto está correctamente mapeado
        volumes:
          - ./src:/var/www/php
          - ./.docker/nginx/conf.d:/etc/nginx/conf.d  # Configuración personalizada de Nginx
        depends_on:
          - php
        networks:
          - webnet

      php:
        image: php:8.0-fpm
        working_dir: /var/www/php
        volumes:
          - ./src:/var/www/php
        networks:
          - webnet

    networks:
      webnet:
        driver: bridge
    ``` 
    Asegúrate de que tu archivo de configuración de Nginx está correctamente configurado. Aquí hay un ejemplo básico que debes colocar en **./.docker/nginx/conf.d/default.conf**:

    ```yaml
    server {
        listen 80;
        server_name localhost;

        root /var/www/php;
        index index.php index.html index.htm;

        location / {
            try_files $uri $uri/ /index.php?$args;
        }

        location ~ \.php$ {
            include fastcgi_params;
            fastcgi_pass php:9000;  # Asegúrate de que este nombre coincide con el nombre del servicio PHP
            fastcgi_index index.php;
            fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
        }
    }
    ```
</code></pre>
<p>Dentro de la carpeta que contenga dicho archivo, hemos de crear una carpeta <strong><code>src</code></strong> donde colocaremos nuestro código fuente.</p>
<p>Para facilitar la puesta en marcha, tenéis las plantillas de:</p>
<ul>
<li><a href="../../sources/plantilla-ApachePhp.zip"><strong>Apache/PHP</strong></a>{:target="blank"} (<a href="../../sources/plantilla-ApachePhp2.zip"><strong>versión 2</strong></a>{:target="blank"} con <code>a2enmod rewrite</code>) o </li>
<li><a href="../../sources/plantilla-NginxPhp.zip"><strong>Nginx/PHP</strong></a>{:target="blank"} </li>
</ul>
<p>disponibles para su descarga.</p>
<p>???hint "Órdenes en Docker"
    Cuando estemos listos, <strong>lanzaremos el servicio</strong> mediante:</p>
<pre><code>```sh
docker-compose up -d
```
Docker Compose primero buscará la imagen definida en su sistema local, y si no puede encontrar la imagen, descargará la imagen desde Docker Hub. Verás un resultado como este:
&lt;div style="text-align:center;"&gt;&lt;img src="../../img/ut01/docker-compose-up-d.png" alt="holamundo" style="zoom:80%; border: 2px solid #fff2c9;" /&gt;&lt;figcaption style="font-size: 13px; color: #bd8f04;"&gt;Descarga e instalación de imágenes de docker-compose.yml&lt;/figcaption&gt;&lt;/figure&gt;&lt;/div&gt;
Si queremos ver el contenido de los archivos de **log** del servicio utilizaremos:

```sh
docker-compose logs -f
```

Para **copiar un archivo** desde nuestro sistema al interior del contenedor:

```sh
docker cp ./miFichero idContenedor:/tmp
```

Y al revés, si queremos consultar un archivo contenido dentro de un contenedor, lo copiaremos a nuestro sistema:

```sh
docker cp idContenedor:/tmp/archivoAConsultar.txt ./
```

Finalmente, si queremos acceder a un terminal interactivo dentro del contenedor:

```sh
docker exec -it nombreContenedor bash
```

Otros comandos que podemos llegar a utilizar son:

- `docker ps`: Ver los contenedores que se estan ejecutando.
- `docker ps -a`: Ver todos los contenedores.
- `docker start nombreContenedor`: Arrancar un contenedor.
- `docker images`: Ver las imágenes que tenemos descargadas.
- `docker stop $(docker ps -a -q)`: Detener todos los contenedores en ejecución.
- `docker rm $(docker ps -a -q)`: Eliminar todos los contenedores detenidos.
</code></pre>
<p>!!!info "Docker stack"
    Existen diversas opciones mediante Docker que ofrecen soluciones completas y empaquetadas para todo el <em>stack</em> de desarrollo. En posteriores sesiones podremo utilizar tanto <em>Devilbox</em> (<a href="http://devilbox.org/">http://devilbox.org</a>{:target="_blank"}) como Laradock (<a href="https://laradock.io/">https://laradock.io</a>{:target="_blank"}).</p>
<p>!!!info "... pero quiero saber cómo funciona ..."
    En el módulo de "<em>Despliegue de aplicacione</em>s" estudiaréis en profundidad, además de <em>Docker</em>, <em>Apache</em> y otros servicios que nos servirán de ayuda para el desarrollo en entorno servidor.</p>
<h2 id="3-editor-de-codigo">3. Editor de código</h2>
<p>En este curso vamos a emplear <strong><em>Visual Studio Code</em></strong> (<a href="https://code.visualstudio.com/">https://code.visualstudio.com</a>{:target="_blank"}) como editor de código fuente. Existen otras alternativas, siendo <em>PhpStorm</em> el IDE  más conocido (pero de pago). Otra posibilidad es utilizar <em>Eclipse</em>, aunque es un entorno bastante pesado.</p>
<p><em>VSCode</em> es un editor de código fuente que se complementa mediante extensiones. Para facilitar el trabajo a lo largo del curso vamos a utilizar las siguientes <strong>extensiones</strong>:</p>
<ul>
<li><strong>PHP</strong></li>
<li><strong>PHP Debug</strong>: para la depuración de código PHP. Permite conectar VSCode a un servidor de depuración PHP y proporciona herramientas para inspeccionar variables, establecer puntos de interrupción y realizar un seguimiento detallado del flujo de ejecución.</li>
<li><strong>PHP IntelliSense</strong>: extensión fundamental, aporta mucha velocidad de escritura gracias al «<em>intellisense</em>». Mejora la codificación al proporcionar sugerencias inteligentes de código y completar automáticamente fragmentos de código mientras escribes en PHP.</li>
<li><strong>Php Intelephense</strong>: ofrece características avanzadas para desarrolladores PHP, como autocompletado inteligente, análisis estático y soporte para PHPDoc. Ayuda a detectar errores y a escribir código más eficiente.</li>
<li><strong>PHP DocBlocker</strong>: simplifica la creación de comentarios tipo <em>DocBlock</em> para sus funciones y métodos PHP. Con solo presionar un atajo de teclado, puede generar rápidamente documentación legible y útil para tu código.</li>
<li><strong>PHP Code Sniffer</strong>: asegura que el código PHP cumpla con los estándares de codificación establecidos. Puedes personalizar las reglas según las necesidades de tu proyecto.</li>
<li><strong>PHP CS Fixer</strong>: automatiza la corrección de problemas de formato en tu código PHP, manteniéndolo limpio y coherente con facilidad.</li>
<li><strong>PHP Namespace Resolver</strong></li>
<li><strong>Docker</strong></li>
</ul>
<p>En la siguiente sesión comenzaremos a utilizar <strong>Intelephense pero en esta sesión nos vamos a centrar en Docker</strong> (más adelante instalaremos nuevas extensiones).</p>
<p>Por ejemplo, si abrimos la extensión de <em>Docker</em>, podréis visualizar tanto los contenedores como las imágenes de vuestro sistema. Desde cada contenedor, mediante clic derecho, podemos iniciar/detener/reiniciar cada contenedor, así como ver su contenido o abrir un terminal dentro del mismo:</p>
<div style="text-align: center;"><figure><img src="../../img/ut01/vscodedocker.png" alt="vscodedocker" style="zoom:65%;" /><figcaption style="font-size: 13px; color: #bd8f04;">Extensión Docker en Visual Studio Code</figcaption></figure></div>

<h3 id="31-configurar-llaves-php-en-vs-code">3.1. Configurar llaves PHP en VS Code</h3>
<p>Ir a <em>Archivo/Preferencias/Configurar</em> fragmentos de usuario (<em>File/Preferences/User Snippets</em>) seleccionar la opción <strong>html</strong> y agregar el <em>snippet</em> en el fichero html.json:</p>
<pre><code class="language-sh">    &quot;php&quot;: {
        &quot;prefix&quot;: &quot;php&quot;,
        &quot;body&quot;: [
            &quot;&lt;?php&quot;,
            &quot;$1&quot;,
            &quot;?&gt;&quot;
        ],
        &quot;description&quot;: &quot;php tag&quot;
    }
</code></pre>
<p>A partir de ahora podremos abreviar la introducción de las etiquetas <code>&lt;?php</code> y <code>?&gt;</code> en <em>VS Code</em> introduciendo <strong>php + TAB</strong>.</p>
<h2 id="4-hola-mundo">4. Hola Mundo</h2>
<p>Y como no, nuestro primer ejemplo será un <em>Hola Mundo</em> en PHP.</p>
<p>Si nombramos el archivo como index.php, al acceder a http://localhost automáticamente cargará el resultado:</p>
<p>=== "Php"
    <code>Php
    &lt;!DOCTYPE html&gt;
    &lt;html lang="es"&gt;
    &lt;head&gt;
        &lt;meta charset="UTF-8"&gt;
        &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;
        &lt;title&gt;Hola Mundo&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;?php
            echo "Hola Mundo";
        ?&gt;
    &lt;/body&gt;
    &lt;/html&gt;</code>
=== "Resultado"
    <div style="text-align: center;"><figure><img src="../../img/ut01/holamundo.png" alt="holamundo" style="zoom:70%; border: 2px solid #fff2c9;" /><figcaption style="font-size: 13px; color: #bd8f04;">Página en php: Hola Mundo.</figcaption></figure></div></p>







  
  






                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copiado al portapapeles", "clipboard.copy": "Copiar al portapapeles", "search.result.more.one": "1 m\u00e1s en esta p\u00e1gina", "search.result.more.other": "# m\u00e1s en esta p\u00e1gina", "search.result.none": "No se encontraron documentos", "search.result.one": "1 documento encontrado", "search.result.other": "# documentos encontrados", "search.result.placeholder": "Teclee para comenzar b\u00fasqueda", "search.result.term.missing": "Falta", "select.version": "Seleccionar versi\u00f3n"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.92b07e13.min.js"></script>
      
    
  </body>
</html>