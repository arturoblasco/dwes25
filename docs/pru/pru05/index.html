
<!doctype html>
<html lang="es" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../pru04/">
      
      
        <link rel="next" href="../pru06/">
      
      
      <link rel="icon" href="../../img/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.18">
    
    
      
        <title>5. Creaci贸n de APIs REST en Laravel - Desarrollo Web en Entorno Servidor (DWES)</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.7e37652d.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="amber" data-md-color-accent="amber">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#5-creacion-de-apis-rest-en-laravel" class="md-skip">
          Saltar a contenido
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Cabecera">
    <a href="../.." title="Desarrollo Web en Entorno Servidor (DWES)" class="md-header__button md-logo" aria-label="Desarrollo Web en Entorno Servidor (DWES)" data-md-component="logo">
      
  <img src="../../img/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Desarrollo Web en Entorno Servidor (DWES)
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              5. Creaci贸n de APIs REST en Laravel
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="amber" data-md-color-accent="amber"  aria-label="Cambia a modo oscuro"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Cambia a modo oscuro" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="amber" data-md-color-accent="amber"  aria-label="Cambia a modo normal"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Cambia a modo normal" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m3.55 19.09 1.41 1.41 1.8-1.79-1.42-1.42M12 6c-3.31 0-6 2.69-6 6s2.69 6 6 6 6-2.69 6-6c0-3.32-2.69-6-6-6m8 7h3v-2h-3m-2.76 7.71 1.8 1.79 1.41-1.41-1.79-1.8M20.45 5l-1.41-1.4-1.8 1.79 1.42 1.42M13 1h-2v3h2M6.76 5.39 4.96 3.6 3.55 5l1.79 1.81zM1 13h3v-2H1m12 9h-2v3h2"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="B煤squeda" placeholder="B煤squeda" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M9.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L77.3 256l137.3-137.4c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Buscar">
        
        <button type="reset" class="md-search__icon md-icon" title="Limpiar" aria-label="Limpiar" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Inicializando b煤squeda
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navegaci贸n" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Desarrollo Web en Entorno Servidor (DWES)" class="md-nav__button md-logo" aria-label="Desarrollo Web en Entorno Servidor (DWES)" data-md-component="logo">
      
  <img src="../../img/logo.png" alt="logo">

    </a>
    Desarrollo Web en Entorno Servidor (DWES)
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../contents/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Contenidos
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
     PHP
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
             PHP
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1" >
        
          
          <label class="md-nav__link" for="__nav_3_1" id="__nav_3_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    UT 1 Arquitectura Web
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1">
            <span class="md-nav__icon md-icon"></span>
            UT 1 Arquitectura Web
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut01/ut0101/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    1.1. Introducci贸n
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut01/ut0102/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    1.2. Arquitecturas web
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut01/ut0103/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    1.3. Generar p谩ginas web
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut01/ut0104/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    1.4. Modelos de programaci贸n
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut01/ut0105/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    1.5. Decisiones de dise帽o
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut01/ut0106/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    1.6. Ejecuci贸n del c贸digo
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut01/ut0107/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    1.7. Herramientas
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut01/ut0108/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    1.8. Tecnolog铆as
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut01/ut0109/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    1.9. Navegadores
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut01/ut0110/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    1.10. Puesta en marcha
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut01/ut01de/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Descargas
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut01/ut01ac/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Ejercicios
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" >
        
          
          <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    UT 2 Lenguaje PHP
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            UT 2 Lenguaje PHP
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut02/ut0201/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2.1. Introducci贸n
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut02/ut0202/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2.2. PHP
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut02/ut0203/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2.3. Operadores
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut02/ut0204/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2.4. Arrays
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut02/ut0205/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2.5. Funciones
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut02/ut0206/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2.6. Funciones predefinidas
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut02/ut0207/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2.7. Expresiones regulares
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut02/ut02ac/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Ejercicios
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_3" >
        
          
          <label class="md-nav__link" for="__nav_3_3" id="__nav_3_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    UT 3 PHP OO
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_3">
            <span class="md-nav__icon md-icon"></span>
            UT 3 PHP OO
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut03/ut0301/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3.1. Introducci贸n
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut03/ut0302/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3.2. Clases y objetos
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut03/ut0303/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3.3. Encapsulaci贸n
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut03/ut0304/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3.4. Constructor
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut03/ut0305/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3.5. Clases est谩ticas
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut03/ut0306/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3.6. Introspecci贸n
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut03/ut0307/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3.7. Herencia
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut03/ut0308/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3.8. Clases abstractas
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut03/ut0309/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3.9. Clases final
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut03/ut0310/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3.10. Interfaces
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut03/ut0311/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3.11. M茅todos encadenados
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut03/ut0312/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3.12. M茅todos m谩gicos
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut03/ut0313/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3.13. Espacio de nombres
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut03/ut0314/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3.14. Gesti贸n de errores
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut03/ut0315/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3.15. Excepciones
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut03/ut0316/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3.16. SPL
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut03/ut03ac/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Ejercicios
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_4" >
        
          
          <label class="md-nav__link" for="__nav_3_4" id="__nav_3_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    UT 4 Programaci贸n web
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_4">
            <span class="md-nav__icon md-icon"></span>
            UT 4 Programaci贸n web
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut04/ut0401/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    4.1. Introducci贸n
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut04/ut0402/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    4.2. Variable de servidor
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut04/ut0403/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    4.3. Formularios
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut04/ut0404/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    4.4.Cabeceras de respuesta
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut04/ut0405/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    4.5. Gesti贸n de estado
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut04/ut0406/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    4.6. Autenticaci贸n de usuarios
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut04/ut04ac/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    4. Ejercicios
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_5" >
        
          
          <label class="md-nav__link" for="__nav_3_5" id="__nav_3_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    UT 5 Acceso a Base de Datos
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_5">
            <span class="md-nav__icon md-icon"></span>
            UT 5 Acceso a Base de Datos
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut05/ut0501/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    5.1. Introducci贸n
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut05/ut0502/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    5.2. Instalaci贸n
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut05/ut0503/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    5.3. Estructura de BD
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut05/ut0504/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    5.4. SQL
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut05/ut0505/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    5.5. phpMyAdmin
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut05/ut0506/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    5.6. MySQLi
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut05/ut0507/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    5.7. Php Data Object
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut05/ut0508/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    5.8. Login & Password
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut05/ut0509/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    5.9. Acceso a ficheros
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut05/ut05ac/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Ejercicios
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
     Laravel
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
             Laravel
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_1" >
        
          
          <label class="md-nav__link" for="__nav_4_1" id="__nav_4_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    UPL 1 ED profesional
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_1">
            <span class="md-nav__icon md-icon"></span>
            UPL 1 ED profesional
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../upl1/100/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    1.0. Introducci贸n
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../upl1/101/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    1.1. Introducci贸n a Laravel12
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../upl1/102/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    1.2. 驴C贸mo Habla una Aplicaci贸n Laravel?
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../upl1/103/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    1.3. 驴D贸nde Vive y Corre Nuestra Aplicaci贸n?
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../upl1/104/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    1.4. Herramientas Esenciales para el Desarrollador
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../upl1/105/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    1.5. El Frontend Moderno: Vite y Tailwind CSS
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../upl1/106/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    1.6. Anatom铆a de una Aplicaci贸n Laravel
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../upl1/10p/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Pr谩ctica guiada
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2" >
        
          
          <label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    UPL 2 Fundamentos
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            UPL 2 Fundamentos
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../upl2/200/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2.0. Introducci贸n
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../upl2/201/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2.1 Viaje Interno de una Petici贸n
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../upl2/202/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2.2. Mapa de la aplicaci贸n
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../upl2/203/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2.3. Vistas din谩micas
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../upl2/204/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2.4. Layouts y herencia en Blade
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../upl2/205/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2.5. Del controlador a la vista
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../upl2/206/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2.6. Datos mock
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../upl2/20p/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Pr谩ctica guiada
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3" >
        
          
          <label class="md-nav__link" for="__nav_4_3" id="__nav_4_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    UPL 3 Gesti贸n de datos
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3">
            <span class="md-nav__icon md-icon"></span>
            UPL 3 Gesti贸n de datos
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../upl3/300/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3.0. Introducci贸n
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../upl3/301/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3.1. Migraciones y Estructura
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../upl3/302/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3.2. Eloquent ORM
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../upl3/303/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3.3. CRUD con Eloquent
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../upl3/304/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3.4. Relaciones Eloquent
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../upl3/305/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3.5. Seeders y Factories
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../upl3/30p/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Pr谩ctica guiada
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_4" >
        
          
          <label class="md-nav__link" for="__nav_4_4" id="__nav_4_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    UPL 4 Interacci贸n con el usuario
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_4">
            <span class="md-nav__icon md-icon"></span>
            UPL 4 Interacci贸n con el usuario
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../upl4/400/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    4.0. Introducci贸n
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../upl4/401/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    4.1. Formularios seguros
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../upl4/402/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    4.2. Sistema de validaci贸n
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../upl4/403/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    4.3. Manejo de sesiones y estado
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../upl4/404/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    4.4. Autenticaci贸n b谩sica
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../upl4/405/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    4.5. Middleware personalizado
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../upl4/406/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    4.6. Blade Components para Layouts
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../upl4/407/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    4.7. Sistema de almacenamiento de archivos
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../upl4/40p/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Pr谩ctica guiada
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_5" checked>
        
          
          <label class="md-nav__link" for="__nav_4_5" id="__nav_4_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Pruebas
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_5_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4_5">
            <span class="md-nav__icon md-icon"></span>
            Pruebas
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../pru02/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2. Controladores y Rutas
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../pru03/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3. Desarrollo de un CRUD
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../pru04/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    4. Validaciones, Rutas Resource y Mensajes del Sistema
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    5. Creaci贸n de APIs REST en Laravel
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    5. Creaci贸n de APIs REST en Laravel
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Tabla de contenidos">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Tabla de contenidos
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-rutas-api" class="md-nav__link">
    <span class="md-ellipsis">
      1. Rutas API
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1. Rutas API">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#11-que-es-una-api-que-devuelve-json" class="md-nav__link">
    <span class="md-ellipsis">
      1.1. 驴Qu茅 es una API que devuelve JSON?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#12-para-que-sirve-realmente" class="md-nav__link">
    <span class="md-ellipsis">
      1.2. 驴Para qu茅 sirve realmente?
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1.2. 驴Para qu茅 sirve realmente?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#13-comparacion-rapida" class="md-nav__link">
    <span class="md-ellipsis">
      1.3. Comparaci贸n r谩pida
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#14-activar-el-sistema-de-rutas-api" class="md-nav__link">
    <span class="md-ellipsis">
      1.4. Activar el sistema de rutas API
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1.4. Activar el sistema de rutas API">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#paso-1-instalar-api-en-laravel" class="md-nav__link">
    <span class="md-ellipsis">
      (paso 1) Instalar api en Laravel
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#12-donde-se-registra-esta-configuracion" class="md-nav__link">
    <span class="md-ellipsis">
      1.2. 驴D贸nde se registra esta configuraci贸n?
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1.2. 驴D贸nde se registra esta configuraci贸n?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#paso-2-anadir-linea-de-prefijo-de-api" class="md-nav__link">
    <span class="md-ellipsis">
      (paso 2) A帽adir linea de prefijo de api
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-definir-rutas-de-api" class="md-nav__link">
    <span class="md-ellipsis">
      2. Definir Rutas de API
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. Definir Rutas de API">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21-ficheros-de-rutas-y-su-organizacion" class="md-nav__link">
    <span class="md-ellipsis">
      2.1. Ficheros de rutas y su organizaci贸n
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-crear-controlador-para-la-api" class="md-nav__link">
    <span class="md-ellipsis">
      3. Crear Controlador para la API
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3. Crear Controlador para la API">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31-generar-un-controlador-api" class="md-nav__link">
    <span class="md-ellipsis">
      3.1. Generar un controlador API
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3.1. Generar un controlador API">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#paso-3-crear-controlador-api-notecontroller" class="md-nav__link">
    <span class="md-ellipsis">
      (paso 3) Crear controlador API NoteController
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#paso-4-controlador-notecontroller" class="md-nav__link">
    <span class="md-ellipsis">
      (paso 4) Controlador NoteController
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32-crear-las-rutas-api-para-notes" class="md-nav__link">
    <span class="md-ellipsis">
      3.2. Crear las rutas API para Notes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3.2. Crear las rutas API para Notes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#paso-5-ruta-resource-para-notes" class="md-nav__link">
    <span class="md-ellipsis">
      (paso 5) Ruta resource para Notes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#paso-6-comprobar-las-rutas" class="md-nav__link">
    <span class="md-ellipsis">
      (paso 6) Comprobar las rutas
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-codigos-de-estado-http-en-apis" class="md-nav__link">
    <span class="md-ellipsis">
      4. C贸digos de estado HTTP en APIs
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-implementar-metodos-del-controlador" class="md-nav__link">
    <span class="md-ellipsis">
      5. Implementar m茅todos del controlador
    </span>
  </a>
  
    <nav class="md-nav" aria-label="5. Implementar m茅todos del controlador">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#paso-7-importar-clases-en-notecontroller" class="md-nav__link">
    <span class="md-ellipsis">
      (paso 7) Importar clases en NoteController
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#paso-8-metodo-index-listar-notas" class="md-nav__link">
    <span class="md-ellipsis">
      (paso 8) M茅todo index()  Listar notas
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#paso-9-metodo-show-mostrar-una-nota" class="md-nav__link">
    <span class="md-ellipsis">
      (paso 9) M茅todo show()  Mostrar una nota
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#paso-10-metodo-store-crear-una-nota" class="md-nav__link">
    <span class="md-ellipsis">
      (paso 10) M茅todo store()  Crear una nota
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#paso-11-metodo-update-modificar-nota" class="md-nav__link">
    <span class="md-ellipsis">
      (paso 11) *M茅todo update()  Modificar nota
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#paso-12-metodo-destroy-eliminar-nota" class="md-nav__link">
    <span class="md-ellipsis">
      (paso 12) M茅todo destroy()  Eliminar nota
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#56-testing-de-la-api" class="md-nav__link">
    <span class="md-ellipsis">
      5.6. Testing de la API
    </span>
  </a>
  
    <nav class="md-nav" aria-label="5.6. Testing de la API">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#paso-13-crear-fichero-rest-para-pruebas" class="md-nav__link">
    <span class="md-ellipsis">
      (paso 13) Crear fichero .rest para pruebas
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#57-ejemplos-de-peticiones-con-rest-client" class="md-nav__link">
    <span class="md-ellipsis">
      5.7. Ejemplos de peticiones con REST Client
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6-api-resources" class="md-nav__link">
    <span class="md-ellipsis">
      6. API Resources
    </span>
  </a>
  
    <nav class="md-nav" aria-label="6. API Resources">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#61-crear-un-api-resource" class="md-nav__link">
    <span class="md-ellipsis">
      6.1. Crear un API Resource
    </span>
  </a>
  
    <nav class="md-nav" aria-label="6.1. Crear un API Resource">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#paso-14-crear-noteresource" class="md-nav__link">
    <span class="md-ellipsis">
      (paso 14) Crear NoteResource
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#62-personalizar-la-transformacion" class="md-nav__link">
    <span class="md-ellipsis">
      6.2. Personalizar la transformaci贸n
    </span>
  </a>
  
    <nav class="md-nav" aria-label="6.2. Personalizar la transformaci贸n">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#paso-15-ejemplo-de-transformacion-en-noteresource" class="md-nav__link">
    <span class="md-ellipsis">
      (paso 15) Ejemplo de transformaci贸n en NoteResource
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#63-usar-el-recurso-en-el-controlador" class="md-nav__link">
    <span class="md-ellipsis">
      6.3. Usar el recurso en el controlador
    </span>
  </a>
  
    <nav class="md-nav" aria-label="6.3. Usar el recurso en el controlador">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#paso-16-importar-noteresource-en-notecontroller" class="md-nav__link">
    <span class="md-ellipsis">
      (paso 16) Importar NoteResource en NoteController
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#paso-17-devolver-coleccion-con-estado-y-mensaje" class="md-nav__link">
    <span class="md-ellipsis">
      (paso 17) Devolver colecci贸n con estado y mensaje
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#paso-18-devolver-una-sola-nota-con-noteresource" class="md-nav__link">
    <span class="md-ellipsis">
      (paso 18) Devolver una sola nota con NoteResource
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#7-validacion-de-los-datos" class="md-nav__link">
    <span class="md-ellipsis">
      7. Validaci贸n de los datos
    </span>
  </a>
  
    <nav class="md-nav" aria-label="7. Validaci贸n de los datos">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#paso-19-crear-noterequest" class="md-nav__link">
    <span class="md-ellipsis">
      (paso 19) Crear NoteRequest
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#paso-20-clase-noterequest" class="md-nav__link">
    <span class="md-ellipsis">
      (paso 20) Clase NoteRequest
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#paso-21-lanzar-los-mensajes-en-castellano" class="md-nav__link">
    <span class="md-ellipsis">
      (paso 21) Lanzar los mensajes en castellano
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#paso-22-usar-noterequest-en-notecontroller" class="md-nav__link">
    <span class="md-ellipsis">
      (paso 22) Usar NoteRequest en NoteController
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#8-control-de-errores-en-la-api-con-findorfail" class="md-nav__link">
    <span class="md-ellipsis">
      8. Control de errores en la API con findOrFail
    </span>
  </a>
  
    <nav class="md-nav" aria-label="8. Control de errores en la API con findOrFail">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#81-usando-findorfail-para-manejar-errores" class="md-nav__link">
    <span class="md-ellipsis">
      8.1. Usando findOrFail para manejar errores
    </span>
  </a>
  
    <nav class="md-nav" aria-label="8.1. Usando findOrFail para manejar errores">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#811-ejemplo-basico-con-findorfail" class="md-nav__link">
    <span class="md-ellipsis">
      8.1.1. Ejemplo b谩sico con findOrFail
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#82-solucion-definitiva-usando-try-catch" class="md-nav__link">
    <span class="md-ellipsis">
      8.2. Soluci贸n definitiva: usando try-catch
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#resumen-de-las-soluciones" class="md-nav__link">
    <span class="md-ellipsis">
      Resumen de las soluciones
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#9-conclusiones" class="md-nav__link">
    <span class="md-ellipsis">
      9. Conclusiones
    </span>
  </a>
  
    <nav class="md-nav" aria-label="9. Conclusiones">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#objetivo-de-la-actividad" class="md-nav__link">
    <span class="md-ellipsis">
      Objetivo de la actividad
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#instrucciones" class="md-nav__link">
    <span class="md-ellipsis">
      Instrucciones
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1-preparar-el-entorno" class="md-nav__link">
    <span class="md-ellipsis">
      1. Preparar el entorno
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-crear-la-tabla-y-el-modelo-de-productos-opcional" class="md-nav__link">
    <span class="md-ellipsis">
      2. Crear la tabla y el modelo de productos (opcional)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-crear-el-controlador-api" class="md-nav__link">
    <span class="md-ellipsis">
      3. Crear el controlador API
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-definir-las-rutas" class="md-nav__link">
    <span class="md-ellipsis">
      4. Definir las rutas
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-crear-el-api-resource" class="md-nav__link">
    <span class="md-ellipsis">
      5. Crear el API Resource
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6-validar-los-datos-con-una-clase-form-request" class="md-nav__link">
    <span class="md-ellipsis">
      6. Validar los datos con una clase Form Request
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#7-probar-la-api" class="md-nav__link">
    <span class="md-ellipsis">
      7. Probar la API
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../pru06/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    6. Autenticaci贸n B谩sica
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../pru07/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    7. Sistema de almacenamiento de archivos
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_5_7" >
        
          
          <label class="md-nav__link" for="__nav_4_5_7" id="__nav_4_5_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Despliegue
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_5_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_5_7">
            <span class="md-nav__icon md-icon"></span>
            Despliegue
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../pru08a/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Introducci贸n al despliegue de aplicaciones web
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../pru08b/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Aplicaci贸n simple con estructura precaria php
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../pru08c/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Aplicaci贸n completa con estructura de laravel
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../pru08d/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Despliegue en PaaS Render
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../examen2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Examen 2 Laravel
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Tabla de contenidos">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Tabla de contenidos
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-rutas-api" class="md-nav__link">
    <span class="md-ellipsis">
      1. Rutas API
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1. Rutas API">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#11-que-es-una-api-que-devuelve-json" class="md-nav__link">
    <span class="md-ellipsis">
      1.1. 驴Qu茅 es una API que devuelve JSON?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#12-para-que-sirve-realmente" class="md-nav__link">
    <span class="md-ellipsis">
      1.2. 驴Para qu茅 sirve realmente?
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1.2. 驴Para qu茅 sirve realmente?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#13-comparacion-rapida" class="md-nav__link">
    <span class="md-ellipsis">
      1.3. Comparaci贸n r谩pida
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#14-activar-el-sistema-de-rutas-api" class="md-nav__link">
    <span class="md-ellipsis">
      1.4. Activar el sistema de rutas API
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1.4. Activar el sistema de rutas API">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#paso-1-instalar-api-en-laravel" class="md-nav__link">
    <span class="md-ellipsis">
      (paso 1) Instalar api en Laravel
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#12-donde-se-registra-esta-configuracion" class="md-nav__link">
    <span class="md-ellipsis">
      1.2. 驴D贸nde se registra esta configuraci贸n?
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1.2. 驴D贸nde se registra esta configuraci贸n?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#paso-2-anadir-linea-de-prefijo-de-api" class="md-nav__link">
    <span class="md-ellipsis">
      (paso 2) A帽adir linea de prefijo de api
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-definir-rutas-de-api" class="md-nav__link">
    <span class="md-ellipsis">
      2. Definir Rutas de API
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. Definir Rutas de API">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21-ficheros-de-rutas-y-su-organizacion" class="md-nav__link">
    <span class="md-ellipsis">
      2.1. Ficheros de rutas y su organizaci贸n
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-crear-controlador-para-la-api" class="md-nav__link">
    <span class="md-ellipsis">
      3. Crear Controlador para la API
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3. Crear Controlador para la API">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31-generar-un-controlador-api" class="md-nav__link">
    <span class="md-ellipsis">
      3.1. Generar un controlador API
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3.1. Generar un controlador API">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#paso-3-crear-controlador-api-notecontroller" class="md-nav__link">
    <span class="md-ellipsis">
      (paso 3) Crear controlador API NoteController
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#paso-4-controlador-notecontroller" class="md-nav__link">
    <span class="md-ellipsis">
      (paso 4) Controlador NoteController
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32-crear-las-rutas-api-para-notes" class="md-nav__link">
    <span class="md-ellipsis">
      3.2. Crear las rutas API para Notes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3.2. Crear las rutas API para Notes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#paso-5-ruta-resource-para-notes" class="md-nav__link">
    <span class="md-ellipsis">
      (paso 5) Ruta resource para Notes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#paso-6-comprobar-las-rutas" class="md-nav__link">
    <span class="md-ellipsis">
      (paso 6) Comprobar las rutas
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-codigos-de-estado-http-en-apis" class="md-nav__link">
    <span class="md-ellipsis">
      4. C贸digos de estado HTTP en APIs
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-implementar-metodos-del-controlador" class="md-nav__link">
    <span class="md-ellipsis">
      5. Implementar m茅todos del controlador
    </span>
  </a>
  
    <nav class="md-nav" aria-label="5. Implementar m茅todos del controlador">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#paso-7-importar-clases-en-notecontroller" class="md-nav__link">
    <span class="md-ellipsis">
      (paso 7) Importar clases en NoteController
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#paso-8-metodo-index-listar-notas" class="md-nav__link">
    <span class="md-ellipsis">
      (paso 8) M茅todo index()  Listar notas
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#paso-9-metodo-show-mostrar-una-nota" class="md-nav__link">
    <span class="md-ellipsis">
      (paso 9) M茅todo show()  Mostrar una nota
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#paso-10-metodo-store-crear-una-nota" class="md-nav__link">
    <span class="md-ellipsis">
      (paso 10) M茅todo store()  Crear una nota
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#paso-11-metodo-update-modificar-nota" class="md-nav__link">
    <span class="md-ellipsis">
      (paso 11) *M茅todo update()  Modificar nota
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#paso-12-metodo-destroy-eliminar-nota" class="md-nav__link">
    <span class="md-ellipsis">
      (paso 12) M茅todo destroy()  Eliminar nota
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#56-testing-de-la-api" class="md-nav__link">
    <span class="md-ellipsis">
      5.6. Testing de la API
    </span>
  </a>
  
    <nav class="md-nav" aria-label="5.6. Testing de la API">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#paso-13-crear-fichero-rest-para-pruebas" class="md-nav__link">
    <span class="md-ellipsis">
      (paso 13) Crear fichero .rest para pruebas
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#57-ejemplos-de-peticiones-con-rest-client" class="md-nav__link">
    <span class="md-ellipsis">
      5.7. Ejemplos de peticiones con REST Client
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6-api-resources" class="md-nav__link">
    <span class="md-ellipsis">
      6. API Resources
    </span>
  </a>
  
    <nav class="md-nav" aria-label="6. API Resources">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#61-crear-un-api-resource" class="md-nav__link">
    <span class="md-ellipsis">
      6.1. Crear un API Resource
    </span>
  </a>
  
    <nav class="md-nav" aria-label="6.1. Crear un API Resource">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#paso-14-crear-noteresource" class="md-nav__link">
    <span class="md-ellipsis">
      (paso 14) Crear NoteResource
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#62-personalizar-la-transformacion" class="md-nav__link">
    <span class="md-ellipsis">
      6.2. Personalizar la transformaci贸n
    </span>
  </a>
  
    <nav class="md-nav" aria-label="6.2. Personalizar la transformaci贸n">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#paso-15-ejemplo-de-transformacion-en-noteresource" class="md-nav__link">
    <span class="md-ellipsis">
      (paso 15) Ejemplo de transformaci贸n en NoteResource
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#63-usar-el-recurso-en-el-controlador" class="md-nav__link">
    <span class="md-ellipsis">
      6.3. Usar el recurso en el controlador
    </span>
  </a>
  
    <nav class="md-nav" aria-label="6.3. Usar el recurso en el controlador">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#paso-16-importar-noteresource-en-notecontroller" class="md-nav__link">
    <span class="md-ellipsis">
      (paso 16) Importar NoteResource en NoteController
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#paso-17-devolver-coleccion-con-estado-y-mensaje" class="md-nav__link">
    <span class="md-ellipsis">
      (paso 17) Devolver colecci贸n con estado y mensaje
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#paso-18-devolver-una-sola-nota-con-noteresource" class="md-nav__link">
    <span class="md-ellipsis">
      (paso 18) Devolver una sola nota con NoteResource
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#7-validacion-de-los-datos" class="md-nav__link">
    <span class="md-ellipsis">
      7. Validaci贸n de los datos
    </span>
  </a>
  
    <nav class="md-nav" aria-label="7. Validaci贸n de los datos">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#paso-19-crear-noterequest" class="md-nav__link">
    <span class="md-ellipsis">
      (paso 19) Crear NoteRequest
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#paso-20-clase-noterequest" class="md-nav__link">
    <span class="md-ellipsis">
      (paso 20) Clase NoteRequest
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#paso-21-lanzar-los-mensajes-en-castellano" class="md-nav__link">
    <span class="md-ellipsis">
      (paso 21) Lanzar los mensajes en castellano
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#paso-22-usar-noterequest-en-notecontroller" class="md-nav__link">
    <span class="md-ellipsis">
      (paso 22) Usar NoteRequest en NoteController
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#8-control-de-errores-en-la-api-con-findorfail" class="md-nav__link">
    <span class="md-ellipsis">
      8. Control de errores en la API con findOrFail
    </span>
  </a>
  
    <nav class="md-nav" aria-label="8. Control de errores en la API con findOrFail">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#81-usando-findorfail-para-manejar-errores" class="md-nav__link">
    <span class="md-ellipsis">
      8.1. Usando findOrFail para manejar errores
    </span>
  </a>
  
    <nav class="md-nav" aria-label="8.1. Usando findOrFail para manejar errores">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#811-ejemplo-basico-con-findorfail" class="md-nav__link">
    <span class="md-ellipsis">
      8.1.1. Ejemplo b谩sico con findOrFail
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#82-solucion-definitiva-usando-try-catch" class="md-nav__link">
    <span class="md-ellipsis">
      8.2. Soluci贸n definitiva: usando try-catch
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#resumen-de-las-soluciones" class="md-nav__link">
    <span class="md-ellipsis">
      Resumen de las soluciones
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#9-conclusiones" class="md-nav__link">
    <span class="md-ellipsis">
      9. Conclusiones
    </span>
  </a>
  
    <nav class="md-nav" aria-label="9. Conclusiones">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#objetivo-de-la-actividad" class="md-nav__link">
    <span class="md-ellipsis">
      Objetivo de la actividad
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#instrucciones" class="md-nav__link">
    <span class="md-ellipsis">
      Instrucciones
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1-preparar-el-entorno" class="md-nav__link">
    <span class="md-ellipsis">
      1. Preparar el entorno
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-crear-la-tabla-y-el-modelo-de-productos-opcional" class="md-nav__link">
    <span class="md-ellipsis">
      2. Crear la tabla y el modelo de productos (opcional)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-crear-el-controlador-api" class="md-nav__link">
    <span class="md-ellipsis">
      3. Crear el controlador API
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-definir-las-rutas" class="md-nav__link">
    <span class="md-ellipsis">
      4. Definir las rutas
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-crear-el-api-resource" class="md-nav__link">
    <span class="md-ellipsis">
      5. Crear el API Resource
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6-validar-los-datos-con-una-clase-form-request" class="md-nav__link">
    <span class="md-ellipsis">
      6. Validar los datos con una clase Form Request
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#7-probar-la-api" class="md-nav__link">
    <span class="md-ellipsis">
      7. Probar la API
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="5-creacion-de-apis-rest-en-laravel">5. Creaci贸n de APIs REST en Laravel<a class="headerlink" href="#5-creacion-de-apis-rest-en-laravel" title="Permanent link">&para;</a></h1>
<h2 id="1-rutas-api">1. Rutas API<a class="headerlink" href="#1-rutas-api" title="Permanent link">&para;</a></h2>
<p style="float: left; margin: 0 1rem 1rem 0;">
  <img src="../../img/laravel.svg"
       alt="Actividad en el aula virtual"
       width="120">
</p>

<p><em>Usamos un backend con API para que la aplicaci贸n no dependa de c贸mo se ve, <br/>sino de c贸mo funciona, y poder usar los datos desde cualquier sitio.</em></p>
<p><br/></p>
<h3 id="11-que-es-una-api-que-devuelve-json">1.1. 驴Qu茅 es una API que devuelve JSON?<a class="headerlink" href="#11-que-es-una-api-que-devuelve-json" title="Permanent link">&para;</a></h3>
<p>Es un backend (por ejemplo en Laravel, Java Spring, Node) que:</p>
<ul>
<li>Recibe peticiones (GET, POST, PUT, DELETE).</li>
<li>Procesa datos (BD, l贸gica de negocio).</li>
<li>
<p>Devuelve respuestas en JSON, no HTML.</p>
<p>Ejemplo:
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span>
<span class="nt">&quot;nombre&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Juan&quot;</span><span class="p">,</span>
<span class="nt">&quot;nota&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">8.5</span>
<span class="p">}</span>
</code></pre></div></p>
</li>
</ul>
<h3 id="12-para-que-sirve-realmente">1.2. 驴Para qu茅 sirve realmente?<a class="headerlink" href="#12-para-que-sirve-realmente" title="Permanent link">&para;</a></h3>
<p>1) <strong>Separar frontend y backend (arquitectura moderna).</strong></p>
<p>El backend:</p>
<ul>
<li>Gestiona datos</li>
<li>Aplica reglas de negocio</li>
<li>Controla seguridad</li>
</ul>
<p>El frontend:</p>
<ul>
<li>Se encarga solo de mostrar</li>
<li>Puede ser Vue, React, m贸vil, etc.</li>
<li>Cambias el frontend sin tocar el backend.</li>
</ul>
<p>2) <strong>Reutilizar el mismo backend.</strong></p>
<p>Una API JSON puede ser usada por:</p>
<ul>
<li>Web (Vue / React)</li>
<li>App m贸vil</li>
<li>Aplicaci贸n de escritorio</li>
<li>Otro sistema externo</li>
</ul>
<p>Una sola l贸gica, muchos clientes</p>
<p>3) <strong>Comunicaci贸n est谩ndar y ligera.</strong></p>
<p>JSON es:</p>
<ul>
<li>Ligero</li>
<li>F谩cil de leer</li>
<li>Compatible con cualquier lenguaje</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="nx">fetch</span><span class="p">(</span><span class="s1">&#39;/api/alumnos&#39;</span><span class="p">)</span>
<span class="w">    </span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">r</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">r</span><span class="p">.</span><span class="nx">json</span><span class="p">())</span>
<span class="w">    </span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">data</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">));</span>
</code></pre></div>
<p>Ideal para aplicaciones web modernas</p>
<p>4) <strong>Facilita el trabajo en equipo.</strong></p>
<ul>
<li>Backend devs  API</li>
<li>Frontend devs  consumo de API</li>
</ul>
<p>Cada parte puede avanzar en paralelo.</p>
<p>5) <strong>Mejor seguridad.</strong></p>
<p>El backend:</p>
<ul>
<li>No expone la base de datos</li>
<li>Controla permisos y roles</li>
<li>Usa tokens (JWT, Sanctum, OAuth)</li>
</ul>
<p>El frontend nunca accede directamente a los datos.</p>
<p>6) <strong>Escalabilidad y futuro.</strong></p>
<p>Hoy:</p>
<ul>
<li>Web con Vue</li>
</ul>
<p>Ma帽ana:</p>
<ul>
<li>App m贸vil</li>
<li>Integraci贸n con otra empresa</li>
<li>Microservicios</li>
</ul>
<p>Si usas API JSON, ya est谩s preparado</p>
<h4 id="13-comparacion-rapida">1.3. Comparaci贸n r谩pida<a class="headerlink" href="#13-comparacion-rapida" title="Permanent link">&para;</a></h4>
<table>
<thead>
<tr>
<th>Sin API (todo junto)</th>
<th>Con API JSON</th>
</tr>
</thead>
<tbody>
<tr>
<td>HTML + PHP mezclado</td>
<td>Frontend + Backend separados</td>
</tr>
<tr>
<td>Poco reutilizable</td>
<td>Muy reutilizable</td>
</tr>
<tr>
<td>Dif铆cil de escalar</td>
<td>Escalable</td>
</tr>
<tr>
<td>Acoplado</td>
<td>Modular</td>
</tr>
</tbody>
</table>
<details class="teolaravel">
<summary>Ejemplo de integraci贸n Laravel+Vue</summary>
<p><strong>1) Esquema visual (arquitectura)</strong>
<div class="highlight"><pre><span></span><code>[ Navegador / Vue ]   HTTP (fetch/axios) &gt;  [ API Laravel ]
    |                                             |
    |   pinta pantallas                           |  valida, aplica reglas
    |   botones, formularios                      |  consulta BD, permisos
    v                                             v
UI / Componentes                           [ Base de datos ]
               &lt; JSON (datos) 
</code></pre></div>
Idea clave: Vue no habla con la BD. Vue habla con la API. La API habla con la BD.</p>
<p><strong>2) Ejemplo m铆nimo Laravel + Vue</strong></p>
<p><strong>Backend (Laravel)  ruta API que devuelve JSON</strong></p>
<p><code>routes/api.php</code>
<div class="highlight"><pre><span></span><code><span class="x">use Illuminate\Support\Facades\Route;</span>
<span class="x">use App\Http\Controllers\Api\StudentController;</span>

<span class="x">Route::get(&#39;/students&#39;, [StudentController::class, &#39;index&#39;]);</span>
</code></pre></div>
<code>app/Http/Controllers/Api/StudentController.php</code>
<div class="highlight"><pre><span></span><code><span class="x">namespace App\Http\Controllers\Api;</span>

<span class="x">use App\Http\Controllers\Controller;</span>
<span class="x">use App\Models\Student;</span>

<span class="x">class StudentController extends Controller</span>
<span class="x">{</span>
<span class="x">    public function index()</span>
<span class="x">    {</span>
<span class="x">        // Devuelve datos en JSON (no HTML)</span>
<span class="x">        return response()-&gt;json(</span>
<span class="x">            Student::select(&#39;id&#39;,&#39;nombre&#39;,&#39;apellidos&#39;)-&gt;orderBy(&#39;apellidos&#39;)-&gt;get()</span>
<span class="x">        );</span>
<span class="x">    }</span>
<span class="x">}</span>
</code></pre></div>
Si llamas a: GET <code>/api/students</code></p>
<p>Te devuelve:
<div class="highlight"><pre><span></span><code><span class="p">[</span>
<span class="w">    </span><span class="p">{</span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="nt">&quot;nombre&quot;</span><span class="p">:</span><span class="s2">&quot;Ana&quot;</span><span class="p">,</span><span class="nt">&quot;apellidos&quot;</span><span class="p">:</span><span class="s2">&quot;G贸mez&quot;</span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="nt">&quot;nombre&quot;</span><span class="p">:</span><span class="s2">&quot;Luis&quot;</span><span class="p">,</span><span class="nt">&quot;apellidos&quot;</span><span class="p">:</span><span class="s2">&quot;Mart铆nez&quot;</span><span class="p">}</span>
<span class="p">]</span>
</code></pre></div>
<strong>Frontend (Vue)  consumir la API y pintar la lista</strong></p>
<p><code>StudentsList.vue</code>
<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">script</span> <span class="na">setup</span><span class="p">&gt;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">ref</span><span class="p">,</span><span class="w"> </span><span class="nx">onMounted</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s2">&quot;vue&quot;</span><span class="p">;</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">students</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">ref</span><span class="p">([]);</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">loading</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">ref</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">error</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">ref</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">);</span>

<span class="nx">onMounted</span><span class="p">(</span><span class="k">async</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="k">try</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">fetch</span><span class="p">(</span><span class="s2">&quot;/api/students&quot;</span><span class="p">);</span><span class="w"> </span><span class="c1">// mismo dominio</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="nx">res</span><span class="p">.</span><span class="nx">ok</span><span class="p">)</span><span class="w"> </span><span class="k">throw</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="ne">Error</span><span class="p">(</span><span class="s2">&quot;Error cargando alumnos&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="nx">students</span><span class="p">.</span><span class="nx">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">();</span>
<span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="nx">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">error</span><span class="p">.</span><span class="nx">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">e</span><span class="p">.</span><span class="nx">message</span><span class="p">;</span>
<span class="p">}</span><span class="w"> </span><span class="k">finally</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">loading</span><span class="p">.</span><span class="nx">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="p">;</span>
<span class="p">}</span>
<span class="p">});</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span>Alumnado<span class="p">&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">p</span> <span class="na">v-if</span><span class="o">=</span><span class="s">&quot;</span><span class="nx">loading</span><span class="s">&quot;</span><span class="p">&gt;</span>Cargando...<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">p</span> <span class="na">v-else-if</span><span class="o">=</span><span class="s">&quot;</span><span class="nx">error</span><span class="s">&quot;</span><span class="p">&gt;</span><span class="cp">{{</span><span class="w"> </span><span class="nx">error</span><span class="w"> </span><span class="cp">}}</span><span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>

    <span class="p">&lt;</span><span class="nt">ul</span> <span class="na">v-else</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">li</span> <span class="na">v-for</span><span class="o">=</span><span class="s">&quot;</span><span class="nx">s</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="nx">students</span><span class="s">&quot;</span> <span class="p">:</span><span class="na">key</span><span class="o">=</span><span class="s">&quot;</span><span class="nx">s</span><span class="p">.</span><span class="nx">id</span><span class="s">&quot;</span><span class="p">&gt;</span>
        <span class="cp">{{</span><span class="w"> </span><span class="nx">s</span><span class="p">.</span><span class="nx">apellidos</span><span class="w"> </span><span class="cp">}}</span>, <span class="cp">{{</span><span class="w"> </span><span class="nx">s</span><span class="p">.</span><span class="nx">nombre</span><span class="w"> </span><span class="cp">}}</span>
    <span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>
</code></pre></div>
Qu茅 ganas aqu铆:</p>
<ul>
<li>Laravel puede cambiar la BD, reglas, permisos y Vue ni se entera mientras el JSON se mantenga.</li>
<li>Puedes hacer m贸vil u otro frontend usando la misma API.</li>
</ul>
<p><strong>3) Respuesta <em>tipo examen</em></strong></p>
<p>Se usa un backend con una API que devuelve JSON para separar el cliente (frontend) de la l贸gica de negocio y el acceso a datos. </p>
<p>El backend se encarga de validar, aplicar permisos, consultar la base de datos y devolver respuestas est谩ndar en JSON. </p>
<p>El frontend (Vue/React) consume esos datos mediante peticiones HTTP y se limita a representar la interfaz. Esto permite reutilizar el mismo backend para distintos clientes (web, m贸vil), facilita el trabajo en equipo, mejora la seguridad porque la base de datos no se expone, y hace la aplicaci贸n m谩s escalable y mantenible.</p>
</details>
<p>En <strong>Laravel 12</strong>, a diferencia de versiones anteriores, el archivo <code>routes/api.php</code> <strong>no viene incluido por defecto</strong>. Laravel ahora permite habilitarlo opcionalmente para mantener la aplicaci贸n m谩s ligera si no vas a construir una API.</p>
<h3 id="14-activar-el-sistema-de-rutas-api">1.4. Activar el sistema de rutas API<a class="headerlink" href="#14-activar-el-sistema-de-rutas-api" title="Permanent link">&para;</a></h3>
<p>Para trabajar con rutas API, primero debemos ejecutar el siguiente comando Artisan para instalar:</p>
<h4 id="paso-1-instalar-api-en-laravel">(paso 1) Instalar api en Laravel<a class="headerlink" href="#paso-1-instalar-api-en-laravel" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code>php<span class="w"> </span>artisan<span class="w"> </span>install:api<span class="w"> </span>
</code></pre></div>
<p>Este comando:</p>
<ul>
<li>Crea autom谩ticamente el archivo <code>routes/api.php</code>.</li>
<li>Registra el archivo en el sistema de rutas.</li>
<li>Aplica el middleware <code>api</code> a las rutas definidas all铆.</li>
<li>A帽ade el prefijo <code>/api</code> a todas las rutas de ese archivo.</li>
</ul>
<p>En el proceso nos puede pedir crear una nueva migraci贸n para la tabla <code>api_tokens</code>, podemos decir que s铆 aunque de momento no la vamos a utilizar ya que no hemos visto la autenticaci贸n.</p>
<div class="figure-center">
<figure>
    <img src="../../img/pru/laravel_apirest001.png"
                alt="Instalaci贸n soporte para rutas API"
                class="figure-img-highlight" 
                style="max-width: 60%; height: auto;" />
    <figcaption class="figure-caption-small">
            Instalaci贸n soporte para rutas API
    </figcaption>
</figure>
</div>

<div class="figure-center">
<figure>
    <img src="../../img/pru/laravel_apirest002.png"
                alt="Pregunta de creaci贸n de tabla `api-tokens`"
                class="figure-img-highlight" 
                style="max-width: 75%; height: auto;" />
    <figcaption class="figure-caption-small">
            Pregunta de creaci贸n de tabla `api-tokens`
    </figcaption>
</figure>
</div>

<h3 id="12-donde-se-registra-esta-configuracion">1.2. 驴D贸nde se registra esta configuraci贸n?<a class="headerlink" href="#12-donde-se-registra-esta-configuracion" title="Permanent link">&para;</a></h3>
<p>Laravel configura los archivos de rutas en <strong><code>bootstrap/app.php</code></strong>. Una vez activadas, podr谩s ver una l铆nea como esta:</p>
<h4 id="paso-2-anadir-linea-de-prefijo-de-api">(paso 2) A帽adir linea de prefijo de api<a class="headerlink" href="#paso-2-anadir-linea-de-prefijo-de-api" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code>-&gt;withRouting(     
    api: __DIR__.&#39;/../routes/api.php&#39;,     
<span class="hll">    apiPrefix: &#39;api&#39;,     // ... 
</span>) 
</code></pre></div>
<p>Laravel no a帽ade este prefijo autom谩ticamente, pero su valor por defecto es <code>api</code>. Por tanto a帽adir la l铆nea <strong><code>apiPrefix: 'api',</code> </strong>o no es equivalente. </p>
<p>Se recomienda ponerla expl铆citamente para tener claro que las rutas de <code>api.php</code> van con el prefijo <code>/api</code>.</p>
<details class="teolaravel">
<summary>Personalizar prefijo de rutas API</summary>
<p>Si quieres cambiar el prefijo, por ejemplo a <code>api/admin</code>, puedes modificar la clave <code>apiPrefix</code>:
<div class="highlight"><pre><span></span><code>-&gt;withRouting(     
    api: __DIR__.&#39;/../routes/api.php&#39;,
    apiPrefix: &#39;api/admin&#39;, 
) 
</code></pre></div>
A partir de este momento, cualquier ruta definida en <code>routes/api.php</code> responder谩 a URLs que empiecen por <code>/api/</code> (o el prefijo que hayas definido).</p>
</details>
<div class="admonition tip">
<p class="admonition-title">Importante</p>
<p>El archivo <code>web.php</code> sigue existiendo por defecto y est谩 pensado para rutas que devuelven vistas HTML. Por tanto, recuerda usar <code>api.php</code> exclusivamente para tu API REST.
El <code>middleware</code> de laravel ya busca las rutas en el archivo correspondiente:</p>
<ul>
<li><strong><code>/api/...</code></strong> -&gt; <code>routes/api.php</code></li>
<li><code>/...</code> -&gt; <code>routes/web.php</code></li>
</ul>
</div>
<h2 id="2-definir-rutas-de-api">2. Definir Rutas de API<a class="headerlink" href="#2-definir-rutas-de-api" title="Permanent link">&para;</a></h2>
<h3 id="21-ficheros-de-rutas-y-su-organizacion">2.1. Ficheros de rutas y su organizaci贸n<a class="headerlink" href="#21-ficheros-de-rutas-y-su-organizacion" title="Permanent link">&para;</a></h3>
<p>Laravel separa las rutas para aplicaci贸n web y API:</p>
<table>
<thead>
<tr>
<th>Archivo</th>
<th>Prop贸sito</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>routes/web.php</code></td>
<td>Rutas para vistas HTML (interfaz web)</td>
</tr>
<tr>
<td><code>routes/api.php</code></td>
<td>Rutas para responder en JSON (API REST)</td>
</tr>
</tbody>
</table>
<p>Estas rutas est谩n cargadas desde el archivo <code>app/Providers/RouteServiceProvider.php</code>, que se encarga de:</p>
<ul>
<li>Aplicar el prefijo <code>/api</code> autom谩ticamente a las rutas definidas en <code>api.php</code>.</li>
<li>Asignar middleware <code>api</code>, que aplica limitaciones como throttling, formato JSON, etc.</li>
</ul>
<div class="admonition teolaravel">
<p class="admonition-title">Ejemplo del prefijo autom谩tico (<code>routes/api.php</code>)</p>
<div class="highlight"><pre><span></span><code>Route::get(&#39;/notes&#39;, function () {     
    return [&#39;mensaje&#39; =&gt; &#39;Esta es la API de notas&#39;]; 
}); 
</code></pre></div>
<p>Accediendo a <code>http://testear.test/api/notes</code>, obtendr谩s: <code>{ "mensaje": "Esta es la API de notas" }</code></p>
<p><div class="figure-center">
<figure>
    <img src="../../img/pru/laravel_apirest003.png"
                alt="Respuesta GET /api/notes"
                class="figure-img-highlight" 
                style="max-width: 90%; height: auto;" />
    <figcaption class="figure-caption-small">
            Respuesta GET /api/notes
    </figcaption>
</figure>
</div></p>
</div>
<p>Hay que fijarse que <strong>no es necesario a帽adir <code>/api</code> en la ruta</strong>, Laravel lo a帽ade autom谩ticamente. Pero s铆 hay que ponerlo en las peticiones.</p>
<hr />
<h2 id="3-crear-controlador-para-la-api">3. Crear Controlador para la API<a class="headerlink" href="#3-crear-controlador-para-la-api" title="Permanent link">&para;</a></h2>
<div class="admonition tip">
<p class="admonition-title">Crear migraci贸n y Modelo (Opcional)</p>
<p>Este punto solo se realizar谩 <strong>si todav铆a no tenemos creada la tabla de notas</strong> <code>notes</code> en nuestra base de datos. </p>
<p>En caso de no tener la tabla creada, podemos crearla con el siguiente comando:</p>
<p><strong>Crear migraci贸n para tabla notes</strong></p>
<div class="highlight"><pre><span></span><code>php artisan make:migration create_notes_table
</code></pre></div>
<p>Esto generar谩 un archivo de migraci贸n en <code>database/migrations</code> que podemos editar para definir la estructura de la tabla <code>notes</code>.</p>
<p>Aseg煤rate de que la migraci贸n tenga el siguiente contenido:</p>
<p><strong>Migraci贸n para la tabla notes</strong></p>
<div class="highlight"><pre><span></span><code>use Illuminate\Database\Migrations\Migration; 
use Illuminate\Database\Schema\Blueprint; 
use Illuminate\Support\Facades\Schema; 

class CreateNotesTable extends Migration {     
    public function up()     {         
        Schema::create(&#39;notes&#39;, function (Blueprint $table) {             
            $table-&gt;id();             
            $table-&gt;string(&#39;title&#39;);             
            $table-&gt;text(&#39;description&#39;);             
            $table-&gt;date(&#39;date_at&#39;);             
            $table-&gt;boolean(&#39;done&#39;)-&gt;default(false);             
            $table-&gt;timestamps();         
        });     
    }      

    public function down()     {         
        Schema::dropIfExists(&#39;notes&#39;);     
    } 
} 
</code></pre></div>
<p>Despu茅s de editar la migraci贸n, ejecuta el siguiente comando para crear la tabla:</p>
<p><strong>Migraci贸n</strong>
<div class="highlight"><pre><span></span><code>php artisan migrate
</code></pre></div></p>
<p>Esto crear谩 la tabla <code>notes</code> en tu base de datos.</p>
<p>Podemos crear el modelo <code>Note</code> con el siguiente comando:</p>
<p><strong>Crear Modelo</strong>
<div class="highlight"><pre><span></span><code>php artisan make:model Note
</code></pre></div></p>
<p>Esto generar谩 el modelo <code>Note</code> en <code>app/Models/Note.php</code>.</p>
<p><strong>Modelo Note con $fillable</strong>
Aseg煤rate de que el modelo <code>Note</code> est谩 correctamente definido con <code>$fillable</code>:
<div class="highlight"><pre><span></span><code>class Note extends Model {     
    protected $fillable = [&#39;title&#39;, &#39;description&#39;, &#39;date_at&#39;, &#39;done&#39;]; 
} 
</code></pre></div></p>
</div>
<h3 id="31-generar-un-controlador-api">3.1. Generar un controlador API<a class="headerlink" href="#31-generar-un-controlador-api" title="Permanent link">&para;</a></h3>
<p>Usamos el <em>flag</em> <strong><code>--api</code></strong> para generar un controlador que s贸lo incluye los m茅todos necesarios para una API CRUD:</p>
<h4 id="paso-3-crear-controlador-api-notecontroller">(paso 3) Crear controlador API NoteController<a class="headerlink" href="#paso-3-crear-controlador-api-notecontroller" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code>php<span class="w"> </span>artisan<span class="w"> </span>make:controller<span class="w"> </span>Api/NoteController<span class="w"> </span>--api
</code></pre></div>
<p>Esto crear谩 el archivo en <code>app/Http/Controllers/Api/NoteController.php</code> con los m茅todos: <code>index</code>, <code>store</code>, <code>show</code>, <code>update</code>, <code>destroy</code>.</p>
<h4 id="paso-4-controlador-notecontroller">(paso 4) Controlador NoteController<a class="headerlink" href="#paso-4-controlador-notecontroller" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code>namespace App\Http\Controllers\Api; 

use App\Http\Controllers\Controller; 
use App\Models\Note; 
use Illuminate\Http\JsonResponse; 
use Illuminate\Http\Request; 

class NoteController extends Controller {     
    public function index(): JsonResponse     {         
        // Listar todas las notas     
        }      

    public function show(Note $note): JsonResponse     {         
        // Mostrar una nota por ID     
        }      

    public function store(Request $request): JsonResponse     {         
        // Crear una nueva nota     
    }      

    public function update(Request $request, Note $note): JsonResponse     {         
        // Actualizar una nota existente     
    }      

    public function destroy(Note $note): JsonResponse     {         
        // Eliminar una nota     
    } 
} 
</code></pre></div>
<p>El controlador <code>NoteController</code> extiende de <code>Controller</code> y usa el modelo <code>Note</code> para interactuar con la base de datos.</p>
<h3 id="32-crear-las-rutas-api-para-notes">3.2. Crear las rutas API para Notes<a class="headerlink" href="#32-crear-las-rutas-api-para-notes" title="Permanent link">&para;</a></h3>
<p>En <code>routes/api.php</code>:</p>
<h4 id="paso-5-ruta-resource-para-notes">(paso 5) Ruta resource para Notes<a class="headerlink" href="#paso-5-ruta-resource-para-notes" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code>use App\Http\Controllers\Api\NoteController;  


Route::apiResource(&#39;notes&#39;, NoteController::class); 
</code></pre></div>
<p> Por seguridadd podemos utilizar <strong><code>only()</code></strong> para definir las rutas que queremos habilitar:</p>
<div class="highlight"><pre><span></span><code>Route::apiResource(&#39;notes&#39;, NoteController::class)-&gt;only([
    &#39;index&#39;, &#39;show&#39;, &#39;store&#39;, &#39;update&#39;, &#39;destroy&#39;
]);
</code></pre></div>
<p>Esto generar谩 autom谩ticamente las rutas necesarias para el controlador <code>NoteController</code> usando el m茅todo <code>apiResource</code>. Laravel se encarga de crear las rutas RESTful para los m茅todos del controlador.</p>
<p>Esto define rutas como:</p>
<ul>
<li>GET <code>/api/notes</code></li>
<li>GET <code>/api/notes/{id}</code></li>
<li>POST <code>/api/notes</code></li>
<li>PUT/PATCH <code>/api/notes/{id}</code></li>
<li>DELETE <code>/api/notes/{id}</code></li>
</ul>
<h4 id="paso-6-comprobar-las-rutas">(paso 6) Comprobar las rutas<a class="headerlink" href="#paso-6-comprobar-las-rutas" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code>php artisan route:list --path=api/notes
</code></pre></div>
<p>Resultado de <code>route:list</code>:</p>
<div class="figure-center">
<figure>
    <img src="../../img/pru/laravel_apirest004.png"
                alt="Listado de rutas api"
                class="figure-img-highlight" />
    <figcaption class="figure-caption-small">
            Listado de rutas api
    </figcaption>
</figure>
</div>

<hr />
<h2 id="4-codigos-de-estado-http-en-apis">4. C贸digos de estado HTTP en APIs<a class="headerlink" href="#4-codigos-de-estado-http-en-apis" title="Permanent link">&para;</a></h2>
<p>En una API REST, es importante devolver <strong>c贸digos de estado HTTP apropiados</strong> para indicar si la operaci贸n fue exitosa o si ocurri贸 un error.</p>
<p>A continuaci贸n, una tabla con los c贸digos m谩s comunes y su uso recomendado:</p>
<table>
<thead>
<tr>
<th>C贸digo</th>
<th>Nombre</th>
<th>Cu谩ndo se usa</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>200 OK</code></td>
<td>xito</td>
<td>La petici贸n fue exitosa (por ejemplo, GET, PUT, DELETE)</td>
</tr>
<tr>
<td><code>201 Created</code></td>
<td>Recurso creado</td>
<td>Se ha creado un nuevo recurso correctamente (por ejemplo, POST)</td>
</tr>
<tr>
<td><code>204 No Content</code></td>
<td>Sin contenido</td>
<td>La petici贸n fue exitosa pero no se devuelve ning煤n contenido (opcional tras DELETE)</td>
</tr>
<tr>
<td><code>400 Bad Request</code></td>
<td>Petici贸n incorrecta</td>
<td>Cuando el cliente env铆a datos inv谩lidos</td>
</tr>
<tr>
<td><code>401 Unauthorized</code></td>
<td>No autorizado</td>
<td>Cuando el usuario no est谩 autenticado</td>
</tr>
<tr>
<td><code>403 Forbidden</code></td>
<td>Prohibido</td>
<td>El usuario est谩 autenticado pero no tiene permisos</td>
</tr>
<tr>
<td><code>404 Not Found</code></td>
<td>No encontrado</td>
<td>El recurso solicitado no existe</td>
</tr>
<tr>
<td><code>422 Unprocessable Entity</code></td>
<td>Entidad no procesable</td>
<td>Validaciones fallidas en los datos enviados</td>
</tr>
<tr>
<td><code>500 Internal Server Error</code></td>
<td>Error del servidor</td>
<td>Error inesperado en el servidor</td>
</tr>
</tbody>
</table>
<div class="admonition info">
<p class="admonition-title">驴Por qu茅 usamos 200, 201 y 204 en este tema?</p>
<ul>
<li>Usamos <strong>200 OK</strong> en respuestas normales donde devolvemos datos (GET, PUT, DELETE).</li>
<li>Usamos <strong>201 Created</strong> al crear un recurso con POST para indicar que se cre贸 exitosamente.</li>
<li>Usar铆amos <strong>204 No Content</strong> si quisi茅ramos responder a un DELETE sin mensaje (aunque aqu铆 devolvemos mensaje con 200).</li>
</ul>
</div>
<hr />
<h2 id="5-implementar-metodos-del-controlador">5. Implementar m茅todos del controlador<a class="headerlink" href="#5-implementar-metodos-del-controlador" title="Permanent link">&para;</a></h2>
<p>Antes de implementar los m茅todos del controlador, aseg煤rate de importar las clases necesarias:</p>
<h4 id="paso-7-importar-clases-en-notecontroller">(paso 7) Importar clases en NoteController<a class="headerlink" href="#paso-7-importar-clases-en-notecontroller" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code>use App\Models\Note; 
use Illuminate\Http\JsonResponse; 
use Illuminate\Http\Request;

//...
</code></pre></div>
<h4 id="paso-8-metodo-index-listar-notas">(paso 8) M茅todo <code>index()</code>  Listar notas<a class="headerlink" href="#paso-8-metodo-index-listar-notas" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code>public function index(): JsonResponse {     
    return response()-&gt;json([         
                            &#39;success&#39; =&gt; true,         
                            &#39;data&#39; =&gt; Note::all()     
                        ], 200); 
} 
</code></pre></div>
<h4 id="paso-9-metodo-show-mostrar-una-nota">(paso 9) M茅todo <code>show()</code>  Mostrar una nota<a class="headerlink" href="#paso-9-metodo-show-mostrar-una-nota" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code>public function show(Note $note): JsonResponse {     
    return response()-&gt;json([         
                        &#39;success&#39; =&gt; true,         
                        &#39;data&#39; =&gt; $note     
                        ], 200); 
}
</code></pre></div>
<h4 id="paso-10-metodo-store-crear-una-nota">(paso 10) M茅todo <code>store()</code>  Crear una nota<a class="headerlink" href="#paso-10-metodo-store-crear-una-nota" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code>public function store(Request $request): JsonResponse {     
    $note = Note::create($request-&gt;all());     
    return response()-&gt;json([         
                        &#39;success&#39; =&gt; true,         
                        &#39;message&#39; =&gt; &#39;Nota creada correctamente.&#39;,         
                        &#39;data&#39; =&gt; $note     
                        ], 201);
} 
</code></pre></div>
<h4 id="paso-11-metodo-update-modificar-nota">(paso 11) *M茅todo <code>update()</code>  Modificar nota<a class="headerlink" href="#paso-11-metodo-update-modificar-nota" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code>public function update(Request $request, Note $note): JsonResponse {     
    $note-&gt;update($request-&gt;all());     
    return response()-&gt;json([         
                        &#39;success&#39; =&gt; true,         
                        &#39;message&#39; =&gt; &#39;Nota actualizada correctamente.&#39;,         
                        &#39;data&#39; =&gt; $note     
                        ], 200); 
} 
</code></pre></div>
<h4 id="paso-12-metodo-destroy-eliminar-nota">(paso 12) M茅todo <code>destroy()</code>  Eliminar nota<a class="headerlink" href="#paso-12-metodo-destroy-eliminar-nota" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code>public function destroy(Note $note): JsonResponse {     
    $note-&gt;delete();    
    return response()-&gt;json([         
                        &#39;success&#39; =&gt; true,         
                        &#39;message&#39; =&gt; &#39;Nota eliminada correctamente.&#39;     
                        ], 200); 
} 
</code></pre></div>
<h3 id="56-testing-de-la-api">5.6. Testing de la API<a class="headerlink" href="#56-testing-de-la-api" title="Permanent link">&para;</a></h3>
<p>Para probar la API vamos a usar una extensi贸n de <em>Visual Studio Code</em> llamada <strong><code>REST Client</code></strong> que permite hacer peticiones HTTP directamente desde el editor. </p>
<div class="figure-center">
<figure>
    <img src="../../img/pru/laravel_apirest005.png"
                alt="Extensi贸n RestClient para Visual Studio Code"
                class="figure-img-highlight" 
                style="max-width: 55%; height: auto;" />
    <figcaption class="figure-caption-small">
            Extensi贸n RestClient para Visual Studio Code
    </figcaption>
</figure>
</div>

<p>Tambi茅n puedes usar herramientas como <code>Postman</code> o <code>Insomnia</code>.</p>
<h4 id="paso-13-crear-fichero-rest-para-pruebas">(paso 13) Crear fichero <code>.rest</code> para pruebas<a class="headerlink" href="#paso-13-crear-fichero-rest-para-pruebas" title="Permanent link">&para;</a></h4>
<p>Para ello vamos a crear un archivo, por ejemplo, <strong><code>notes.rest</code></strong> en la ra铆z del proyecto.</p>
<h3 id="57-ejemplos-de-peticiones-con-rest-client">5.7. Ejemplos de peticiones con REST Client<a class="headerlink" href="#57-ejemplos-de-peticiones-con-rest-client" title="Permanent link">&para;</a></h3>
<p>Para lanzar la petici贸n, sit煤ate en la l铆nea <code>GET ...</code> y pulsa el bot贸n <strong><code>Send Request</code></strong> que aparece arriba de este.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:2"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1">Mostrar listado de notas</label><label for="__tabbed_1_2">Resultado</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code>### 
GET http://testear.test/api/notes
</code></pre></div>
</div>
<div class="tabbed-block">
<p><div class="figure-center">
<figure>
    <img src="../../img/pru/laravel_apirest_index.png"
                alt="Petici贸n GET y Respuesta GET"
                class="figure-img-highlight" 
                style="max-width: 95%; height: auto;" />
    <figcaption class="figure-caption-small">
            Petici贸n GET y Respuesta GET
    </figcaption>
</figure>
</div></p>
</div>
</div>
</div>
<hr />
<div class="tabbed-set tabbed-alternate" data-tabs="2:2"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio" /><input id="__tabbed_2_2" name="__tabbed_2" type="radio" /><div class="tabbed-labels"><label for="__tabbed_2_1">Mostrar nota con id 5</label><label for="__tabbed_2_2">Resultado</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code>### 
GET http://testear.test/api/notes/5
</code></pre></div>
</div>
<div class="tabbed-block">
<p><div class="figure-center">
<figure>
    <img src="../../img/pru/laravel_apirest_show.png"
                alt="Petici贸n GET y Respuesta GET"
                class="figure-img-highlight" 
                style="max-width: 85%; height: auto;" />
    <figcaption class="figure-caption-small">
            Petici贸n GET y Respuesta GET
    </figcaption>
</figure>
</div></p>
</div>
</div>
</div>
<hr />
<div class="tabbed-set tabbed-alternate" data-tabs="3:2"><input checked="checked" id="__tabbed_3_1" name="__tabbed_3" type="radio" /><input id="__tabbed_3_2" name="__tabbed_3" type="radio" /><div class="tabbed-labels"><label for="__tabbed_3_1">Crear nueva nota</label><label for="__tabbed_3_2">Resultado</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>Plantilla:
<div class="highlight"><pre><span></span><code><span class="err">###</span>
<span class="err">METHOD</span><span class="w"> </span><span class="err">h</span><span class="kc">tt</span><span class="err">p</span><span class="p">:</span><span class="c1">//url</span>
<span class="err">Co</span><span class="kc">ntent</span><span class="mi">-</span><span class="err">Type</span><span class="p">:</span><span class="w"> </span><span class="err">applica</span><span class="kc">t</span><span class="err">io</span><span class="kc">n</span><span class="err">/jso</span><span class="kc">n</span>

<span class="p">{</span>
<span class="nt">&quot;key&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;value&quot;</span>
<span class="p">}</span>
</code></pre></div>
Vamos a crear una nueva nota con el m茅todo <code>POST</code>:</p>
<div class="highlight"><pre><span></span><code><span class="err">###</span>
<span class="err">POST</span><span class="w"> </span><span class="err">h</span><span class="kc">tt</span><span class="err">p</span><span class="p">:</span><span class="c1">//testear.test/api/notes</span>
<span class="err">Co</span><span class="kc">ntent</span><span class="mi">-</span><span class="err">Type</span><span class="p">:</span><span class="w"> </span><span class="err">applica</span><span class="kc">t</span><span class="err">io</span><span class="kc">n</span><span class="err">/jso</span><span class="kc">n</span>

<span class="p">{</span>
<span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Nueva Nota&quot;</span><span class="p">,</span>
<span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Descripci贸n de la nueva nota&quot;</span><span class="p">,</span>
<span class="nt">&quot;date_at&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2023-10-01&quot;</span><span class="p">,</span>
<span class="nt">&quot;done&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span>
<span class="p">}</span>
</code></pre></div>
<p>En este c贸digo hay que observar varias cosas:</p>
<ol>
<li><strong><code>###</code></strong> en la primera linea y pegado a la izquierda.</li>
<li>La URL de la petici贸n es <strong><code>http://testear.test/api/notes</code></strong>, que es la ruta que hemos definido en nuestro archivo de rutas.</li>
<li>El m茅todo HTTP utilizado es <strong><code>POST</code></strong>, lo que indica que estamos creando un nuevo recurso.</li>
<li>Hemos especificado la cabecera <strong><code>content-type: application/json</code></strong> para indicar que el cuerpo de la petici贸n es un JSON.</li>
<li>En el cuerpo de la petici贸n, estamos enviando un objeto JSON con los datos de la nueva nota que queremos crear.</li>
<li>Hemos dejado una l铆nea en blanco entre las cabeceras y el cuerpo de la petici贸n, que es obligatorio en HTTP.</li>
</ol>
</div>
<div class="tabbed-block">
<p><div class="figure-center">
<figure>
    <img src="../../img/pru/laravel_apirest_store.png"
                alt="Petici贸n POST y Respuesta POST"
                class="figure-img-highlight" />
    <figcaption class="figure-caption-small">
            Petici贸n POST y Respuesta POST
    </figcaption>
</figure>
</div></p>
</div>
</div>
</div>
<hr />
<div class="tabbed-set tabbed-alternate" data-tabs="4:2"><input checked="checked" id="__tabbed_4_1" name="__tabbed_4" type="radio" /><input id="__tabbed_4_2" name="__tabbed_4" type="radio" /><div class="tabbed-labels"><label for="__tabbed_4_1">Modificar nota con id 9</label><label for="__tabbed_4_2">Resultado</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>Ahora vamos a modificar la nota creada anteriormente con el m茅todo <code>PUT</code>. Pero antes necesitamos su ID, para ello repetimos la petici贸n <code>GET</code> para listar todas las notas y ver el ID de la nota que acabamos de crear. En mi caso es la nota con ID 5.</p>
<p><div class="highlight"><pre><span></span><code><span class="err">###</span><span class="w"> </span>
<span class="err">PUT</span><span class="w"> </span><span class="err">h</span><span class="kc">tt</span><span class="err">p</span><span class="p">:</span><span class="c1">//testear.test/api/notes/9</span>
<span class="err">Co</span><span class="kc">ntent</span><span class="mi">-</span><span class="err">Type</span><span class="p">:</span><span class="w"> </span><span class="err">applica</span><span class="kc">t</span><span class="err">io</span><span class="kc">n</span><span class="err">/jso</span><span class="kc">n</span>

<span class="p">{</span>
<span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Nota Modificada con UPDATE&quot;</span><span class="p">,</span>
<span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Descripci贸n de la nota modificada&quot;</span><span class="p">,</span>
<span class="nt">&quot;date_at&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2023-10-01&quot;</span><span class="p">,</span>
<span class="nt">&quot;done&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span>
<span class="p">}</span>
</code></pre></div>
La estructura es similar a la petici贸n <code>POST</code>, pero en este caso:</p>
<ul>
<li>el m茅todo es <strong><code>PUT</code></strong> y </li>
<li>la URL incluye el <strong>ID</strong> de la nota que queremos modificar.</li>
</ul>
</div>
<div class="tabbed-block">
<p><div class="figure-center">
<figure>
    <img src="../../img/pru/laravel_apirest_update.png"
                alt="Petici贸n PUT y Respuesta PUT"
                class="figure-img-highlight" />
    <figcaption class="figure-caption-small">
            Petici贸n PUT y Respuesta PUT
    </figcaption>
</figure>
</div></p>
</div>
</div>
</div>
<hr />
<div class="tabbed-set tabbed-alternate" data-tabs="5:1"><input checked="checked" id="__tabbed_5_1" name="__tabbed_5" type="radio" /><div class="tabbed-labels"><label for="__tabbed_5_1">Eliminar nota con id 9</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p><div class="highlight"><pre><span></span><code>### 
DELETE testear.test/api/notes/9
</code></pre></div>
La petici贸n es muy sencilla, s贸lo necesitamos el m茅todo <strong><code>DELETE</code></strong> y la URL con el <strong>ID</strong> de la nota que queremos eliminar.</p>
</div>
</div>
</div>
<h2 id="6-api-resources">6. API Resources<a class="headerlink" href="#6-api-resources" title="Permanent link">&para;</a></h2>
<p>En el siguiente apartado vamos a ver c贸mo mejorar la salida de los datos usando <code>API Resources</code>, podemos tomar el control del formato de los datos que devolvemos.</p>
<p>Laravel permite transformar la salida de tus APIs con clases <code>Resource</code> que te dan control sobre el formato.</p>
<h3 id="61-crear-un-api-resource">6.1. Crear un API Resource<a class="headerlink" href="#61-crear-un-api-resource" title="Permanent link">&para;</a></h3>
<h4 id="paso-14-crear-noteresource">(paso 14) Crear NoteResource<a class="headerlink" href="#paso-14-crear-noteresource" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code>php artisan make:resource NoteResource
</code></pre></div>
<p>Crea el archivo en <code>App\Http\Resources\NoteResource.php</code></p>
<h3 id="62-personalizar-la-transformacion">6.2. Personalizar la transformaci贸n<a class="headerlink" href="#62-personalizar-la-transformacion" title="Permanent link">&para;</a></h3>
<p>Vamos a modificar la salida de los datos en <code>NoteResource.php</code>. Por ejemplo, podemos cambiar los nombres de los campos y a帽adir un campo calculado <code>estado</code> que indique si la nota est谩 completada o pendiente:</p>
<h4 id="paso-15-ejemplo-de-transformacion-en-noteresource">(paso 15) Ejemplo de transformaci贸n en <code>NoteResource</code><a class="headerlink" href="#paso-15-ejemplo-de-transformacion-en-noteresource" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code>public function toArray($request) {     
    return [         
        &#39;id&#39; =&gt; $this-&gt;id,         
        &#39;titulo&#39; =&gt; $this-&gt;title,         
        &#39;descripcion&#39; =&gt; $this-&gt;description,         
        &#39;fecha&#39; =&gt; $this-&gt;date_at,         
        &#39;estado&#39; =&gt; $this-&gt;done ? &#39;Completada&#39; : &#39;Pendiente&#39;     
        ]; 
} 
</code></pre></div>
<h3 id="63-usar-el-recurso-en-el-controlador">6.3. Usar el recurso en el controlador<a class="headerlink" href="#63-usar-el-recurso-en-el-controlador" title="Permanent link">&para;</a></h3>
<p>A帽adimos la importaci贸n al controlador <code>NoteController</code>:</p>
<h4 id="paso-16-importar-noteresource-en-notecontroller">(paso 16) Importar NoteResource en <code>NoteController</code><a class="headerlink" href="#paso-16-importar-noteresource-en-notecontroller" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code>use App\Http\Resources\NoteResource; 

//...
</code></pre></div>
<h4 id="paso-17-devolver-coleccion-con-estado-y-mensaje">(paso 17) Devolver colecci贸n con estado y mensaje<a class="headerlink" href="#paso-17-devolver-coleccion-con-estado-y-mensaje" title="Permanent link">&para;</a></h4>
<p>Modificamos el m茅todo <code>index()</code> para devolver una colecci贸n de <code>NoteResource</code>:
<div class="highlight"><pre><span></span><code>return response()-&gt;json([     
                    &#39;success&#39; =&gt; true,     
                    &#39;data&#39; =&gt; NoteResource::collection(Note::all()) 
                    ], 200); 
</code></pre></div></p>
<p>De esta manera, la respuesta incluir谩 el estado y el mensaje de 茅xito. Vamos a comprobarlo con una petici贸n <code>GET</code> a <code>/api/notes</code>:</p>
<div class="figure-center">
<figure>
    <img src="../../img/pru/laravel_apirest009.png"
                alt="Respuesta de index con `NoteResource`"
                class="figure-img-highlight" 
                style="max-width: 85%; height: auto;" />
    <figcaption class="figure-caption-small">
            Respuesta de index con `NoteResource`
    </figcaption>
</figure>
</div>

<p>En los dem谩s m茅todos no devolvemos una colecci贸n sino un solo elemento. </p>
<h4 id="paso-18-devolver-una-sola-nota-con-noteresource">(paso 18) Devolver una sola nota con <code>NoteResource</code><a class="headerlink" href="#paso-18-devolver-una-sola-nota-con-noteresource" title="Permanent link">&para;</a></h4>
<p>Por ejemplo para el m茅todo <code>show()</code> podemos hacer lo siguiente:
<div class="highlight"><pre><span></span><code>public function show(Note $note): JsonResponse {     
    return response()-&gt;json([         
                        &#39;success&#39; =&gt; true,         
                        &#39;data&#39; =&gt; new NoteResource($note)     
                        ], 200); 
} 
</code></pre></div></p>
<div class="figure-center">
<figure>
    <img src="../../img/pru/laravel_apirest010.png"
                alt="Respuesta de show con `NoteResource`"
                class="figure-img-highlight" 
                style="max-width: 85%; height: auto;" />
    <figcaption class="figure-caption-small">
            Respuesta de show con `NoteResource`
    </figcaption>
</figure>
</div>

<p>Ahora ser铆a aplicable a todos los m茅todos que devuelven un solo elemento, como <code>store()</code>y <code>update()</code>. Al m茅todo <code>destroy()</code> no se pondr谩, puesto que no devuelve los datos de la nota eliminada.</p>
<hr />
<h2 id="7-validacion-de-los-datos">7. Validaci贸n de los datos<a class="headerlink" href="#7-validacion-de-los-datos" title="Permanent link">&para;</a></h2>
<p>Al igual que en los formularios, es importante validar los datos que recibimos en la API. <code>Laravel</code> ofrece un sistema de validaci贸n muy potente. Empezaremos por validar los datos en el m茅todo <code>store()</code> y <code>update()</code>. Para ello vamos a crear la clase <code>NoteRequest</code>:</p>
<div class="admonition tip">
<p class="admonition-title">Eliminar NoteRequest</p>
<p>En la pr谩ctica anterior creamos la clase <code>NoteRequest</code> para validar los datos del formulario. Si ya la tienes creada, elim铆nala para evitar conflictos.</p>
</div>
<h4 id="paso-19-crear-noterequest">(paso 19) Crear <code>NoteRequest</code><a class="headerlink" href="#paso-19-crear-noterequest" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code>php artisan make:request NoteRequest
</code></pre></div>
<p>Esto generar谩 el archivo en <code>app/Http/Requests/NoteRequest.php</code>.</p>
<h4 id="paso-20-clase-noterequest">(paso 20) Clase <code>NoteRequest</code><a class="headerlink" href="#paso-20-clase-noterequest" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code>namespace App\Http\Requests;

use Illuminate\Foundation\Http\FormRequest; 
use Illuminate\Contracts\Validation\Validator; 
use Illuminate\Http\Exceptions\HttpResponseException; 
use Illuminate\Validation\ValidationException;  

class NoteRequest extends FormRequest {     
    public function authorize(): bool     {         
        return true;     
    }      

    public function rules(): array     {         
        return [             
                &#39;title&#39; =&gt; &#39;required|string|max:255&#39;,             
                &#39;description&#39; =&gt; &#39;required|string&#39;,             
                &#39;date_at&#39; =&gt; &#39;required|date&#39;,             
                &#39;done&#39; =&gt; &#39;sometimes|boolean&#39;         
        ];     
    }  
} 
</code></pre></div>
<p>Esta funci贸n al igual que en los formularios, define las reglas de validaci贸n. En este caso:</p>
<ul>
<li><code>title</code>: requerido, cadena de texto, m谩ximo 255 caracteres.</li>
<li><code>description</code>: requerido, cadena de texto.</li>
<li><code>date_at</code>: requerido, debe ser una fecha v谩lida.</li>
<li><code>done</code>: algunas veces, booleano.</li>
</ul>
<p>En caso de error en la validaci贸n, Laravel devolver谩 autom谩ticamente un <strong>error 422 Unprocessable Entity</strong> (salidaciones fallidas en los datos enviados) con los detalles del error.</p>
<details class="teolaravel" open="open">
<summary>Ejemplo de error de validaci贸n</summary>
<div class="highlight"><pre><span></span><code>{    
    &quot;message&quot;: &quot;The given data was invalid.&quot;,     
    &quot;errors&quot;: {         
        &quot;title&quot;: [             
                    &quot;The title field is required.&quot;         
        ]     
    } 
} 
</code></pre></div>
</details>
<h4 id="paso-21-lanzar-los-mensajes-en-castellano">(paso 21) Lanzar los mensajes en castellano<a class="headerlink" href="#paso-21-lanzar-los-mensajes-en-castellano" title="Permanent link">&para;</a></h4>
<p>Si queremos que nuestros mensajes de error de validaci贸n sean devueltos en castellano, recuerda el punto <code>2.5. Traducir los mensajes de error</code> del apartado anterior.</p>
<div class="figure-center">
<figure>
    <img src="../../img/pru/laravel_apirest_validacion1.png"
                alt="Respuesta de show con `NoteResource`"
                class="figure-img-highlight" 
                style="max-width: 90%; height: auto;" />
    <figcaption class="figure-caption-small">
            Error en validaci贸n del campo `description`, pero con caracteres especiales escapados.
    </figcaption>
</figure>
</div>

<p><strong>Par谩metros JSON</strong></p>
<p>En los par谩metros de <code>json()</code> podemos a帽adir el tercer par谩metro <strong><code>JSON_UNESCAPED_UNICODE</code></strong> para evitar que los caracteres especiales se escapen. Esto es 煤til si est谩s trabajando con caracteres no ASCII. Si no los acentos y caracteres especiales se escapar谩n y no se ver谩n correctamente en la respuesta.</p>
<p>Deberemos a帽adir el m茅todo <strong><code>failedValidation</code></strong> en nuestro <code>NoteRequest</code> (acu茅rdate de importar las clases pertinentes):</p>
<div class="highlight"><pre><span></span><code>use Illuminate\Contracts\Validation\Validator;
use Illuminate\Http\Exceptions\HttpResponseException;

protected function failedValidation(Validator $validator)
{
    throw new HttpResponseException(
        response()-&gt;json([
            &#39;success&#39; =&gt; false,
            &#39;message&#39; =&gt; &#39;Error de validaci贸n&#39;,
            &#39;errors&#39;  =&gt; $validator-&gt;errors(),
<span class="hll">        ], 422, [], JSON_UNESCAPED_UNICODE)
</span>    );
}
</code></pre></div>
<div class="figure-center">
<figure>
    <img src="../../img/pru/laravel_apirest_validacion2.png"
                alt="Respuesta de show con `NoteResource`"
                class="figure-img-highlight" 
                style="max-width: 90%; height: auto;" />
    <figcaption class="figure-caption-small">
            Error en validaci贸n del campo `description`, con caracteres especiales NO escapados.
    </figcaption>
</figure>
</div>

<p>Ahora para que las validaciones funcionen debemos ajustar los m茅todos <code>store()</code> y <code>update()</code> del controlador para usar <code>NoteRequest</code> en lugar de <code>Request</code>:</p>
<h4 id="paso-22-usar-noterequest-en-notecontroller">(paso 22) Usar NoteRequest en <code>NoteController</code><a class="headerlink" href="#paso-22-usar-noterequest-en-notecontroller" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code>use App\Http\Requests\NoteRequest; 
</code></pre></div>
<div class="highlight"><pre><span></span><code>public function store(NoteRequest $request): JsonResponse {     
    $note = Note::create($request-&gt;validated());     
    return response()-&gt;json([         
        &#39;success&#39; =&gt; true,         
        &#39;message&#39; =&gt; &#39;Nota creada correctamente.&#39;,         
        &#39;data&#39; =&gt; new NoteResource($note)     
    ], 201); 
}  

public function update(NoteRequest $request, Note $note): JsonResponse {     
    $note-&gt;update($request-&gt;validated());     
    return response()-&gt;json([         
        &#39;success&#39; =&gt; true,         
        &#39;message&#39; =&gt; &#39;Nota actualizada correctamente.&#39;,         
        &#39;data&#39; =&gt; new NoteResource($note)     
    ], 200); 
} 
</code></pre></div>
<p>Se puede observar en los dos m茅todos que hemos cambiado <code>$request-&gt;all()</code> por <strong><code>$request-&gt;validated()</code></strong>. Esto asegura que s贸lo los datos que pasaron la validaci贸n se usan para crear o actualizar la nota.</p>
<p>Por ejemplo, imaginemos que tenemos la siguiente validaci贸n, una clase que solo admite los campos <code>name</code> y <code>email</code>:</p>
<details class="teolaravel" open="open">
<summary>Ejemplo</summary>
<div class="highlight"><pre><span></span><code>class StoreUserRequest extends FormRequest {     
    public function rules()     {         
        return [             
                &#39;name&#39;  =&gt; [&#39;required&#39;, &#39;string&#39;],            
                &#39;email&#39; =&gt; [&#39;required&#39;, &#39;email&#39;],         
        ];     
    } 
} 
</code></pre></div>
<p>Ahora el cliente env铆a el siguiente JSON:</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span><span class="w">     </span>
<span class="w">    </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;John Doe&quot;</span><span class="p">,</span><span class="w">     </span>
<span class="w">    </span><span class="nt">&quot;email&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;john.doe@example.com&quot;</span><span class="p">,</span><span class="w">     </span>
<span class="w">    </span><span class="nt">&quot;role&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;admin&quot;</span><span class="w"> </span>
<span class="p">}</span><span class="w"> </span>
</code></pre></div>
<p>El campo <code>role</code> no est谩 definido en las reglas de validaci贸n, por lo que ser谩 ignorado cuando usemos <code>$request-&gt;validated()</code>. Esto ayuda a prevenir la asignaci贸n masiva de campos no deseados.</p>
</details>
<p>En resumen:</p>
<div class="highlight"><pre><span></span><code>$request-&gt;validated(); 
// =&gt; [&#39;name&#39; =&gt; &#39;John Doe&#39;, &#39;email&#39; =&gt; &#39;john.doe@example.com&#39;] 


$request-&gt;all(); 
// =&gt; [&#39;name&#39; =&gt; &#39;John Doe&#39;, &#39;email&#39; =&gt; &#39;john.doe@example.com&#39;, &#39;role&#39; =&gt; &#39;admin&#39;] 
</code></pre></div>
<p>Recordemos que si <code>role</code> no est谩 en <code>$fillable</code> en el modelo, no se asignar谩 de todas formas. Pero es una buena pr谩ctica usar <code>validated()</code> para asegurarnos de que s贸lo los datos permitidos se procesan.</p>
<h2 id="8-control-de-errores-en-la-api-con-findorfail">8. Control de errores en la API con <code>findOrFail</code><a class="headerlink" href="#8-control-de-errores-en-la-api-con-findorfail" title="Permanent link">&para;</a></h2>
<p>Ahora vamos a a帽adir un punto a tu tema para controlar el error cuando no se encuentra una nota en la base de datos, utilizando primero el m茅todo <code>findOrFail</code> de Laravel y analizando el resultado. Despu茅s implementaremos el bloque <code>try-catch</code> para una soluci贸n m谩s robusta.</p>
<p>Cuando construimos una API REST en Laravel, es importante asegurarnos de que las respuestas a las solicitudes, especialmente las solicitudes AJAX, siempre sean en formato JSON, incluso cuando se produce un error, como intentar acceder a un recurso que no existe.</p>
<h3 id="81-usando-findorfail-para-manejar-errores">8.1. Usando <code>findOrFail</code> para manejar errores<a class="headerlink" href="#81-usando-findorfail-para-manejar-errores" title="Permanent link">&para;</a></h3>
<p>Laravel proporciona el m茅todo <strong><code>findOrFail</code></strong> para buscar un modelo en la base de datos por su ID. Si el modelo no existe, Laravel autom谩ticamente lanza una excepci贸n <strong><code>ModelNotFoundException</code></strong>, que puedes manejar para devolver una respuesta adecuada sin que se genere un error en formato HTML.</p>
<h4 id="811-ejemplo-basico-con-findorfail">8.1.1. Ejemplo b谩sico con <code>findOrFail</code><a class="headerlink" href="#811-ejemplo-basico-con-findorfail" title="Permanent link">&para;</a></h4>
<p>En el siguiente ejemplo, la funci贸n <code>show</code> intenta obtener una nota por su ID usando <code>findOrFail</code>. Si la nota no se encuentra, Laravel devolver谩 autom谩ticamente un error <strong>404 Not Found</strong> con una respuesta en formato JSON.</p>
<details class="teolaravel" open="open">
<summary>Ejemplo de uso de <code>findOrFail</code></summary>
<div class="highlight"><pre><span></span><code>public function show(string $id): JsonResponse 
{     
    // Usamos findOrFail para intentar encontrar la nota por ID     
    $note = Note::findOrFail($id);      

    // Si la nota existe, la devolvemos en formato JSON con c贸digo de estado 200     
    return response()-&gt;json([         
                            &#39;success&#39; =&gt; true,         
                            &#39;data&#39; =&gt; new NoteResource($note)     
    ], 200); 
} 
</code></pre></div>
</details>
<p><strong>驴Qu茅 sucede cuando la nota no existe?</strong></p>
<p>Cuando la solicitud se realiza con un ID que no existe en la base de datos, Laravel lanzar谩 una excepci贸n <code>ModelNotFoundException</code>. Si la solicitud es realizada mediante AJAX, Laravel autom谩ticamente enviar谩 una respuesta con el c贸digo de estado <strong>404 Not Found</strong> y un error en formato HTML, lo que no es adecuado si la solicitud espera un <strong>JSON</strong>.</p>
<p><strong>驴C贸mo manejarlo con el manejador de excepciones de Laravel?</strong></p>
<p>Laravel ya est谩 configurado para manejar autom谩ticamente las excepciones de modelo no encontrado, pero esto genera una respuesta HTML. En lugar de manejar la excepci贸n directamente, una mejor opci贸n ser铆a asegurarnos de que la respuesta siempre est茅 en formato JSON, para evitar que la aplicaci贸n devuelva una p谩gina de error en HTML.</p>
<h3 id="82-solucion-definitiva-usando-try-catch">8.2. Soluci贸n definitiva: usando <code>try-catch</code><a class="headerlink" href="#82-solucion-definitiva-usando-try-catch" title="Permanent link">&para;</a></h3>
<p>Para manejar de forma m谩s controlada los errores y asegurarnos de que siempre devolvemos una respuesta en formato JSON, podemos usar el bloque <strong><code>try-catch</code></strong>. Esto nos permitir谩 interceptar la excepci贸n y devolver una respuesta personalizada con un mensaje claro en formato JSON.</p>
<p><strong>C贸digo con <code>try-catch</code></strong>:</p>
<div class="highlight"><pre><span></span><code>public function show(string $id): JsonResponse {     
    try {         
        // Intentamos obtener la nota con findOrFail        
        $note = Note::findOrFail($id);          

        // Si la nota existe, devolvemos la respuesta en JSON         
        return response()-&gt;json([             
                                &#39;success&#39; =&gt; true,             
                                &#39;data&#39; =&gt; new NoteResource($note)         
        ], 200);   

    } catch (\Illuminate\Database\Eloquent\ModelNotFoundException $e) {         
        // Si no se encuentra la nota, devolvemos un error 404 en formato JSON         
        return response()-&gt;json([             
                                &#39;success&#39; =&gt; false,             
                                &#39;message&#39; =&gt; &#39;Note not found&#39;         
        ], 404);     
    } 
} 
</code></pre></div>
<p><strong>驴Qu茅 cambia con <code>try-catch</code>?</strong></p>
<ol>
<li><strong>Manejo expl铆cito del error</strong>: Al utilizar <code>try-catch</code>, puedes controlar el flujo de la aplicaci贸n cuando ocurre un error, y devolver un mensaje de error personalizado en formato JSON.</li>
<li><strong>Mensaje claro en JSON</strong>: Si la nota no se encuentra, el bloque <code>catch</code> captura la excepci贸n y devuelve una respuesta JSON con un mensaje de error claro, en lugar de una p谩gina HTML de error.</li>
<li><strong>C贸digo de estado HTTP adecuado</strong>: Se asegura de que el c贸digo de estado HTTP sea <strong>404 Not Found</strong> cuando no se encuentra el recurso.</li>
</ol>
<h3 id="resumen-de-las-soluciones">Resumen de las soluciones<a class="headerlink" href="#resumen-de-las-soluciones" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Usando <code>findOrFail</code></strong>: Laravel maneja autom谩ticamente el error, pero devuelve una respuesta HTML que puede no ser ideal cuando se realiza una solicitud AJAX.</li>
<li><strong>Usando <code>try-catch</code></strong>: Permite manejar el error de manera m谩s controlada y devolver una respuesta JSON, asegurando que la aplicaci贸n no devuelva errores HTML en solicitudes AJAX.</li>
</ul>
<p>Con esto, puedes manejar de manera efectiva los casos en los que un recurso no existe y asegurarte de que la respuesta de tu API est茅 siempre en el formato esperado.</p>
<p>Ahora falta extender este control de errores a los dem谩s m茅todos del controlador (<code>update</code>, <code>destroy</code>) donde tambi茅n se utiliza <code>findOrFail</code> para obtener la nota por ID.</p>
<h2 id="9-conclusiones">9. Conclusiones<a class="headerlink" href="#9-conclusiones" title="Permanent link">&para;</a></h2>
<ul>
<li>Las APIs REST son ideales para aplicaciones SPA, m贸viles o integraciones.</li>
<li>Laravel permite definir rutas espec铆ficas para API con prefijos autom谩ticos y middleware personalizado.</li>
<li>Los controladores API est谩n enfocados a respuestas JSON.</li>
<li><code>ApiResource</code> permite estructurar y controlar la salida de tus datos.</li>
</ul>
<details class="praclaravel">
<summary>Pr谩ctica a entregar</summary>
<h3 id="objetivo-de-la-actividad">Objetivo de la actividad<a class="headerlink" href="#objetivo-de-la-actividad" title="Permanent link">&para;</a></h3>
<p><p style="float: left; margin: 0 1rem 1rem 0;">
    <img src="../../img/laraveltask.svg"
        alt="Actividad en el aula virtual"
        width="150">
</p></p>
<p><strong>Validaciones y Mensajes en el CRUD de Productos</strong></p>
<p>En esta pr谩ctica vas a aplicar todo lo aprendido sobre <strong>Laravel y la creaci贸n de APIs REST</strong> para desarrollar un servicio completo que gestione productos (<em>Products</em>).</p>
<p>Al finalizar, habr谩s implementado todos los elementos esenciales de una API moderna:</p>
<ul>
<li>Definici贸n de rutas API (<code>api.php</code>).</li>
<li>Creaci贸n de un controlador con m茅todos CRUD (<code>index</code>, <code>show</code>, <code>store</code>, <code>update</code>, <code>destroy</code>).</li>
<li>Uso de modelos y migraciones.</li>
<li>Validaci贸n de datos mediante <em>Form Request</em>.</li>
<li>Personalizaci贸n de la salida con <em>API Resources</em>.</li>
<li>Pruebas de los endpoints con <em>Postman</em> o <em>REST Client</em>.</li>
</ul>
<hr />
<h3 id="instrucciones">Instrucciones<a class="headerlink" href="#instrucciones" title="Permanent link">&para;</a></h3>
<p>Sigue los pasos <strong>en orden</strong>, comprobando el funcionamiento de cada parte antes de pasar a la siguiente.
Puedes basarte en el ejemplo del tema anterior sobre <em>Notes</em>, adapt谩ndolo al nuevo recurso <em>Product</em>. O continuar con el proyecto de las pr谩cticas anteriores que ya trata sobre productos.</p>
<hr />
<h3 id="1-preparar-el-entorno">1. Preparar el entorno<a class="headerlink" href="#1-preparar-el-entorno" title="Permanent link">&para;</a></h3>
<p>1) Abre el proyecto de Laravel que has elegido.</p>
<p>2) Aseg煤rate de tener las rutas API activadas. Si no lo hiciste antes, ejecuta:</p>
<div class="highlight"><pre><span></span><code>php artisan install:api
</code></pre></div>
<p>3) Encender servicios:</p>
<ul>
<li>
<p>opci贸n 1) Con <strong>Docker</strong>: verifica que los contenedores de Docker est茅n funcionando:
<div class="highlight"><pre><span></span><code>docker compose up -d
</code></pre></div></p>
</li>
<li>
<p>opci贸n 2) Con <strong>Laragon</strong>: comprueba que est茅 en marcha los servidores Nginx y Mysql.</p>
</li>
</ul>
<hr />
<h3 id="2-crear-la-tabla-y-el-modelo-de-productos-opcional">2. Crear la tabla y el modelo de productos (opcional)<a class="headerlink" href="#2-crear-la-tabla-y-el-modelo-de-productos-opcional" title="Permanent link">&para;</a></h3>
<p>Si <strong>no</strong> tienes todav铆a creada la tabla <code>products</code>:</p>
<p>1) Crea una nueva migraci贸n y el modelo asociado. Si ya lo tienes contin煤a con el siguiente paso.</p>
<ul>
<li>
<p>Genera la migraci贸n para la tabla <code>products</code>:
<div class="highlight"><pre><span></span><code>php artisan make:migration create_products_table
</code></pre></div></p>
</li>
<li>
<p>Edita la migraci贸n para que incluya los siguientes campos:
<div class="highlight"><pre><span></span><code>$table-&gt;id();
$table-&gt;string(&#39;name&#39;);
$table-&gt;text(&#39;description&#39;)-&gt;nullable();
$table-&gt;decimal(&#39;price&#39;, 8, 2);
$table-&gt;integer(&#39;stock&#39;);
$table-&gt;timestamps();
</code></pre></div></p>
</li>
<li>
<p>Ejecuta las migraciones:
<div class="highlight"><pre><span></span><code>php artisan migrate
</code></pre></div></p>
</li>
<li>
<p>Crea el modelo <code>Product</code>:
<div class="highlight"><pre><span></span><code>php artisan make:model Product
</code></pre></div></p>
</li>
<li>
<p>Define en el modelo los campos permitidos para asignaci贸n masiva:
<div class="highlight"><pre><span></span><code>protected $fillable = [&#39;name&#39;, &#39;description&#39;, &#39;price&#39;, &#39;stock&#39;];
</code></pre></div></p>
</li>
</ul>
<hr />
<h3 id="3-crear-el-controlador-api">3. Crear el controlador API<a class="headerlink" href="#3-crear-el-controlador-api" title="Permanent link">&para;</a></h3>
<p>1) Crea el controlador <code>ProductController</code> en el espacio de nombres <code>api</code>.</p>
<p>2) Implementa en 茅l los cinco m茅todos principales (<code>index</code>, <code>store</code>, <code>show</code>, <code>update</code>, <code>destroy</code>) para manejar el CRUD. Puedes basarte en el ejemplo del recurso <code>Note</code> del tema.</p>
<hr />
<h3 id="4-definir-las-rutas">4. Definir las rutas<a class="headerlink" href="#4-definir-las-rutas" title="Permanent link">&para;</a></h3>
<p>3) Crea las rutas para manejar los productos (utiliza <code>apiResource</code>).</p>
<p>4) Comprueba que se hayan creado las rutas con:
<div class="highlight"><pre><span></span><code>php artisan route:list --path=api/products
</code></pre></div></p>
<hr />
<h3 id="5-crear-el-api-resource">5. Crear el <em>API Resource</em><a class="headerlink" href="#5-crear-el-api-resource" title="Permanent link">&para;</a></h3>
<p>5)  Genera la clase <code>ProductResource</code>. Esta clase te permitir谩 personalizar la estructura de los datos JSON que devuelve la API.</p>
<p>Un ejemplo de estructura ser铆a:
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;nombre&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Camiseta&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;precio&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$19.99&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;stock&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">25</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;descripcion&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Camiseta de algod贸n&quot;</span>
<span class="p">}</span>
</code></pre></div></p>
<p>6)  Usa esta clase en el controlador para las respuestas JSON.</p>
<hr />
<h3 id="6-validar-los-datos-con-una-clase-form-request">6. Validar los datos con una clase <em>Form Request</em><a class="headerlink" href="#6-validar-los-datos-con-una-clase-form-request" title="Permanent link">&para;</a></h3>
<p>7)  Crea la clase <code>ProductRequest</code> para validar los datos de entrada al crear o actualizar un producto. Las reglas de validaci贸n podr铆an ser:</p>
<ul>
<li><code>name</code>: obligatorio, cadena de texto, m铆nimo 3 y m谩ximo 255 caracteres.</li>
<li><code>description</code>: obligatorio, cadena de texto, m铆nimo 10 caracteres.</li>
<li><code>price</code>: obligatorio, num茅rico, m铆nimo 0, m谩ximo 9999.99.</li>
<li><code>stock</code>: obligatorio, entero, m铆nimo 0, m谩ximo 10000.</li>
</ul>
<p>8)  Modifica los m茅todos <code>store()</code> y <code>update()</code> del controlador para usar esta clase.</p>
<p>9)  Introduce el m茅todo <code>failedValidation</code> en la clase <code>ProductRequest</code> y los cambios en <code>resources/lang/es/validation</code> para que los errores de validaci贸n se muestren en castellano.</p>
<hr />
<h3 id="7-probar-la-api">7. Probar la API<a class="headerlink" href="#7-probar-la-api" title="Permanent link">&para;</a></h3>
<p>10) Crea un archivo <code>products.rest</code> en la ra铆z del proyecto (o usa <em>Postman</em>).</p>
<p>11) Escribe las peticiones para probar todos los <em>endpoints</em>:</p>
<ul>
<li>GET <code>/api/products</code>  Listar todos los productos</li>
<li>POST <code>/api/products</code>  Crear un nuevo producto</li>
<li>GET <code>/api/products/{id}</code>  Mostrar un producto</li>
<li>PUT <code>/api/products/{id}</code>  Modificar un producto</li>
<li>DELETE <code>/api/products/{id}</code>  Eliminar un producto</li>
</ul>
<p>12) Escribe una petici贸n que devuelva un error de validaci贸n (por ejemplo: precio negativo o stock como un string).
13) Comprueba que todas las operaciones devuelven los <strong>c贸digos HTTP correctos</strong> (<code>200</code>, <code>201</code>, <code>204</code>, etc.) y que la respuesta JSON tiene el formato definido en <code>ProductResource</code>.</p>
</details>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Volver al principio
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Pie" >
        
          
          <a href="../pru04/" class="md-footer__link md-footer__link--prev" aria-label="Anterior: 4. Validaciones, Rutas Resource y Mensajes del Sistema">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M9.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L77.3 256l137.3-137.4c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Anterior
              </span>
              <div class="md-ellipsis">
                4. Validaciones, Rutas Resource y Mensajes del Sistema
              </div>
            </div>
          </a>
        
        
          
          <a href="../pru06/" class="md-footer__link md-footer__link--next" aria-label="Siguiente: 6. Autenticaci贸n B谩sica">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Siguiente
              </span>
              <div class="md-ellipsis">
                6. Autenticaci贸n B谩sica
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M247.1 233.4c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L179.2 256 41.9 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Arturo Blasco - Creative Commons CC BY-NC-SA
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/arturoblasco" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["content.code.copy", "content.code.select", "content.code.annotate", "navigation.footer", "navigation.top"], "search": "../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copiado al portapapeles", "clipboard.copy": "Copiar al portapapeles", "search.result.more.one": "1 m\u00e1s en esta p\u00e1gina", "search.result.more.other": "# m\u00e1s en esta p\u00e1gina", "search.result.none": "No se encontraron documentos", "search.result.one": "1 documento encontrado", "search.result.other": "# documentos encontrados", "search.result.placeholder": "Teclee para comenzar b\u00fasqueda", "search.result.term.missing": "Falta", "select.version": "Seleccionar versi\u00f3n"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.92b07e13.min.js"></script>
      
        <script src="https://unpkg.com/mermaid@10.9.1/dist/mermaid.min.js"></script>
      
    
  </body>
</html>