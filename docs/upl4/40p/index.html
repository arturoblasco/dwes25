
<!doctype html>
<html lang="es" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../407/">
      
      
      
      <link rel="icon" href="../../img/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.18">
    
    
      
        <title>Práctica guiada - Desarrollo Web en Entorno Servidor (DWES)</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.7e37652d.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="amber" data-md-color-accent="amber">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#practica-guiada" class="md-skip">
          Saltar a contenido
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Cabecera">
    <a href="../.." title="Desarrollo Web en Entorno Servidor (DWES)" class="md-header__button md-logo" aria-label="Desarrollo Web en Entorno Servidor (DWES)" data-md-component="logo">
      
  <img src="../../img/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Desarrollo Web en Entorno Servidor (DWES)
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Práctica guiada
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="amber" data-md-color-accent="amber"  aria-label="Cambia a modo oscuro"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Cambia a modo oscuro" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="amber" data-md-color-accent="amber"  aria-label="Cambia a modo normal"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Cambia a modo normal" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m3.55 19.09 1.41 1.41 1.8-1.79-1.42-1.42M12 6c-3.31 0-6 2.69-6 6s2.69 6 6 6 6-2.69 6-6c0-3.32-2.69-6-6-6m8 7h3v-2h-3m-2.76 7.71 1.8 1.79 1.41-1.41-1.79-1.8M20.45 5l-1.41-1.4-1.8 1.79 1.42 1.42M13 1h-2v3h2M6.76 5.39 4.96 3.6 3.55 5l1.79 1.81zM1 13h3v-2H1m12 9h-2v3h2"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Búsqueda" placeholder="Búsqueda" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M9.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L77.3 256l137.3-137.4c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Buscar">
        
        <button type="reset" class="md-search__icon md-icon" title="Limpiar" aria-label="Limpiar" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Inicializando búsqueda
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navegación" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Desarrollo Web en Entorno Servidor (DWES)" class="md-nav__button md-logo" aria-label="Desarrollo Web en Entorno Servidor (DWES)" data-md-component="logo">
      
  <img src="../../img/logo.png" alt="logo">

    </a>
    Desarrollo Web en Entorno Servidor (DWES)
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Inicio
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../contents/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Contenidos
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    PHP
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            PHP
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1" >
        
          
          <label class="md-nav__link" for="__nav_3_1" id="__nav_3_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    UT 1 Arquitectura Web
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1">
            <span class="md-nav__icon md-icon"></span>
            UT 1 Arquitectura Web
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut01/ut0101/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    1.1. Introducción
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut01/ut0102/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    1.2. Arquitecturas web
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut01/ut0103/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    1.3. Generar páginas web
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut01/ut0104/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    1.4. Modelos de programación
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut01/ut0105/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    1.5. Decisiones de diseño
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut01/ut0106/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    1.6. Ejecución del código
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut01/ut0107/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    1.7. Herramientas
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut01/ut0108/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    1.8. Tecnologías
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut01/ut0109/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    1.9. Navegadores
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut01/ut0110/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    1.10. Puesta en marcha
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut01/ut01de/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Descargas
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut01/ut01ac/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Ejercicios
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" >
        
          
          <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    UT 2 Lenguaje PHP
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            UT 2 Lenguaje PHP
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut02/ut0201/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2.1. Introducción
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut02/ut0202/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2.2. PHP
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut02/ut0203/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2.3. Operadores
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut02/ut0204/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2.4. Arrays
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut02/ut0205/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2.5. Funciones
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut02/ut0206/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2.6. Funciones predefinidas
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut02/ut0207/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2.7. Expresiones regulares
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut02/ut02ac/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Ejercicios
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_3" >
        
          
          <label class="md-nav__link" for="__nav_3_3" id="__nav_3_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    UT 3 PHP OO
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_3">
            <span class="md-nav__icon md-icon"></span>
            UT 3 PHP OO
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut03/ut0301/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3.1. Introducción
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut03/ut0302/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3.2. Clases y objetos
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut03/ut0303/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3.3. Encapsulación
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut03/ut0304/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3.4. Constructor
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut03/ut0305/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3.5. Clases estáticas
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut03/ut0306/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3.6. Introspección
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut03/ut0307/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3.7. Herencia
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut03/ut0308/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3.8. Clases abstractas
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut03/ut0309/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3.9. Clases final
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut03/ut0310/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3.10. Interfaces
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut03/ut0311/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3.11. Métodos encadenados
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut03/ut0312/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3.12. Métodos mágicos
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut03/ut0313/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3.13. Espacio de nombres
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut03/ut0314/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3.14. Gestión de errores
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut03/ut0315/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3.15. Excepciones
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut03/ut0316/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3.16. SPL
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut03/ut03ac/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Ejercicios
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_4" >
        
          
          <label class="md-nav__link" for="__nav_3_4" id="__nav_3_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    UT 4 Programación web
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_4">
            <span class="md-nav__icon md-icon"></span>
            UT 4 Programación web
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut04/ut0401/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    4.1. Introducción
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut04/ut0402/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    4.2. Variable de servidor
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut04/ut0403/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    4.3. Formularios
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut04/ut0404/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    4.4.Cabeceras de respuesta
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut04/ut0405/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    4.5. Gestión de estado
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut04/ut0406/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    4.6. Autenticación de usuarios
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut04/ut04ac/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    4. Ejercicios
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Laravel
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Laravel
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_1" >
        
          
          <label class="md-nav__link" for="__nav_4_1" id="__nav_4_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    UPL 1 ED profesional
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_1">
            <span class="md-nav__icon md-icon"></span>
            UPL 1 ED profesional
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../upl1/100/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Introducción
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../upl1/101/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    1.1. Introducción a Laravel 12
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../upl1/102/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    1.2. ¿Cómo Habla una Aplicación Laravel?
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../upl1/103/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    1.3. ¿Dónde Vive y Corre Nuestra Aplicación?
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../upl1/104/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    1.4. Herramientas Esenciales para el Desarrollador
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../upl1/105/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    1.5. El Frontend Moderno: Vite y Tailwind CSS
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../upl1/106/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    1.6. Anatomía de una Aplicación Laravel
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../upl1/10p/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Práctica guiada
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2" >
        
          
          <label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    UPL 2 Fundamentos
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            UPL 2 Fundamentos
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../upl2/200/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Introducción
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../upl2/201/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2.1 Viaje Interno de una Petición
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../upl2/202/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2.2. Mapa de la aplicación
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../upl2/203/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2.3. Vistas dinámicas
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../upl2/204/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2.4. Layouts y herencia en Blade
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../upl2/205/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2.5. Del controlador a la vista
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../upl2/206/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2.6. Datos mock
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../upl2/20p/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Práctica guiada
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3" >
        
          
          <label class="md-nav__link" for="__nav_4_3" id="__nav_4_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    UPL 3 Gestión de datos
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3">
            <span class="md-nav__icon md-icon"></span>
            UPL 3 Gestión de datos
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../upl3/300/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Introducción
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../upl3/301/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3.1. Migraciones y Estructura
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../upl3/302/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3.2. Eloquent ORM
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../upl3/303/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3.3. CRUD con Eloquent
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../upl3/304/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3.4. Relaciones Eloquent
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../upl3/305/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3.5. Seeders y Factories
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../upl3/30p/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Práctica guiada
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4_4" id="__nav_4_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    UPL 4 Gestión de datos
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4_4">
            <span class="md-nav__icon md-icon"></span>
            UPL 4 Gestión de datos
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../400/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Introducción
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../401/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    4.1. Formularios Seguros
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../402/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    4.2. Sistema de Validación
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../403/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    4.3. Manejo de Sesiones y Estado
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../404/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    4.4. Autenticación básica
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../405/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    4.5. Middleware personalizado
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../406/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    4.6. Blade Components para Layouts
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../407/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    4.7. Sistema de almacenamiento de archivos
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Práctica guiada
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Práctica guiada
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Tabla de contenidos">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Tabla de contenidos
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#objetivo" class="md-nav__link">
    <span class="md-ellipsis">
      Objetivo
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Objetivo">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#filosofia-de-trabajo" class="md-nav__link">
    <span class="md-ellipsis">
      Filosofía de Trabajo
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fase-1-verificar-el-estado-del-proyecto" class="md-nav__link">
    <span class="md-ellipsis">
      FASE 1: Verificar el Estado del Proyecto
    </span>
  </a>
  
    <nav class="md-nav" aria-label="FASE 1: Verificar el Estado del Proyecto">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-arrancar-los-contenedores-de-laravel-sail" class="md-nav__link">
    <span class="md-ellipsis">
      1. Arrancar los Contenedores de Laravel Sail
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-verificar-que-la-aplicacion-funciona" class="md-nav__link">
    <span class="md-ellipsis">
      2. Verificar que la Aplicación Funciona
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-verificar-las-rutas-actuales" class="md-nav__link">
    <span class="md-ellipsis">
      3. Verificar las Rutas Actuales
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fase-2-preparar-layouts-para-separacion-publicaprivada" class="md-nav__link">
    <span class="md-ellipsis">
      FASE 2: Preparar Layouts para Separación Pública/Privada
    </span>
  </a>
  
    <nav class="md-nav" aria-label="FASE 2: Preparar Layouts para Separación Pública/Privada">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-por-que-separar-los-layouts" class="md-nav__link">
    <span class="md-ellipsis">
      1. ¿Por Qué Separar los Layouts?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-renombrar-el-layout" class="md-nav__link">
    <span class="md-ellipsis">
      2. Renombrar el layout
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-actualizar-las-vistas-publicas" class="md-nav__link">
    <span class="md-ellipsis">
      3. Actualizar las Vistas Públicas
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-verificar-que-la-aplicacion-sigue-funcionando" class="md-nav__link">
    <span class="md-ellipsis">
      4. Verificar que la Aplicación Sigue Funcionando
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fase-3-instalar-y-configurar-laravel-breeze" class="md-nav__link">
    <span class="md-ellipsis">
      FASE 3: Instalar y Configurar Laravel Breeze
    </span>
  </a>
  
    <nav class="md-nav" aria-label="FASE 3: Instalar y Configurar Laravel Breeze">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-que-es-laravel-breeze" class="md-nav__link">
    <span class="md-ellipsis">
      1. ¿Qué es Laravel Breeze?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-instalar-laravel-breeze" class="md-nav__link">
    <span class="md-ellipsis">
      2. Instalar Laravel Breeze
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-instalar-el-stack-de-autenticacion-blade" class="md-nav__link">
    <span class="md-ellipsis">
      3. Instalar el Stack de Autenticación Blade
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-instalar-dependencias-de-npm" class="md-nav__link">
    <span class="md-ellipsis">
      4. Instalar Dependencias de NPM
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-verificar-las-nuevas-rutas-de-autenticacion" class="md-nav__link">
    <span class="md-ellipsis">
      5. Verificar las Nuevas Rutas de Autenticación
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6-probar-las-paginas-de-autenticacion" class="md-nav__link">
    <span class="md-ellipsis">
      6. Probar las Páginas de Autenticación
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fase-4-crear-un-usuario-de-prueba" class="md-nav__link">
    <span class="md-ellipsis">
      FASE 4: Crear un Usuario de Prueba
    </span>
  </a>
  
    <nav class="md-nav" aria-label="FASE 4: Crear un Usuario de Prueba">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-registrar-un-usuario-manualmente" class="md-nav__link">
    <span class="md-ellipsis">
      1. Registrar un Usuario Manualmente
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-crear-usuarios-desde-tinker-opcional" class="md-nav__link">
    <span class="md-ellipsis">
      2. Crear Usuarios desde Tinker (Opcional)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-verificar-los-usuarios-creados" class="md-nav__link">
    <span class="md-ellipsis">
      3. Verificar los Usuarios Creados
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fase-5-proteger-rutas-y-definir-la-arquitectura-admin" class="md-nav__link">
    <span class="md-ellipsis">
      FASE 5: Proteger Rutas y Definir la Arquitectura Admin
    </span>
  </a>
  
    <nav class="md-nav" aria-label="FASE 5: Proteger Rutas y Definir la Arquitectura Admin">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-que-es-el-middleware-de-autenticacion" class="md-nav__link">
    <span class="md-ellipsis">
      1. ¿Qué es el Middleware de Autenticación?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-actualizar-el-archivo-de-rutas-webphp" class="md-nav__link">
    <span class="md-ellipsis">
      2. Actualizar el Archivo de Rutas (web.php)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-anadir-enlaces-de-administracion-al-menu-de-navegacion" class="md-nav__link">
    <span class="md-ellipsis">
      3. Añadir enlaces de administración al menú de navegación
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fase-6-configurar-el-sistema-de-almacenamiento-de-archivos" class="md-nav__link">
    <span class="md-ellipsis">
      FASE 6: Configurar el Sistema de Almacenamiento de Archivos
    </span>
  </a>
  
    <nav class="md-nav" aria-label="FASE 6: Configurar el Sistema de Almacenamiento de Archivos">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-crear-el-enlace-simbolico" class="md-nav__link">
    <span class="md-ellipsis">
      1. Crear el Enlace Simbólico
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-anadir-el-campo-de-imagen-a-la-tabla-de-productos" class="md-nav__link">
    <span class="md-ellipsis">
      2. Añadir el Campo de Imagen a la Tabla de Productos
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-actualizar-el-modelo-product-para-permitir-el-campo-image" class="md-nav__link">
    <span class="md-ellipsis">
      3. Actualizar el Modelo Product para Permitir el Campo image
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-implementar-sistema-de-notificaciones-flash-messages" class="md-nav__link">
    <span class="md-ellipsis">
      4. Implementar Sistema de Notificaciones (Flash Messages)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4. Implementar Sistema de Notificaciones (Flash Messages)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#paso-1-crear-el-partial-de-notificaciones" class="md-nav__link">
    <span class="md-ellipsis">
      Paso 1: Crear el Partial de Notificaciones
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#paso-2-actualizar-el-layout-de-administracion" class="md-nav__link">
    <span class="md-ellipsis">
      Paso 2: Actualizar el Layout de Administración
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#paso-3-actualizar-el-layout-publico" class="md-nav__link">
    <span class="md-ellipsis">
      Paso 3: Actualizar el Layout Público
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fase-7-implementar-creacion-de-productos-create" class="md-nav__link">
    <span class="md-ellipsis">
      FASE 7: Implementar Creación de Productos (CREATE)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="FASE 7: Implementar Creación de Productos (CREATE)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-los-metodos-create-en-los-controladores" class="md-nav__link">
    <span class="md-ellipsis">
      1. Los Métodos create() en los Controladores
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-crear-formularios" class="md-nav__link">
    <span class="md-ellipsis">
      3. Crear formularios ​
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3. Crear formularios ​">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#formulario-para-productos" class="md-nav__link">
    <span class="md-ellipsis">
      Formulario para Productos
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-implementar-la-validacion-y-almacenamiento" class="md-nav__link">
    <span class="md-ellipsis">
      3. Implementar la Validación y Almacenamiento
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3. Implementar la Validación y Almacenamiento">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#almacenar-productos" class="md-nav__link">
    <span class="md-ellipsis">
      Almacenar Productos
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-anadir-las-imagenes-en-las-vistas-publicas" class="md-nav__link">
    <span class="md-ellipsis">
      3. Añadir las imágenes en las vistas publicas
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3. Añadir las imágenes en las vistas publicas">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#actualizar-el-componente-product-card-para-mostrar-imagenes" class="md-nav__link">
    <span class="md-ellipsis">
      Actualizar el Componente product-card para Mostrar Imágenes
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fase-8-crear-el-panel-de-administracion" class="md-nav__link">
    <span class="md-ellipsis">
      FASE 8: Crear el Panel de Administración
    </span>
  </a>
  
    <nav class="md-nav" aria-label="FASE 8: Crear el Panel de Administración">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-crear-metodos-adminindex-en-los-controladores" class="md-nav__link">
    <span class="md-ellipsis">
      1. Crear Métodos adminIndex en los Controladores
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-crear-la-vista-de-administracion" class="md-nav__link">
    <span class="md-ellipsis">
      2. Crear la Vista de Administración
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-anadir-enlaces-de-administracion-al-menu-de-navegacion_1" class="md-nav__link">
    <span class="md-ellipsis">
      3. Añadir Enlaces de Administración al Menú de Navegación
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fase-9-implementar-actualizacion-y-eliminacion-de-productos" class="md-nav__link">
    <span class="md-ellipsis">
      FASE 9: Implementar Actualización y Eliminación de Productos
    </span>
  </a>
  
    <nav class="md-nav" aria-label="FASE 9: Implementar Actualización y Eliminación de Productos">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-implementar-el-metodo-edit" class="md-nav__link">
    <span class="md-ellipsis">
      1. Implementar el método edit()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-crear-el-formulario-de-edicion" class="md-nav__link">
    <span class="md-ellipsis">
      2. Crear el Formulario de Edición
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-implementar-la-logica-de-actualizacion-y-eliminacion" class="md-nav__link">
    <span class="md-ellipsis">
      3. Implementar la Lógica de Actualización y Eliminación
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3. Implementar la Lógica de Actualización y Eliminación">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#paso-1-anadir-los-imports-necesarios" class="md-nav__link">
    <span class="md-ellipsis">
      Paso 1: Añadir los Imports Necesarios
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#paso-2-actualizar-el-metodo-update" class="md-nav__link">
    <span class="md-ellipsis">
      Paso 2: Actualizar el Método update()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#paso-3-actualizar-el-metodo-destroy" class="md-nav__link">
    <span class="md-ellipsis">
      Paso 3: Actualizar el Método destroy()
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fase-10-implementar-el-carrito-de-compras-con-sesiones" class="md-nav__link">
    <span class="md-ellipsis">
      FASE 10: Implementar el Carrito de Compras con Sesiones
    </span>
  </a>
  
    <nav class="md-nav" aria-label="FASE 10: Implementar el Carrito de Compras con Sesiones">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-como-funcionara" class="md-nav__link">
    <span class="md-ellipsis">
      1. ¿Cómo Funcionará?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-refactorizar-el-cartcontroller-para-usar-sesiones" class="md-nav__link">
    <span class="md-ellipsis">
      2. Refactorizar el CartController para Usar Sesiones
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-anadir-las-rutas-avanzadas-del-carrito" class="md-nav__link">
    <span class="md-ellipsis">
      3. Añadir las Rutas Avanzadas del Carrito
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-actualizar-las-vistas-para-la-funcionalidad-del-carrito" class="md-nav__link">
    <span class="md-ellipsis">
      4. Actualizar las Vistas para la Funcionalidad del Carrito
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4. Actualizar las Vistas para la Funcionalidad del Carrito">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#boton-anadir-al-carrito" class="md-nav__link">
    <span class="md-ellipsis">
      Botón "Añadir al Carrito"
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vista-del-carrito-cartindex" class="md-nav__link">
    <span class="md-ellipsis">
      Vista del Carrito (cart.index)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#actualizar-el-contador-del-carrito-en-el-header" class="md-nav__link">
    <span class="md-ellipsis">
      Actualizar el Contador del Carrito en el Header
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fase-11-anadir-lista-de-deseos" class="md-nav__link">
    <span class="md-ellipsis">
      FASE 11: Añadir lista de deseos
    </span>
  </a>
  
    <nav class="md-nav" aria-label="FASE 11: Añadir lista de deseos">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-como-funciona-la-lista-de-deseos" class="md-nav__link">
    <span class="md-ellipsis">
      1. ¿Cómo funciona la Lista de Deseos?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-crear-el-controlador-de-wishlist" class="md-nav__link">
    <span class="md-ellipsis">
      2. Crear el Controlador de Wishlist
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-anadir-las-rutas-de-wishlist" class="md-nav__link">
    <span class="md-ellipsis">
      3. Añadir las Rutas de Wishlist
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-crear-la-vista-de-wishlist" class="md-nav__link">
    <span class="md-ellipsis">
      4. Crear la Vista de Wishlist
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-anadir-boton-anadir-a-favoritos-en-vista-publica" class="md-nav__link">
    <span class="md-ellipsis">
      5. Añadir Botón "Añadir a Favoritos" en Vista Pública
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6-anadir-enlace-de-wishlist-al-menu-de-navegacion" class="md-nav__link">
    <span class="md-ellipsis">
      6. Añadir Enlace de Wishlist al Menú de Navegación
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fase-12-middleware-personalizado" class="md-nav__link">
    <span class="md-ellipsis">
      FASE 12: Middleware Personalizado
    </span>
  </a>
  
    <nav class="md-nav" aria-label="FASE 12: Middleware Personalizado">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-crear-el-middleware" class="md-nav__link">
    <span class="md-ellipsis">
      1. Crear el Middleware
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-registrar-el-middleware-con-alias" class="md-nav__link">
    <span class="md-ellipsis">
      2. Registrar el Middleware con Alias
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-aplicar-el-middleware-solo-a-rutas-de-administracion" class="md-nav__link">
    <span class="md-ellipsis">
      3. Aplicar el Middleware Solo a Rutas de Administración
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-ver-los-logs" class="md-nav__link">
    <span class="md-ellipsis">
      4. Ver los Logs ​
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fase-13-probar-la-aplicacion-completa" class="md-nav__link">
    <span class="md-ellipsis">
      FASE 13: Probar la Aplicación Completa
    </span>
  </a>
  
    <nav class="md-nav" aria-label="FASE 13: Probar la Aplicación Completa">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-lista-de-verificacion" class="md-nav__link">
    <span class="md-ellipsis">
      1. Lista de Verificación
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1. Lista de Verificación">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#autenticacion" class="md-nav__link">
    <span class="md-ellipsis">
      Autenticación
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#crud-de-productos-admin" class="md-nav__link">
    <span class="md-ellipsis">
      CRUD de Productos (Admin)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#carrito-de-compras" class="md-nav__link">
    <span class="md-ellipsis">
      Carrito de Compras
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lista-de-deseos" class="md-nav__link">
    <span class="md-ellipsis">
      Lista de Deseos
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#middleware-de-actividad" class="md-nav__link">
    <span class="md-ellipsis">
      Middleware de Actividad
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#requisitos-de-entrega" class="md-nav__link">
    <span class="md-ellipsis">
      Requisitos de Entrega
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Requisitos de Entrega">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#captura-1-preparacion-de-layouts-fase-2" class="md-nav__link">
    <span class="md-ellipsis">
      Captura 1: Preparación de Layouts (FASE 2)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#captura-2-instalacion-de-breeze-fase-3" class="md-nav__link">
    <span class="md-ellipsis">
      Captura 2: Instalación de Breeze (FASE 3)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#captura-3-panel-de-administracion-con-navegacion-fase-8" class="md-nav__link">
    <span class="md-ellipsis">
      Captura 3: Panel de Administración con Navegación (FASE 8)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#captura-4-flujo-de-creacion-completo-fase-7-y-8" class="md-nav__link">
    <span class="md-ellipsis">
      Captura 4: Flujo de Creación Completo (FASE 7 y 8)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#captura-5-flujo-de-edicion-completo-fase-9" class="md-nav__link">
    <span class="md-ellipsis">
      Captura 5: Flujo de Edición Completo (FASE 9)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#captura-6-flujo-de-eliminacion-fase-9" class="md-nav__link">
    <span class="md-ellipsis">
      Captura 6: Flujo de Eliminación (FASE 9)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#captura-7-carrito-de-compras-con-sesiones-fase-10" class="md-nav__link">
    <span class="md-ellipsis">
      Captura 7: Carrito de Compras con Sesiones (Fase 10)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#captura-8-lista-de-deseos-fase-11" class="md-nav__link">
    <span class="md-ellipsis">
      Captura 8: Lista de deseos (Fase 11)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#captura-9-middleware-de-registro-de-actividad-fase-12" class="md-nav__link">
    <span class="md-ellipsis">
      Captura 9: Middleware de Registro de Actividad (FASE 12)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#instrucciones-de-entrega" class="md-nav__link">
    <span class="md-ellipsis">
      📤 Instrucciones de Entrega
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Tabla de contenidos">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Tabla de contenidos
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#objetivo" class="md-nav__link">
    <span class="md-ellipsis">
      Objetivo
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Objetivo">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#filosofia-de-trabajo" class="md-nav__link">
    <span class="md-ellipsis">
      Filosofía de Trabajo
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fase-1-verificar-el-estado-del-proyecto" class="md-nav__link">
    <span class="md-ellipsis">
      FASE 1: Verificar el Estado del Proyecto
    </span>
  </a>
  
    <nav class="md-nav" aria-label="FASE 1: Verificar el Estado del Proyecto">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-arrancar-los-contenedores-de-laravel-sail" class="md-nav__link">
    <span class="md-ellipsis">
      1. Arrancar los Contenedores de Laravel Sail
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-verificar-que-la-aplicacion-funciona" class="md-nav__link">
    <span class="md-ellipsis">
      2. Verificar que la Aplicación Funciona
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-verificar-las-rutas-actuales" class="md-nav__link">
    <span class="md-ellipsis">
      3. Verificar las Rutas Actuales
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fase-2-preparar-layouts-para-separacion-publicaprivada" class="md-nav__link">
    <span class="md-ellipsis">
      FASE 2: Preparar Layouts para Separación Pública/Privada
    </span>
  </a>
  
    <nav class="md-nav" aria-label="FASE 2: Preparar Layouts para Separación Pública/Privada">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-por-que-separar-los-layouts" class="md-nav__link">
    <span class="md-ellipsis">
      1. ¿Por Qué Separar los Layouts?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-renombrar-el-layout" class="md-nav__link">
    <span class="md-ellipsis">
      2. Renombrar el layout
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-actualizar-las-vistas-publicas" class="md-nav__link">
    <span class="md-ellipsis">
      3. Actualizar las Vistas Públicas
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-verificar-que-la-aplicacion-sigue-funcionando" class="md-nav__link">
    <span class="md-ellipsis">
      4. Verificar que la Aplicación Sigue Funcionando
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fase-3-instalar-y-configurar-laravel-breeze" class="md-nav__link">
    <span class="md-ellipsis">
      FASE 3: Instalar y Configurar Laravel Breeze
    </span>
  </a>
  
    <nav class="md-nav" aria-label="FASE 3: Instalar y Configurar Laravel Breeze">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-que-es-laravel-breeze" class="md-nav__link">
    <span class="md-ellipsis">
      1. ¿Qué es Laravel Breeze?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-instalar-laravel-breeze" class="md-nav__link">
    <span class="md-ellipsis">
      2. Instalar Laravel Breeze
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-instalar-el-stack-de-autenticacion-blade" class="md-nav__link">
    <span class="md-ellipsis">
      3. Instalar el Stack de Autenticación Blade
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-instalar-dependencias-de-npm" class="md-nav__link">
    <span class="md-ellipsis">
      4. Instalar Dependencias de NPM
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-verificar-las-nuevas-rutas-de-autenticacion" class="md-nav__link">
    <span class="md-ellipsis">
      5. Verificar las Nuevas Rutas de Autenticación
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6-probar-las-paginas-de-autenticacion" class="md-nav__link">
    <span class="md-ellipsis">
      6. Probar las Páginas de Autenticación
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fase-4-crear-un-usuario-de-prueba" class="md-nav__link">
    <span class="md-ellipsis">
      FASE 4: Crear un Usuario de Prueba
    </span>
  </a>
  
    <nav class="md-nav" aria-label="FASE 4: Crear un Usuario de Prueba">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-registrar-un-usuario-manualmente" class="md-nav__link">
    <span class="md-ellipsis">
      1. Registrar un Usuario Manualmente
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-crear-usuarios-desde-tinker-opcional" class="md-nav__link">
    <span class="md-ellipsis">
      2. Crear Usuarios desde Tinker (Opcional)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-verificar-los-usuarios-creados" class="md-nav__link">
    <span class="md-ellipsis">
      3. Verificar los Usuarios Creados
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fase-5-proteger-rutas-y-definir-la-arquitectura-admin" class="md-nav__link">
    <span class="md-ellipsis">
      FASE 5: Proteger Rutas y Definir la Arquitectura Admin
    </span>
  </a>
  
    <nav class="md-nav" aria-label="FASE 5: Proteger Rutas y Definir la Arquitectura Admin">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-que-es-el-middleware-de-autenticacion" class="md-nav__link">
    <span class="md-ellipsis">
      1. ¿Qué es el Middleware de Autenticación?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-actualizar-el-archivo-de-rutas-webphp" class="md-nav__link">
    <span class="md-ellipsis">
      2. Actualizar el Archivo de Rutas (web.php)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-anadir-enlaces-de-administracion-al-menu-de-navegacion" class="md-nav__link">
    <span class="md-ellipsis">
      3. Añadir enlaces de administración al menú de navegación
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fase-6-configurar-el-sistema-de-almacenamiento-de-archivos" class="md-nav__link">
    <span class="md-ellipsis">
      FASE 6: Configurar el Sistema de Almacenamiento de Archivos
    </span>
  </a>
  
    <nav class="md-nav" aria-label="FASE 6: Configurar el Sistema de Almacenamiento de Archivos">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-crear-el-enlace-simbolico" class="md-nav__link">
    <span class="md-ellipsis">
      1. Crear el Enlace Simbólico
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-anadir-el-campo-de-imagen-a-la-tabla-de-productos" class="md-nav__link">
    <span class="md-ellipsis">
      2. Añadir el Campo de Imagen a la Tabla de Productos
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-actualizar-el-modelo-product-para-permitir-el-campo-image" class="md-nav__link">
    <span class="md-ellipsis">
      3. Actualizar el Modelo Product para Permitir el Campo image
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-implementar-sistema-de-notificaciones-flash-messages" class="md-nav__link">
    <span class="md-ellipsis">
      4. Implementar Sistema de Notificaciones (Flash Messages)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4. Implementar Sistema de Notificaciones (Flash Messages)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#paso-1-crear-el-partial-de-notificaciones" class="md-nav__link">
    <span class="md-ellipsis">
      Paso 1: Crear el Partial de Notificaciones
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#paso-2-actualizar-el-layout-de-administracion" class="md-nav__link">
    <span class="md-ellipsis">
      Paso 2: Actualizar el Layout de Administración
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#paso-3-actualizar-el-layout-publico" class="md-nav__link">
    <span class="md-ellipsis">
      Paso 3: Actualizar el Layout Público
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fase-7-implementar-creacion-de-productos-create" class="md-nav__link">
    <span class="md-ellipsis">
      FASE 7: Implementar Creación de Productos (CREATE)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="FASE 7: Implementar Creación de Productos (CREATE)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-los-metodos-create-en-los-controladores" class="md-nav__link">
    <span class="md-ellipsis">
      1. Los Métodos create() en los Controladores
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-crear-formularios" class="md-nav__link">
    <span class="md-ellipsis">
      3. Crear formularios ​
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3. Crear formularios ​">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#formulario-para-productos" class="md-nav__link">
    <span class="md-ellipsis">
      Formulario para Productos
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-implementar-la-validacion-y-almacenamiento" class="md-nav__link">
    <span class="md-ellipsis">
      3. Implementar la Validación y Almacenamiento
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3. Implementar la Validación y Almacenamiento">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#almacenar-productos" class="md-nav__link">
    <span class="md-ellipsis">
      Almacenar Productos
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-anadir-las-imagenes-en-las-vistas-publicas" class="md-nav__link">
    <span class="md-ellipsis">
      3. Añadir las imágenes en las vistas publicas
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3. Añadir las imágenes en las vistas publicas">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#actualizar-el-componente-product-card-para-mostrar-imagenes" class="md-nav__link">
    <span class="md-ellipsis">
      Actualizar el Componente product-card para Mostrar Imágenes
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fase-8-crear-el-panel-de-administracion" class="md-nav__link">
    <span class="md-ellipsis">
      FASE 8: Crear el Panel de Administración
    </span>
  </a>
  
    <nav class="md-nav" aria-label="FASE 8: Crear el Panel de Administración">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-crear-metodos-adminindex-en-los-controladores" class="md-nav__link">
    <span class="md-ellipsis">
      1. Crear Métodos adminIndex en los Controladores
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-crear-la-vista-de-administracion" class="md-nav__link">
    <span class="md-ellipsis">
      2. Crear la Vista de Administración
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-anadir-enlaces-de-administracion-al-menu-de-navegacion_1" class="md-nav__link">
    <span class="md-ellipsis">
      3. Añadir Enlaces de Administración al Menú de Navegación
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fase-9-implementar-actualizacion-y-eliminacion-de-productos" class="md-nav__link">
    <span class="md-ellipsis">
      FASE 9: Implementar Actualización y Eliminación de Productos
    </span>
  </a>
  
    <nav class="md-nav" aria-label="FASE 9: Implementar Actualización y Eliminación de Productos">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-implementar-el-metodo-edit" class="md-nav__link">
    <span class="md-ellipsis">
      1. Implementar el método edit()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-crear-el-formulario-de-edicion" class="md-nav__link">
    <span class="md-ellipsis">
      2. Crear el Formulario de Edición
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-implementar-la-logica-de-actualizacion-y-eliminacion" class="md-nav__link">
    <span class="md-ellipsis">
      3. Implementar la Lógica de Actualización y Eliminación
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3. Implementar la Lógica de Actualización y Eliminación">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#paso-1-anadir-los-imports-necesarios" class="md-nav__link">
    <span class="md-ellipsis">
      Paso 1: Añadir los Imports Necesarios
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#paso-2-actualizar-el-metodo-update" class="md-nav__link">
    <span class="md-ellipsis">
      Paso 2: Actualizar el Método update()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#paso-3-actualizar-el-metodo-destroy" class="md-nav__link">
    <span class="md-ellipsis">
      Paso 3: Actualizar el Método destroy()
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fase-10-implementar-el-carrito-de-compras-con-sesiones" class="md-nav__link">
    <span class="md-ellipsis">
      FASE 10: Implementar el Carrito de Compras con Sesiones
    </span>
  </a>
  
    <nav class="md-nav" aria-label="FASE 10: Implementar el Carrito de Compras con Sesiones">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-como-funcionara" class="md-nav__link">
    <span class="md-ellipsis">
      1. ¿Cómo Funcionará?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-refactorizar-el-cartcontroller-para-usar-sesiones" class="md-nav__link">
    <span class="md-ellipsis">
      2. Refactorizar el CartController para Usar Sesiones
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-anadir-las-rutas-avanzadas-del-carrito" class="md-nav__link">
    <span class="md-ellipsis">
      3. Añadir las Rutas Avanzadas del Carrito
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-actualizar-las-vistas-para-la-funcionalidad-del-carrito" class="md-nav__link">
    <span class="md-ellipsis">
      4. Actualizar las Vistas para la Funcionalidad del Carrito
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4. Actualizar las Vistas para la Funcionalidad del Carrito">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#boton-anadir-al-carrito" class="md-nav__link">
    <span class="md-ellipsis">
      Botón "Añadir al Carrito"
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vista-del-carrito-cartindex" class="md-nav__link">
    <span class="md-ellipsis">
      Vista del Carrito (cart.index)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#actualizar-el-contador-del-carrito-en-el-header" class="md-nav__link">
    <span class="md-ellipsis">
      Actualizar el Contador del Carrito en el Header
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fase-11-anadir-lista-de-deseos" class="md-nav__link">
    <span class="md-ellipsis">
      FASE 11: Añadir lista de deseos
    </span>
  </a>
  
    <nav class="md-nav" aria-label="FASE 11: Añadir lista de deseos">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-como-funciona-la-lista-de-deseos" class="md-nav__link">
    <span class="md-ellipsis">
      1. ¿Cómo funciona la Lista de Deseos?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-crear-el-controlador-de-wishlist" class="md-nav__link">
    <span class="md-ellipsis">
      2. Crear el Controlador de Wishlist
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-anadir-las-rutas-de-wishlist" class="md-nav__link">
    <span class="md-ellipsis">
      3. Añadir las Rutas de Wishlist
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-crear-la-vista-de-wishlist" class="md-nav__link">
    <span class="md-ellipsis">
      4. Crear la Vista de Wishlist
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-anadir-boton-anadir-a-favoritos-en-vista-publica" class="md-nav__link">
    <span class="md-ellipsis">
      5. Añadir Botón "Añadir a Favoritos" en Vista Pública
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6-anadir-enlace-de-wishlist-al-menu-de-navegacion" class="md-nav__link">
    <span class="md-ellipsis">
      6. Añadir Enlace de Wishlist al Menú de Navegación
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fase-12-middleware-personalizado" class="md-nav__link">
    <span class="md-ellipsis">
      FASE 12: Middleware Personalizado
    </span>
  </a>
  
    <nav class="md-nav" aria-label="FASE 12: Middleware Personalizado">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-crear-el-middleware" class="md-nav__link">
    <span class="md-ellipsis">
      1. Crear el Middleware
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-registrar-el-middleware-con-alias" class="md-nav__link">
    <span class="md-ellipsis">
      2. Registrar el Middleware con Alias
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-aplicar-el-middleware-solo-a-rutas-de-administracion" class="md-nav__link">
    <span class="md-ellipsis">
      3. Aplicar el Middleware Solo a Rutas de Administración
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-ver-los-logs" class="md-nav__link">
    <span class="md-ellipsis">
      4. Ver los Logs ​
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fase-13-probar-la-aplicacion-completa" class="md-nav__link">
    <span class="md-ellipsis">
      FASE 13: Probar la Aplicación Completa
    </span>
  </a>
  
    <nav class="md-nav" aria-label="FASE 13: Probar la Aplicación Completa">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-lista-de-verificacion" class="md-nav__link">
    <span class="md-ellipsis">
      1. Lista de Verificación
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1. Lista de Verificación">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#autenticacion" class="md-nav__link">
    <span class="md-ellipsis">
      Autenticación
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#crud-de-productos-admin" class="md-nav__link">
    <span class="md-ellipsis">
      CRUD de Productos (Admin)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#carrito-de-compras" class="md-nav__link">
    <span class="md-ellipsis">
      Carrito de Compras
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lista-de-deseos" class="md-nav__link">
    <span class="md-ellipsis">
      Lista de Deseos
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#middleware-de-actividad" class="md-nav__link">
    <span class="md-ellipsis">
      Middleware de Actividad
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#requisitos-de-entrega" class="md-nav__link">
    <span class="md-ellipsis">
      Requisitos de Entrega
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Requisitos de Entrega">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#captura-1-preparacion-de-layouts-fase-2" class="md-nav__link">
    <span class="md-ellipsis">
      Captura 1: Preparación de Layouts (FASE 2)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#captura-2-instalacion-de-breeze-fase-3" class="md-nav__link">
    <span class="md-ellipsis">
      Captura 2: Instalación de Breeze (FASE 3)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#captura-3-panel-de-administracion-con-navegacion-fase-8" class="md-nav__link">
    <span class="md-ellipsis">
      Captura 3: Panel de Administración con Navegación (FASE 8)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#captura-4-flujo-de-creacion-completo-fase-7-y-8" class="md-nav__link">
    <span class="md-ellipsis">
      Captura 4: Flujo de Creación Completo (FASE 7 y 8)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#captura-5-flujo-de-edicion-completo-fase-9" class="md-nav__link">
    <span class="md-ellipsis">
      Captura 5: Flujo de Edición Completo (FASE 9)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#captura-6-flujo-de-eliminacion-fase-9" class="md-nav__link">
    <span class="md-ellipsis">
      Captura 6: Flujo de Eliminación (FASE 9)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#captura-7-carrito-de-compras-con-sesiones-fase-10" class="md-nav__link">
    <span class="md-ellipsis">
      Captura 7: Carrito de Compras con Sesiones (Fase 10)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#captura-8-lista-de-deseos-fase-11" class="md-nav__link">
    <span class="md-ellipsis">
      Captura 8: Lista de deseos (Fase 11)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#captura-9-middleware-de-registro-de-actividad-fase-12" class="md-nav__link">
    <span class="md-ellipsis">
      Captura 9: Middleware de Registro de Actividad (FASE 12)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#instrucciones-de-entrega" class="md-nav__link">
    <span class="md-ellipsis">
      📤 Instrucciones de Entrega
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="practica-guiada">Práctica guiada<a class="headerlink" href="#practica-guiada" title="Permanent link">&para;</a></h1>
<h2 id="objetivo">Objetivo<a class="headerlink" href="#objetivo" title="Permanent link">&para;</a></h2>
<p>El objetivo de esta práctica es completar la tienda online implementando un sistema completo de autenticación de usuarios, formularios seguros con protección CSRF, validación robusta de datos, manejo de sesiones y middleware personalizado. Esta es la práctica final que hará que la aplicación sea 100% funcional, segura y lista para producción.</p>
<h3 id="filosofia-de-trabajo">Filosofía de Trabajo<a class="headerlink" href="#filosofia-de-trabajo" title="Permanent link">&para;</a></h3>
<p>Esta práctica representa la culminación del proyecto de tienda online iniciado en la Práctica 1. Se integrarán todas las funcionalidades aprendidas (rutas, controladores, vistas, modelos, relaciones) añadiendo la capa de seguridad y gestión de usuarios necesaria para una aplicación web profesional.</p>
<p>Continuación de la Práctica 3</p>
<p>Esta práctica está basada en la tienda online con <strong>persistencia de datos real</strong> creada en la <strong>Práctica 3</strong>. Se añadirá autenticación de usuarios, formularios seguros y protección de rutas para completar la funcionalidad CRUD.</p>
<p><strong>Base de Datos</strong>: Se utilizará MySQL a través de Laravel Sail con los modelos Eloquent ya creados (Product, Category, Offer, User).</p>
<p><strong>Funcionalidad</strong>: Los usuarios autenticados podrán crear, editar y eliminar productos. Los usuarios no autenticados solo podrán ver los productos.</p>
<hr />
<h2 id="fase-1-verificar-el-estado-del-proyecto">FASE 1: Verificar el Estado del Proyecto<a class="headerlink" href="#fase-1-verificar-el-estado-del-proyecto" title="Permanent link">&para;</a></h2>
<h3 id="1-arrancar-los-contenedores-de-laravel-sail">1. Arrancar los Contenedores de Laravel Sail<a class="headerlink" href="#1-arrancar-los-contenedores-de-laravel-sail" title="Permanent link">&para;</a></h3>
<p>Antes de comenzar, asegúrate de que el entorno de desarrollo esté funcionando correctamente.</p>
<details class="questionlaravel">
<summary>Ejecuta":</summary>
<div class="highlight"><pre><span></span><code>sail<span class="w"> </span>up<span class="w"> </span>-d
</code></pre></div>
</details>
<details class="examplelaravel">
<summary>Ejemplo de respuesta</summary>
<div class="highlight"><pre><span></span><code>artur@pc_classe:~/development/laravel/MyShop$<span class="w"> </span>sail<span class="w"> </span>up<span class="w"> </span>-d
<span class="o">[</span>+<span class="o">]</span><span class="w"> </span>Running<span class="w"> </span><span class="m">3</span>/3
✔<span class="w"> </span>Container<span class="w"> </span>myshop-mysql-1<span class="w">        </span>Running<span class="w">                          </span><span class="m">0</span>.0s
✔<span class="w"> </span>Container<span class="w"> </span>myshop-redis-1<span class="w">        </span>Running<span class="w">                          </span><span class="m">0</span>.0s
✔<span class="w"> </span>Container<span class="w"> </span>myshop-laravel.test-1<span class="w"> </span>Running<span class="w">                          </span><span class="m">0</span>.0s
</code></pre></div>
</details>
<h3 id="2-verificar-que-la-aplicacion-funciona">2. Verificar que la Aplicación Funciona<a class="headerlink" href="#2-verificar-que-la-aplicacion-funciona" title="Permanent link">&para;</a></h3>
<p>Abre tu navegador y accede a <code>http://localhost</code>. Deberías ver tu tienda online con los productos, categorías y ofertas funcionando correctamente desde la Práctica 3.</p>
<blockquote>
<p><strong>Importante</strong></p>
<p>Si la aplicación no funciona correctamente, revisa que:</p>
<ul>
<li>Los contenedores Docker estén ejecutándose (<code>sail ps</code>)</li>
<li>La base de datos tenga datos (ejecuta <code>sail artisan db:seed</code> si es necesario)</li>
<li>Las migraciones estén aplicadas (<code>sail artisan migrate:status</code>)</li>
</ul>
</blockquote>
<h3 id="3-verificar-las-rutas-actuales">3. Verificar las Rutas Actuales<a class="headerlink" href="#3-verificar-las-rutas-actuales" title="Permanent link">&para;</a></h3>
<p>Antes de añadir autenticación, vamos a ver qué rutas tiene nuestra aplicación actualmente.</p>
<details class="questionlaravel">
<summary>Ejecuta</summary>
<div class="highlight"><pre><span></span><code>sail<span class="w"> </span>artisan<span class="w"> </span>route:list
</code></pre></div>
</details>
<details class="examplelaravel">
<summary>Ejemplo de respuesta</summary>
<div class="highlight"><pre><span></span><code>artur@pc_classe:~/development/laravel/MyShop$<span class="w"> </span>sail<span class="w"> </span>artisan<span class="w"> </span>route:list

GET<span class="p">|</span>HEAD<span class="w">        </span>/<span class="w"> </span>..................................<span class="w"> </span>welcome<span class="w"> </span>›<span class="w"> </span>WelcomeController@index
GET<span class="p">|</span>HEAD<span class="w">        </span>cart<span class="w"> </span>...............................<span class="w"> </span>cart.index<span class="w"> </span>›<span class="w"> </span>CartController@index
POST<span class="w">            </span>cart<span class="w"> </span>...............................<span class="w"> </span>cart.store<span class="w"> </span>›<span class="w"> </span>CartController@store
PUT<span class="w">             </span>cart/<span class="o">{</span>id<span class="o">}</span><span class="w"> </span>........................<span class="w"> </span>cart.update<span class="w"> </span>›<span class="w"> </span>CartController@update
GET<span class="p">|</span>HEAD<span class="w">        </span>categories<span class="w"> </span>...............<span class="w"> </span>categories.index<span class="w"> </span>›<span class="w"> </span>CategoryController@index
GET<span class="p">|</span>HEAD<span class="w">        </span>categories/<span class="o">{</span>id<span class="o">}</span><span class="w"> </span>............<span class="w"> </span>categories.show<span class="w"> </span>›<span class="w"> </span>CategoryController@show
GET<span class="p">|</span>HEAD<span class="w">        </span>contact<span class="w"> </span>......................................................<span class="w"> </span>contact
GET<span class="p">|</span>HEAD<span class="w">        </span>offers<span class="w"> </span>..........................<span class="w"> </span>offers.index<span class="w"> </span>›<span class="w"> </span>OfferController@index
GET<span class="p">|</span>HEAD<span class="w">        </span>offers/<span class="o">{</span>offer<span class="o">}</span><span class="w"> </span>....................<span class="w"> </span>offers.show<span class="w"> </span>›<span class="w"> </span>OfferController@show
GET<span class="p">|</span>HEAD<span class="w">        </span>products<span class="w"> </span>....................<span class="w"> </span>products.index<span class="w"> </span>›<span class="w"> </span>ProductController@index
POST<span class="w">            </span>products<span class="w"> </span>....................<span class="w"> </span>products.store<span class="w"> </span>›<span class="w"> </span>ProductController@store
GET<span class="p">|</span>HEAD<span class="w">        </span>products-on-sale<span class="w"> </span>.........<span class="w"> </span>products.on-sale<span class="w"> </span>›<span class="w"> </span>ProductController@onSale
GET<span class="p">|</span>HEAD<span class="w">        </span>products/create<span class="w"> </span>...........<span class="w"> </span>products.create<span class="w"> </span>›<span class="w"> </span>ProductController@create
GET<span class="p">|</span>HEAD<span class="w">        </span>products/<span class="o">{</span>product<span class="o">}</span><span class="w"> </span>............<span class="w"> </span>products.show<span class="w"> </span>›<span class="w"> </span>ProductController@show
PUT<span class="p">|</span>PATCH<span class="w">       </span>products/<span class="o">{</span>product<span class="o">}</span><span class="w"> </span>........<span class="w"> </span>products.update<span class="w"> </span>›<span class="w"> </span>ProductController@update
DELETE<span class="w">          </span>products/<span class="o">{</span>product<span class="o">}</span><span class="w"> </span>......<span class="w"> </span>products.destroy<span class="w"> </span>›<span class="w"> </span>ProductController@destroy
GET<span class="p">|</span>HEAD<span class="w">        </span>products/<span class="o">{</span>product<span class="o">}</span>/edit<span class="w"> </span>.......<span class="w"> </span>products.edit<span class="w"> </span>›<span class="w"> </span>ProductController@edit
GET<span class="p">|</span>HEAD<span class="w">        </span>storage/<span class="o">{</span>path<span class="o">}</span><span class="w"> </span>.........................................<span class="w"> </span>storage.local

<span class="c1"># Otras rutas telescope ....</span>
</code></pre></div>
</details>
<p><strong>Estado Actual de las Rutas CRUD</strong></p>
<p>Actualmente, <strong>todas las rutas son públicas</strong>. Además, en el listado aparecen rutas como <code>products.create</code>, <code>products.store</code>, <code>products.edit</code>, <code>products.update</code> y <code>products.destroy</code>.</p>
<p>Estas rutas fueron definidas en la Práctica 3, pero <strong>sus métodos en el controlador aún NO están completamente implementados</strong> (solo redirigen con mensajes simulados). En esta práctica completaremos su implementación para que sean completamente funcionales.</p>
<hr />
<h2 id="fase-2-preparar-layouts-para-separacion-publicaprivada">FASE 2: Preparar Layouts para Separación Pública/Privada<a class="headerlink" href="#fase-2-preparar-layouts-para-separacion-publicaprivada" title="Permanent link">&para;</a></h2>
<p>En esta sesión vamos a implementar un sistema de login y registro utilizando <strong>Laravel Breeze</strong>. Antes de instalar esta librería, es fundamental reorganizar nuestros layouts existentes para evitar conflictos.</p>
<h3 id="1-por-que-separar-los-layouts">1. ¿Por Qué Separar los Layouts?<a class="headerlink" href="#1-por-que-separar-los-layouts" title="Permanent link">&para;</a></h3>
<p>Laravel Breeze crea automáticamente un layout llamado <code>app.blade.php</code> para áreas autenticadas (dashboard, perfil, administración). Sin embargo, ya tenemos un <code>app.blade.php</code> diseñado específicamente para nuestra <strong>tienda pública</strong>.</p>
<blockquote>
<p>⚠️ CONFLICTO INMINENTE</p>
<p>Si instalamos Breeze sin preparar los layouts, <strong>sobrescribirá nuestro archivo actual</strong>, perdiendo todo el diseño de la tienda pública.</p>
</blockquote>
<h3 id="2-renombrar-el-layout">2. Renombrar el layout<a class="headerlink" href="#2-renombrar-el-layout" title="Permanent link">&para;</a></h3>
<p>Vamos a crear <strong>dos layouts independientes</strong>, cada uno optimizado para su propósito:</p>
<table>
<thead>
<tr>
<th>Layout</th>
<th>Propósito</th>
<th>Características</th>
<th>Usado por</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>public.blade.php</code></td>
<td><strong>Tienda pública</strong></td>
<td>Navegación de productos, footer e-commerce</td>
<td>Visitantes no autenticados</td>
</tr>
<tr>
<td><code>app.blade.php</code></td>
<td><strong>Área de administración</strong></td>
<td>Dashboard, menú de usuario, enlaces admin</td>
<td>Usuarios autenticados</td>
</tr>
</tbody>
</table>
<p>Vamos a renombrar el archivo <code>app.blade.php</code> a <code>public.blade.php</code> para que contenga el diseño de la tienda pública.</p>
<details class="questionlaravel">
<summary>Ejecuta</summary>
<div class="highlight"><pre><span></span><code>mv<span class="w"> </span>resources/views/layouts/app.blade.php<span class="w"> </span>resources/views/layouts/public.blade.php
</code></pre></div>
</details>
<h3 id="3-actualizar-las-vistas-publicas">3. Actualizar las Vistas Públicas<a class="headerlink" href="#3-actualizar-las-vistas-publicas" title="Permanent link">&para;</a></h3>
<p>Ahora vamos a actualizar todas las vistas públicas para que usen el nuevo nombre del layout.</p>
<p><strong>Vistas a actualizar:</strong></p>
<ol>
<li><code>resources/views/welcome.blade.php</code> (página principal)</li>
<li><code>resources/views/contact.blade.php</code> (página contacto)</li>
<li><code>resources/views/cart/index.blade.php</code> (carrito de compras)</li>
<li><code>resources/views/categories/index.blade.php</code> (productos por categoría)</li>
<li><code>resources/views/categories/show.blade.php</code> (productos por categoría)</li>
<li><code>resources/views/offers/index.blade.php</code> (productos en oferta)</li>
<li><code>resources/views/offers/show.blade.php</code> (productos en oferta)</li>
<li><code>resources/views/products/index.blade.php</code> (listado de productos)</li>
<li><code>resources/views/products/show.blade.php</code> (detalle de producto)</li>
</ol>
<details class="questionlaravel">
<summary>Modifica</summary>
<p>Para cada una de estas vistas, busca la línea:
<div class="highlight"><pre><span></span><code><span class="x">@extends(&#39;layouts.app&#39;)</span>
</code></pre></div></p>
<p>Y cámbiala por:
<div class="highlight"><pre><span></span><code><span class="x">@extends(&#39;layouts.public&#39;)</span>
</code></pre></div></p>
</details>
<p><strong>Forma rápida (con comandos):</strong></p>
<p>El comando <code>sed</code> es una herramienta de Linux para buscar y reemplazar texto en archivos. Es más rápido que editar cada archivo manualmente.
<div class="highlight"><pre><span></span><code><span class="c1"># Actualizar welcome.blade.php</span>
sed<span class="w"> </span>-i<span class="w"> </span><span class="s2">&quot;s/@extends(&#39;layouts.app&#39;)/@extends(&#39;layouts.public&#39;)/g&quot;</span><span class="w"> </span>resources/views/welcome.blade.php

<span class="c1"># Actualizar contact.blade.php</span>
sed<span class="w"> </span>-i<span class="w"> </span><span class="s2">&quot;s/@extends(&#39;layouts.app&#39;)/@extends(&#39;layouts.public&#39;)/g&quot;</span><span class="w"> </span>resources/views/contact.blade.php

<span class="c1"># Actualizar vistas de carrito (si existe)</span>
sed<span class="w"> </span>-i<span class="w"> </span><span class="s2">&quot;s/@extends(&#39;layouts.app&#39;)/@extends(&#39;layouts.public&#39;)/g&quot;</span><span class="w"> </span>resources/views/cart/index.blade.php<span class="w"> </span><span class="m">2</span>&gt;/dev/null<span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nb">true</span>

<span class="c1"># Actualizar vistas de categorías</span>
sed<span class="w"> </span>-i<span class="w"> </span><span class="s2">&quot;s/@extends(&#39;layouts.app&#39;)/@extends(&#39;layouts.public&#39;)/g&quot;</span><span class="w"> </span>resources/views/categories/index.blade.php<span class="w"> </span><span class="m">2</span>&gt;/dev/null<span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nb">true</span>
sed<span class="w"> </span>-i<span class="w"> </span><span class="s2">&quot;s/@extends(&#39;layouts.app&#39;)/@extends(&#39;layouts.public&#39;)/g&quot;</span><span class="w"> </span>resources/views/categories/show.blade.php

<span class="c1"># Actualizar vistas de ofertas</span>
sed<span class="w"> </span>-i<span class="w"> </span><span class="s2">&quot;s/@extends(&#39;layouts.app&#39;)/@extends(&#39;layouts.public&#39;)/g&quot;</span><span class="w"> </span>resources/views/offers/index.blade.php<span class="w"> </span><span class="m">2</span>&gt;/dev/null<span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nb">true</span>
sed<span class="w"> </span>-i<span class="w"> </span><span class="s2">&quot;s/@extends(&#39;layouts.app&#39;)/@extends(&#39;layouts.public&#39;)/g&quot;</span><span class="w"> </span>resources/views/offers/show.blade.php<span class="w"> </span><span class="m">2</span>&gt;/dev/null<span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nb">true</span>

<span class="c1"># Actualizar vistas de productos</span>
sed<span class="w"> </span>-i<span class="w"> </span><span class="s2">&quot;s/@extends(&#39;layouts.app&#39;)/@extends(&#39;layouts.public&#39;)/g&quot;</span><span class="w"> </span>resources/views/products/index.blade.php
sed<span class="w"> </span>-i<span class="w"> </span><span class="s2">&quot;s/@extends(&#39;layouts.app&#39;)/@extends(&#39;layouts.public&#39;)/g&quot;</span><span class="w"> </span>resources/views/products/show.blade.php
</code></pre></div></p>
<details class="questionlaravel">
<summary>Verificar cambios en archivos</summary>
<p>Después de ejecutar los comandos, puedes verificar que los archivos se han actualizado correctamente con:
<div class="highlight"><pre><span></span><code>grep<span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;@extends(&#39;layouts.public&#39;)&quot;</span><span class="w"> </span>resources/views/welcome.blade.php<span class="w"> </span>resources/views/contact.blade.php<span class="w"> </span>resources/views/cart/index.blade.php<span class="w"> </span>resources/views/categories/index.blade.php<span class="w"> </span>resources/views/categories/show.blade.php<span class="w"> </span>resources/views/offers/index.blade.php<span class="w"> </span>resources/views/offers/show.blade.php<span class="w"> </span>resources/views/products/index.blade.php<span class="w"> </span>resources/views/products/show.blade.php
</code></pre></div></p>
</details>
<details class="examplelaravel">
<summary>Ejemplo de respuesta</summary>
<div class="highlight"><pre><span></span><code>resources/views/welcome.blade.php:@extends<span class="o">(</span><span class="s1">&#39;layouts.public&#39;</span><span class="o">)</span>
resources/views/contact.blade.php:@extends<span class="o">(</span><span class="s1">&#39;layouts.public&#39;</span><span class="o">)</span>
resources/views/cart/index.blade.php:@extends<span class="o">(</span><span class="s1">&#39;layouts.public&#39;</span><span class="o">)</span>
resources/views/categories/index.blade.php:@extends<span class="o">(</span><span class="s1">&#39;layouts.public&#39;</span><span class="o">)</span>
resources/views/categories/show.blade.php:@extends<span class="o">(</span><span class="s1">&#39;layouts.public&#39;</span><span class="o">)</span>
resources/views/offers/index.blade.php:@extends<span class="o">(</span><span class="s1">&#39;layouts.public&#39;</span><span class="o">)</span>
resources/views/offers/show.blade.php:@extends<span class="o">(</span><span class="s1">&#39;layouts.public&#39;</span><span class="o">)</span>
resources/views/products/index.blade.php:@extends<span class="o">(</span><span class="s1">&#39;layouts.public&#39;</span><span class="o">)</span>
resources/views/products/show.blade.php:@extends<span class="o">(</span><span class="s1">&#39;layouts.public&#39;</span><span class="o">)</span>
</code></pre></div>
</details>
<h3 id="4-verificar-que-la-aplicacion-sigue-funcionando">4. Verificar que la Aplicación Sigue Funcionando<a class="headerlink" href="#4-verificar-que-la-aplicacion-sigue-funcionando" title="Permanent link">&para;</a></h3>
<p>Después de renombrar el layout y actualizar las vistas, vamos a verificar que todo funciona correctamente.</p>
<ol>
<li><strong>Visita</strong> <code>http://localhost</code> en tu navegador</li>
<li><strong>Verifica</strong> que la página principal se muestra correctamente</li>
<li>
<p><strong>Navega</strong> por diferentes secciones:</p>
</li>
<li>
<p>Listado de productos</p>
</li>
<li>Detalle de un producto</li>
<li>Productos por categoría</li>
<li><strong>Comprueba</strong> que el diseño se mantiene igual (navegación, footer, estilos)</li>
</ol>
<details class="praclaravel">
<summary>Captura de pantalla requerida</summary>
<p>Realiza una captura de pantalla mostrando:</p>
</details>
<ol>
<li>La página principal funcionando correctamente después del cambio</li>
<li>Tu terminal con el comando <code>ls -l resources/views/layouts/</code> visible, mostrando que existe <code>public.blade.php</code></li>
</ol>
<h2 id="fase-3-instalar-y-configurar-laravel-breeze">FASE 3: Instalar y Configurar Laravel Breeze<a class="headerlink" href="#fase-3-instalar-y-configurar-laravel-breeze" title="Permanent link">&para;</a></h2>
<h3 id="1-que-es-laravel-breeze">1. ¿Qué es Laravel Breeze?<a class="headerlink" href="#1-que-es-laravel-breeze" title="Permanent link">&para;</a></h3>
<p>Laravel Breeze es un kit de inicio de autenticación minimalista que proporciona una implementación completa de:</p>
<ul>
<li><strong>Registro de usuarios</strong> con validación.</li>
<li><strong>Login y logout</strong> con sesiones.</li>
<li><strong>Recuperación de contraseña</strong> con emails.</li>
<li><strong>Verificación de email</strong> (opcional).</li>
<li><strong>Actualización de perfil</strong> y contraseña.</li>
<li><strong>Vistas Blade</strong> prediseñadas con Tailwind CSS.</li>
<li><strong>Rutas protegidas</strong> con middleware.</li>
</ul>
<p>Breeze es perfecto para proyectos que necesitan autenticación básica sin complejidad innecesaria.</p>
<blockquote>
<p><strong>Alternativas a Breeze</strong></p>
<p>Laravel también ofrece:</p>
<ul>
<li><strong>Jetstream</strong>: Más completo con equipos, 2FA y API tokens.</li>
<li><strong>Fortify</strong>: Backend de autenticación sin vistas.</li>
<li><strong>Sanctum</strong>: Autenticación API para SPAs y aplicaciones móviles.</li>
</ul>
</blockquote>
<p>&nbsp;</p>
<blockquote>
<p>Para esta práctica, Breeze es ideal porque es simple y usa Blade (que ya conocemos).</p>
</blockquote>
<h3 id="2-instalar-laravel-breeze">2. Instalar Laravel Breeze<a class="headerlink" href="#2-instalar-laravel-breeze" title="Permanent link">&para;</a></h3>
<p>Laravel Breeze se instala como una dependencia de desarrollo porque solo se necesita durante la configuración inicial.</p>
<details class="questionlaravel">
<summary>Ejecuta el siguiente comando para instalar Breeze</summary>
<div class="highlight"><pre><span></span><code>sail<span class="w"> </span>composer<span class="w"> </span>require<span class="w"> </span>laravel/breeze<span class="w"> </span>--dev
</code></pre></div>
</details>
<details class="examplelaravel">
<summary>Ejemplo de respuesta</summary>
<div class="highlight"><pre><span></span><code>artur@pc_classe:~/development/laravel/MyShop$<span class="w"> </span>sail<span class="w"> </span>composer<span class="w"> </span>require<span class="w"> </span>laravel/breeze<span class="w"> </span>--dev
.........

INFO<span class="w">  </span>No<span class="w"> </span>publishable<span class="w"> </span>resources<span class="w"> </span><span class="k">for</span><span class="w"> </span>tag<span class="w"> </span><span class="o">[</span>laravel-assets<span class="o">]</span>.

No<span class="w"> </span>security<span class="w"> </span>vulnerability<span class="w"> </span>advisories<span class="w"> </span>found.
Using<span class="w"> </span>version<span class="w"> </span>^2.3<span class="w"> </span><span class="k">for</span><span class="w"> </span>laravel/breeze
</code></pre></div>
</details>
<h3 id="3-instalar-el-stack-de-autenticacion-blade">3. Instalar el Stack de Autenticación Blade<a class="headerlink" href="#3-instalar-el-stack-de-autenticacion-blade" title="Permanent link">&para;</a></h3>
<p>Ahora vamos a instalar el "stack" de Breeze con Blade. Esto generará:</p>
<ul>
<li>Controladores de autenticación.</li>
<li>Rutas de autenticación.</li>
<li>Vistas Blade para login, registro, recuperación de contraseña, etc.</li>
<li>Migraciones para tablas de autenticación.</li>
</ul>
<blockquote>
<p>⚠️ Importante: <strong>Breeze sobrescribirá algunos archivos</strong></p>
<p>Laravel Breeze <strong>reemplazará</strong> <code>routes/web.php</code> → Perderás todas tus rutas (productos, categorías, ofertas).</p>
</blockquote>
<p>&nbsp;</p>
<blockquote>
<p>No te preocupes, en la <strong>FASE 5</strong> restauraremos todas tus rutas de la tienda.</p>
</blockquote>
<details class="questionlaravel">
<summary>Ejecuta</summary>
<div class="highlight"><pre><span></span><code>sail<span class="w"> </span>artisan<span class="w"> </span>breeze:install<span class="w"> </span>blade
</code></pre></div>
</details>
<details class="examplelaravel">
<summary>Ejemplo de respuesta</summary>
<div class="highlight"><pre><span></span><code>artur@pc_classe:~/development/laravel/MyShop$<span class="w"> </span>sail<span class="w"> </span>artisan<span class="w"> </span>breeze:install<span class="w"> </span>blade

INFO<span class="w">  </span>Installing<span class="w"> </span>and<span class="w"> </span>building<span class="w"> </span>Node<span class="w"> </span>dependencies.


added<span class="w"> </span><span class="m">104</span><span class="w"> </span>packages,<span class="w"> </span>changed<span class="w"> </span><span class="m">1</span><span class="w"> </span>package,<span class="w"> </span>and<span class="w"> </span>audited<span class="w"> </span><span class="m">260</span><span class="w"> </span>packages<span class="w"> </span><span class="k">in</span><span class="w"> </span>5s

<span class="m">58</span><span class="w"> </span>packages<span class="w"> </span>are<span class="w"> </span>looking<span class="w"> </span><span class="k">for</span><span class="w"> </span>funding
run<span class="w"> </span><span class="sb">`</span>npm<span class="w"> </span>fund<span class="sb">`</span><span class="w"> </span><span class="k">for</span><span class="w"> </span>details

found<span class="w"> </span><span class="m">0</span><span class="w"> </span>vulnerabilities

&gt;<span class="w"> </span>build
&gt;<span class="w"> </span>vite<span class="w"> </span>build

vite<span class="w"> </span>v7.1.9<span class="w"> </span>building<span class="w"> </span><span class="k">for</span><span class="w"> </span>production...
✓<span class="w"> </span><span class="m">54</span><span class="w"> </span>modules<span class="w"> </span>transformed.
public/build/manifest.json<span class="w">             </span><span class="m">0</span>.31<span class="w"> </span>kB<span class="w"> </span>│<span class="w"> </span>gzip:<span class="w">  </span><span class="m">0</span>.16<span class="w"> </span>kB
public/build/assets/app-CFHRtieK.css<span class="w">  </span><span class="m">44</span>.38<span class="w"> </span>kB<span class="w"> </span>│<span class="w"> </span>gzip:<span class="w">  </span><span class="m">7</span>.91<span class="w"> </span>kB
public/build/assets/app-CXDpL9bK.js<span class="w">   </span><span class="m">80</span>.59<span class="w"> </span>kB<span class="w"> </span>│<span class="w"> </span>gzip:<span class="w"> </span><span class="m">30</span>.19<span class="w"> </span>kB
✓<span class="w"> </span>built<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="m">1</span>.23s


INFO<span class="w">  </span>Breeze<span class="w"> </span>scaffolding<span class="w"> </span>installed<span class="w"> </span>successfully.
</code></pre></div>
</details>
<h3 id="4-instalar-dependencias-de-npm">4. Instalar Dependencias de NPM<a class="headerlink" href="#4-instalar-dependencias-de-npm" title="Permanent link">&para;</a></h3>
<p>Breeze requiere compilar assets CSS y JavaScript. </p>
<p>Vamos a instalar las dependencias y compilar los assets.</p>
<details class="questionlaravel">
<summary>Ejecuta</summary>
<div class="highlight"><pre><span></span><code>sail<span class="w"> </span>npm<span class="w"> </span>install
</code></pre></div>
</details>
<details class="examplelaravel">
<summary>Ejemplo de respuesta</summary>
<div class="highlight"><pre><span></span><code>artur@pc_classe:~/development/laravel/MyShop$<span class="w"> </span>sail<span class="w"> </span>npm<span class="w"> </span>install

added<span class="w"> </span><span class="m">67</span><span class="w"> </span>packages,<span class="w"> </span>and<span class="w"> </span>audited<span class="w"> </span><span class="m">260</span><span class="w"> </span>packages<span class="w"> </span><span class="k">in</span><span class="w"> </span>853ms

<span class="m">58</span><span class="w"> </span>packages<span class="w"> </span>are<span class="w"> </span>looking<span class="w"> </span><span class="k">for</span><span class="w"> </span>funding
run<span class="w"> </span><span class="sb">`</span>npm<span class="w"> </span>fund<span class="sb">`</span><span class="w"> </span><span class="k">for</span><span class="w"> </span>details

found<span class="w"> </span><span class="m">0</span><span class="w"> </span>vulnerabilities
</code></pre></div>
</details>
<details class="questionlaravel">
<summary>Ahora compila los assets para producción</summary>
<div class="highlight"><pre><span></span><code>sail<span class="w"> </span>npm<span class="w"> </span>run<span class="w"> </span>build
</code></pre></div>
</details>
<details class="examplelaravel">
<summary>Ejemplo de respuesta</summary>
<div class="highlight"><pre><span></span><code>artur@pc_classe:~/development/laravel/MyShop$<span class="w"> </span>sail<span class="w"> </span>npm<span class="w"> </span>run<span class="w"> </span>build

&gt;<span class="w"> </span>build
&gt;<span class="w"> </span>vite<span class="w"> </span>build

vite<span class="w"> </span>v5.4.8<span class="w"> </span>building<span class="w"> </span><span class="k">for</span><span class="w"> </span>production...
✓<span class="w"> </span><span class="m">89</span><span class="w"> </span>modules<span class="w"> </span>transformed.
public/build/manifest.json<span class="w">                   </span><span class="m">1</span>.48<span class="w"> </span>kB<span class="w"> </span>│<span class="w"> </span>gzip:<span class="w">  </span><span class="m">0</span>.38<span class="w"> </span>kB
public/build/assets/app-C2nBmIGE.css<span class="w">         </span><span class="m">7</span>.52<span class="w"> </span>kB<span class="w"> </span>│<span class="w"> </span>gzip:<span class="w">  </span><span class="m">2</span>.11<span class="w"> </span>kB
public/build/assets/app-BmZ5zMLg.js<span class="w">        </span><span class="m">120</span>.44<span class="w"> </span>kB<span class="w"> </span>│<span class="w"> </span>gzip:<span class="w"> </span><span class="m">46</span>.52<span class="w"> </span>kB
✓<span class="w"> </span>built<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="m">2</span>.14s
</code></pre></div>
</details>
<blockquote>
<p><strong>Por qué usar <code>npm run build</code></strong></p>
<p>Para esta práctica, usaremos <code>build</code> porque no vamos a modificar los estilos de Breeze.</p>
</blockquote>
<h3 id="5-verificar-las-nuevas-rutas-de-autenticacion">5. Verificar las Nuevas Rutas de Autenticación<a class="headerlink" href="#5-verificar-las-nuevas-rutas-de-autenticacion" title="Permanent link">&para;</a></h3>
<p>Breeze ha añadido automáticamente nuevas rutas para autenticación. </p>
<details class="questionlaravel">
<summary>Verificar rutas</summary>
<div class="highlight"><pre><span></span><code>sail<span class="w"> </span>artisan<span class="w"> </span>route:list<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>-E<span class="w"> </span><span class="s2">&quot;(login|register|logout)&quot;</span>
</code></pre></div>
</details>
<details class="examplelaravel">
<summary>Ejemplo de respuesta</summary>
<div class="highlight"><pre><span></span><code>artur@pc_classe:~/development/laravel/MyShop$<span class="w"> </span>sail<span class="w"> </span>artisan<span class="w"> </span>route:list<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>-E<span class="w"> </span><span class="s2">&quot;(login|register|logout)&quot;</span>

GET<span class="p">|</span>HEAD<span class="w">  </span>login<span class="w"> </span>..................<span class="w"> </span>login<span class="w"> </span>›<span class="w"> </span>Auth<span class="se">\A</span>uthenticatedSessionController@create
POST<span class="w">      </span>login<span class="w"> </span>..................<span class="w"> </span>Auth<span class="se">\A</span>uthenticatedSessionController@store
POST<span class="w">      </span><span class="nb">logout</span><span class="w"> </span>.................<span class="w"> </span><span class="nb">logout</span><span class="w"> </span>›<span class="w"> </span>Auth<span class="se">\A</span>uthenticatedSessionController@destroy
GET<span class="p">|</span>HEAD<span class="w">  </span>register<span class="w"> </span>...............<span class="w"> </span>register<span class="w"> </span>›<span class="w"> </span>Auth<span class="se">\R</span>egisteredUserController@create
POST<span class="w">      </span>register<span class="w"> </span>...............<span class="w"> </span>Auth<span class="se">\R</span>egisteredUserController@store
</code></pre></div>
</details>
<p><strong>Rutas de Autenticación Añadidas</strong></p>
<p>Breeze ha creado automáticamente las siguientes rutas:</p>
<ul>
<li><strong>GET /register</strong>: Formulario de registro.</li>
<li><strong>POST /register</strong>: Procesar registro.</li>
<li><strong>GET /login</strong>: Formulario de login.</li>
<li><strong>POST /login</strong>: Procesar login.</li>
<li><strong>POST /logout</strong>: Cerrar sesión.</li>
<li><strong>GET /forgot-password</strong>: Recuperación de contraseña.</li>
<li><strong>GET /dashboard</strong>: Panel de control para usuarios autenticados.</li>
</ul>
<h3 id="6-probar-las-paginas-de-autenticacion">6. Probar las Páginas de Autenticación<a class="headerlink" href="#6-probar-las-paginas-de-autenticacion" title="Permanent link">&para;</a></h3>
<p>Vamos a verificar que las páginas de autenticación funcionen correctamente.</p>
<p>Abre tu navegador y visita:</p>
<ol>
<li><strong>Registro</strong>: <code>http://localhost/register</code></li>
<li><strong>Login</strong>: <code>http://localhost/login</code></li>
</ol>
<p>Deberías ver formularios estilizados con Tailwind CSS listos para usar.</p>
<details class="praclaravel">
<summary>Captura de pantalla requerida</summary>
<p>Realiza una captura de pantalla de las páginas de <strong>registro</strong> y <strong>login</strong> funcionando correctamente. Incluye tu terminal con el prompt <code>usuario@equipo:~/ruta/proyecto$</code> visible mostrando el comando <code>sail artisan route:list</code> con las rutas de autenticación.</p>
</details>
<hr />
<h2 id="fase-4-crear-un-usuario-de-prueba">FASE 4: Crear un Usuario de Prueba<a class="headerlink" href="#fase-4-crear-un-usuario-de-prueba" title="Permanent link">&para;</a></h2>
<h3 id="1-registrar-un-usuario-manualmente">1. Registrar un Usuario Manualmente<a class="headerlink" href="#1-registrar-un-usuario-manualmente" title="Permanent link">&para;</a></h3>
<p>La forma más sencilla de crear un usuario es usar el formulario de registro que acabamos de instalar.</p>
<p>Visita <code>http://localhost/register</code> y completa el formulario con:</p>
<ul>
<li><strong>Name</strong>: Tu Nombre</li>
<li><strong>Email</strong>: <a href="mailto:tu@email.com">tu@email.com</a></li>
<li><strong>Password</strong>: password123</li>
<li><strong>Confirm Password</strong>: password123</li>
</ul>
<p>Haz clic en "Register" y serás redirigido al dashboard (<code>/dashboard</code>).</p>
<p><strong>¿Qué pasa cuando te registras?</strong></p>
<p>Cuando completas el formulario de registro, Laravel:</p>
<ol>
<li><strong>Valida los datos</strong> (nombre requerido, email único, contraseña mínimo 8 caracteres).</li>
<li><strong>Hashea la contraseña</strong> con bcrypt (nunca se guarda en texto plano).</li>
<li><strong>Crea el usuario</strong> en la tabla <code>users</code>.</li>
<li><strong>Inicia sesión automáticamente</strong> y guarda el ID del usuario en la sesión.</li>
<li><strong>Redirige al dashboard</strong> (<code>/dashboard</code>).</li>
</ol>
<h3 id="2-crear-usuarios-desde-tinker-opcional">2. Crear Usuarios desde Tinker (Opcional)<a class="headerlink" href="#2-crear-usuarios-desde-tinker-opcional" title="Permanent link">&para;</a></h3>
<p>También puedes crear usuarios directamente desde la consola usando Tinker.</p>
<details class="questionlaravel">
<summary>Ejecuta</summary>
<div class="highlight"><pre><span></span><code>sail<span class="w"> </span>artisan<span class="w"> </span>tinker
</code></pre></div>
</details>
<details class="questionlaravel">
<summary>Dentro de Tinker, ejecuta</summary>
<p>```php
$user = App\Models\User::create([
    'name' =&gt; 'Administrador',
    'email' =&gt; 'admin@tienda.com',
    'password' =&gt; bcrypt('password123')
]);</p>
</details>
<p>```</p>
<details class="examplelaravel">
<summary>Ejemplo de respuesta</summary>
<div class="highlight"><pre><span></span><code>artur@pc_classe:~/development/laravel/MyShop$<span class="w"> </span>sail<span class="w"> </span>artisan<span class="w"> </span>tinker
Psy<span class="w"> </span>Shell<span class="w"> </span>v0.12.4<span class="w"> </span><span class="o">(</span>PHP<span class="w"> </span><span class="m">8</span>.3.13<span class="w"> </span>—<span class="w"> </span>cli<span class="o">)</span><span class="w"> </span>by<span class="w"> </span>Justin<span class="w"> </span>Hileman

&gt;<span class="w"> </span><span class="nv">$user</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>App<span class="se">\M</span>odels<span class="se">\U</span>ser::create<span class="o">([</span><span class="s1">&#39;name&#39;</span><span class="w"> </span><span class="o">=</span>&gt;<span class="w"> </span><span class="s1">&#39;Administrador&#39;</span>,<span class="w"> </span><span class="s1">&#39;email&#39;</span><span class="w"> </span><span class="o">=</span>&gt;<span class="w"> </span><span class="s1">&#39;admin@tienda.com&#39;</span>,<span class="w"> </span><span class="s1">&#39;password&#39;</span><span class="w"> </span><span class="o">=</span>&gt;<span class="w"> </span>bcrypt<span class="o">(</span><span class="s1">&#39;password123&#39;</span><span class="o">)])</span><span class="p">;</span>
<span class="o">=</span><span class="w"> </span>App<span class="se">\M</span>odels<span class="se">\U</span>ser<span class="w"> </span><span class="o">{</span><span class="c1">#5960</span>
<span class="w">    </span>name:<span class="w"> </span><span class="s2">&quot;Administrador&quot;</span>,
<span class="w">    </span>email:<span class="w"> </span><span class="s2">&quot;admin@tienda.com&quot;</span>,
<span class="w">    </span><span class="c1">#password: &quot;$2y$12$LMJCds5Eu1n5znSeJlnw2Ohuqhip9RHBy0LIym1xBxvkN737A/OzK&quot;,</span>
<span class="w">    </span>updated_at:<span class="w"> </span><span class="s2">&quot;2025-10-08 07:27:05&quot;</span>,
<span class="w">    </span>created_at:<span class="w"> </span><span class="s2">&quot;2025-10-08 07:27:05&quot;</span>,
<span class="w">    </span>id:<span class="w"> </span><span class="m">5</span>,
<span class="o">}</span>
</code></pre></div>
</details>
<blockquote>
<p><strong>Contraseñas Hasheadas</strong></p>
<p>Observa que la contraseña no aparece en texto plano. Laravel usa <strong>bcrypt</strong> para hashear las contraseñas, lo que las hace prácticamente imposibles de descifrar.</p>
<p>Para salir de Tinker, escribe <code>exit</code> o presiona <code>Ctrl+D</code>.</p>
</blockquote>
<h3 id="3-verificar-los-usuarios-creados">3. Verificar los Usuarios Creados<a class="headerlink" href="#3-verificar-los-usuarios-creados" title="Permanent link">&para;</a></h3>
<p>Vamos a verificar que los usuarios se hayan creado correctamente en la base de datos.</p>
<details class="questionlaravel">
<summary>Conéctate a MySQL</summary>
<div class="highlight"><pre><span></span><code>sail<span class="w"> </span>mysql
</code></pre></div>
</details>
<details class="questionlaravel">
<summary>Ejecuta</summary>
<div class="highlight"><pre><span></span><code><span class="n">USE</span><span class="w"> </span><span class="n">myshop</span><span class="p">;</span>
<span class="k">SELECT</span><span class="w"> </span><span class="n">id</span><span class="p">,</span><span class="w"> </span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">email</span><span class="p">,</span><span class="w"> </span><span class="n">created_at</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">users</span><span class="p">;</span>
<span class="n">exit</span><span class="p">;</span>
</code></pre></div>
</details>
<details class="examplelaravel">
<summary>Ejemplo de respuesta</summary>
<div class="highlight"><pre><span></span><code>artur@pc_classe:~/development/laravel/MyShop$<span class="w"> </span>sail<span class="w"> </span>mysql
mysql&gt;<span class="w"> </span>USE<span class="w"> </span>myshop<span class="p">;</span>
Database<span class="w"> </span>changed

mysql&gt;<span class="w"> </span>SELECT<span class="w"> </span>id,<span class="w"> </span>name,<span class="w"> </span>email,<span class="w"> </span>created_at<span class="w"> </span>FROM<span class="w"> </span>users<span class="p">;</span>
+----+--------------------------+----------------------------+---------------------+
<span class="p">|</span><span class="w"> </span>id<span class="w"> </span><span class="p">|</span><span class="w"> </span>name<span class="w">                     </span><span class="p">|</span><span class="w"> </span>email<span class="w">                      </span><span class="p">|</span><span class="w"> </span>created_at<span class="w">          </span><span class="p">|</span>
+----+--------------------------+----------------------------+---------------------+
<span class="p">|</span><span class="w">  </span><span class="m">1</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>Usuario<span class="w"> </span>Demo<span class="w">             </span><span class="p">|</span><span class="w"> </span>demo@example.com<span class="w">           </span><span class="p">|</span><span class="w"> </span><span class="m">2025</span>-10-07<span class="w"> </span><span class="m">19</span>:57:51<span class="w"> </span><span class="p">|</span>
<span class="p">|</span><span class="w">  </span><span class="m">2</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>Ariel<span class="w"> </span>Nikolaus<span class="w">           </span><span class="p">|</span><span class="w"> </span>eloy.roob@example.org<span class="w">      </span><span class="p">|</span><span class="w"> </span><span class="m">2025</span>-10-07<span class="w"> </span><span class="m">19</span>:57:51<span class="w"> </span><span class="p">|</span>
<span class="p">|</span><span class="w">  </span><span class="m">3</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>Dandre<span class="w"> </span>Thiel<span class="w">             </span><span class="p">|</span><span class="w"> </span>casimer63@example.com<span class="w">      </span><span class="p">|</span><span class="w"> </span><span class="m">2025</span>-10-07<span class="w"> </span><span class="m">19</span>:57:51<span class="w"> </span><span class="p">|</span>
<span class="p">|</span><span class="w">  </span><span class="m">4</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>Guillermo<span class="w"> </span>Garrido<span class="w"> </span>Portes<span class="w"> </span><span class="p">|</span><span class="w"> </span>g.garridoportes@edu.gva.es<span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="m">2025</span>-10-08<span class="w"> </span><span class="m">07</span>:25:45<span class="w"> </span><span class="p">|</span>
<span class="p">|</span><span class="w">  </span><span class="m">5</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>Administrador<span class="w">            </span><span class="p">|</span><span class="w"> </span>admin@tienda.com<span class="w">           </span><span class="p">|</span><span class="w"> </span><span class="m">2025</span>-10-08<span class="w"> </span><span class="m">07</span>:27:05<span class="w"> </span><span class="p">|</span>
+----+--------------------------+----------------------------+---------------------+
<span class="m">5</span><span class="w"> </span>row<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="nb">set</span><span class="w"> </span><span class="o">(</span><span class="m">0</span>.00<span class="w"> </span>sec<span class="o">)</span>

mysql&gt;<span class="w"> </span>exit<span class="p">;</span>
Bye
</code></pre></div>
</details>
<hr />
<h2 id="fase-5-proteger-rutas-y-definir-la-arquitectura-admin">FASE 5: Proteger Rutas y Definir la Arquitectura Admin<a class="headerlink" href="#fase-5-proteger-rutas-y-definir-la-arquitectura-admin" title="Permanent link">&para;</a></h2>
<h3 id="1-que-es-el-middleware-de-autenticacion">1. ¿Qué es el Middleware de Autenticación?<a class="headerlink" href="#1-que-es-el-middleware-de-autenticacion" title="Permanent link">&para;</a></h3>
<p>El middleware <strong><code>auth</code></strong> es un "filtro" que Laravel aplica a las rutas para verificar si el usuario está autenticado. Si no lo está, lo redirige automáticamente a la página de login. En esta fase, protegeremos las rutas de administración (crear, editar, eliminar productos) para que solo los usuarios autenticados puedan acceder a ellas.</p>
<p><strong>Tipos de Rutas</strong>:</p>
<ul>
<li><strong>Públicas</strong>: Cualquiera puede acceder (ver productos, categorías). Usan <code>products.index</code>, <code>products.show</code>, etc.</li>
<li><strong>Protegidas</strong>: Solo usuarios autenticados pueden acceder. Crearemos rutas específicas como <code>admin.products.index</code> para la gestión.</li>
</ul>
<h3 id="2-actualizar-el-archivo-de-rutas-webphp">2. Actualizar el Archivo de Rutas (<code>web.php</code>)<a class="headerlink" href="#2-actualizar-el-archivo-de-rutas-webphp" title="Permanent link">&para;</a></h3>
<p>Vamos a reorganizar <code>routes/web.php</code> para definir todas las rutas que necesitaremos: las públicas, las de perfil/dashboard de Breeze, y las nuevas rutas de administración para gestionar la tienda.</p>
<p>Restaurando y Organizando las Rutas</p>
<p>Como explicamos en la FASE 3, Breeze sobrescribió tu archivo <code>routes/web.php</code>. Ahora vamos a restaurar las rutas de las prácticas anteriores y a añadir las nuevas rutas de administración.</p>
<details class="questionlaravel">
<summary>Reemplaza código</summary>
<p>Abre el archivo <code>routes/web.php</code> y reemplaza todo su contenido con el siguiente código:</p>
<p>Código PHP (<code>routes/web.php</code>)
<div class="highlight"><pre><span></span><code><span class="cp">&lt;?php</span>

<span class="k">use</span> <span class="nx">Illuminate\Support\Facades\Route</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">App\Http\Controllers\ProductController</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">App\Http\Controllers\CategoryController</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">App\Http\Controllers\OfferController</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">App\Http\Controllers\ProfileController</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">App\Http\Controllers\WelcomeController</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">App\Http\Controllers\CartController</span><span class="p">;</span>

<span class="cm">/*</span>
<span class="cm">|--------------------------------------------------------------------------</span>
<span class="cm">| Web Routes</span>
<span class="cm">|--------------------------------------------------------------------------</span>
<span class="cm">*/</span>

<span class="c1">// ===========================================</span>
<span class="c1">// RUTAS PÚBLICAS (Sin autenticación requerida)</span>
<span class="c1">// ===========================================</span>

<span class="c1">// Welcome page - shows home page with featured content</span>
<span class="nx">Route</span><span class="o">::</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="p">[</span><span class="nx">WelcomeController</span><span class="o">::</span><span class="na">class</span><span class="p">,</span> <span class="s1">&#39;index&#39;</span><span class="p">])</span><span class="o">-&gt;</span><span class="na">name</span><span class="p">(</span><span class="s1">&#39;welcome&#39;</span><span class="p">);</span>

<span class="c1">// Contact page</span>
<span class="nx">Route</span><span class="o">::</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;/contact&#39;</span><span class="p">,</span> <span class="k">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">view</span><span class="p">(</span><span class="s1">&#39;contact&#39;</span><span class="p">);</span>
<span class="p">})</span><span class="o">-&gt;</span><span class="na">name</span><span class="p">(</span><span class="s1">&#39;contact&#39;</span><span class="p">);</span>

<span class="c1">// Rutas de categorías (solo lectura)</span>
<span class="nx">Route</span><span class="o">::</span><span class="na">resource</span><span class="p">(</span><span class="s1">&#39;categories&#39;</span><span class="p">,</span> <span class="nx">CategoryController</span><span class="o">::</span><span class="na">class</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">only</span><span class="p">([</span><span class="s1">&#39;index&#39;</span><span class="p">,</span> <span class="s1">&#39;show&#39;</span><span class="p">]);</span>

<span class="c1">// Rutas de productos (solo lectura)</span>
<span class="nx">Route</span><span class="o">::</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;/products-on-sale&#39;</span><span class="p">,</span> <span class="p">[</span><span class="nx">ProductController</span><span class="o">::</span><span class="na">class</span><span class="p">,</span> <span class="s1">&#39;onSale&#39;</span><span class="p">])</span><span class="o">-&gt;</span><span class="na">name</span><span class="p">(</span><span class="s1">&#39;products.on-sale&#39;</span><span class="p">);</span>
<span class="nx">Route</span><span class="o">::</span><span class="na">resource</span><span class="p">(</span><span class="s1">&#39;products&#39;</span><span class="p">,</span> <span class="nx">ProductController</span><span class="o">::</span><span class="na">class</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">only</span><span class="p">([</span><span class="s1">&#39;index&#39;</span><span class="p">,</span> <span class="s1">&#39;show&#39;</span><span class="p">]);</span>

<span class="c1">// Rutas de ofertas (solo lectura)</span>
<span class="nx">Route</span><span class="o">::</span><span class="na">resource</span><span class="p">(</span><span class="s1">&#39;offers&#39;</span><span class="p">,</span> <span class="nx">OfferController</span><span class="o">::</span><span class="na">class</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">only</span><span class="p">([</span><span class="s1">&#39;index&#39;</span><span class="p">,</span> <span class="s1">&#39;show&#39;</span><span class="p">]);</span>

<span class="c1">// Rutas básicas del carrito de compras</span>
<span class="c1">// NOTA: Las rutas avanzadas (update, destroy, checkout) se añadirán en FASE 10</span>
<span class="nx">Route</span><span class="o">::</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;/cart&#39;</span><span class="p">,</span> <span class="p">[</span><span class="nx">CartController</span><span class="o">::</span><span class="na">class</span><span class="p">,</span> <span class="s1">&#39;index&#39;</span><span class="p">])</span><span class="o">-&gt;</span><span class="na">name</span><span class="p">(</span><span class="s1">&#39;cart.index&#39;</span><span class="p">);</span>
<span class="nx">Route</span><span class="o">::</span><span class="na">post</span><span class="p">(</span><span class="s1">&#39;/cart&#39;</span><span class="p">,</span> <span class="p">[</span><span class="nx">CartController</span><span class="o">::</span><span class="na">class</span><span class="p">,</span> <span class="s1">&#39;store&#39;</span><span class="p">])</span><span class="o">-&gt;</span><span class="na">name</span><span class="p">(</span><span class="s1">&#39;cart.store&#39;</span><span class="p">);</span>

<span class="c1">// ===========================================</span>
<span class="c1">// RUTAS DE USUARIO AUTENTICADO (Breeze)</span>
<span class="c1">// ===========================================</span>

<span class="nx">Route</span><span class="o">::</span><span class="na">middleware</span><span class="p">(</span><span class="s1">&#39;auth&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">group</span><span class="p">(</span><span class="k">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// Dashboard</span>
    <span class="nx">Route</span><span class="o">::</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;/dashboard&#39;</span><span class="p">,</span> <span class="k">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">view</span><span class="p">(</span><span class="s1">&#39;dashboard&#39;</span><span class="p">);</span>
    <span class="p">})</span><span class="o">-&gt;</span><span class="na">name</span><span class="p">(</span><span class="s1">&#39;dashboard&#39;</span><span class="p">);</span>

    <span class="c1">// Perfil de usuario</span>
    <span class="nx">Route</span><span class="o">::</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;/profile&#39;</span><span class="p">,</span> <span class="p">[</span><span class="nx">ProfileController</span><span class="o">::</span><span class="na">class</span><span class="p">,</span> <span class="s1">&#39;edit&#39;</span><span class="p">])</span><span class="o">-&gt;</span><span class="na">name</span><span class="p">(</span><span class="s1">&#39;profile.edit&#39;</span><span class="p">);</span>
    <span class="nx">Route</span><span class="o">::</span><span class="na">patch</span><span class="p">(</span><span class="s1">&#39;/profile&#39;</span><span class="p">,</span> <span class="p">[</span><span class="nx">ProfileController</span><span class="o">::</span><span class="na">class</span><span class="p">,</span> <span class="s1">&#39;update&#39;</span><span class="p">])</span><span class="o">-&gt;</span><span class="na">name</span><span class="p">(</span><span class="s1">&#39;profile.update&#39;</span><span class="p">);</span>
    <span class="nx">Route</span><span class="o">::</span><span class="na">delete</span><span class="p">(</span><span class="s1">&#39;/profile&#39;</span><span class="p">,</span> <span class="p">[</span><span class="nx">ProfileController</span><span class="o">::</span><span class="na">class</span><span class="p">,</span> <span class="s1">&#39;destroy&#39;</span><span class="p">])</span><span class="o">-&gt;</span><span class="na">name</span><span class="p">(</span><span class="s1">&#39;profile.destroy&#39;</span><span class="p">);</span>
<span class="p">});</span>


<span class="c1">// ===========================================</span>
<span class="c1">// RUTAS DE ADMINISTRACIÓN (Protegidas)</span>
<span class="c1">// ===========================================</span>

<span class="nx">Route</span><span class="o">::</span><span class="na">middleware</span><span class="p">(</span><span class="s1">&#39;auth&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">prefix</span><span class="p">(</span><span class="s1">&#39;admin&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">name</span><span class="p">(</span><span class="s1">&#39;admin.&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">group</span><span class="p">(</span><span class="k">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// Rutas de gestión de productos</span>
    <span class="nx">Route</span><span class="o">::</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;/products&#39;</span><span class="p">,</span> <span class="p">[</span><span class="nx">ProductController</span><span class="o">::</span><span class="na">class</span><span class="p">,</span> <span class="s1">&#39;adminIndex&#39;</span><span class="p">])</span><span class="o">-&gt;</span><span class="na">name</span><span class="p">(</span><span class="s1">&#39;products.index&#39;</span><span class="p">);</span>
    <span class="nx">Route</span><span class="o">::</span><span class="na">resource</span><span class="p">(</span><span class="s1">&#39;products&#39;</span><span class="p">,</span> <span class="nx">ProductController</span><span class="o">::</span><span class="na">class</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">except</span><span class="p">([</span><span class="s1">&#39;index&#39;</span><span class="p">,</span> <span class="s1">&#39;show&#39;</span><span class="p">]);</span>

    <span class="c1">// NOTA: Las rutas de wishlist se añadirán en FASE 11</span>
<span class="p">});</span>

<span class="c1">// Las rutas de autenticación (login, register, etc.) se incluyen desde aquí</span>
<span class="k">require</span> <span class="no">__DIR__</span><span class="o">.</span><span class="s1">&#39;/auth.php&#39;</span><span class="p">;</span>
</code></pre></div></p>
</details>
<p><strong>Estructura de Rutas de Administración</strong></p>
<p>Observa el nuevo grupo de rutas con <code>prefix('admin')</code> y <code>name('admin.')</code>:</p>
<ul>
<li><strong><code>prefix('admin')</code></strong>: Añade <code>/admin/</code> a la URL de todas las rutas del grupo (ej: <code>/admin/products</code>).</li>
<li><strong><code>name('admin.')</code></strong>: Añade <code>admin.</code> al nombre de todas las rutas del grupo (ej: <code>admin.products.index</code>).</li>
<li><strong><code>middleware('auth')</code></strong>: Por ahora solo protegemos con autenticación. En FASE 12 añadiremos middleware de logging.</li>
<li><strong><code>adminIndex</code></strong>: Usaremos este nuevo método en los controladores para mostrar la tabla de gestión.</li>
<li><strong><code>except(['index', 'show'])</code></strong>: Reutilizamos el <code>resource</code> para las rutas <code>create</code>, <code>store</code>, <code>edit</code>, <code>update</code> y <code>destroy</code>, pero excluimos <code>index</code> y <code>show</code> que ya usamos para la parte pública.</li>
</ul>
<p>En este punto deberías tener todas las rutas necesarias definidas correctamente. Puedes probar a navegar por la tienda pública y verificar que las rutas funcionan.</p>
<h3 id="3-anadir-enlaces-de-administracion-al-menu-de-navegacion">3. Añadir enlaces de administración al menú de navegación<a class="headerlink" href="#3-anadir-enlaces-de-administracion-al-menu-de-navegacion" title="Permanent link">&para;</a></h3>
<p>Ahora para llegar desde la tienda pública al login o registro, necesitamos una forma de navegar a ella. Para ello, vamos a añadir un enlace en el menú de navegación en <code>partials/navigation.blade.php</code>.</p>
<details class="questionlaravel">
<summary>Añadir código en <code>navigation.blade.php</code></summary>
<p>Abre el archivo <code>resources/views/partials/navigation.blade.php</code> y añade el enlace de login o registro:</p>
<p>Código Blade (<code>partials/navigation.blade.php</code> - Fragmento)
<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">nav</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;hidden md:flex space-x-8&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;{{ route(&#39;welcome&#39;) }}&quot;</span> 
    <span class="na">class</span><span class="o">=</span><span class="s">&quot;text-gray-700 hover:text-primary-600 transition {{ request()-&gt;routeIs(&#39;welcome&#39;) ? &#39;text-primary-600 font-semibold&#39; : &#39;&#39; }}&quot;</span><span class="p">&gt;</span>
        Inicio
    <span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;{{ route(&#39;products.index&#39;) }}&quot;</span> 
    <span class="na">class</span><span class="o">=</span><span class="s">&quot;text-gray-700 hover:text-primary-600 transition {{ request()-&gt;routeIs(&#39;products.*&#39;) ? &#39;text-primary-600 font-semibold&#39; : &#39;&#39; }}&quot;</span><span class="p">&gt;</span>
        Productos
    <span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;{{ route(&#39;categories.index&#39;) }}&quot;</span> 
    <span class="na">class</span><span class="o">=</span><span class="s">&quot;text-gray-700 hover:text-primary-600 transition {{ request()-&gt;routeIs(&#39;categories.*&#39;) ? &#39;text-primary-600 font-semibold&#39; : &#39;&#39; }}&quot;</span><span class="p">&gt;</span>
        Categorías
    <span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;{{ route(&#39;offers.index&#39;) }}&quot;</span> 
    <span class="na">class</span><span class="o">=</span><span class="s">&quot;text-gray-700 hover:text-primary-600 transition {{ request()-&gt;routeIs(&#39;offers.*&#39;) ? &#39;text-primary-600 font-semibold&#39; : &#39;&#39; }}&quot;</span><span class="p">&gt;</span>
        Ofertas
    <span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;{{ route(&#39;contact&#39;) }}&quot;</span> 
    <span class="na">class</span><span class="o">=</span><span class="s">&quot;text-gray-700 hover:text-primary-600 transition {{ request()-&gt;routeIs(&#39;contact&#39;) ? &#39;text-primary-600 font-semibold&#39; : &#39;&#39; }}&quot;</span><span class="p">&gt;</span>
        Contacto
    <span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
    @auth
        <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;{{ route(&#39;dashboard&#39;) }}&quot;</span> 
        <span class="na">class</span><span class="o">=</span><span class="s">&quot;text-gray-700 hover:text-primary-600 transition {{ request()-&gt;routeIs(&#39;dashboard&#39;) ? &#39;text-primary-600 font-semibold&#39; : &#39;&#39; }}&quot;</span><span class="p">&gt;</span>
            Dashboard
        <span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
    @endauth
    @guest
        <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;{{ route(&#39;login&#39;) }}&quot;</span> 
        <span class="na">class</span><span class="o">=</span><span class="s">&quot;text-gray-700 hover:text-primary-600 transition {{ request()-&gt;routeIs(&#39;login&#39;) ? &#39;text-primary-600 font-semibold&#39; : &#39;&#39; }}&quot;</span><span class="p">&gt;</span>
            Login
        <span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
    @endguest
<span class="p">&lt;/</span><span class="nt">nav</span><span class="p">&gt;</span>
</code></pre></div></p>
</details>
<p><strong>Directiva <code>@auth</code> y <code>@guest</code></strong></p>
<p>La directiva <strong><code>@auth</code></strong> de Blade es un condicional que solo renderiza el bloque de código si el usuario actual está autenticado. </p>
<p>La directiva <strong><code>@guest</code></strong> es un condicional que solo renderiza el bloque de código si el usuario actual no está autenticado.</p>
<h2 id="fase-6-configurar-el-sistema-de-almacenamiento-de-archivos">FASE 6: Configurar el Sistema de Almacenamiento de Archivos<a class="headerlink" href="#fase-6-configurar-el-sistema-de-almacenamiento-de-archivos" title="Permanent link">&para;</a></h2>
<p>Antes de crear el formulario de productos, necesitamos preparar Laravel para manejar la carga de archivos de forma segura.</p>
<h3 id="1-crear-el-enlace-simbolico">1. Crear el Enlace Simbólico<a class="headerlink" href="#1-crear-el-enlace-simbolico" title="Permanent link">&para;</a></h3>
<p>Para que las imágenes guardadas en <code>storage/app/public</code> sean accesibles desde la web, </p>
<details class="questionlaravel">
<summary>ejecuta</summary>
<div class="highlight"><pre><span></span><code>sail<span class="w"> </span>artisan<span class="w"> </span>storage:link
</code></pre></div>
</details>
<details class="examplelaravel">
<summary>Ejemplo de respuesta</summary>
<div class="highlight"><pre><span></span><code>artur@pc_classe:~/development/laravel/MyShop$<span class="w"> </span>sail<span class="w"> </span>artisan<span class="w"> </span>storage:link

INFO<span class="w">  </span>The<span class="w"> </span><span class="o">[</span>public/storage<span class="o">]</span><span class="w"> </span>link<span class="w"> </span>has<span class="w"> </span>been<span class="w"> </span>connected<span class="w"> </span>to<span class="w"> </span><span class="o">[</span>storage/app/public<span class="o">]</span>.
</code></pre></div>
</details>
<p>Ahora, cualquier archivo en <code>storage/app/public/products/imagen.jpg</code> será accesible como <code>http://localhost/storage/products/imagen.jpg</code>.</p>
<h3 id="2-anadir-el-campo-de-imagen-a-la-tabla-de-productos">2. Añadir el Campo de Imagen a la Tabla de Productos<a class="headerlink" href="#2-anadir-el-campo-de-imagen-a-la-tabla-de-productos" title="Permanent link">&para;</a></h3>
<p>Necesitamos una columna en la base de datos para guardar la ruta de la imagen de cada producto.</p>
<details class="questionlaravel">
<summary>Crea una nueva migración</summary>
<div class="highlight"><pre><span></span><code>sail<span class="w"> </span>artisan<span class="w"> </span>make:migration<span class="w"> </span>add_image_to_products_table<span class="w"> </span>--table<span class="o">=</span>products
</code></pre></div>
</details>
<details class="examplelaravel">
<summary>Ejemplo de respuesta</summary>
<div class="highlight"><pre><span></span><code>artur@pc_classe:~/development/laravel/MyShop$<span class="w"> </span>sail<span class="w"> </span>artisan<span class="w"> </span>make:migration<span class="w"> </span>add_image_to_products_table<span class="w"> </span>--table<span class="o">=</span>products

INFO<span class="w">  </span>Migration<span class="w"> </span><span class="o">[</span>database/migrations/2025_10_17_120345_add_image_to_products_table.php<span class="o">]</span><span class="w"> </span>created<span class="w"> </span>successfully.
</code></pre></div>
</details>
<details class="questionlaravel">
<summary>Añade código en el archivo de miagración</summary>
<p>Abre el archivo de migración recién creado (<code>2025_10_19_144009_add_image_to_products_table.php</code>) y añade la columna:</p>
<p>Código PHP (Migración)
<div class="highlight"><pre><span></span><code><span class="cp">&lt;?php</span>

<span class="k">use</span> <span class="nx">Illuminate\Database\Migrations\Migration</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\Database\Schema\Blueprint</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\Support\Facades\Schema</span><span class="p">;</span>

<span class="k">return</span> <span class="k">new</span> <span class="k">class</span> <span class="k">extends</span> <span class="nx">Migration</span>
<span class="p">{</span>
    <span class="sd">/**</span>
<span class="sd">    * Run the migrations.</span>
<span class="sd">    */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">up</span><span class="p">()</span><span class="o">:</span> <span class="nx">void</span>
    <span class="p">{</span>
        <span class="nx">Schema</span><span class="o">::</span><span class="na">table</span><span class="p">(</span><span class="s1">&#39;products&#39;</span><span class="p">,</span> <span class="k">function</span> <span class="p">(</span><span class="nx">Blueprint</span> <span class="nv">$table</span><span class="p">)</span> <span class="p">{</span>
            <span class="nv">$table</span><span class="o">-&gt;</span><span class="na">string</span><span class="p">(</span><span class="s1">&#39;image&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">nullable</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">after</span><span class="p">(</span><span class="s1">&#39;description&#39;</span><span class="p">);</span>
        <span class="p">});</span>
    <span class="p">}</span>

    <span class="sd">/**</span>
<span class="sd">    * Reverse the migrations.</span>
<span class="sd">    */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">down</span><span class="p">()</span><span class="o">:</span> <span class="nx">void</span>
    <span class="p">{</span>
        <span class="nx">Schema</span><span class="o">::</span><span class="na">table</span><span class="p">(</span><span class="s1">&#39;products&#39;</span><span class="p">,</span> <span class="k">function</span> <span class="p">(</span><span class="nx">Blueprint</span> <span class="nv">$table</span><span class="p">)</span> <span class="p">{</span>
            <span class="nv">$table</span><span class="o">-&gt;</span><span class="na">dropColumn</span><span class="p">(</span><span class="s1">&#39;image&#39;</span><span class="p">);</span>
        <span class="p">});</span>
    <span class="p">}</span>
<span class="p">};</span>
</code></pre></div></p>
</details>
<p><strong>Por qué <code>nullable()</code></strong></p>
<p>Hacemos la columna <code>nullable()</code> para que los productos existentes no generen errores. Además, así podemos crear productos sin imagen si es necesario.</p>
<details class="questionlaravel">
<summary>Ejecuta la migración</summary>
<div class="highlight"><pre><span></span><code>sail<span class="w"> </span>artisan<span class="w"> </span>migrate
</code></pre></div>
</details>
<details class="examplelaravel">
<summary>Ejemplo de respuesta</summary>
<div class="highlight"><pre><span></span><code>artur@pc_classe:~/development/laravel/MyShop$<span class="w"> </span>sail<span class="w"> </span>artisan<span class="w"> </span>migrate

INFO<span class="w">  </span>Running<span class="w"> </span>migrations.

2025_10_17_131336_add_image_to_products_table<span class="w"> </span>............<span class="w"> </span>28ms<span class="w"> </span>DONE
</code></pre></div>
</details>
<h3 id="3-actualizar-el-modelo-product-para-permitir-el-campo-image">3. Actualizar el Modelo <code>Product</code> para Permitir el Campo <code>image</code><a class="headerlink" href="#3-actualizar-el-modelo-product-para-permitir-el-campo-image" title="Permanent link">&para;</a></h3>
<details class="questionlaravel">
<summary>Añadir campo <code>image</code> a <code>Product.php</code></summary>
<p>Abre <code>app/Models/Product.php</code> y añade <code>'image'</code> al array <code>$fillable</code>:</p>
<p>Código PHP (<code>Product.php</code>)
<div class="highlight"><pre><span></span><code><span class="cp">&lt;?php</span>

<span class="k">namespace</span> <span class="nx">App\Models</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Illuminate\Database\Eloquent\Casts\Attribute</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\Database\Eloquent\Factories\HasFactory</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\Database\Eloquent\Model</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\Database\Eloquent\Relations\BelongsTo</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\Database\Eloquent\Relations\BelongsToMany</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">Product</span> <span class="k">extends</span> <span class="nx">Model</span>
<span class="p">{</span>
    <span class="k">use</span> <span class="nx">HasFactory</span><span class="p">;</span>

    <span class="k">protected</span> <span class="nv">$fillable</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s1">&#39;name&#39;</span><span class="p">,</span>
        <span class="s1">&#39;description&#39;</span><span class="p">,</span>
        <span class="s1">&#39;image&#39;</span><span class="p">,</span>   <span class="c1">// Añadimos el campo de imagen</span>
        <span class="s1">&#39;price&#39;</span><span class="p">,</span>
        <span class="s1">&#39;category_id&#39;</span><span class="p">,</span>
        <span class="s1">&#39;offer_id&#39;</span><span class="p">,</span>
    <span class="p">];</span>

    <span class="sd">/**</span>
<span class="sd">    * Get the attributes that should be cast.</span>
<span class="sd">    */</span>
    <span class="k">protected</span> <span class="k">function</span> <span class="nf">casts</span><span class="p">()</span><span class="o">:</span> <span class="k">array</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="p">[</span>
            <span class="s1">&#39;price&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;decimal:2&#39;</span><span class="p">,</span>
        <span class="p">];</span>
    <span class="p">}</span>

    <span class="sd">/**</span>
<span class="sd">    * Calculate the final price after applying offer discount.</span>
<span class="sd">    * </span>
<span class="sd">    * @return Attribute</span>
<span class="sd">    */</span>
    <span class="k">protected</span> <span class="k">function</span> <span class="nf">finalPrice</span><span class="p">()</span><span class="o">:</span> <span class="nx">Attribute</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="nx">Attribute</span><span class="o">::</span><span class="na">make</span><span class="p">(</span>
            <span class="nx">get</span><span class="o">:</span> <span class="k">function</span> <span class="p">()</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">offer</span> <span class="o">&amp;&amp;</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">offer</span><span class="o">-&gt;</span><span class="na">discount_percentage</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nv">$discount</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">price</span> <span class="o">*</span> <span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">offer</span><span class="o">-&gt;</span><span class="na">discount_percentage</span> <span class="o">/</span> <span class="mi">100</span><span class="p">);</span>
                    <span class="k">return</span> <span class="nb">round</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">price</span> <span class="o">-</span> <span class="nv">$discount</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
                <span class="p">}</span>
                <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">price</span><span class="p">;</span>
            <span class="p">},</span>
        <span class="p">);</span>
    <span class="p">}</span>

    <span class="sd">/**</span>
<span class="sd">    * Get the category that owns the product.</span>
<span class="sd">    */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">category</span><span class="p">()</span><span class="o">:</span> <span class="nx">BelongsTo</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">belongsTo</span><span class="p">(</span><span class="nx">Category</span><span class="o">::</span><span class="na">class</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="sd">/**</span>
<span class="sd">    * Get the offer that applies to this product.</span>
<span class="sd">    */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">offer</span><span class="p">()</span><span class="o">:</span> <span class="nx">BelongsTo</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">belongsTo</span><span class="p">(</span><span class="nx">Offer</span><span class="o">::</span><span class="na">class</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="sd">/**</span>
<span class="sd">    * The users that have this product in their wishlist.</span>
<span class="sd">    */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">users</span><span class="p">()</span><span class="o">:</span> <span class="nx">BelongsToMany</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">belongsToMany</span><span class="p">(</span><span class="nx">User</span><span class="o">::</span><span class="na">class</span><span class="p">)</span>
            <span class="o">-&gt;</span><span class="na">withPivot</span><span class="p">(</span><span class="s1">&#39;quantity&#39;</span><span class="p">)</span>
            <span class="o">-&gt;</span><span class="na">withTimestamps</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></p>
</details>
<h3 id="4-implementar-sistema-de-notificaciones-flash-messages">4. Implementar Sistema de Notificaciones (Flash Messages)<a class="headerlink" href="#4-implementar-sistema-de-notificaciones-flash-messages" title="Permanent link">&para;</a></h3>
<p>Antes de empezar a implementar el CRUD de productos, vamos a preparar el sistema de notificaciones. Esto nos permitirá mostrar mensajes que se muestran una sola vez y luego desaparecen después de cada operación (crear, editar, eliminar) desde el primer momento.</p>
<p>Para ello vamos a crear un archivo parcial (partial) para las notificaciones y lo incluiremos tanto en el layout de administración (<code>app.blade.php</code>) como en el layout público (<code>public.blade.php</code>). Esto evita duplicar código y mantiene la consistencia.</p>
<h4 id="paso-1-crear-el-partial-de-notificaciones">Paso 1: Crear el Partial de Notificaciones<a class="headerlink" href="#paso-1-crear-el-partial-de-notificaciones" title="Permanent link">&para;</a></h4>
<details class="questionlaravel">
<summary>Crea el archivo para las notificaciones flash</summary>
<div class="highlight"><pre><span></span><code>touch<span class="w"> </span>resources/views/partials/flash-messages.blade.php
</code></pre></div>
</details>
<details class="questionlaravel">
<summary>Añadir código en lash-messages.blade.php`</summary>
<p>Añade el siguiente contenido al archivo <code>resources/views/partials/flash-messages.blade.php</code>:</p>
<p>Código Blade (<code>partials/flash-messages.blade.php</code>)
<div class="highlight"><pre><span></span><code>{<del class="critic"> Sistema de Notificaciones Flash </del>}
<span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 mt-6&quot;</span><span class="p">&gt;</span>
    @if (session(&#39;success&#39;))
        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;bg-green-100 border-l-4 border-green-500 text-green-700 p-4 rounded-md shadow-sm&quot;</span> <span class="na">role</span><span class="o">=</span><span class="s">&quot;alert&quot;</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">p</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;font-bold&quot;</span><span class="p">&gt;</span>✓ Éxito<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>{{ session(&#39;success&#39;) }}<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    @endif

    @if (session(&#39;error&#39;))
        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;bg-red-100 border-l-4 border-red-500 text-red-700 p-4 rounded-md shadow-sm&quot;</span> <span class="na">role</span><span class="o">=</span><span class="s">&quot;alert&quot;</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">p</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;font-bold&quot;</span><span class="p">&gt;</span>✗ Error<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>{{ session(&#39;error&#39;) }}<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    @endif

    @if (session(&#39;info&#39;))
        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;bg-blue-100 border-l-4 border-blue-500 text-blue-700 p-4 rounded-md shadow-sm&quot;</span> <span class="na">role</span><span class="o">=</span><span class="s">&quot;alert&quot;</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">p</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;font-bold&quot;</span><span class="p">&gt;</span>ⓘ Información<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>{{ session(&#39;info&#39;) }}<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    @endif
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</code></pre></div></p>
</details>
<h4 id="paso-2-actualizar-el-layout-de-administracion">Paso 2: Actualizar el Layout de Administración<a class="headerlink" href="#paso-2-actualizar-el-layout-de-administracion" title="Permanent link">&para;</a></h4>
<details class="questionlaravel">
<summary>Sustituye código en <code>app.blade.php</code></summary>
<p>Abre el layout principal de administración <code>resources/views/layouts/app.blade.php</code> y sustituye todo su contenido por el siguiente código:</p>
<p>Código Blade (<code>layouts/app.blade.php</code>)
<div class="highlight"><pre><span></span><code><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span> <span class="na">lang</span><span class="o">=</span><span class="s">&quot;{{ str_replace(&#39;_&#39;, &#39;-&#39;, app()-&gt;getLocale()) }}&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&quot;utf-8&quot;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;viewport&quot;</span> <span class="na">content</span><span class="o">=</span><span class="s">&quot;width=device-width, initial-scale=1&quot;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;csrf-token&quot;</span> <span class="na">content</span><span class="o">=</span><span class="s">&quot;{{ csrf_token() }}&quot;</span><span class="p">&gt;</span>

        <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>{{ config(&#39;app.name&#39;, &#39;Laravel&#39;) }}<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>

        <span class="cm">&lt;!-- Fonts --&gt;</span>
        <span class="p">&lt;</span><span class="nt">link</span> <span class="na">rel</span><span class="o">=</span><span class="s">&quot;preconnect&quot;</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;https://fonts.bunny.net&quot;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">link</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;https://fonts.bunny.net/css?family=figtree:400,500,600&amp;display=swap&quot;</span> <span class="na">rel</span><span class="o">=</span><span class="s">&quot;stylesheet&quot;</span> <span class="p">/&gt;</span>

        <span class="cm">&lt;!-- Scripts --&gt;</span>
        @include(&#39;partials.head&#39;)
        @vite([&#39;resources/css/app.css&#39;, &#39;resources/js/app.js&#39;])
    <span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">body</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;font-sans antialiased&quot;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;min-h-screen bg-gray-100&quot;</span><span class="p">&gt;</span>
            @include(&#39;layouts.navigation&#39;)

            <span class="cm">&lt;!-- Page Heading --&gt;</span>
            @isset($header)
                <span class="p">&lt;</span><span class="nt">header</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;bg-white shadow&quot;</span><span class="p">&gt;</span>
                    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8&quot;</span><span class="p">&gt;</span>
                        {{ $header }}
                    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
                <span class="p">&lt;/</span><span class="nt">header</span><span class="p">&gt;</span>
            @endisset

            <span class="cm">&lt;!-- Notificaciones Flash --&gt;</span>
            @include(&#39;partials.flash-messages&#39;)

            <span class="cm">&lt;!-- Page Content --&gt;</span>
            <span class="p">&lt;</span><span class="nt">main</span><span class="p">&gt;</span>
                {{ $slot }}
            <span class="p">&lt;/</span><span class="nt">main</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</code></pre></div></p>
</details>
<h4 id="paso-3-actualizar-el-layout-publico">Paso 3: Actualizar el Layout Público<a class="headerlink" href="#paso-3-actualizar-el-layout-publico" title="Permanent link">&para;</a></h4>
<p>Ahora vamos a incluir el mismo partial de notificaciones en el layout público para que los mensajes del carrito y wishlist también se muestren correctamente.</p>
<details class="questionlaravel">
<summary>Añader código en <code>public.blade.php</code></summary>
<p>Abre <code>resources/views/layouts/public.blade.php</code> y añade el include de notificaciones <strong>después del header</strong> y <strong>antes del contenido</strong>:</p>
<p>Código Blade (<code>layouts/public.blade.php</code> - Fragmento)
<div class="highlight"><pre><span></span><code><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span> <span class="na">lang</span><span class="o">=</span><span class="s">&quot;es&quot;</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
    @include(&#39;partials.head&#39;)
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;bg-gray-50&quot;</span><span class="p">&gt;</span>
    <span class="cm">&lt;!-- Header usando partial --&gt;</span>
    @include(&#39;partials.header&#39;)

    <span class="cm">&lt;!-- Notificaciones Flash --&gt;</span>
    @include(&#39;partials.flash-messages&#39;)

    <span class="cm">&lt;!-- Contenido principal --&gt;</span>
    <span class="p">&lt;</span><span class="nt">main</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;min-h-screen&quot;</span><span class="p">&gt;</span>
        @yield(&#39;content&#39;)
    <span class="p">&lt;/</span><span class="nt">main</span><span class="p">&gt;</span>

    <span class="cm">&lt;!-- Footer usando partial --&gt;</span>
    @include(&#39;partials.footer&#39;)

    @stack(&#39;scripts&#39;)
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</code></pre></div></p>
</details>
<p>Hemos implementado el sistema de notificaciones flash que permite mostrar mensajes temporales después de operaciones CRUD. Los mensajes se envían desde controladores con <code>-&gt;with('success', 'mensaje')</code> y se muestran automáticamente en ambos layouts.</p>
<h2 id="fase-7-implementar-creacion-de-productos-create">FASE 7: Implementar Creación de Productos (CREATE)<a class="headerlink" href="#fase-7-implementar-creacion-de-productos-create" title="Permanent link">&para;</a></h2>
<p>Ahora que tenemos el sistema de almacenamiento y notificaciones configurado, vamos a implementar la funcionalidad completa para crear productos, incluyendo formularios con Blade Components, validación de datos y gestión de imágenes.</p>
<h3 id="1-los-metodos-create-en-los-controladores">1. Los Métodos <code>create()</code> en los Controladores<a class="headerlink" href="#1-los-metodos-create-en-los-controladores" title="Permanent link">&para;</a></h3>
<p>Los metodos <code>create()</code> en los controladores deben cargar las vistas de creación y pasar los datos necesarios para los formularios.</p>
<details class="questionlaravel">
<summary>Sustituye código en <code>ProductController.php</code></summary>
<p>Abre el archivo <code>app/Http/Controllers/ProductController.php</code> y busca el método <code>create()</code>. Reemplázalo con:</p>
<p>Código PHP (<code>ProductController@create</code>)
<div class="highlight"><pre><span></span><code><span class="x">    /**</span>
<span class="x">    * Muestra el formulario para crear un nuevo producto.</span>
<span class="x">    */</span>
<span class="x">    public function create(): View</span>
<span class="x">    {</span>
<span class="x">        // Cargar todas las categorías y ofertas para los selectores del formulario</span>
<span class="x">        $categories = Category::all();</span>
<span class="x">        $offers = Offer::all();</span>

<span class="x">        return view(&#39;admin.products.create&#39;, compact(&#39;categories&#39;, &#39;offers&#39;));</span>
<span class="x">    }</span>
</code></pre></div></p>
</details>
<p><strong>Cargar Categorías y Ofertas</strong></p>
<p>Cargamos todas las categorías y ofertas para que el formulario de creación de productos tenga selectores desplegables.</p>
<h3 id="3-crear-formularios">3. Crear formularios <a href="#_3-crear-formularios">​</a><a class="headerlink" href="#3-crear-formularios" title="Permanent link">&para;</a></h3>
<p>Ahora que comprendemos la sintaxis de componentes de Blade, vamos a crear los formularios para gestionar productos.</p>
<details class="questionlaravel">
<summary>Ejecuta</summary>
<p>Para ello crearemos el directorio <code>resources/views/admin/products</code> y dentro de él crearemos el archivo <code>create.blade.php</code>.
<div class="highlight"><pre><span></span><code>mkdir<span class="w"> </span>-p<span class="w"> </span>resources/views/admin/products
</code></pre></div></p>
</details>
<p><strong>¿Por qué Separar las Vistas en <code>admin/</code>?</strong></p>
<p>Organizamos las vistas de administración en una carpeta separada <code>resources/views/admin/</code> por varias razones:</p>
<p><strong>1. Organización por contexto</strong>: Agrupa todas las funcionalidades administrativas en un solo lugar, facilitando el mantenimiento.</p>
<p><strong>2. Separación clara de responsabilidades</strong>: Las vistas públicas (<code>products/</code>) son para visitantes, mientras que <code>admin/</code> es para gestión.</p>
<p><strong>3. Layouts diferentes</strong>: Las vistas admin usan <code>layouts.app</code> (dashboard, menú de usuario con enlaces admin), mientras que las públicas usan <code>layouts.public</code> (navegación de tienda, footer).</p>
<p><strong>4. Escalabilidad</strong>: Cuando añadas más funcionalidades admin (categorias, ofertas, usuarios), todo estará organizado en <code>admin/</code>.</p>
<p><strong>5. Convención de Laravel</strong>: Es la estructura estándar usada por Laravel Breeze, Jetstream, Nova y la mayoría de proyectos profesionales.</p>
<p>Esta organización hace que <code>view('admin.products.index')</code> sea claramente diferente de <code>view('products.index')</code>.</p>
<p>Antes de crear nuestros formularios, es importante entender que Laravel Breeze utiliza <strong>componentes de Blade</strong> en lugar de la sintaxis tradicional con <code>@extends</code> y <code>@section</code>. Esta es la forma moderna y recomendada de trabajar con layouts en Laravel desde la versión 7.</p>
<p>En la parte de administración de la práctica usaremos componentes de Blade para las vistas de administración (con Breeze) y la sintaxis tradicional para las vistas públicas.</p>
<h4 id="formulario-para-productos">Formulario para Productos<a class="headerlink" href="#formulario-para-productos" title="Permanent link">&para;</a></h4>
<details class="questionlaravel">
<summary>Ejecuta</summary>
<p>Crea el archivo <code>resources/views/admin/products/create.blade.php</code>:
<div class="highlight"><pre><span></span><code>touch<span class="w"> </span>resources/views/admin/products/create.blade.php
</code></pre></div></p>
</details>
<details class="questionlaravel">
<summary>Añader código en <code>create.blade.php</code></summary>
<p>Añade el siguiente código:</p>
<p>Código Blade (<code>admin/products/create.blade.php</code>)
<div class="highlight"><pre><span></span><code><span class="x">&lt;x-app-layout&gt;</span>
<span class="x">    &lt;x-slot name=&quot;header&quot;&gt;</span>
<span class="x">        &lt;h2 class=&quot;font-semibold text-xl text-gray-800 leading-tight&quot;&gt;</span>
<span class="x">            {{ __(&#39;Crear Nuevo Producto&#39;) }}</span>
<span class="x">        &lt;/h2&gt;</span>
<span class="x">    &lt;/x-slot&gt;</span>

<span class="x">    &lt;div class=&quot;py-12&quot;&gt;</span>
<span class="x">        &lt;div class=&quot;max-w-4xl mx-auto sm:px-6 lg:px-8&quot;&gt;</span>
<span class="x">            &lt;div class=&quot;bg-white overflow-hidden shadow-sm sm:rounded-lg&quot;&gt;</span>
<span class="x">                &lt;div class=&quot;p-6 bg-white border-b border-gray-200&quot;&gt;</span>
<span class="x">                    &lt;form action=&quot;{{ route(&#39;admin.products.store&#39;) }}&quot; method=&quot;POST&quot; enctype=&quot;multipart/form-data&quot; class=&quot;space-y-6&quot;&gt;</span>
<span class="x">                        @csrf</span>

<span class="x">                        {<del class="critic"> Nombre del Producto </del>}</span>
<span class="x">                        &lt;div&gt;</span>
<span class="x">                            &lt;label for=&quot;name&quot; class=&quot;block text-sm font-medium text-gray-700&quot;&gt;Nombre del Producto *&lt;/label&gt;</span>
<span class="x">                            &lt;input type=&quot;text&quot; id=&quot;name&quot; name=&quot;name&quot; value=&quot;{{ old(&#39;name&#39;) }}&quot; class=&quot;mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 @error(&#39;name&#39;) border-red-500 @enderror&quot; required&gt;</span>
<span class="x">                            @error(&#39;name&#39;)</span>
<span class="x">                                &lt;p class=&quot;mt-1 text-sm text-red-600&quot;&gt;{{ $message }}&lt;/p&gt;</span>
<span class="x">                            @enderror</span>
<span class="x">                        &lt;/div&gt;</span>

<span class="x">                        {<del class="critic"> Descripción </del>}</span>
<span class="x">                        &lt;div&gt;</span>
<span class="x">                            &lt;label for=&quot;description&quot; class=&quot;block text-sm font-medium text-gray-700&quot;&gt;Descripción *&lt;/label&gt;</span>
<span class="x">                            &lt;textarea id=&quot;description&quot; name=&quot;description&quot; rows=&quot;4&quot; class=&quot;mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 @error(&#39;description&#39;) border-red-500 @enderror&quot; required&gt;{{ old(&#39;description&#39;) }}&lt;/textarea&gt;</span>
<span class="x">                            @error(&#39;description&#39;)</span>
<span class="x">                                &lt;p class=&quot;mt-1 text-sm text-red-600&quot;&gt;{{ $message }}&lt;/p&gt;</span>
<span class="x">                            @enderror</span>
<span class="x">                        &lt;/div&gt;</span>

<span class="x">                        {<del class="critic"> Imagen del Producto </del>}</span>
<span class="x">                        &lt;div&gt;</span>
<span class="x">                            &lt;label for=&quot;image&quot; class=&quot;block text-sm font-medium text-gray-700&quot;&gt;Imagen del Producto&lt;/label&gt;</span>
<span class="x">                            &lt;input type=&quot;file&quot; id=&quot;image&quot; name=&quot;image&quot; accept=&quot;image/jpeg,image/png,image/jpg,image/webp&quot; class=&quot;mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100 @error(&#39;image&#39;) border-red-500 @enderror&quot;&gt;</span>
<span class="x">                            &lt;p class=&quot;mt-1 text-xs text-gray-500&quot;&gt;Formatos permitidos: JPG, PNG, WEBP. Tamaño máximo: 2MB&lt;/p&gt;</span>
<span class="x">                            @error(&#39;image&#39;)</span>
<span class="x">                                &lt;p class=&quot;mt-1 text-sm text-red-600&quot;&gt;{{ $message }}&lt;/p&gt;</span>
<span class="x">                            @enderror</span>
<span class="x">                        &lt;/div&gt;</span>

<span class="x">                        {<del class="critic"> Precio </del>}</span>
<span class="x">                        &lt;div&gt;</span>
<span class="x">                            &lt;label for=&quot;price&quot; class=&quot;block text-sm font-medium text-gray-700&quot;&gt;Precio (€) *&lt;/label&gt;</span>
<span class="x">                            &lt;input type=&quot;number&quot; id=&quot;price&quot; name=&quot;price&quot; value=&quot;{{ old(&#39;price&#39;) }}&quot; step=&quot;0.01&quot; min=&quot;0&quot; class=&quot;mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 @error(&#39;price&#39;) border-red-500 @enderror&quot; required&gt;</span>
<span class="x">                            @error(&#39;price&#39;)</span>
<span class="x">                                &lt;p class=&quot;mt-1 text-sm text-red-600&quot;&gt;{{ $message }}&lt;/p&gt;</span>
<span class="x">                            @enderror</span>
<span class="x">                        &lt;/div&gt;</span>

<span class="x">                        {<del class="critic"> Categoría </del>}</span>
<span class="x">                        &lt;div&gt;</span>
<span class="x">                            &lt;label for=&quot;category_id&quot; class=&quot;block text-sm font-medium text-gray-700&quot;&gt;Categoría *&lt;/label&gt;</span>
<span class="x">                            &lt;select id=&quot;category_id&quot; name=&quot;category_id&quot; class=&quot;mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 @error(&#39;category_id&#39;) border-red-500 @enderror&quot; required&gt;</span>
<span class="x">                                &lt;option value=&quot;&quot;&gt;Selecciona una categoría&lt;/option&gt;</span>
<span class="x">                                @foreach($categories as $category)</span>
<span class="x">                                    &lt;option value=&quot;{{ $category-&gt;id }}&quot; {{ old(&#39;category_id&#39;) == $category-&gt;id ? &#39;selected&#39; : &#39;&#39; }}&gt;</span>
<span class="x">                                        {{ $category-&gt;name }}</span>
<span class="x">                                    &lt;/option&gt;</span>
<span class="x">                                @endforeach</span>
<span class="x">                            &lt;/select&gt;</span>
<span class="x">                            @error(&#39;category_id&#39;)</span>
<span class="x">                                &lt;p class=&quot;mt-1 text-sm text-red-600&quot;&gt;{{ $message }}&lt;/p&gt;</span>
<span class="x">                            @enderror</span>
<span class="x">                        &lt;/div&gt;</span>

<span class="x">                        {<del class="critic"> Oferta (Opcional) </del>}</span>
<span class="x">                        &lt;div&gt;</span>
<span class="x">                            &lt;label for=&quot;offer_id&quot; class=&quot;block text-sm font-medium text-gray-700&quot;&gt;Oferta (Opcional)&lt;/label&gt;</span>
<span class="x">                            &lt;select id=&quot;offer_id&quot; name=&quot;offer_id&quot; class=&quot;mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 @error(&#39;offer_id&#39;) border-red-500 @enderror&quot;&gt;</span>
<span class="x">                                &lt;option value=&quot;&quot;&gt;Sin oferta&lt;/option&gt;</span>
<span class="x">                                @foreach($offers as $offer)</span>
<span class="x">                                    &lt;option value=&quot;{{ $offer-&gt;id }}&quot; {{ old(&#39;offer_id&#39;) == $offer-&gt;id ? &#39;selected&#39; : &#39;&#39; }}&gt;</span>
<span class="x">                                        {{ $offer-&gt;name }} (-{{ $offer-&gt;discount_percentage }}%)</span>
<span class="x">                                    &lt;/option&gt;</span>
<span class="x">                                @endforeach</span>
<span class="x">                            &lt;/select&gt;</span>
<span class="x">                            @error(&#39;offer_id&#39;)</span>
<span class="x">                                &lt;p class=&quot;mt-1 text-sm text-red-600&quot;&gt;{{ $message }}&lt;/p&gt;</span>
<span class="x">                            @enderror</span>
<span class="x">                        &lt;/div&gt;</span>

<span class="x">                        {<del class="critic"> Botones de Acción </del>}</span>
<span class="x">                        &lt;div class=&quot;flex justify-end space-x-4 pt-4&quot;&gt;</span>
<span class="x">                            &lt;a href=&quot;{{ route(&#39;admin.products.index&#39;) }}&quot; class=&quot;px-4 py-2 bg-gray-300 text-gray-800 rounded-md hover:bg-gray-400 transition&quot;&gt;</span>
<span class="x">                                Cancelar</span>
<span class="x">                            &lt;/a&gt;</span>
<span class="x">                            &lt;button type=&quot;submit&quot; class=&quot;px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition&quot;&gt;</span>
<span class="x">                                Crear Producto</span>
<span class="x">                            &lt;/button&gt;</span>
<span class="x">                        &lt;/div&gt;</span>
<span class="x">                    &lt;/form&gt;</span>
<span class="x">                &lt;/div&gt;</span>
<span class="x">            &lt;/div&gt;</span>
<span class="x">        &lt;/div&gt;</span>
<span class="x">    &lt;/div&gt;</span>
<span class="x">&lt;/x-app-layout&gt;</span>
</code></pre></div></p>
</details>
<blockquote>
<p>⚠️ El Atributo <code>enctype</code> es OBLIGATORIO</p>
<p>Observa la etiqueta <code>&lt;form&gt;</code>: incluye <code>enctype="multipart/form-data"</code>. <strong>Sin este atributo, el archivo NO se enviará al servidor</strong>. Es el error más común al trabajar con upload de archivos.</p>
</blockquote>
<hr />
<p><strong>Validación en el Cliente</strong></p>
<p>El atributo <code>accept="image/jpeg,image/png,image/jpg,image/webp"</code> limita los tipos de archivo en el selector de archivos del navegador, mejorando la experiencia del usuario. Sin embargo, <strong>siempre debemos validar también en el servidor</strong>.</p>
<h3 id="3-implementar-la-validacion-y-almacenamiento">3. Implementar la Validación y Almacenamiento<a class="headerlink" href="#3-implementar-la-validacion-y-almacenamiento" title="Permanent link">&para;</a></h3>
<p>Ahora viene la parte más importante: validar y almacenar de forma segura.</p>
<h4 id="almacenar-productos">Almacenar Productos<a class="headerlink" href="#almacenar-productos" title="Permanent link">&para;</a></h4>
<p>Modificaremos el método <code>store()</code> en <code>app/Http/Controllers/ProductController.php</code> para validar y almacenar los datos que provienen del formulario.</p>
<p>En primer lugar importamos la clase <code>RedirectResponse</code> para poder usarlos en el método. Lo añadimos antes de la declaración de la clase.
<div class="highlight"><pre><span></span><code><span class="x">    </span><span class="cp">&lt;?php</span>

    <span class="k">namespace</span> <span class="nx">App\Http\Controllers</span><span class="p">;</span>

    <span class="c1">// ... Otras importaciones ...</span>
    <span class="k">use</span> <span class="nx">Illuminate\Http\RedirectResponse</span><span class="p">;</span>
</code></pre></div></p>
<p>Luego actualizamos el método <code>store()</code> para validar y almacenar los datos que provienen del formulario.</p>
<p>Código PHP (<code>ProductController@store</code>)
<div class="highlight"><pre><span></span><code><span class="x">    /**</span>
<span class="x">     * Almacena un nuevo producto en la base de datos.</span>
<span class="x">     */</span>
<span class="x">    public function store(Request $request): RedirectResponse</span>
<span class="x">    {</span>
<span class="x">        // PASO 1: Validar todos los datos del formulario, incluyendo la imagen</span>
<span class="x">        $validated = $request-&gt;validate([</span>
<span class="x">            &#39;name&#39; =&gt; &#39;required|string|max:255|unique:products,name&#39;,</span>
<span class="x">            &#39;description&#39; =&gt; &#39;required|string|max:1000&#39;,</span>
<span class="x">            &#39;image&#39; =&gt; &#39;nullable|image|mimes:jpeg,png,jpg,webp|max:2048&#39;,</span>
<span class="x">            &#39;price&#39; =&gt; &#39;required|numeric|min:0|max:999999.99&#39;,</span>
<span class="x">            &#39;category_id&#39; =&gt; &#39;required|exists:categories,id&#39;,</span>
<span class="x">            &#39;offer_id&#39; =&gt; &#39;nullable|exists:offers,id&#39;,</span>
<span class="x">        ], [</span>
<span class="x">            &#39;name.required&#39; =&gt; &#39;El nombre del producto es obligatorio.&#39;,</span>
<span class="x">            &#39;name.unique&#39; =&gt; &#39;Ya existe un producto con ese nombre.&#39;,</span>
<span class="x">            &#39;description.required&#39; =&gt; &#39;La descripción es obligatoria.&#39;,</span>
<span class="x">            &#39;image.image&#39; =&gt; &#39;El archivo debe ser una imagen.&#39;,</span>
<span class="x">            &#39;image.mimes&#39; =&gt; &#39;La imagen debe ser de tipo: jpeg, png, jpg, webp.&#39;,</span>
<span class="x">            &#39;image.max&#39; =&gt; &#39;La imagen no debe superar los 2MB.&#39;,</span>
<span class="x">            &#39;price.required&#39; =&gt; &#39;El precio es obligatorio.&#39;,</span>
<span class="x">            &#39;price.numeric&#39; =&gt; &#39;El precio debe ser un número.&#39;,</span>
<span class="x">            &#39;category_id.required&#39; =&gt; &#39;Debes seleccionar una categoría.&#39;,</span>
<span class="x">            &#39;category_id.exists&#39; =&gt; &#39;La categoría seleccionada no es válida.&#39;,</span>
<span class="x">            &#39;offer_id.exists&#39; =&gt; &#39;La oferta seleccionada no es válida.&#39;,</span>
<span class="x">        ]);</span>

<span class="x">        // PASO 2: Procesar la imagen si fue subida</span>
<span class="x">        if ($request-&gt;hasFile(&#39;image&#39;)) {</span>
<span class="x">            // Guardar en el disco &#39;public&#39; dentro de la carpeta &#39;products&#39;</span>
<span class="x">            // Laravel genera automáticamente un nombre único para evitar colisiones</span>
<span class="x">            $imagePath = $request-&gt;file(&#39;image&#39;)-&gt;store(&#39;products&#39;, &#39;public&#39;);</span>
<span class="x">            $validated[&#39;image&#39;] = $imagePath;</span>
<span class="x">        }</span>

<span class="x">        // PASO 3: Crear el producto con los datos validados</span>
<span class="x">        Product::create($validated);</span>

<span class="x">        // PASO 4: Redirigir con mensaje de éxito</span>
<span class="x">        return redirect()</span>
<span class="x">            -&gt;route(&#39;admin.products.index&#39;)</span>
<span class="x">            -&gt;with(&#39;success&#39;, &#39;¡Producto creado exitosamente!&#39;);</span>
<span class="x">    }</span>
</code></pre></div></p>
<p>Reglas de Validación usadas</p>
<ul>
<li><strong><code>required</code></strong>: Campo obligatorio.</li>
<li><strong><code>string</code></strong>: Debe ser una cadena de texto.</li>
<li><strong><code>max:255</code></strong>: Longitud máxima de 255 caracteres.</li>
<li><strong><code>unique:products,name</code></strong>: El nombre debe ser único en la tabla <code>products</code>.</li>
<li><strong><code>exists:categories,id</code></strong>: La categoría debe existir en la tabla <code>categories</code>.</li>
<li><strong><code>exists:offers,id</code></strong>: La oferta debe existir en la tabla <code>offers</code>.</li>
<li><strong><code>numeric</code></strong>: Debe ser un número (puede tener decimales).</li>
<li><strong><code>min:0</code></strong>: Valor mínimo permitido.</li>
<li><strong><code>max:999999.99</code></strong>: Valor máximo permitido (hasta 6 dígitos enteros y 2 decimales).</li>
<li><strong><code>nullable</code></strong>: El campo puede estar vacío (opcional).</li>
<li><strong><code>image</code></strong>: Verifica que el archivo sea una imagen válida.</li>
<li><strong><code>mimes:jpeg,png,jpg,webp</code></strong>: Limita los formatos permitidos.</li>
<li><strong><code>max:2048</code></strong>: Tamaño máximo de 2MB (2048 KB).</li>
</ul>
<hr />
<p>¿Por qué <code>store('products', 'public')</code>?</p>
<ul>
<li><strong>Primer parámetro (<code>'products'</code>)</strong>: Carpeta donde se guardará la imagen dentro del disco.</li>
<li><strong>Segundo parámetro (<code>'public'</code>)</strong>: Disco a utilizar (público).</li>
<li>Resultado: La imagen se guardará en <code>storage/app/public/products/nombre-generado.jpg</code>.</li>
</ul>
<h3 id="3-anadir-las-imagenes-en-las-vistas-publicas">3. Añadir las imágenes en las vistas publicas<a class="headerlink" href="#3-anadir-las-imagenes-en-las-vistas-publicas" title="Permanent link">&para;</a></h3>
<p>Ahora que los productos pueden tener imágenes cargadas por el usuario, vamos a mostrarlas en la tienda pública.</p>
<h4 id="actualizar-el-componente-product-card-para-mostrar-imagenes">Actualizar el Componente <code>product-card</code> para Mostrar Imágenes<a class="headerlink" href="#actualizar-el-componente-product-card-para-mostrar-imagenes" title="Permanent link">&para;</a></h4>
<p>Como tenemos el componente <code>product-card.blade.php</code>, lo modificaremos para mostrar imágenes reales en lugar del emoji placeholder. Además, lo haremos más flexible usando <strong>slots</strong> para que pueda reutilizarse en diferentes contextos (listados públicos, wishlist, etc.).</p>
<p>Abre <code>resources/views/components/product-card.blade.php</code> y <strong>reemplaza todo el contenido</strong> por el siguiente:</p>
<p>Código Blade (<code>components/product-card.blade.php</code>)
<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;bg-white rounded-lg shadow-lg overflow-hidden product-card {{ $class }} relative {{ $product-&gt;offer ? &#39;ring-2 ring-orange-400&#39; : &#39;&#39; }}&quot;</span><span class="p">&gt;</span>
    <span class="cm">&lt;!-- Badge de oferta destacado (esquina superior derecha) --&gt;</span>
    @if($product-&gt;offer)
        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;absolute top-0 right-0 bg-gradient-to-r from-orange-500 to-red-500 text-white px-4 py-2 rounded-bl-lg font-bold shadow-lg z-10&quot;</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">span</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;text-lg&quot;</span><span class="p">&gt;</span>
                -{{ $product-&gt;offer-&gt;discount_percentage }}%
            <span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    @endif

    <span class="cm">&lt;!-- Slot opcional para botón adicional en esquina superior izquierda (ej: eliminar de wishlist) --&gt;</span>
    @isset($topAction)
        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;absolute top-2 left-2 z-10&quot;</span><span class="p">&gt;</span>
            {{ $topAction }}
        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    @endisset

    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;h-48 bg-gray-200 flex items-center justify-center overflow-hidden {{ $product-&gt;offer ? &#39;bg-gradient-to-br from-orange-50 to-red-50&#39; : &#39;&#39; }}&quot;</span><span class="p">&gt;</span>
        @if(!empty($product-&gt;image))
            <span class="p">&lt;</span><span class="nt">img</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;{{ asset(&#39;storage/&#39; . $product-&gt;image) }}&quot;</span> 
                 <span class="na">alt</span><span class="o">=</span><span class="s">&quot;{{ $product-&gt;name }}&quot;</span> 
                 <span class="na">class</span><span class="o">=</span><span class="s">&quot;w-full h-full object-cover&quot;</span><span class="p">&gt;</span>
        @else
            <span class="p">&lt;</span><span class="nt">span</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;text-4xl&quot;</span><span class="p">&gt;</span>📦<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
        @endif
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;p-6&quot;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">h4</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;text-xl font-bold mb-2 text-gray-900&quot;</span><span class="p">&gt;</span>{{ $product-&gt;name }}<span class="p">&lt;/</span><span class="nt">h4</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">p</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;text-gray-600 mb-4&quot;</span><span class="p">&gt;</span>{{ Str::limit($product-&gt;description, 80) }}<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>

        <span class="cm">&lt;!-- Badge de oferta adicional (nombre de la oferta) --&gt;</span>
        @if($product-&gt;offer)
            <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;mb-4&quot;</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">span</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;inline-block bg-orange-100 text-orange-800 text-xs px-3 py-1 rounded-full font-semibold&quot;</span><span class="p">&gt;</span>
                    🏷️ {{ $product-&gt;offer-&gt;name }}
                <span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
            <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
        @endif

        <span class="cm">&lt;!-- Precio --&gt;</span>
        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;mb-4&quot;</span><span class="p">&gt;</span>
            @if($product-&gt;offer)
                <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;flex items-baseline gap-2&quot;</span><span class="p">&gt;</span>
                    <span class="p">&lt;</span><span class="nt">span</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;text-sm text-gray-400 line-through&quot;</span><span class="p">&gt;</span>€{{ number_format($product-&gt;price, 2) }}<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
                    <span class="p">&lt;</span><span class="nt">span</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;text-2xl font-bold text-orange-600&quot;</span><span class="p">&gt;</span>€{{ number_format($product-&gt;final_price, 2) }}<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
                <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
            @else
                <span class="p">&lt;</span><span class="nt">span</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;text-2xl font-bold text-primary-600&quot;</span><span class="p">&gt;</span>€{{ number_format($product-&gt;final_price, 2) }}<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
            @endif
        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

        <span class="cm">&lt;!-- Acciones personalizables mediante slot --&gt;</span>
        @isset($actions)
            {{ $actions }}
        @else
            <span class="cm">&lt;!-- Acción por defecto: Ver Detalles --&gt;</span>
            <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;{{ route(&#39;products.show&#39;, $product-&gt;id) }}&quot;</span> 
               <span class="na">class</span><span class="o">=</span><span class="s">&quot;block text-center bg-primary-600 text-white px-4 py-2 rounded-lg hover:bg-primary-700 transition&quot;</span><span class="p">&gt;</span>
                Ver Detalles
            <span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
        @endisset
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</code></pre></div></p>
<p>Componente Reutilizable con Slots</p>
<p>Hemos añadido dos <strong>slots opcionales</strong> al componente para hacerlo más flexible:</p>
<ul>
<li><strong><code>topAction</code></strong>: Permite añadir un botón en la esquina superior izquierda (ej: botón de eliminar de wishlist)</li>
<li><strong><code>actions</code></strong>: Permite personalizar los botones del footer de la tarjeta</li>
</ul>
<p>Si no se proporcionan estos slots, el componente muestra su comportamiento por defecto (solo botón "Ver Detalles").</p>
<p>Ahora, el componente de tarjeta de producto muestra la imagen si está disponible. De lo contrario, muestra un icono genérico.</p>
<h2 id="fase-8-crear-el-panel-de-administracion">FASE 8: Crear el Panel de Administración<a class="headerlink" href="#fase-8-crear-el-panel-de-administracion" title="Permanent link">&para;</a></h2>
<p>Ahora que ya podemos crear productos (y verlos en la tienda pública), vamos a crear el panel de administración donde los gestionaremos de forma centralizada. Esta vista mostrará tablas con todos los productos junto con botones para editarlos y eliminarlos.</p>
<h3 id="1-crear-metodos-adminindex-en-los-controladores">1. Crear Métodos <code>adminIndex</code> en los Controladores<a class="headerlink" href="#1-crear-metodos-adminindex-en-los-controladores" title="Permanent link">&para;</a></h3>
<p>Necesitamos un método en cada controlador para obtener los datos y cargar la vista de administración correspondiente.</p>
<p><strong>Añade este método a <code>ProductController.php</code>:</strong></p>
<p>Código PHP (<code>ProductController.php</code>)
<div class="highlight"><pre><span></span><code><span class="x">    /**</span>
<span class="x">     * Muestra la lista de productos en el panel de administración.</span>
<span class="x">     */</span>
<span class="x">public function adminIndex(): View</span>
<span class="x">{</span>
<span class="x">    $products = Product::with([&#39;category&#39;, &#39;offer&#39;])-&gt;latest()-&gt;get();</span>
<span class="x">    return view(&#39;admin.products.index&#39;, compact(&#39;products&#39;));</span>
<span class="x">}</span>
</code></pre></div></p>
<h3 id="2-crear-la-vista-de-administracion">2. Crear la Vista de Administración<a class="headerlink" href="#2-crear-la-vista-de-administracion" title="Permanent link">&para;</a></h3>
<p>Ahora crearemos el archivo de la vista de administración para el panel de admin.
<div class="highlight"><pre><span></span><code>touch<span class="w"> </span>resources/views/admin/products/index.blade.php
</code></pre></div></p>
<p><strong>Añade el siguiente código a <code>resources/views/admin/products/index.blade.php</code>:</strong></p>
<p>Código Blade (<code>admin.products.index</code>)
<div class="highlight"><pre><span></span><code><span class="x">&lt;x-app-layout&gt;</span>
<span class="x">    &lt;x-slot name=&quot;header&quot;&gt;</span>
<span class="x">        &lt;div class=&quot;flex justify-between items-center&quot;&gt;</span>
<span class="x">        &lt;h2 class=&quot;font-semibold text-xl text-gray-800 leading-tight&quot;&gt;</span>
<span class="x">            {{ __(&#39;Gestión de Productos&#39;) }}</span>
<span class="x">        &lt;/h2&gt;</span>
<span class="x">            &lt;a href=&quot;{{ route(&#39;admin.products.create&#39;) }}&quot; class=&quot;inline-flex items-center px-4 py-2 border rounded-md font-semibold text-xs uppercase hover:bg-gray-100 transition&quot;&gt;</span>
<span class="x">                &lt;svg class=&quot;w-4 h-4 mr-2&quot; fill=&quot;none&quot; stroke=&quot;currentColor&quot; viewBox=&quot;0 0 24 24&quot;&gt;</span>
<span class="x">                    &lt;path stroke-linecap=&quot;round&quot; stroke-linejoin=&quot;round&quot; stroke-width=&quot;2&quot; d=&quot;M12 4v16m8-8H4&quot;/&gt;</span>
<span class="x">                &lt;/svg&gt;</span>
<span class="x">                Crear Nuevo Producto</span>
<span class="x">            &lt;/a&gt;</span>
<span class="x">        &lt;/div&gt;</span>
<span class="x">    &lt;/x-slot&gt;</span>

<span class="x">    &lt;div class=&quot;py-12&quot;&gt;</span>
<span class="x">        &lt;div class=&quot;w-full px-4 sm:px-6 lg:px-8&quot;&gt;</span>
<span class="x">            &lt;div class=&quot;bg-white overflow-hidden shadow-sm sm:rounded-lg&quot;&gt;</span>
<span class="x">                &lt;div class=&quot;overflow-x-auto&quot;&gt;</span>
<span class="x">                    &lt;table class=&quot;w-full divide-y divide-gray-200&quot;&gt;</span>
<span class="x">                        &lt;thead class=&quot;bg-gray-50&quot;&gt;</span>
<span class="x">                            &lt;tr&gt;</span>
<span class="x">                                &lt;th class=&quot;px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider&quot;&gt;Imagen&lt;/th&gt;</span>
<span class="x">                                &lt;th class=&quot;px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider&quot;&gt;Nombre&lt;/th&gt;</span>
<span class="x">                                &lt;th class=&quot;px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider&quot;&gt;Categoría&lt;/th&gt;</span>
<span class="x">                                &lt;th class=&quot;px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider&quot;&gt;Precio&lt;/th&gt;</span>
<span class="x">                                &lt;th class=&quot;px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider&quot;&gt;Acciones&lt;/th&gt;</span>
<span class="x">                            &lt;/tr&gt;</span>
<span class="x">                        &lt;/thead&gt;</span>
<span class="x">                        &lt;tbody class=&quot;bg-white divide-y divide-gray-200&quot;&gt;</span>
<span class="x">                            @forelse($products as $product)</span>
<span class="x">                                &lt;tr class=&quot;hover:bg-gray-50&quot;&gt;</span>
<span class="x">                                    &lt;td class=&quot;px-6 py-4 whitespace-nowrap&quot;&gt;</span>
<span class="x">                                        @if($product-&gt;image)</span>
<span class="x">                                            &lt;img src=&quot;{{ asset(&#39;storage/&#39; . $product-&gt;image) }}&quot; </span>
<span class="x">                                                 alt=&quot;{{ $product-&gt;name }}&quot; </span>
<span class="x">                                                 class=&quot;h-16 w-16 object-cover rounded-md shadow-sm&quot;&gt;</span>
<span class="x">                                        @else</span>
<span class="x">                                            &lt;div class=&quot;h-16 w-16 bg-gray-100 flex items-center justify-center rounded-md text-4xl&quot;&gt;</span>
<span class="x">                                                📦</span>
<span class="x">                                            &lt;/div&gt;</span>
<span class="x">                                        @endif</span>
<span class="x">                                    &lt;/td&gt;</span>
<span class="x">                                    &lt;td class=&quot;px-6 py-4&quot;&gt;</span>
<span class="x">                                        &lt;div class=&quot;text-sm font-medium text-gray-900&quot;&gt;{{ $product-&gt;name }}&lt;/div&gt;</span>
<span class="x">                                        &lt;div class=&quot;text-sm text-gray-500&quot;&gt;{{ Str::limit($product-&gt;description, 50) }}&lt;/div&gt;</span>
<span class="x">                                    &lt;/td&gt;</span>
<span class="x">                                    &lt;td class=&quot;px-6 py-4 whitespace-nowrap&quot;&gt;</span>
<span class="x">                                        &lt;span class=&quot;px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-blue-100 text-blue-800&quot;&gt;</span>
<span class="x">                                            {{ $product-&gt;category-&gt;name ?? &#39;N/A&#39; }}</span>
<span class="x">                                        &lt;/span&gt;</span>
<span class="x">                                    &lt;/td&gt;</span>
<span class="x">                                    &lt;td class=&quot;px-6 py-4 whitespace-nowrap&quot;&gt;</span>
<span class="x">                                        &lt;div class=&quot;text-sm font-medium text-gray-900&quot;&gt;€{{ number_format($product-&gt;price, 2) }}&lt;/div&gt;</span>
<span class="x">                                        @if($product-&gt;offer)</span>
<span class="x">                                            &lt;div class=&quot;text-xs text-orange-600&quot;&gt;</span>
<span class="x">                                                -{{ $product-&gt;offer-&gt;discount_percentage }}% descuento</span>
<span class="x">                                            &lt;/div&gt;</span>
<span class="x">                                        @endif</span>
<span class="x">                                    &lt;/td&gt;</span>
<span class="x">                                    &lt;td class=&quot;px-6 py-4 whitespace-nowrap text-right text-sm font-medium&quot;&gt;</span>
<span class="x">                                        &lt;a href=&quot;{{ route(&#39;admin.products.edit&#39;, $product) }}&quot; </span>
<span class="x">                                           class=&quot;text-indigo-600 hover:text-indigo-900 mr-4&quot;&gt;</span>
<span class="x">                                            Editar</span>
<span class="x">                                        &lt;/a&gt;</span>
<span class="x">                                        &lt;form action=&quot;{{ route(&#39;admin.products.destroy&#39;, $product) }}&quot; </span>
<span class="x">                                              method=&quot;POST&quot; </span>
<span class="x">                                              class=&quot;inline-block&quot; </span>
<span class="x">                                              onsubmit=&quot;return confirm(&#39;¿Estás seguro de que deseas eliminar este producto?&#39;);&quot;&gt;</span>
<span class="x">                                            @csrf</span>
<span class="x">                                            @method(&#39;DELETE&#39;)</span>
<span class="x">                                            &lt;button type=&quot;submit&quot; class=&quot;text-red-600 hover:text-red-900&quot;&gt;</span>
<span class="x">                                                Eliminar</span>
<span class="x">                                            &lt;/button&gt;</span>
<span class="x">                                        &lt;/form&gt;</span>
<span class="x">                                    &lt;/td&gt;</span>
<span class="x">                                &lt;/tr&gt;</span>
<span class="x">                            @empty</span>
<span class="x">                                &lt;tr&gt;</span>
<span class="x">                                    &lt;td colspan=&quot;5&quot; class=&quot;px-6 py-12 text-center&quot;&gt;</span>
<span class="x">                                        &lt;div class=&quot;text-gray-400 text-4xl mb-4&quot;&gt;📦&lt;/div&gt;</span>
<span class="x">                                        &lt;p class=&quot;text-gray-500 text-lg font-medium&quot;&gt;No hay productos para mostrar&lt;/p&gt;</span>
<span class="x">                                        &lt;p class=&quot;text-gray-400 text-sm mt-2&quot;&gt;Crea tu primer producto usando el botón de arriba&lt;/p&gt;</span>
<span class="x">                                    &lt;/td&gt;</span>
<span class="x">                                &lt;/tr&gt;</span>
<span class="x">                            @endforelse</span>
<span class="x">                        &lt;/tbody&gt;</span>
<span class="x">                    &lt;/table&gt;</span>
<span class="x">                &lt;/div&gt;</span>
<span class="x">            &lt;/div&gt;</span>
<span class="x">        &lt;/div&gt;</span>
<span class="x">    &lt;/div&gt;</span>
<span class="x">&lt;/x-app-layout&gt;</span>
</code></pre></div></p>
<h3 id="3-anadir-enlaces-de-administracion-al-menu-de-navegacion_1">3. Añadir Enlaces de Administración al Menú de Navegación<a class="headerlink" href="#3-anadir-enlaces-de-administracion-al-menu-de-navegacion_1" title="Permanent link">&para;</a></h3>
<p>Ahora que tenemos la vista del panel de administración, necesitamos una forma de navegar a ella. Laravel Breeze ya nos proporciona un menú de navegación en <code>layouts/navigation.blade.php</code>. Vamos a aprovecharlo añadiendo enlaces de administración.</p>
<p>Abre el archivo <code>resources/views/layouts/navigation.blade.php</code> y substituye el contenido por el siguiente:</p>
<p>Código Blade (<code>layouts/navigation.blade.php</code> - Fragmento)
<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">nav</span> <span class="na">x-data</span><span class="o">=</span><span class="s">&quot;{ open: false }&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;bg-white border-b border-gray-100&quot;</span><span class="p">&gt;</span>
    <span class="cm">&lt;!-- Primary Navigation Menu --&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;max-w-7xl mx-auto px-4 sm:px-6 lg:px-8&quot;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;flex justify-between h-16&quot;</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;flex&quot;</span><span class="p">&gt;</span>
                <span class="cm">&lt;!-- Logo --&gt;</span>
                <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;shrink-0 flex items-center&quot;</span><span class="p">&gt;</span>
                    <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;{{ route(&#39;dashboard&#39;) }}&quot;</span><span class="p">&gt;</span>
                        <span class="p">&lt;</span><span class="nt">x-application-logo</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;block h-9 w-auto fill-current text-gray-800&quot;</span> <span class="p">/&gt;</span>
                    <span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
                <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

                <span class="cm">&lt;!-- Navigation Links --&gt;</span>
                <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;hidden space-x-8 sm:-my-px sm:ms-10 sm:flex&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">x-nav-link</span> <span class="na">:href</span><span class="o">=</span><span class="s">&quot;route(&#39;dashboard&#39;)&quot;</span> <span class="na">:active</span><span class="o">=</span><span class="s">&quot;request()-&gt;routeIs(&#39;dashboard&#39;)&quot;</span><span class="p">&gt;</span>
        {{ __(&#39;Dashboard&#39;) }}
    <span class="p">&lt;/</span><span class="nt">x-nav-link</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
                    {<del class="critic"> Enlaces de Administración </del>}
    <span class="p">&lt;</span><span class="nt">x-nav-link</span> <span class="na">:href</span><span class="o">=</span><span class="s">&quot;route(&#39;admin.products.index&#39;)&quot;</span> <span class="na">:active</span><span class="o">=</span><span class="s">&quot;request()-&gt;routeIs(&#39;admin.products.*&#39;)&quot;</span><span class="p">&gt;</span>
        {{ __(&#39;Productos&#39;) }}
    <span class="p">&lt;/</span><span class="nt">x-nav-link</span><span class="p">&gt;</span>
            <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

            <span class="cm">&lt;!-- Settings Dropdown --&gt;</span>
            <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;hidden sm:flex sm:items-center sm:ms-6&quot;</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">x-dropdown</span> <span class="na">align</span><span class="o">=</span><span class="s">&quot;right&quot;</span> <span class="na">width</span><span class="o">=</span><span class="s">&quot;48&quot;</span><span class="p">&gt;</span>
                    <span class="p">&lt;</span><span class="nt">x-slot</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;trigger&quot;</span><span class="p">&gt;</span>
                        <span class="p">&lt;</span><span class="nt">button</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-gray-500 bg-white hover:text-gray-700 focus:outline-none transition ease-in-out duration-150&quot;</span><span class="p">&gt;</span>
                            <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>{{ Auth::user()-&gt;name }}<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

                            <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;ms-1&quot;</span><span class="p">&gt;</span>
                                <span class="p">&lt;</span><span class="nt">svg</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;fill-current h-4 w-4&quot;</span> <span class="na">xmlns</span><span class="o">=</span><span class="s">&quot;http://www.w3.org/2000/svg&quot;</span> <span class="na">viewBox</span><span class="o">=</span><span class="s">&quot;0 0 20 20&quot;</span><span class="p">&gt;</span>
                                    <span class="p">&lt;</span><span class="nt">path</span> <span class="na">fill-rule</span><span class="o">=</span><span class="s">&quot;evenodd&quot;</span> <span class="na">d</span><span class="o">=</span><span class="s">&quot;M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z&quot;</span> <span class="na">clip-rule</span><span class="o">=</span><span class="s">&quot;evenodd&quot;</span> <span class="p">/&gt;</span>
                                <span class="p">&lt;/</span><span class="nt">svg</span><span class="p">&gt;</span>
                            <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
                        <span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
                    <span class="p">&lt;/</span><span class="nt">x-slot</span><span class="p">&gt;</span>

                    <span class="p">&lt;</span><span class="nt">x-slot</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;content&quot;</span><span class="p">&gt;</span>
                        <span class="p">&lt;</span><span class="nt">x-dropdown-link</span> <span class="na">:href</span><span class="o">=</span><span class="s">&quot;route(&#39;profile.edit&#39;)&quot;</span><span class="p">&gt;</span>
                            {{ __(&#39;Profile&#39;) }}
                        <span class="p">&lt;/</span><span class="nt">x-dropdown-link</span><span class="p">&gt;</span>

                        <span class="cm">&lt;!-- Authentication --&gt;</span>
                        <span class="p">&lt;</span><span class="nt">form</span> <span class="na">method</span><span class="o">=</span><span class="s">&quot;POST&quot;</span> <span class="na">action</span><span class="o">=</span><span class="s">&quot;{{ route(&#39;logout&#39;) }}&quot;</span><span class="p">&gt;</span>
                            @csrf

                            <span class="p">&lt;</span><span class="nt">x-dropdown-link</span> <span class="na">:href</span><span class="o">=</span><span class="s">&quot;route(&#39;logout&#39;)&quot;</span>
                                    <span class="na">onclick</span><span class="o">=</span><span class="s">&quot;event.preventDefault();</span>
<span class="s">                                                this.closest(&#39;form&#39;).submit();&quot;</span><span class="p">&gt;</span>
                                {{ __(&#39;Log Out&#39;) }}
                            <span class="p">&lt;/</span><span class="nt">x-dropdown-link</span><span class="p">&gt;</span>
                        <span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>
                    <span class="p">&lt;/</span><span class="nt">x-slot</span><span class="p">&gt;</span>
                <span class="p">&lt;/</span><span class="nt">x-dropdown</span><span class="p">&gt;</span>
            <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

            <span class="cm">&lt;!-- Hamburger --&gt;</span>
            <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;-me-2 flex items-center sm:hidden&quot;</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">button</span> <span class="err">@</span><span class="na">click</span><span class="o">=</span><span class="s">&quot;open = ! open&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:bg-gray-100 focus:text-gray-500 transition duration-150 ease-in-out&quot;</span><span class="p">&gt;</span>
                    <span class="p">&lt;</span><span class="nt">svg</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;h-6 w-6&quot;</span> <span class="na">stroke</span><span class="o">=</span><span class="s">&quot;currentColor&quot;</span> <span class="na">fill</span><span class="o">=</span><span class="s">&quot;none&quot;</span> <span class="na">viewBox</span><span class="o">=</span><span class="s">&quot;0 0 24 24&quot;</span><span class="p">&gt;</span>
                        <span class="p">&lt;</span><span class="nt">path</span> <span class="na">:class</span><span class="o">=</span><span class="s">&quot;{&#39;hidden&#39;: open, &#39;inline-flex&#39;: ! open }&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;inline-flex&quot;</span> <span class="na">stroke-linecap</span><span class="o">=</span><span class="s">&quot;round&quot;</span> <span class="na">stroke-linejoin</span><span class="o">=</span><span class="s">&quot;round&quot;</span> <span class="na">stroke-width</span><span class="o">=</span><span class="s">&quot;2&quot;</span> <span class="na">d</span><span class="o">=</span><span class="s">&quot;M4 6h16M4 12h16M4 18h16&quot;</span> <span class="p">/&gt;</span>
                        <span class="p">&lt;</span><span class="nt">path</span> <span class="na">:class</span><span class="o">=</span><span class="s">&quot;{&#39;hidden&#39;: ! open, &#39;inline-flex&#39;: open }&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;hidden&quot;</span> <span class="na">stroke-linecap</span><span class="o">=</span><span class="s">&quot;round&quot;</span> <span class="na">stroke-linejoin</span><span class="o">=</span><span class="s">&quot;round&quot;</span> <span class="na">stroke-width</span><span class="o">=</span><span class="s">&quot;2&quot;</span> <span class="na">d</span><span class="o">=</span><span class="s">&quot;M6 18L18 6M6 6l12 12&quot;</span> <span class="p">/&gt;</span>
                    <span class="p">&lt;/</span><span class="nt">svg</span><span class="p">&gt;</span>
                <span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
            <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

    <span class="cm">&lt;!-- Responsive Navigation Menu --&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">:class</span><span class="o">=</span><span class="s">&quot;{&#39;block&#39;: open, &#39;hidden&#39;: ! open}&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;hidden sm:hidden&quot;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;pt-2 pb-3 space-y-1&quot;</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">x-responsive-nav-link</span> <span class="na">:href</span><span class="o">=</span><span class="s">&quot;route(&#39;dashboard&#39;)&quot;</span> <span class="na">:active</span><span class="o">=</span><span class="s">&quot;request()-&gt;routeIs(&#39;dashboard&#39;)&quot;</span><span class="p">&gt;</span>
                {{ __(&#39;Dashboard&#39;) }}
            <span class="p">&lt;/</span><span class="nt">x-responsive-nav-link</span><span class="p">&gt;</span>
            {<del class="critic"> Enlaces de Administración </del>}
            <span class="p">&lt;</span><span class="nt">x-responsive-nav-link</span> <span class="na">:href</span><span class="o">=</span><span class="s">&quot;route(&#39;admin.products.index&#39;)&quot;</span> <span class="na">:active</span><span class="o">=</span><span class="s">&quot;request()-&gt;routeIs(&#39;admin.products.*&#39;)&quot;</span><span class="p">&gt;</span>
                {{ __(&#39;Productos&#39;) }}
            <span class="p">&lt;/</span><span class="nt">x-responsive-nav-link</span><span class="p">&gt;</span>
                <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

        <span class="cm">&lt;!-- Responsive Settings Options --&gt;</span>
        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;pt-4 pb-1 border-t border-gray-200&quot;</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;px-4&quot;</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;font-medium text-base text-gray-800&quot;</span><span class="p">&gt;</span>{{ Auth::user()-&gt;name }}<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;font-medium text-sm text-gray-500&quot;</span><span class="p">&gt;</span>{{ Auth::user()-&gt;email }}<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
                <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

            <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;mt-3 space-y-1&quot;</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">x-responsive-nav-link</span> <span class="na">:href</span><span class="o">=</span><span class="s">&quot;route(&#39;profile.edit&#39;)&quot;</span><span class="p">&gt;</span>
                    {{ __(&#39;Profile&#39;) }}
                <span class="p">&lt;/</span><span class="nt">x-responsive-nav-link</span><span class="p">&gt;</span>

                <span class="cm">&lt;!-- Authentication --&gt;</span>
                <span class="p">&lt;</span><span class="nt">form</span> <span class="na">method</span><span class="o">=</span><span class="s">&quot;POST&quot;</span> <span class="na">action</span><span class="o">=</span><span class="s">&quot;{{ route(&#39;logout&#39;) }}&quot;</span><span class="p">&gt;</span>
                    @csrf

                    <span class="p">&lt;</span><span class="nt">x-responsive-nav-link</span> <span class="na">:href</span><span class="o">=</span><span class="s">&quot;route(&#39;logout&#39;)&quot;</span>
                            <span class="na">onclick</span><span class="o">=</span><span class="s">&quot;event.preventDefault();</span>
<span class="s">                                        this.closest(&#39;form&#39;).submit();&quot;</span><span class="p">&gt;</span>
                        {{ __(&#39;Log Out&#39;) }}
                    <span class="p">&lt;/</span><span class="nt">x-responsive-nav-link</span><span class="p">&gt;</span>
                <span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>
            <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">nav</span><span class="p">&gt;</span>
</code></pre></div></p>
<p>Con esta modificación, el menú de navegación superior ahora incluye el enlace a la gestión de productos, visible solo para usuarios autenticados.</p>
<p>Captura de pantalla requerida</p>
<p>Realiza una captura de pantalla del <strong>panel de administración</strong> mostrando:</p>
<ol>
<li>La página <code>/admin/products</code> con la tabla de productos</li>
<li>El <strong>menú de navegación superior</strong> con el enlace "Productos" visible y activo</li>
<li>El nombre del usuario autenticado visible en la esquina superior derecha</li>
</ol>
<h2 id="fase-9-implementar-actualizacion-y-eliminacion-de-productos">FASE 9: Implementar Actualización y Eliminación de Productos<a class="headerlink" href="#fase-9-implementar-actualizacion-y-eliminacion-de-productos" title="Permanent link">&para;</a></h2>
<p>En esta fase, completaremos el ciclo CRUD implementando la funcionalidad para editar y actualizar productos. Esto implica crear los formularios de edición, implementar la lógica en los métodos <code>edit()</code> y <code>update()</code> del controlador, y manejar correctamente la actualización de imágenes.</p>
<h3 id="1-implementar-el-metodo-edit">1. Implementar el método <code>edit()</code><a class="headerlink" href="#1-implementar-el-metodo-edit" title="Permanent link">&para;</a></h3>
<p>El propósito del método <code>edit()</code> es muy simple: obtener el registro específico que se quiere editar y mostrar un formulario pre-rellenado con sus datos actuales.</p>
<p><strong>Añade el método <code>edit()</code> a <code>ProductController.php</code>:</strong></p>
<p>Abre el archivo <code>app/Http/Controllers/ProductController.php</code> y busca el método <code>edit()</code>. Reemplázalo con:</p>
<p>Código PHP (<code>ProductController@edit</code>)
<div class="highlight"><pre><span></span><code><span class="x">    /**</span>
<span class="x">     * Muestra el formulario para editar un producto existente.</span>
<span class="x">     */</span>
<span class="x">    public function edit(Product $product): View</span>
<span class="x">    {</span>
<span class="x">        // Cargar todas las categorías y ofertas para los selectores del formulario</span>
<span class="x">        $categories = Category::all();</span>
<span class="x">        $offers = Offer::all();</span>

<span class="x">        return view(&#39;admin.products.edit&#39;, compact(&#39;product&#39;, &#39;categories&#39;, &#39;offers&#39;));</span>
<span class="x">    }</span>
</code></pre></div></p>
<p>Route Model Binding</p>
<p>Observa que hemos cambiado <code>public function edit(string $id)</code> por <code>public function edit(Product $product)</code>. Esto es <strong>Route Model Binding</strong>. Laravel automáticamente buscará en la base de datos un producto con el ID de la URL y lo inyectará en el método. Si no lo encuentra, lanzará un error 404. Es más limpio y seguro.</p>
<h3 id="2-crear-el-formulario-de-edicion">2. Crear el Formulario de Edición<a class="headerlink" href="#2-crear-el-formulario-de-edicion" title="Permanent link">&para;</a></h3>
<p>El formulario de edición es casi idéntico al de creación, pero con tres diferencias clave:</p>
<ol>
<li>La acción del formulario apuntará a la ruta <code>update</code> y pasará el ID del objeto: <code>route('admin.products.update', $product)</code>.</li>
<li>Usaremos la directiva <code>@method('PUT')</code> para indicarle a Laravel que la petición, aunque se envíe como POST, debe tratarse como un PUT/PATCH.</li>
<li>Los campos del formulario estarán pre-rellenados con los datos actuales del objeto. Por ejemplo:</li>
</ol>
<p>php</p>
<div class="highlight"><pre><span></span><code>value=&quot;{{ old(&#39;name&#39;, $product-&gt;name) }}&quot;
</code></pre></div>
<p><strong>Crea el archivo <code>resources/views/admin/products/edit.blade.php</code>:</strong>
<div class="highlight"><pre><span></span><code>touch<span class="w"> </span>resources/views/admin/products/edit.blade.php
</code></pre></div></p>
<p>Añade el siguiente código:</p>
<p>Código Blade (<code>admin/products/edit.blade.php</code>)
<div class="highlight"><pre><span></span><code><span class="x">&lt;x-app-layout&gt;</span>
<span class="x">    &lt;x-slot name=&quot;header&quot;&gt;</span>
<span class="x">        &lt;h2 class=&quot;font-semibold text-xl text-gray-800 leading-tight&quot;&gt;</span>
<span class="x">            {{ __(&#39;Editar Producto&#39;) }}</span>
<span class="x">        &lt;/h2&gt;</span>
<span class="x">    &lt;/x-slot&gt;</span>

<span class="x">    &lt;div class=&quot;py-12&quot;&gt;</span>
<span class="x">        &lt;div class=&quot;max-w-4xl mx-auto sm:px-6 lg:px-8&quot;&gt;</span>
<span class="x">            &lt;div class=&quot;bg-white overflow-hidden shadow-sm sm:rounded-lg&quot;&gt;</span>
<span class="x">                &lt;div class=&quot;p-6 bg-white border-b border-gray-200&quot;&gt;</span>
<span class="x">                    &lt;form action=&quot;{{ route(&#39;admin.products.update&#39;, $product) }}&quot; method=&quot;POST&quot; enctype=&quot;multipart/form-data&quot; class=&quot;space-y-6&quot;&gt;</span>
<span class="x">                        @csrf</span>
<span class="x">                        @method(&#39;PUT&#39;)</span>

<span class="x">                        {<del class="critic"> Nombre del Producto </del>}</span>
<span class="x">                        &lt;div&gt;</span>
<span class="x">                            &lt;label for=&quot;name&quot; class=&quot;block text-sm font-medium text-gray-700&quot;&gt;Nombre del Producto *&lt;/label&gt;</span>
<span class="x">                            &lt;input type=&quot;text&quot; id=&quot;name&quot; name=&quot;name&quot; value=&quot;{{ old(&#39;name&#39;, $product-&gt;name) }}&quot; class=&quot;mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 @error(&#39;name&#39;) border-red-500 @enderror&quot; required&gt;</span>
<span class="x">                            @error(&#39;name&#39;)</span>
<span class="x">                                &lt;p class=&quot;mt-1 text-sm text-red-600&quot;&gt;{{ $message }}&lt;/p&gt;</span>
<span class="x">                            @enderror</span>
<span class="x">                        &lt;/div&gt;</span>

<span class="x">                        {<del class="critic"> Descripción </del>}</span>
<span class="x">                        &lt;div&gt;</span>
<span class="x">                            &lt;label for=&quot;description&quot; class=&quot;block text-sm font-medium text-gray-700&quot;&gt;Descripción *&lt;/label&gt;</span>
<span class="x">                            &lt;textarea id=&quot;description&quot; name=&quot;description&quot; rows=&quot;4&quot; class=&quot;mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 @error(&#39;description&#39;) border-red-500 @enderror&quot; required&gt;{{ old(&#39;description&#39;, $product-&gt;description) }}&lt;/textarea&gt;</span>
<span class="x">                            @error(&#39;description&#39;)</span>
<span class="x">                                &lt;p class=&quot;mt-1 text-sm text-red-600&quot;&gt;{{ $message }}&lt;/p&gt;</span>
<span class="x">                            @enderror</span>
<span class="x">                        &lt;/div&gt;</span>

<span class="x">                        {<del class="critic"> Imagen del Producto </del>}</span>
<span class="x">                        &lt;div&gt;</span>
<span class="x">                            &lt;label for=&quot;image&quot; class=&quot;block text-sm font-medium text-gray-700&quot;&gt;Imagen del Producto&lt;/label&gt;</span>
<span class="x">                            @if ($product-&gt;image)</span>
<span class="x">                                &lt;div class=&quot;my-2&quot;&gt;</span>
<span class="x">                                    &lt;img src=&quot;{{ asset(&#39;storage/&#39; . $product-&gt;image) }}&quot; alt=&quot;Imagen actual&quot; class=&quot;h-24 w-24 object-cover rounded-md&quot;&gt;</span>
<span class="x">                                    &lt;p class=&quot;text-xs text-gray-500 mt-1&quot;&gt;Imagen actual. Sube una nueva para reemplazarla.&lt;/p&gt;</span>
<span class="x">                                &lt;/div&gt;</span>
<span class="x">                            @endif</span>
<span class="x">                            &lt;input type=&quot;file&quot; id=&quot;image&quot; name=&quot;image&quot; accept=&quot;image/jpeg,image/png,image/jpg,image/webp&quot; class=&quot;mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100 @error(&#39;image&#39;) border-red-500 @enderror&quot;&gt;</span>
<span class="x">                            &lt;p class=&quot;mt-1 text-xs text-gray-500&quot;&gt;Formatos permitidos: JPG, PNG, WEBP. Tamaño máximo: 2MB&lt;/p&gt;</span>
<span class="x">                            @error(&#39;image&#39;)</span>
<span class="x">                                &lt;p class=&quot;mt-1 text-sm text-red-600&quot;&gt;{{ $message }}&lt;/p&gt;</span>
<span class="x">                            @enderror</span>
<span class="x">                        &lt;/div&gt;</span>

<span class="x">                        {<del class="critic"> Precio </del>}</span>
<span class="x">                        &lt;div&gt;</span>
<span class="x">                            &lt;label for=&quot;price&quot; class=&quot;block text-sm font-medium text-gray-700&quot;&gt;Precio (€) *&lt;/label&gt;</span>
<span class="x">                            &lt;input type=&quot;number&quot; id=&quot;price&quot; name=&quot;price&quot; value=&quot;{{ old(&#39;price&#39;, $product-&gt;price) }}&quot; step=&quot;0.01&quot; min=&quot;0&quot; class=&quot;mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 @error(&#39;price&#39;) border-red-500 @enderror&quot; required&gt;</span>
<span class="x">                            @error(&#39;price&#39;)</span>
<span class="x">                                &lt;p class=&quot;mt-1 text-sm text-red-600&quot;&gt;{{ $message }}&lt;/p&gt;</span>
<span class="x">                            @enderror</span>
<span class="x">                        &lt;/div&gt;</span>

<span class="x">                        {<del class="critic"> Categoría </del>}</span>
<span class="x">                        &lt;div&gt;</span>
<span class="x">                            &lt;label for=&quot;category_id&quot; class=&quot;block text-sm font-medium text-gray-700&quot;&gt;Categoría *&lt;/label&gt;</span>
<span class="x">                            &lt;select id=&quot;category_id&quot; name=&quot;category_id&quot; class=&quot;mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 @error(&#39;category_id&#39;) border-red-500 @enderror&quot; required&gt;</span>
<span class="x">                                &lt;option value=&quot;&quot;&gt;Selecciona una categoría&lt;/option&gt;</span>
<span class="x">                                @foreach($categories as $category)</span>
<span class="x">                                    &lt;option value=&quot;{{ $category-&gt;id }}&quot; {{ old(&#39;category_id&#39;, $product-&gt;category_id) == $category-&gt;id ? &#39;selected&#39; : &#39;&#39; }}&gt;</span>
<span class="x">                                        {{ $category-&gt;name }}</span>
<span class="x">                                    &lt;/option&gt;</span>
<span class="x">                                @endforeach</span>
<span class="x">                            &lt;/select&gt;</span>
<span class="x">                            @error(&#39;category_id&#39;)</span>
<span class="x">                                &lt;p class=&quot;mt-1 text-sm text-red-600&quot;&gt;{{ $message }}&lt;/p&gt;</span>
<span class="x">                            @enderror</span>
<span class="x">                        &lt;/div&gt;</span>

<span class="x">                        {<del class="critic"> Oferta (Opcional) </del>}</span>
<span class="x">                        &lt;div&gt;</span>
<span class="x">                            &lt;label for=&quot;offer_id&quot; class=&quot;block text-sm font-medium text-gray-700&quot;&gt;Oferta (Opcional)&lt;/label&gt;</span>
<span class="x">                            &lt;select id=&quot;offer_id&quot; name=&quot;offer_id&quot; class=&quot;mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 @error(&#39;offer_id&#39;) border-red-500 @enderror&quot;&gt;</span>
<span class="x">                                &lt;option value=&quot;&quot;&gt;Sin oferta&lt;/option&gt;</span>
<span class="x">                                @foreach($offers as $offer)</span>
<span class="x">                                    &lt;option value=&quot;{{ $offer-&gt;id }}&quot; {{ old(&#39;offer_id&#39;, $product-&gt;offer_id) == $offer-&gt;id ? &#39;selected&#39; : &#39;&#39; }}&gt;</span>
<span class="x">                                        {{ $offer-&gt;name }} (-{{ $offer-&gt;discount_percentage }}%)</span>
<span class="x">                                    &lt;/option&gt;</span>
<span class="x">                                @endforeach</span>
<span class="x">                            &lt;/select&gt;</span>
<span class="x">                            @error(&#39;offer_id&#39;)</span>
<span class="x">                                &lt;p class=&quot;mt-1 text-sm text-red-600&quot;&gt;{{ $message }}&lt;/p&gt;</span>
<span class="x">                            @enderror</span>
<span class="x">                        &lt;/div&gt;</span>

<span class="x">                        {<del class="critic"> Botones de Acción </del>}</span>
<span class="x">                        &lt;div class=&quot;flex justify-end space-x-4 pt-4&quot;&gt;</span>
<span class="x">                            &lt;a href=&quot;{{ route(&#39;admin.products.index&#39;) }}&quot; class=&quot;px-4 py-2 bg-gray-300 text-gray-800 rounded-md hover:bg-gray-400 transition&quot;&gt;</span>
<span class="x">                                Cancelar</span>
<span class="x">                            &lt;/a&gt;</span>
<span class="x">                            &lt;button type=&quot;submit&quot; class=&quot;px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition&quot;&gt;</span>
<span class="x">                                Actualizar Producto</span>
<span class="x">                            &lt;/button&gt;</span>
<span class="x">                        &lt;/div&gt;</span>
<span class="x">                    &lt;/form&gt;</span>
<span class="x">                &lt;/div&gt;</span>
<span class="x">            &lt;/div&gt;</span>
<span class="x">        &lt;/div&gt;</span>
<span class="x">    &lt;/div&gt;</span>
<span class="x">&lt;/x-app-layout&gt;</span>
</code></pre></div></p>
<h3 id="3-implementar-la-logica-de-actualizacion-y-eliminacion">3. Implementar la Lógica de Actualización y Eliminación<a class="headerlink" href="#3-implementar-la-logica-de-actualizacion-y-eliminacion" title="Permanent link">&para;</a></h3>
<p>Ahora implementaremos la lógica en los métodos <code>update()</code> y <code>destroy()</code> de los controladores, que se encargarán de validar los datos, manejar las imágenes y actualizar o eliminar los registros en la base de datos.</p>
<h4 id="paso-1-anadir-los-imports-necesarios">Paso 1: Añadir los Imports Necesarios<a class="headerlink" href="#paso-1-anadir-los-imports-necesarios" title="Permanent link">&para;</a></h4>
<p>Antes de implementar los métodos de actualización y eliminación, necesitamos añadir los imports para gestionar archivos.</p>
<p>Abre <code>app/Http/Controllers/ProductController.php</code> y busca la sección de imports. Añade la siguiente línea:
<div class="highlight"><pre><span></span><code><span class="x">    use Illuminate\Support\Facades\Storage;</span>
</code></pre></div></p>
<p>El facade <code>Storage</code> es necesario para eliminar archivos del disco cuando se actualiza o elimina un producto.</p>
<h4 id="paso-2-actualizar-el-metodo-update">Paso 2: Actualizar el Método <code>update()</code><a class="headerlink" href="#paso-2-actualizar-el-metodo-update" title="Permanent link">&para;</a></h4>
<p><strong>Actualiza el método <code>update()</code> en <code>ProductController.php</code>:</strong></p>
<p>Código PHP (<code>ProductController@update</code>)
<div class="highlight"><pre><span></span><code><span class="x">    /**</span>
<span class="x">     * Actualiza un producto existente en la base de datos.</span>
<span class="x">     */</span>
<span class="x">    public function update(Request $request, Product $product): RedirectResponse</span>
<span class="x">    {</span>
<span class="x">        // PASO 1: Validar los datos del formulario</span>
<span class="x">        $validated = $request-&gt;validate([</span>
<span class="x">            &#39;name&#39; =&gt; &#39;required|string|max:255|unique:products,name,&#39; . $product-&gt;id,</span>
<span class="x">            &#39;description&#39; =&gt; &#39;required|string|max:1000&#39;,</span>
<span class="x">            &#39;image&#39; =&gt; &#39;nullable|image|mimes:jpeg,png,jpg,webp|max:2048&#39;,</span>
<span class="x">            &#39;price&#39; =&gt; &#39;required|numeric|min:0|max:999999.99&#39;,</span>
<span class="x">            &#39;category_id&#39; =&gt; &#39;required|exists:categories,id&#39;,</span>
<span class="x">            &#39;offer_id&#39; =&gt; &#39;nullable|exists:offers,id&#39;,</span>
<span class="x">        ]);</span>

<span class="x">        // PASO 2: Manejar la subida de la nueva imagen</span>
<span class="x">        if ($request-&gt;hasFile(&#39;image&#39;)) {</span>
<span class="x">            // Eliminar la imagen anterior si existe para no acumular archivos</span>
<span class="x">            if ($product-&gt;image) {</span>
<span class="x">                Storage::disk(&#39;public&#39;)-&gt;delete($product-&gt;image);</span>
<span class="x">            }</span>
<span class="x">            // Guardar la nueva imagen y obtener su ruta</span>
<span class="x">            $imagePath = $request-&gt;file(&#39;image&#39;)-&gt;store(&#39;products&#39;, &#39;public&#39;);</span>
<span class="x">            $validated[&#39;image&#39;] = $imagePath;</span>
<span class="x">        }</span>

<span class="x">        // PASO 3: Actualizar el producto con los datos validados</span>
<span class="x">        $product-&gt;update($validated);</span>

<span class="x">        // PASO 4: Redirigir con mensaje de éxito</span>
<span class="x">        return redirect()</span>
<span class="x">            -&gt;route(&#39;admin.products.index&#39;)</span>
<span class="x">            -&gt;with(&#39;success&#39;, &#39;¡Producto actualizado exitosamente!&#39;);</span>
<span class="x">    }</span>
</code></pre></div></p>
<p>Regla <code>unique</code> en Actualización</p>
<p>Al validar, la regla <code>unique</code> debe modificarse para ignorar el registro actual.</p>
<ul>
<li><strong>Antes (store):</strong> <code>unique:products,name</code></li>
<li><strong>Ahora (update):</strong> <code>unique:products,name,' . $product-&gt;id</code></li>
</ul>
<p>Esto le dice a Laravel: "El nombre debe ser único, excepto para el producto con este ID". Si no lo hiciéramos, daría un error de validación al intentar guardar sin cambiar el nombre.</p>
<h4 id="paso-3-actualizar-el-metodo-destroy">Paso 3: Actualizar el Método <code>destroy()</code><a class="headerlink" href="#paso-3-actualizar-el-metodo-destroy" title="Permanent link">&para;</a></h4>
<p><strong>Actualiza el método <code>destroy()</code> en <code>ProductController.php</code>:</strong></p>
<p>Código PHP (<code>ProductController@destroy</code>)
<div class="highlight"><pre><span></span><code><span class="x">    /**</span>
<span class="x">     * Elimina un producto de la base de datos.</span>
<span class="x">     */</span>
<span class="x">    public function destroy(Product $product): RedirectResponse</span>
<span class="x">    {</span>
<span class="x">        // PASO 1: Eliminar la imagen asociada si existe</span>
<span class="x">        if ($product-&gt;image) {</span>
<span class="x">            Storage::disk(&#39;public&#39;)-&gt;delete($product-&gt;image);</span>
<span class="x">        }</span>

<span class="x">        // PASO 2: Eliminar el producto de la base de datos</span>
<span class="x">        $product-&gt;delete();</span>

<span class="x">        // PASO 3: Redirigir con mensaje de éxito</span>
<span class="x">        return redirect()</span>
<span class="x">            -&gt;route(&#39;admin.products.index&#39;)</span>
<span class="x">            -&gt;with(&#39;success&#39;, &#39;Producto eliminado exitosamente.&#39;);</span>
<span class="x">    }</span>
</code></pre></div></p>
<p>Limpieza de Archivos</p>
<p>Es una <strong>buena práctica</strong> eliminar siempre los archivos asociados a un registro (imágenes, PDFs, etc.) antes de eliminar el propio registro de la base de datos. Esto evita que queden "archivos huérfanos" ocupando espacio innecesario en el servidor.</p>
<p>Con esto, la funcionalidad de edición, actualización y eliminación está completa, incluyendo el manejo seguro y eficiente de los archivos de imagen.</p>
<p>Capturas de pantalla requeridas - Flujos CRUD Completos</p>
<p>Realiza las capturas necesarias mostrando los tres flujos principales del CRUD:</p>
<ol>
<li>El formulario de "Crear Nuevo Producto" relleno</li>
<li>La tabla de administración con el <strong>nuevo producto ya creado</strong> y la <strong>notificación de éxito</strong> visible</li>
<li>El formulario de "Editar Producto" con los datos de un producto existente y un campo modificado</li>
<li>La tabla de administración con el <strong>producto actualizado</strong> y la <strong>notificación de éxito</strong> visible</li>
<li>El cuadro de diálogo de confirmación <code>confirm('¿Estás seguro...?')</code> al hacer clic en "Eliminar"</li>
<li>La tabla de administración sin el producto eliminado y con la <strong>notificación de éxito</strong> visible</li>
</ol>
<h2 id="fase-10-implementar-el-carrito-de-compras-con-sesiones">FASE 10: Implementar el Carrito de Compras con Sesiones<a class="headerlink" href="#fase-10-implementar-el-carrito-de-compras-con-sesiones" title="Permanent link">&para;</a></h2>
<p>Tu <code>CartController</code> actual está simulando la funcionalidad y depende de un usuario fijo en la base de datos (<code>User::find(1)</code>) y de la tabla pivote <code>product_user</code>. Para que la tienda sea funcional para cualquier visitante, vamos a refactorizarlo completamente para que utilice el <strong>sistema de sesiones de Laravel</strong>. Esto permitirá que tanto usuarios invitados como autenticados puedan gestionar su propio carrito.</p>
<h3 id="1-como-funcionara">1. ¿Cómo Funcionará?<a class="headerlink" href="#1-como-funcionara" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Almacenamiento en Sesión:</strong> El carrito ya no se guardará en la tabla <code>product_user</code>. En su lugar, será un array almacenado en la sesión del navegador del usuario. Si la sesión expira, el carrito se vaciará.</li>
<li><strong>Lógica Real:</strong> Implementaremos la lógica completa para añadir, actualizar, eliminar y vaciar el carrito.</li>
<li><strong>Finalizar Compra:</strong> Añadiremos un botón para "Realizar el Pedido", que simulará la compra vaciando el carrito y mostrando un mensaje de confirmación.</li>
</ul>
<p>¿Qué pasa con la tabla product_user?</p>
<p>La tabla <code>product_user</code> que creamos en P3 <strong>ya no se usará para el carrito</strong> (que ahora usa sesiones más apropiadas para datos temporales), pero la <strong>mantendremos activa</strong> porque en FASE 11 la reutilizaremos para implementar la <strong>Lista de Deseos (wishlist)</strong>.</p>
<p>Esta separación refleja el comportamiento habitual de tiendas online reales: el carrito es volátil y público, mientras que los favoritos son persistentes y privados.</p>
<h3 id="2-refactorizar-el-cartcontroller-para-usar-sesiones">2. Refactorizar el <code>CartController</code> para Usar Sesiones<a class="headerlink" href="#2-refactorizar-el-cartcontroller-para-usar-sesiones" title="Permanent link">&para;</a></h3>
<p>Este es el paso central. Vamos a reescribir por completo tu <code>CartController</code> para que toda la lógica del carrito se gestione a través del helper <code>session()</code>.</p>
<p>Abre <code>app/Http/Controllers/CartController.php</code> y reemplaza todo su contenido:</p>
<p>Código PHP (<code>CartController.php</code>)
<div class="highlight"><pre><span></span><code><span class="cp">&lt;?php</span>

<span class="k">namespace</span> <span class="nx">App\Http\Controllers</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">App\Models\Product</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\Http\Request</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\View\View</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\Http\RedirectResponse</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\Support\Collection</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">CartController</span> <span class="k">extends</span> <span class="nx">Controller</span>
<span class="p">{</span>
    <span class="sd">/**</span>
<span class="sd">     * Muestra la vista del carrito de compras con los datos de la sesión.</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">index</span><span class="p">()</span><span class="o">:</span> <span class="nx">View</span>
    <span class="p">{</span>
        <span class="nv">$cart</span> <span class="o">=</span> <span class="nx">session</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;cart&#39;</span><span class="p">,</span> <span class="p">[]);</span>

        <span class="c1">// Obtenemos los IDs de los productos del carrito</span>
        <span class="nv">$productIds</span> <span class="o">=</span> <span class="nb">array_keys</span><span class="p">(</span><span class="nv">$cart</span><span class="p">);</span>

        <span class="c1">// Cargamos los modelos de producto con sus relaciones</span>
        <span class="nv">$cartProducts</span> <span class="o">=</span> <span class="nx">Product</span><span class="o">::</span><span class="na">with</span><span class="p">([</span><span class="s1">&#39;category&#39;</span><span class="p">,</span> <span class="s1">&#39;offer&#39;</span><span class="p">])</span><span class="o">-&gt;</span><span class="na">find</span><span class="p">(</span><span class="nv">$productIds</span><span class="p">);</span>

        <span class="c1">// Añadimos la cantidad a cada producto para usarla en la vista</span>
        <span class="nv">$cartProducts</span> <span class="o">=</span> <span class="nv">$cartProducts</span><span class="o">-&gt;</span><span class="na">map</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span><span class="nv">$product</span><span class="p">)</span> <span class="k">use</span> <span class="p">(</span><span class="nv">$cart</span><span class="p">)</span> <span class="p">{</span>
            <span class="nv">$product</span><span class="o">-&gt;</span><span class="na">quantity</span> <span class="o">=</span> <span class="nv">$cart</span><span class="p">[</span><span class="nv">$product</span><span class="o">-&gt;</span><span class="na">id</span><span class="p">][</span><span class="s1">&#39;quantity&#39;</span><span class="p">];</span>
            <span class="k">return</span> <span class="nv">$product</span><span class="p">;</span>
        <span class="p">});</span>

        <span class="k">return</span> <span class="nx">view</span><span class="p">(</span><span class="s1">&#39;cart.index&#39;</span><span class="p">,</span> <span class="p">[</span>
            <span class="s1">&#39;cartProducts&#39;</span> <span class="o">=&gt;</span> <span class="nv">$cartProducts</span>
        <span class="p">]);</span>
    <span class="p">}</span>

    <span class="sd">/**</span>
<span class="sd">     * Añade un producto al carrito de compras en la sesión.</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">store</span><span class="p">(</span><span class="nx">Request</span> <span class="nv">$request</span><span class="p">)</span><span class="o">:</span> <span class="nx">RedirectResponse</span>
    <span class="p">{</span>
        <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">validate</span><span class="p">([</span><span class="s1">&#39;product_id&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;required|exists:products,id&#39;</span><span class="p">]);</span>
        <span class="nv">$productId</span> <span class="o">=</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">input</span><span class="p">(</span><span class="s1">&#39;product_id&#39;</span><span class="p">);</span>

        <span class="nv">$cart</span> <span class="o">=</span> <span class="nx">session</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;cart&#39;</span><span class="p">,</span> <span class="p">[]);</span>

        <span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$cart</span><span class="p">[</span><span class="nv">$productId</span><span class="p">]))</span> <span class="p">{</span>
            <span class="nv">$cart</span><span class="p">[</span><span class="nv">$productId</span><span class="p">][</span><span class="s1">&#39;quantity&#39;</span><span class="p">]</span><span class="o">++</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nv">$cart</span><span class="p">[</span><span class="nv">$productId</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;quantity&quot;</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">];</span>
        <span class="p">}</span>

        <span class="nx">session</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">put</span><span class="p">(</span><span class="s1">&#39;cart&#39;</span><span class="p">,</span> <span class="nv">$cart</span><span class="p">);</span>
        <span class="k">return</span> <span class="nx">redirect</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">back</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">with</span><span class="p">(</span><span class="s1">&#39;success&#39;</span><span class="p">,</span> <span class="s1">&#39;¡Producto añadido al carrito!&#39;</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="sd">/**</span>
<span class="sd">     * Actualiza la cantidad de un producto en el carrito.</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">update</span><span class="p">(</span><span class="nx">Request</span> <span class="nv">$request</span><span class="p">,</span> <span class="nx">string</span> <span class="nv">$id</span><span class="p">)</span><span class="o">:</span> <span class="nx">RedirectResponse</span>
    <span class="p">{</span>
        <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">validate</span><span class="p">([</span><span class="s1">&#39;quantity&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;required|integer|min:1&#39;</span><span class="p">]);</span>

        <span class="nv">$cart</span> <span class="o">=</span> <span class="nx">session</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;cart&#39;</span><span class="p">,</span> <span class="p">[]);</span>

        <span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$cart</span><span class="p">[</span><span class="nv">$id</span><span class="p">]))</span> <span class="p">{</span>
            <span class="nv">$cart</span><span class="p">[</span><span class="nv">$id</span><span class="p">][</span><span class="s1">&#39;quantity&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">input</span><span class="p">(</span><span class="s1">&#39;quantity&#39;</span><span class="p">);</span>
            <span class="nx">session</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">put</span><span class="p">(</span><span class="s1">&#39;cart&#39;</span><span class="p">,</span> <span class="nv">$cart</span><span class="p">);</span>
            <span class="k">return</span> <span class="nx">redirect</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">route</span><span class="p">(</span><span class="s1">&#39;cart.index&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">with</span><span class="p">(</span><span class="s1">&#39;success&#39;</span><span class="p">,</span> <span class="s1">&#39;Cantidad actualizada correctamente.&#39;</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="nx">redirect</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">route</span><span class="p">(</span><span class="s1">&#39;cart.index&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">with</span><span class="p">(</span><span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;El producto no se encontró en el carrito.&#39;</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="sd">/**</span>
<span class="sd">     * Elimina un producto del carrito de compras.</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">destroy</span><span class="p">(</span><span class="nx">string</span> <span class="nv">$id</span><span class="p">)</span><span class="o">:</span> <span class="nx">RedirectResponse</span>
    <span class="p">{</span>
        <span class="nv">$cart</span> <span class="o">=</span> <span class="nx">session</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;cart&#39;</span><span class="p">,</span> <span class="p">[]);</span>

        <span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$cart</span><span class="p">[</span><span class="nv">$id</span><span class="p">]))</span> <span class="p">{</span>
            <span class="nb">unset</span><span class="p">(</span><span class="nv">$cart</span><span class="p">[</span><span class="nv">$id</span><span class="p">]);</span> <span class="c1">// Elimina el elemento del array</span>
            <span class="nx">session</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">put</span><span class="p">(</span><span class="s1">&#39;cart&#39;</span><span class="p">,</span> <span class="nv">$cart</span><span class="p">);</span>
            <span class="k">return</span> <span class="nx">redirect</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">route</span><span class="p">(</span><span class="s1">&#39;cart.index&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">with</span><span class="p">(</span><span class="s1">&#39;success&#39;</span><span class="p">,</span> <span class="s1">&#39;Producto eliminado del carrito.&#39;</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="nx">redirect</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">route</span><span class="p">(</span><span class="s1">&#39;cart.index&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">with</span><span class="p">(</span><span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;El producto no se encontró en el carrito.&#39;</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="sd">/**</span>
<span class="sd">     * Simula la finalización de la compra, vaciando el carrito.</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">checkout</span><span class="p">()</span><span class="o">:</span> <span class="nx">RedirectResponse</span>
    <span class="p">{</span>
        <span class="nx">session</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">forget</span><span class="p">(</span><span class="s1">&#39;cart&#39;</span><span class="p">);</span> <span class="c1">// Vacía el carrito de la sesión</span>
        <span class="k">return</span> <span class="nx">redirect</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">route</span><span class="p">(</span><span class="s1">&#39;welcome&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">with</span><span class="p">(</span><span class="s1">&#39;success&#39;</span><span class="p">,</span> <span class="s1">&#39;¡Pedido realizado con éxito! Gracias por tu compra.&#39;</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></p>
<p>¿Cómo funciona el nuevo método <code>index()</code>?</p>
<p>Para que tu vista actual siga funcionando, el controlador ahora:</p>
<ol>
<li>Obtiene los IDs de producto desde la sesión.</li>
<li>Busca en la base de datos los <strong>modelos Eloquent</strong> correspondientes.</li>
<li>Añade una propiedad <code>quantity</code> a cada modelo de producto.</li>
<li>Pasa esta colección de productos enriquecidos a la vista como <code>$cartProducts</code>, exactamente como la vista espera.</li>
</ol>
<h3 id="3-anadir-las-rutas-avanzadas-del-carrito">3. Añadir las Rutas Avanzadas del Carrito<a class="headerlink" href="#3-anadir-las-rutas-avanzadas-del-carrito" title="Permanent link">&para;</a></h3>
<p>Ahora que tenemos el <code>CartController</code> completo con todos sus métodos, debemos registrar las rutas avanzadas que faltaban.</p>
<p>Abre <code>routes/web.php</code> y <strong>reemplaza</strong> las rutas básicas del carrito por las rutas completas:
<div class="highlight"><pre><span></span><code><span class="x">// Rutas del carrito de compras (ahora completas)</span>
<span class="x">Route::get(&#39;/cart&#39;, [CartController::class, &#39;index&#39;])-&gt;name(&#39;cart.index&#39;);</span>
<span class="x">Route::post(&#39;/cart&#39;, [CartController::class, &#39;store&#39;])-&gt;name(&#39;cart.store&#39;);</span>
<span class="x">Route::put(&#39;/cart/{id}&#39;, [CartController::class, &#39;update&#39;])-&gt;name(&#39;cart.update&#39;);</span>
<span class="x">Route::delete(&#39;/cart/{id}&#39;, [CartController::class, &#39;destroy&#39;])-&gt;name(&#39;cart.destroy&#39;);</span>
<span class="x">Route::post(&#39;/checkout&#39;, [CartController::class, &#39;checkout&#39;])-&gt;name(&#39;cart.checkout&#39;);</span>
</code></pre></div></p>
<h3 id="4-actualizar-las-vistas-para-la-funcionalidad-del-carrito">4. Actualizar las Vistas para la Funcionalidad del Carrito<a class="headerlink" href="#4-actualizar-las-vistas-para-la-funcionalidad-del-carrito" title="Permanent link">&para;</a></h3>
<h4 id="boton-anadir-al-carrito">Botón "Añadir al Carrito"<a class="headerlink" href="#boton-anadir-al-carrito" title="Permanent link">&para;</a></h4>
<p>El enlace simple debe convertirse en un formulario para poder enviar la petición <code>POST</code> de forma segura.</p>
<p>Abre <code>resources/views/products/show.blade.php</code> y reemplaza la sección "Botones de Acción":</p>
<p>Código Blade (<code>products/show.blade.php</code> - Botones)
<div class="highlight"><pre><span></span><code><span class="x">&lt;!-- Botones de Acción --&gt;</span>
<span class="x">&lt;div class=&quot;flex items-center space-x-4&quot;&gt;</span>
<span class="x">    &lt;form action=&quot;{{ route(&#39;cart.store&#39;) }}&quot; method=&quot;POST&quot;&gt;</span>
<span class="x">        @csrf</span>
<span class="x">        &lt;input type=&quot;hidden&quot; name=&quot;product_id&quot; value=&quot;{{ $product-&gt;id }}&quot;&gt;</span>
<span class="x">        &lt;button type=&quot;submit&quot; class=&quot;bg-primary-600 text-white px-6 py-3 rounded-lg hover:bg-primary-700 transition&quot;&gt;</span>
<span class="x">            🛒 Añadir al Carrito</span>
<span class="x">        &lt;/button&gt;</span>
<span class="x">    &lt;/form&gt;</span>
<span class="x">    &lt;a href=&quot;{{ route(&#39;products.index&#39;) }}&quot; </span>
<span class="x">       class=&quot;border border-gray-300 text-gray-700 px-6 py-3 rounded-lg hover:bg-gray-100 transition&quot;&gt;</span>
<span class="x">        ← Volver a Productos</span>
<span class="x">    &lt;/a&gt;</span>
<span class="x">&lt;/div&gt;</span>
</code></pre></div></p>
<h4 id="vista-del-carrito-cartindex">Vista del Carrito (<code>cart.index</code>)<a class="headerlink" href="#vista-del-carrito-cartindex" title="Permanent link">&para;</a></h4>
<p>Ahora, haremos dos pequeños cambios en la vista del carrito para que sea interactiva.</p>
<p>Abre <code>resources/views/cart/index.blade.php</code> y realiza las siguientes modificaciones:</p>
<ol>
<li>Reemplaza la cantidad estática (<code>{ { $product-&gt;pivot-&gt;quantity } }</code>) por un formulario de actualización.</li>
<li>Añade un formulario de eliminación.</li>
<li>Convierte el botón "Proceder al Pago" en un formulario que apunte a la nueva ruta <code>cart.checkout</code>.</li>
</ol>
<p>Código Blade (<code>cart/index.blade.php</code>)
<div class="highlight"><pre><span></span><code>@extends(&#39;layouts.public&#39;)

@section(&#39;content&#39;)
<span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;container mx-auto px-4 py-8&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">h1</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;text-3xl font-bold mb-8&quot;</span><span class="p">&gt;</span>🛒 Carrito de Compras<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>

    @if($cartProducts-&gt;isEmpty())
        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;bg-white rounded-lg shadow-lg p-8 text-center&quot;</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;text-6xl mb-4&quot;</span><span class="p">&gt;</span>🛒<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">h2</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;text-2xl font-bold text-gray-800 mb-2&quot;</span><span class="p">&gt;</span>Tu carrito está vacío<span class="p">&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">p</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;text-gray-600 mb-6&quot;</span><span class="p">&gt;</span>¡Añade productos para comenzar tu compra!<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;{{ route(&#39;products.index&#39;) }}&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;inline-block bg-primary-600 text-white px-6 py-3 rounded-lg hover:bg-primary-700 transition&quot;</span><span class="p">&gt;</span>
                Ver Productos
            <span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    @else
        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;bg-white rounded-lg shadow-lg overflow-hidden&quot;</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">table</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;w-full&quot;</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">thead</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;bg-gray-50&quot;</span><span class="p">&gt;</span>
                    <span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
                        <span class="p">&lt;</span><span class="nt">th</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;px-6 py-4 text-left text-sm font-semibold text-gray-700&quot;</span><span class="p">&gt;</span>Producto<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
                        <span class="p">&lt;</span><span class="nt">th</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;px-6 py-4 text-left text-sm font-semibold text-gray-700&quot;</span><span class="p">&gt;</span>Precio<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
                        <span class="p">&lt;</span><span class="nt">th</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;px-6 py-4 text-center text-sm font-semibold text-gray-700&quot;</span><span class="p">&gt;</span>Cantidad<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
                        <span class="p">&lt;</span><span class="nt">th</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;px-6 py-4 text-left text-sm font-semibold text-gray-700&quot;</span><span class="p">&gt;</span>Subtotal<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
                        <span class="p">&lt;</span><span class="nt">th</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;px-6 py-4 text-center text-sm font-semibold text-gray-700&quot;</span><span class="p">&gt;</span>Acciones<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
                    <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
                <span class="p">&lt;/</span><span class="nt">thead</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">tbody</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;divide-y divide-gray-200&quot;</span><span class="p">&gt;</span>
                    @php $total = 0; @endphp

                    @foreach($cartProducts as $product)
                        @php
                            // Calculamos el subtotal usando el accessor final_price
                            $subtotal = $product-&gt;final_price * $product-&gt;quantity;
                            $total += $subtotal;
                        @endphp

                        <span class="p">&lt;</span><span class="nt">tr</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;hover:bg-gray-50&quot;</span><span class="p">&gt;</span>
                            <span class="p">&lt;</span><span class="nt">td</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;px-6 py-4&quot;</span><span class="p">&gt;</span>
                                <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;flex items-center&quot;</span><span class="p">&gt;</span>
                                    @if($product-&gt;image)
                                        <span class="p">&lt;</span><span class="nt">img</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;{{ asset(&#39;storage/&#39; . $product-&gt;image) }}&quot;</span> 
                                             <span class="na">alt</span><span class="o">=</span><span class="s">&quot;{{ $product-&gt;name }}&quot;</span> 
                                             <span class="na">class</span><span class="o">=</span><span class="s">&quot;h-16 w-16 object-cover rounded-md mr-4&quot;</span><span class="p">&gt;</span>
                                    @else
                                        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;h-16 w-16 bg-gray-100 flex items-center justify-center rounded-md text-4xl mr-4&quot;</span><span class="p">&gt;</span>
                                            📦
                                        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
                                    @endif
                                    <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
                                        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;font-semibold text-gray-900&quot;</span><span class="p">&gt;</span>{{ $product-&gt;name }}<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
                                        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;text-sm text-gray-600&quot;</span><span class="p">&gt;</span>{{ $product-&gt;category-&gt;name }}<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
                                        @if($product-&gt;offer)
                                            <span class="p">&lt;</span><span class="nt">span</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;inline-block bg-orange-100 text-orange-800 text-xs px-2 py-1 rounded-full mt-1&quot;</span><span class="p">&gt;</span>
                                                🏷️ -{{ $product-&gt;offer-&gt;discount_percentage }}%
                                            <span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
                                        @endif
                                    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
                                <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
                            <span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
                            <span class="p">&lt;</span><span class="nt">td</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;px-6 py-4&quot;</span><span class="p">&gt;</span>
                                @if($product-&gt;offer)
                                    <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
                                        <span class="p">&lt;</span><span class="nt">span</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;text-sm text-gray-400 line-through&quot;</span><span class="p">&gt;</span>€{{ number_format($product-&gt;price, 2) }}<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
                                        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;font-semibold text-orange-600&quot;</span><span class="p">&gt;</span>€{{ number_format($product-&gt;final_price, 2) }}<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
                                    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
                                @else
                                    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;font-semibold text-gray-900&quot;</span><span class="p">&gt;</span>€{{ number_format($product-&gt;final_price, 2) }}<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
                                @endif
                            <span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
                            <span class="p">&lt;</span><span class="nt">td</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;px-6 py-4&quot;</span><span class="p">&gt;</span>
                                {<del class="critic"> FORMULARIO PARA ACTUALIZAR CANTIDAD </del>}
                                <span class="p">&lt;</span><span class="nt">form</span> <span class="na">action</span><span class="o">=</span><span class="s">&quot;{{ route(&#39;cart.update&#39;, $product-&gt;id) }}&quot;</span> <span class="na">method</span><span class="o">=</span><span class="s">&quot;POST&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;flex items-center justify-center&quot;</span><span class="p">&gt;</span>
                                    @csrf
                                    @method(&#39;PUT&#39;)
                                    <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;number&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;quantity&quot;</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;{{ $product-&gt;quantity }}&quot;</span> <span class="na">min</span><span class="o">=</span><span class="s">&quot;1&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;w-20 text-center border-gray-300 rounded-md shadow-sm&quot;</span><span class="p">&gt;</span>
                                    <span class="p">&lt;</span><span class="nt">button</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;submit&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;ml-2 p-1 text-indigo-600 hover:text-indigo-800&quot;</span> <span class="na">title</span><span class="o">=</span><span class="s">&quot;Actualizar cantidad&quot;</span><span class="p">&gt;</span>🔄<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
                                <span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>
                            <span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
                            <span class="p">&lt;</span><span class="nt">td</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;px-6 py-4 font-semibold text-gray-900&quot;</span><span class="p">&gt;</span>€{{ number_format($subtotal, 2) }}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
                            <span class="p">&lt;</span><span class="nt">td</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;px-6 py-4 text-center&quot;</span><span class="p">&gt;</span>
                                {<del class="critic"> FORMULARIO PARA ELIMINAR </del>}
                                <span class="p">&lt;</span><span class="nt">form</span> <span class="na">action</span><span class="o">=</span><span class="s">&quot;{{ route(&#39;cart.destroy&#39;, $product-&gt;id) }}&quot;</span> <span class="na">method</span><span class="o">=</span><span class="s">&quot;POST&quot;</span><span class="p">&gt;</span>
                                    @csrf
                                    @method(&#39;DELETE&#39;)
                                    <span class="p">&lt;</span><span class="nt">button</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;submit&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;text-red-600 hover:text-red-800&quot;</span> <span class="na">title</span><span class="o">=</span><span class="s">&quot;Eliminar producto&quot;</span><span class="p">&gt;</span>🗑️ Eliminar<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
                                <span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>
                            <span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
                        <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
                    @endforeach
                <span class="p">&lt;/</span><span class="nt">tbody</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">tfoot</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;bg-gray-50&quot;</span><span class="p">&gt;</span>
                    <span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
                        <span class="p">&lt;</span><span class="nt">td</span> <span class="na">colspan</span><span class="o">=</span><span class="s">&quot;4&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;px-6 py-4 text-right font-semibold text-gray-700&quot;</span><span class="p">&gt;</span>Total:<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
                        <span class="p">&lt;</span><span class="nt">td</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;px-6 py-4 font-bold text-xl text-primary-600&quot;</span><span class="p">&gt;</span>€{{ number_format($total, 2) }}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
                    <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
                <span class="p">&lt;/</span><span class="nt">tfoot</span><span class="p">&gt;</span>
            <span class="p">&lt;/</span><span class="nt">table</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;mt-6 flex justify-between items-center&quot;</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;{{ route(&#39;products.index&#39;) }}&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;bg-gray-200 text-gray-700 px-6 py-3 rounded-lg hover:bg-gray-300 transition&quot;</span><span class="p">&gt;</span>
                ← Seguir Comprando
            <span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
            {<del class="critic"> FORMULARIO PARA FINALIZAR COMPRA </del>}
            <span class="p">&lt;</span><span class="nt">form</span> <span class="na">action</span><span class="o">=</span><span class="s">&quot;{{ route(&#39;cart.checkout&#39;) }}&quot;</span> <span class="na">method</span><span class="o">=</span><span class="s">&quot;POST&quot;</span><span class="p">&gt;</span>
                @csrf
                <span class="p">&lt;</span><span class="nt">button</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;submit&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;bg-green-600 text-white font-bold px-6 py-3 rounded-lg hover:bg-green-700 transition&quot;</span><span class="p">&gt;</span>
                    Realizar Pedido →
                <span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
            <span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    @endif
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
@endsection
</code></pre></div></p>
<p>Cambio clave en la vista</p>
<p>Hemos reemplazado todas las apariciones de <code>$product-&gt;pivot-&gt;quantity</code> por <code>$product-&gt;quantity</code>. Gracias a la lógica del nuevo <code>CartController</code>, esta propiedad ahora existe directamente en el objeto <code>$product</code>.</p>
<h4 id="actualizar-el-contador-del-carrito-en-el-header">Actualizar el Contador del Carrito en el Header<a class="headerlink" href="#actualizar-el-contador-del-carrito-en-el-header" title="Permanent link">&para;</a></h4>
<p>Ahora vamos a darle funcionalidad al contador del carrito que aparece en el header de la tienda pública.</p>
<p>Abre <code>resources/views/partials/header.blade.php</code> y busca la sección del carrito. Reemplaza el código del contador:</p>
<p>Código Blade (<code>partials/header.blade.php</code>)
<div class="highlight"><pre><span></span><code><span class="cm">&lt;!-- Carrito de Compras --&gt;</span>
<span class="p">&lt;</span><span class="nt">header</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;bg-white shadow-lg relative&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;container mx-auto px-6 py-4&quot;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;flex items-center justify-between&quot;</span><span class="p">&gt;</span>
            <span class="cm">&lt;!-- Logo --&gt;</span>
            <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;flex items-center space-x-4&quot;</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;{{ route(&#39;welcome&#39;) }}&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;text-2xl font-bold text-primary-600&quot;</span><span class="p">&gt;</span>
                    🛍️ Mi Tienda
                <span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
            <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

        <span class="cm">&lt;!-- Navegación usando partial --&gt;</span>
        @include(&#39;partials.navigation&#39;)

            <span class="cm">&lt;!-- Carrito --&gt;</span>
            @php
                $cart = session(&#39;cart&#39;, []);
                $totalQuantity = array_sum(array_column($cart, &#39;quantity&#39;));
            @endphp
            <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;flex items-center space-x-4&quot;</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;{{ route(&#39;cart.index&#39;) }}&quot;</span> 
                <span class="na">class</span><span class="o">=</span><span class="s">&quot;text-gray-700 hover:text-primary-600 transition&quot;</span><span class="p">&gt;</span>
                    🛒 Carrito ( {{ $totalQuantity }} )
            <span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
            <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">header</span><span class="p">&gt;</span>
</code></pre></div></p>
<p>Contador con Sesiones</p>
<p>El contador usa <code>array_sum(array_column($cart, 'quantity'))</code> para contar productos en la sesión</p>
<p>Captura de pantalla requerida</p>
<p>Realiza una captura de pantalla de la <strong>página del carrito funcional</strong>, mostrando:</p>
<ol>
<li>Al menos dos productos diferentes en el carrito</li>
<li>Uno de ellos ha de tener 5 unidades</li>
<li>Cantidades, precios, subtotales y el total calculado visible</li>
<li>Botones para actualizar (🔄) y eliminar (🗑️) visibles</li>
<li><strong>Contador del carrito en el header</strong> mostrando el número correcto de productos (ej: "Carrito (6)")</li>
</ol>
<h2 id="fase-11-anadir-lista-de-deseos">FASE 11: Añadir lista de deseos<a class="headerlink" href="#fase-11-anadir-lista-de-deseos" title="Permanent link">&para;</a></h2>
<p>Ahora que nuestro carrito usa sesiones en lugar de la tabla pivot <code>product_user</code>, vamos a reaprovechar esta tabla para implementar una <strong>lista de deseos (wishlist)</strong> exclusiva para usuarios autenticados.</p>
<h3 id="1-como-funciona-la-lista-de-deseos">1. ¿Cómo funciona la Lista de Deseos?<a class="headerlink" href="#1-como-funciona-la-lista-de-deseos" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Solo para usuarios autenticados</strong>: Los usuarios deben iniciar sesión para guardar productos favoritos</li>
<li><strong>Persistente</strong>: A diferencia del carrito (que usa sesiones), la wishlist se guarda en la base de datos</li>
<li><strong>Integración en el carrito</strong>: Los productos de la wishlist se mostrarán en la vista del carrito para facilitar su compra</li>
</ul>
<p>Reutilización de la Tabla <code>product\_user</code></p>
<p>En un proyecto real desde cero, quizás nombraríamos esta tabla <code>user_wishlist</code> o <code>product_wishlist</code> para mayor claridad semántica. Sin embargo, <strong>esta situación refleja un escenario muy común en el desarrollo</strong>: los requisitos evolucionan, y a veces es más eficiente adaptar estructuras existentes que crear nuevas. Esto te enseña a ser pragmático y aprovechar lo que ya tienes.</p>
<h3 id="2-crear-el-controlador-de-wishlist">2. Crear el Controlador de Wishlist<a class="headerlink" href="#2-crear-el-controlador-de-wishlist" title="Permanent link">&para;</a></h3>
<details class="questionlaravel">
<summary>Ejecuta</summary>
<div class="highlight"><pre><span></span><code>sail<span class="w"> </span>artisan<span class="w"> </span>make:controller<span class="w"> </span>WishlistController
</code></pre></div>
</details>
<details class="examplelaravel">
<summary>Ejemplo de respuesta</summary>
<div class="highlight"><pre><span></span><code>artur@pc_classe:~/development/laravel/MyShop$<span class="w"> </span>sail<span class="w"> </span>artisan<span class="w"> </span>make:controller<span class="w"> </span>WishlistController

INFO<span class="w">  </span>Controller<span class="w"> </span><span class="o">[</span>app/Http/Controllers/WishlistController.php<span class="o">]</span><span class="w"> </span>created<span class="w"> </span>successfully.
</code></pre></div>
</details>
<p>Ya hemos creado el archivo del controlador. Ahora vamos a añadirle la lógica para gestionar la lista de deseos del usuario actualmente autenticado.</p>
<p>Abre <code>app/Http/Controllers/WishlistController.php</code> y reemplaza su contenido:</p>
<p>Código PHP (<code>WishlistController.php</code>)
<div class="highlight"><pre><span></span><code><span class="cp">&lt;?php</span>

<span class="k">namespace</span> <span class="nx">App\Http\Controllers</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">App\Models\Product</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\Http\RedirectResponse</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\View\View</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">WishlistController</span> <span class="k">extends</span> <span class="nx">Controller</span>
<span class="p">{</span>
    <span class="sd">/**</span>
<span class="sd">     * Muestra la lista de deseos del usuario autenticado.</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">index</span><span class="p">()</span><span class="o">:</span> <span class="nx">View</span>
    <span class="p">{</span>
        <span class="nv">$user</span> <span class="o">=</span> <span class="nx">auth</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">user</span><span class="p">();</span>
        <span class="nv">$wishlistProducts</span> <span class="o">=</span> <span class="nv">$user</span><span class="o">-&gt;</span><span class="na">products</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">with</span><span class="p">([</span><span class="s1">&#39;category&#39;</span><span class="p">,</span> <span class="s1">&#39;offer&#39;</span><span class="p">])</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">();</span>

        <span class="k">return</span> <span class="nx">view</span><span class="p">(</span><span class="s1">&#39;admin.wishlist.index&#39;</span><span class="p">,</span> <span class="p">[</span>
            <span class="s1">&#39;wishlistProducts&#39;</span> <span class="o">=&gt;</span> <span class="nv">$wishlistProducts</span>
        <span class="p">]);</span>
    <span class="p">}</span>

    <span class="sd">/**</span>
<span class="sd">     * Añade un producto a la lista de deseos.</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">store</span><span class="p">(</span><span class="nx">string</span> <span class="nv">$id</span><span class="p">)</span><span class="o">:</span> <span class="nx">RedirectResponse</span>
    <span class="p">{</span>
        <span class="nv">$user</span> <span class="o">=</span> <span class="nx">auth</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">user</span><span class="p">();</span>
        <span class="nv">$product</span> <span class="o">=</span> <span class="nx">Product</span><span class="o">::</span><span class="na">findOrFail</span><span class="p">(</span><span class="nv">$id</span><span class="p">);</span>

        <span class="c1">// Verificar si ya está en la wishlist</span>
        <span class="k">if</span> <span class="p">(</span><span class="nv">$user</span><span class="o">-&gt;</span><span class="na">products</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">where</span><span class="p">(</span><span class="s1">&#39;product_id&#39;</span><span class="p">,</span> <span class="nv">$id</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">exists</span><span class="p">())</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">redirect</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">back</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">with</span><span class="p">(</span><span class="s1">&#39;info&#39;</span><span class="p">,</span> <span class="s1">&#39;Este producto ya está en tu lista de deseos.&#39;</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="c1">// Añadir a la wishlist</span>
        <span class="nv">$user</span><span class="o">-&gt;</span><span class="na">products</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">attach</span><span class="p">(</span><span class="nv">$id</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;quantity&#39;</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">]);</span>

        <span class="k">return</span> <span class="nx">redirect</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">back</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">with</span><span class="p">(</span><span class="s1">&#39;success&#39;</span><span class="p">,</span> <span class="s1">&#39;¡Producto añadido a tu lista de deseos!&#39;</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="sd">/**</span>
<span class="sd">     * Elimina un producto de la lista de deseos.</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">destroy</span><span class="p">(</span><span class="nx">string</span> <span class="nv">$id</span><span class="p">)</span><span class="o">:</span> <span class="nx">RedirectResponse</span>
    <span class="p">{</span>
        <span class="nv">$user</span> <span class="o">=</span> <span class="nx">auth</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">user</span><span class="p">();</span>
        <span class="nv">$user</span><span class="o">-&gt;</span><span class="na">products</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">detach</span><span class="p">(</span><span class="nv">$id</span><span class="p">);</span>

        <span class="k">return</span> <span class="nx">redirect</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">back</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">with</span><span class="p">(</span><span class="s1">&#39;success&#39;</span><span class="p">,</span> <span class="s1">&#39;Producto eliminado de tu lista de deseos.&#39;</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></p>
<p>Relación N:M en acción</p>
<ul>
<li><code>auth()-&gt;user()</code>: Obtiene el modelo del usuario actualmente autenticado.</li>
<li><code>$user-&gt;products()</code>: Accede a la relación belongsToMany definida en el modelo User</li>
<li><code>attach($id, ['quantity' =&gt; 1])</code>: Añade una fila en <code>product_user</code></li>
<li><code>detach($id)</code>: Elimina la fila correspondiente</li>
<li><code>exists()</code>: Verifica si ya existe la relación sin cargar el producto</li>
</ul>
<h3 id="3-anadir-las-rutas-de-wishlist">3. Añadir las Rutas de Wishlist<a class="headerlink" href="#3-anadir-las-rutas-de-wishlist" title="Permanent link">&para;</a></h3>
<p>Ahora que tenemos el controlador, necesitamos registrar las rutas para que sean accesibles.</p>
<p>Abre <code>routes/web.php</code> y añade las rutas de wishlist <strong>dentro del grupo de administración</strong>. Busca el grupo de rutas admin y añade las rutas de wishlist:
<div class="highlight"><pre><span></span><code><span class="x">Route::middleware(&#39;auth&#39;)-&gt;prefix(&#39;admin&#39;)-&gt;name(&#39;admin.&#39;)-&gt;group(function () {</span>
<span class="x">    // Rutas de gestión de productos</span>
<span class="x">    Route::get(&#39;/products&#39;, [ProductController::class, &#39;adminIndex&#39;])-&gt;name(&#39;products.index&#39;);</span>
<span class="x">    Route::resource(&#39;products&#39;, ProductController::class)-&gt;except([&#39;index&#39;, &#39;show&#39;]);</span>

<span class="x">    // Rutas para la lista de deseos (Wishlist) ← AÑADIR ESTAS LÍNEAS</span>
<span class="x">    Route::get(&#39;/wishlist&#39;, [WishlistController::class, &#39;index&#39;])-&gt;name(&#39;wishlist.index&#39;);</span>
<span class="x">    Route::post(&#39;/wishlist/{id}&#39;, [WishlistController::class, &#39;store&#39;])-&gt;name(&#39;wishlist.store&#39;);</span>
<span class="x">    Route::delete(&#39;/wishlist/{id}&#39;, [WishlistController::class, &#39;destroy&#39;])-&gt;name(&#39;wishlist.destroy&#39;);</span>
<span class="x">});</span>
</code></pre></div></p>
<p><strong>No olvides añadir el import</strong> al inicio del archivo <code>routes/web.php</code> (junto a los otros controladores):
<div class="highlight"><pre><span></span><code><span class="x">use App\Http\Controllers\WishlistController;</span>
</code></pre></div></p>
<p>Rutas RESTful de Wishlist</p>
<p>La wishlist tiene rutas completas para todas las operaciones necesarias:</p>
<ul>
<li><code>GET /admin/wishlist</code> → Ver lista de deseos (index)</li>
<li><code>POST /admin/wishlist/{id}</code> → Añadir producto (store)</li>
<li><code>DELETE /admin/wishlist/{id}</code> → Eliminar producto (destroy)</li>
</ul>
<p>Observa que no necesitamos <code>update</code> porque la wishlist no tiene cantidades variables (siempre es 1).</p>
<h3 id="4-crear-la-vista-de-wishlist">4. Crear la Vista de Wishlist<a class="headerlink" href="#4-crear-la-vista-de-wishlist" title="Permanent link">&para;</a></h3>
<p>Necesitamos una página donde el usuario pueda ver todos sus productos guardados.</p>
<p>Crea el directorio:
<div class="highlight"><pre><span></span><code>mkdir<span class="w"> </span>-p<span class="w"> </span>resources/views/admin/wishlist
</code></pre></div></p>
<p>Crea el archivo:
<div class="highlight"><pre><span></span><code>touch<span class="w"> </span>resources/views/admin/wishlist/index.blade.php
</code></pre></div></p>
<p>Añade el siguiente código a <code>resources/views/admin/wishlist/index.blade.php</code>:</p>
<p>Código Blade (<code>admin/wishlist/index.blade.php</code>)
<div class="highlight"><pre><span></span><code><span class="x">&lt;x-app-layout&gt;</span>
<span class="x">    &lt;x-slot name=&quot;header&quot;&gt;</span>
<span class="x">        &lt;h2 class=&quot;font-semibold text-xl text-gray-800 leading-tight&quot;&gt;</span>
<span class="x">            {{ __(&#39;Mi Lista de Deseos&#39;) }}</span>
<span class="x">        &lt;/h2&gt;</span>
<span class="x">    &lt;/x-slot&gt;</span>

<span class="x">    &lt;div class=&quot;py-12&quot;&gt;</span>
<span class="x">        &lt;div class=&quot;max-w-7xl mx-auto sm:px-6 lg:px-8&quot;&gt;</span>
<span class="x">            &lt;div class=&quot;bg-white overflow-hidden shadow-sm sm:rounded-lg&quot;&gt;</span>
<span class="x">                &lt;div class=&quot;p-6 bg-white border-b border-gray-200&quot;&gt;</span>
<span class="x">                    @if($wishlistProducts-&gt;isEmpty())</span>
<span class="x">                        &lt;div class=&quot;text-center py-12&quot;&gt;</span>
<span class="x">                            &lt;div class=&quot;text-6xl mb-4&quot;&gt;💔&lt;/div&gt;</span>
<span class="x">                            &lt;h3 class=&quot;text-2xl font-bold text-gray-800 mb-2&quot;&gt;Tu lista de deseos está vacía&lt;/h3&gt;</span>
<span class="x">                            &lt;p class=&quot;text-gray-600 mb-6&quot;&gt;Explora nuestros productos y guarda tus favoritos&lt;/p&gt;</span>
<span class="x">                            &lt;a href=&quot;{{ route(&#39;products.index&#39;) }}&quot; class=&quot;inline-block bg-primary-600 text-white px-6 py-3 rounded-lg hover:bg-primary-700 transition&quot;&gt;</span>
<span class="x">                                Explorar Productos</span>
<span class="x">                            &lt;/a&gt;</span>
<span class="x">                        &lt;/div&gt;</span>
<span class="x">                    @else</span>
<span class="x">                        &lt;div class=&quot;grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6&quot;&gt;</span>
<span class="x">                            @foreach($wishlistProducts as $product)</span>
<span class="x">                                &lt;x-product-card :product=&quot;$product&quot; class=&quot;&quot;&gt;</span>
<span class="x">                                    {<del class="critic"> Slot para botón de eliminar en esquina superior izquierda </del>}</span>
<span class="x">                                    &lt;x-slot name=&quot;topAction&quot;&gt;</span>
<span class="x">                                        &lt;form action=&quot;{{ route(&#39;admin.wishlist.destroy&#39;, $product-&gt;id) }}&quot; method=&quot;POST&quot;&gt;</span>
<span class="x">                                            @csrf</span>
<span class="x">                                            @method(&#39;DELETE&#39;)</span>
<span class="x">                                            &lt;button type=&quot;submit&quot; class=&quot;text-2xl hover:scale-125 transition-transform&quot; title=&quot;Eliminar de favoritos&quot;&gt;</span>
<span class="x">                                                ❌</span>
<span class="x">                                            &lt;/button&gt;</span>
<span class="x">                                        &lt;/form&gt;</span>
<span class="x">                                    &lt;/x-slot&gt;</span>

<span class="x">                                    {<del class="critic"> Slot para acciones personalizadas en el footer </del>}</span>
<span class="x">                                    &lt;x-slot name=&quot;actions&quot;&gt;</span>
<span class="x">                                        &lt;div class=&quot;flex gap-2&quot;&gt;</span>
<span class="x">                                            &lt;form action=&quot;{{ route(&#39;cart.store&#39;) }}&quot; method=&quot;POST&quot; class=&quot;flex-1&quot;&gt;</span>
<span class="x">                                                @csrf</span>
<span class="x">                                                &lt;input type=&quot;hidden&quot; name=&quot;product_id&quot; value=&quot;{{ $product-&gt;id }}&quot;&gt;</span>
<span class="x">                                                &lt;button type=&quot;submit&quot; class=&quot;w-full bg-primary-600 text-white px-4 py-2 rounded-lg hover:bg-primary-700 transition&quot;&gt;</span>
<span class="x">                                                    🛒 Añadir al Carrito</span>
<span class="x">                                                &lt;/button&gt;</span>
<span class="x">                                            &lt;/form&gt;</span>
<span class="x">                                            &lt;a href=&quot;{{ route(&#39;products.show&#39;, $product-&gt;id) }}&quot; class=&quot;bg-gray-200 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-300 transition&quot;&gt;</span>
<span class="x">                                                Ver</span>
<span class="x">                                            &lt;/a&gt;</span>
<span class="x">                                        &lt;/div&gt;</span>
<span class="x">                                    &lt;/x-slot&gt;</span>
<span class="x">                                &lt;/x-product-card&gt;</span>
<span class="x">                            @endforeach</span>
<span class="x">                        &lt;/div&gt;</span>
<span class="x">                    @endif</span>
<span class="x">                &lt;/div&gt;</span>
<span class="x">            &lt;/div&gt;</span>
<span class="x">        &lt;/div&gt;</span>
<span class="x">    &lt;/div&gt;</span>
<span class="x">&lt;/x-app-layout&gt;</span>
</code></pre></div></p>
<p>Reutilización de Componentes con Slots</p>
<p>Esta vista reutiliza el componente <code>&lt;x-product-card&gt;</code> que creamos en FASE 7, usando <strong>slots</strong> para personalizar su comportamiento:</p>
<ul>
<li><strong>Slot <code>topAction</code></strong>: Añade el botón "❌" para eliminar de favoritos en la esquina superior izquierda</li>
<li><strong>Slot <code>actions</code></strong>: Personaliza los botones del footer con "Añadir al Carrito" y "Ver"</li>
</ul>
<p>Esto evita duplicar código HTML, mantiene la consistencia visual en toda la aplicación y hace el código más mantenible. El componente se adapta al contexto sin necesidad de crear versiones diferentes.</p>
<h3 id="5-anadir-boton-anadir-a-favoritos-en-vista-publica">5. Añadir Botón "Añadir a Favoritos" en Vista Pública<a class="headerlink" href="#5-anadir-boton-anadir-a-favoritos-en-vista-publica" title="Permanent link">&para;</a></h3>
<p>Finalmente, debemos añadir un botón en la página de detalle del producto para que los usuarios puedan añadirlo a su lista de deseos. Este botón solo debe aparecer si el usuario ha iniciado sesión.</p>
<p>Actualiza <code>resources/views/products/show.blade.php</code> para añadir el botón de wishlist. Busca la sección "Botones de Acción" y reemplázala por:</p>
<p>Código Blade actualizado
<div class="highlight"><pre><span></span><code><span class="x">&lt;!-- Botones de Acción --&gt;</span>
<span class="x">&lt;div class=&quot;flex items-center space-x-4&quot;&gt;</span>
<span class="x">    &lt;form action=&quot;{{ route(&#39;cart.store&#39;) }}&quot; method=&quot;POST&quot;&gt;</span>
<span class="x">        @csrf</span>
<span class="x">        &lt;input type=&quot;hidden&quot; name=&quot;product_id&quot; value=&quot;{{ $product-&gt;id }}&quot;&gt;</span>
<span class="x">        &lt;button type=&quot;submit&quot; class=&quot;bg-primary-600 text-white px-6 py-3 rounded-lg hover:bg-primary-700 transition&quot;&gt;</span>
<span class="x">            🛒 Añadir al Carrito</span>
<span class="x">        &lt;/button&gt;</span>
<span class="x">    &lt;/form&gt;</span>

<span class="x">    {<del class="critic"> Botón de Wishlist (solo para usuarios autenticados) </del>}</span>
<span class="x">    @auth</span>
<span class="x">        &lt;form action=&quot;{{ route(&#39;admin.wishlist.store&#39;, $product-&gt;id) }}&quot; method=&quot;POST&quot;&gt;</span>
<span class="x">            @csrf</span>
<span class="x">            &lt;button type=&quot;submit&quot; class=&quot;border-2 border-red-500 text-red-500 px-6 py-3 rounded-lg hover:bg-red-500 hover:text-white transition&quot;&gt;</span>
<span class="x">                ❤️ Guardar en Favoritos</span>
<span class="x">            &lt;/button&gt;</span>
<span class="x">        &lt;/form&gt;</span>
<span class="x">    @endauth</span>

<span class="x">    &lt;a href=&quot;{{ route(&#39;products.index&#39;) }}&quot; </span>
<span class="x">       class=&quot;border border-gray-300 text-gray-700 px-6 py-3 rounded-lg hover:bg-gray-100 transition&quot;&gt;</span>
<span class="x">        ← Volver a Productos</span>
<span class="x">    &lt;/a&gt;</span>
<span class="x">&lt;/div&gt;</span>
</code></pre></div></p>
<h3 id="6-anadir-enlace-de-wishlist-al-menu-de-navegacion">6. Añadir Enlace de Wishlist al Menú de Navegación<a class="headerlink" href="#6-anadir-enlace-de-wishlist-al-menu-de-navegacion" title="Permanent link">&para;</a></h3>
<p>Ahora que la funcionalidad de wishlist está completa, vamos a añadir el enlace correspondiente al menú de navegación. Además, para poder volver a la tienda pública, vamos a añadir el enlace a la tienda pública.</p>
<p>Abre <code>resources/views/layouts/navigation.blade.php</code> y substituye el contenido por el siguiente:</p>
<p>Código Blade actualizado (<code>layouts/navigation.blade.php</code>)
<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">nav</span> <span class="na">x-data</span><span class="o">=</span><span class="s">&quot;{ open: false }&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;bg-white border-b border-gray-100&quot;</span><span class="p">&gt;</span>
    <span class="cm">&lt;!-- Primary Navigation Menu --&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;max-w-7xl mx-auto px-4 sm:px-6 lg:px-8&quot;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;flex justify-between h-16&quot;</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;flex&quot;</span><span class="p">&gt;</span>
                <span class="cm">&lt;!-- Logo --&gt;</span>
                <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;shrink-0 flex items-center&quot;</span><span class="p">&gt;</span>
                    <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;{{ route(&#39;dashboard&#39;) }}&quot;</span><span class="p">&gt;</span>
                        <span class="p">&lt;</span><span class="nt">x-application-logo</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;block h-9 w-auto fill-current text-gray-800&quot;</span> <span class="p">/&gt;</span>
                    <span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
                <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

                <span class="cm">&lt;!-- Navigation Links --&gt;</span>
                <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;hidden space-x-8 sm:-my-px sm:ms-10 sm:flex&quot;</span><span class="p">&gt;</span>
                    <span class="p">&lt;</span><span class="nt">x-nav-link</span> <span class="na">:href</span><span class="o">=</span><span class="s">&quot;route(&#39;welcome&#39;)&quot;</span> <span class="na">:active</span><span class="o">=</span><span class="s">&quot;request()-&gt;routeIs(&#39;welcome&#39;)&quot;</span><span class="p">&gt;</span>
                        {{ __(&#39;Tienda&#39;) }}
                    <span class="p">&lt;/</span><span class="nt">x-nav-link</span><span class="p">&gt;</span>
                    <span class="p">&lt;</span><span class="nt">x-nav-link</span> <span class="na">:href</span><span class="o">=</span><span class="s">&quot;route(&#39;dashboard&#39;)&quot;</span> <span class="na">:active</span><span class="o">=</span><span class="s">&quot;request()-&gt;routeIs(&#39;dashboard&#39;)&quot;</span><span class="p">&gt;</span>
                        {{ __(&#39;Dashboard&#39;) }}
                    <span class="p">&lt;/</span><span class="nt">x-nav-link</span><span class="p">&gt;</span>
                    {<del class="critic"> Enlaces de Administración </del>}
                    <span class="p">&lt;</span><span class="nt">x-nav-link</span> <span class="na">:href</span><span class="o">=</span><span class="s">&quot;route(&#39;admin.products.index&#39;)&quot;</span> <span class="na">:active</span><span class="o">=</span><span class="s">&quot;request()-&gt;routeIs(&#39;admin.products.*&#39;)&quot;</span><span class="p">&gt;</span>
                        {{ __(&#39;Productos&#39;) }}
                    <span class="p">&lt;/</span><span class="nt">x-nav-link</span><span class="p">&gt;</span>
                    <span class="p">&lt;</span><span class="nt">x-nav-link</span> <span class="na">:href</span><span class="o">=</span><span class="s">&quot;route(&#39;admin.wishlist.index&#39;)&quot;</span> <span class="na">:active</span><span class="o">=</span><span class="s">&quot;request()-&gt;routeIs(&#39;admin.wishlist.*&#39;)&quot;</span><span class="p">&gt;</span>
                        {{ __(&#39;❤️ Lista de Deseos&#39;) }}
                    <span class="p">&lt;/</span><span class="nt">x-nav-link</span><span class="p">&gt;</span>
                <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
            <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

            <span class="cm">&lt;!-- Settings Dropdown --&gt;</span>
            <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;hidden sm:flex sm:items-center sm:ms-6&quot;</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">x-dropdown</span> <span class="na">align</span><span class="o">=</span><span class="s">&quot;right&quot;</span> <span class="na">width</span><span class="o">=</span><span class="s">&quot;48&quot;</span><span class="p">&gt;</span>
                    <span class="p">&lt;</span><span class="nt">x-slot</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;trigger&quot;</span><span class="p">&gt;</span>
                        <span class="p">&lt;</span><span class="nt">button</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-gray-500 bg-white hover:text-gray-700 focus:outline-none transition ease-in-out duration-150&quot;</span><span class="p">&gt;</span>
                            <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>{{ Auth::user()-&gt;name }}<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

                            <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;ms-1&quot;</span><span class="p">&gt;</span>
                                <span class="p">&lt;</span><span class="nt">svg</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;fill-current h-4 w-4&quot;</span> <span class="na">xmlns</span><span class="o">=</span><span class="s">&quot;http://www.w3.org/2000/svg&quot;</span> <span class="na">viewBox</span><span class="o">=</span><span class="s">&quot;0 0 20 20&quot;</span><span class="p">&gt;</span>
                                    <span class="p">&lt;</span><span class="nt">path</span> <span class="na">fill-rule</span><span class="o">=</span><span class="s">&quot;evenodd&quot;</span> <span class="na">d</span><span class="o">=</span><span class="s">&quot;M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z&quot;</span> <span class="na">clip-rule</span><span class="o">=</span><span class="s">&quot;evenodd&quot;</span> <span class="p">/&gt;</span>
                                <span class="p">&lt;/</span><span class="nt">svg</span><span class="p">&gt;</span>
                            <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
                        <span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
                    <span class="p">&lt;/</span><span class="nt">x-slot</span><span class="p">&gt;</span>

                    <span class="p">&lt;</span><span class="nt">x-slot</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;content&quot;</span><span class="p">&gt;</span>
                        <span class="p">&lt;</span><span class="nt">x-dropdown-link</span> <span class="na">:href</span><span class="o">=</span><span class="s">&quot;route(&#39;profile.edit&#39;)&quot;</span><span class="p">&gt;</span>
                            {{ __(&#39;Profile&#39;) }}
                        <span class="p">&lt;/</span><span class="nt">x-dropdown-link</span><span class="p">&gt;</span>

                        <span class="cm">&lt;!-- Authentication --&gt;</span>
                        <span class="p">&lt;</span><span class="nt">form</span> <span class="na">method</span><span class="o">=</span><span class="s">&quot;POST&quot;</span> <span class="na">action</span><span class="o">=</span><span class="s">&quot;{{ route(&#39;logout&#39;) }}&quot;</span><span class="p">&gt;</span>
                            @csrf

                            <span class="p">&lt;</span><span class="nt">x-dropdown-link</span> <span class="na">:href</span><span class="o">=</span><span class="s">&quot;route(&#39;logout&#39;)&quot;</span>
                                    <span class="na">onclick</span><span class="o">=</span><span class="s">&quot;event.preventDefault();</span>
<span class="s">                                                this.closest(&#39;form&#39;).submit();&quot;</span><span class="p">&gt;</span>
                                {{ __(&#39;Log Out&#39;) }}
                            <span class="p">&lt;/</span><span class="nt">x-dropdown-link</span><span class="p">&gt;</span>
                        <span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>
                    <span class="p">&lt;/</span><span class="nt">x-slot</span><span class="p">&gt;</span>
                <span class="p">&lt;/</span><span class="nt">x-dropdown</span><span class="p">&gt;</span>
            <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

            <span class="cm">&lt;!-- Hamburger --&gt;</span>
            <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;-me-2 flex items-center sm:hidden&quot;</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">button</span> <span class="err">@</span><span class="na">click</span><span class="o">=</span><span class="s">&quot;open = ! open&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:bg-gray-100 focus:text-gray-500 transition duration-150 ease-in-out&quot;</span><span class="p">&gt;</span>
                    <span class="p">&lt;</span><span class="nt">svg</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;h-6 w-6&quot;</span> <span class="na">stroke</span><span class="o">=</span><span class="s">&quot;currentColor&quot;</span> <span class="na">fill</span><span class="o">=</span><span class="s">&quot;none&quot;</span> <span class="na">viewBox</span><span class="o">=</span><span class="s">&quot;0 0 24 24&quot;</span><span class="p">&gt;</span>
                        <span class="p">&lt;</span><span class="nt">path</span> <span class="na">:class</span><span class="o">=</span><span class="s">&quot;{&#39;hidden&#39;: open, &#39;inline-flex&#39;: ! open }&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;inline-flex&quot;</span> <span class="na">stroke-linecap</span><span class="o">=</span><span class="s">&quot;round&quot;</span> <span class="na">stroke-linejoin</span><span class="o">=</span><span class="s">&quot;round&quot;</span> <span class="na">stroke-width</span><span class="o">=</span><span class="s">&quot;2&quot;</span> <span class="na">d</span><span class="o">=</span><span class="s">&quot;M4 6h16M4 12h16M4 18h16&quot;</span> <span class="p">/&gt;</span>
                        <span class="p">&lt;</span><span class="nt">path</span> <span class="na">:class</span><span class="o">=</span><span class="s">&quot;{&#39;hidden&#39;: ! open, &#39;inline-flex&#39;: open }&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;hidden&quot;</span> <span class="na">stroke-linecap</span><span class="o">=</span><span class="s">&quot;round&quot;</span> <span class="na">stroke-linejoin</span><span class="o">=</span><span class="s">&quot;round&quot;</span> <span class="na">stroke-width</span><span class="o">=</span><span class="s">&quot;2&quot;</span> <span class="na">d</span><span class="o">=</span><span class="s">&quot;M6 18L18 6M6 6l12 12&quot;</span> <span class="p">/&gt;</span>
                    <span class="p">&lt;/</span><span class="nt">svg</span><span class="p">&gt;</span>
                <span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
            <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

    <span class="cm">&lt;!-- Responsive Navigation Menu --&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">:class</span><span class="o">=</span><span class="s">&quot;{&#39;block&#39;: open, &#39;hidden&#39;: ! open}&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;hidden sm:hidden&quot;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;pt-2 pb-3 space-y-1&quot;</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">x-responsive-nav-link</span> <span class="na">:href</span><span class="o">=</span><span class="s">&quot;route(&#39;welcome&#39;)&quot;</span> <span class="na">:active</span><span class="o">=</span><span class="s">&quot;request()-&gt;routeIs(&#39;welcome&#39;)&quot;</span><span class="p">&gt;</span>
                {{ __(&#39;Tienda&#39;) }}
            <span class="p">&lt;/</span><span class="nt">x-responsive-nav-link</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">x-responsive-nav-link</span> <span class="na">:href</span><span class="o">=</span><span class="s">&quot;route(&#39;dashboard&#39;)&quot;</span> <span class="na">:active</span><span class="o">=</span><span class="s">&quot;request()-&gt;routeIs(&#39;dashboard&#39;)&quot;</span><span class="p">&gt;</span>
                {{ __(&#39;Dashboard&#39;) }}
            <span class="p">&lt;/</span><span class="nt">x-responsive-nav-link</span><span class="p">&gt;</span>
            {<del class="critic"> Enlaces de Administración </del>}
            <span class="p">&lt;</span><span class="nt">x-responsive-nav-link</span> <span class="na">:href</span><span class="o">=</span><span class="s">&quot;route(&#39;admin.products.index&#39;)&quot;</span> <span class="na">:active</span><span class="o">=</span><span class="s">&quot;request()-&gt;routeIs(&#39;admin.products.*&#39;)&quot;</span><span class="p">&gt;</span>
                {{ __(&#39;Productos&#39;) }}
            <span class="p">&lt;/</span><span class="nt">x-responsive-nav-link</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">x-responsive-nav-link</span> <span class="na">:href</span><span class="o">=</span><span class="s">&quot;route(&#39;admin.wishlist.index&#39;)&quot;</span> <span class="na">:active</span><span class="o">=</span><span class="s">&quot;request()-&gt;routeIs(&#39;admin.wishlist.*&#39;)&quot;</span><span class="p">&gt;</span>
                {{ __(&#39;❤️ Lista de Deseos&#39;) }}
            <span class="p">&lt;/</span><span class="nt">x-responsive-nav-link</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

        <span class="cm">&lt;!-- Responsive Settings Options --&gt;</span>
        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;pt-4 pb-1 border-t border-gray-200&quot;</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;px-4&quot;</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;font-medium text-base text-gray-800&quot;</span><span class="p">&gt;</span>{{ Auth::user()-&gt;name }}<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;font-medium text-sm text-gray-500&quot;</span><span class="p">&gt;</span>{{ Auth::user()-&gt;email }}<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
            <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

            <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;mt-3 space-y-1&quot;</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">x-responsive-nav-link</span> <span class="na">:href</span><span class="o">=</span><span class="s">&quot;route(&#39;profile.edit&#39;)&quot;</span><span class="p">&gt;</span>
                    {{ __(&#39;Profile&#39;) }}
                <span class="p">&lt;/</span><span class="nt">x-responsive-nav-link</span><span class="p">&gt;</span>

                <span class="cm">&lt;!-- Authentication --&gt;</span>
                <span class="p">&lt;</span><span class="nt">form</span> <span class="na">method</span><span class="o">=</span><span class="s">&quot;POST&quot;</span> <span class="na">action</span><span class="o">=</span><span class="s">&quot;{{ route(&#39;logout&#39;) }}&quot;</span><span class="p">&gt;</span>
                    @csrf

                    <span class="p">&lt;</span><span class="nt">x-responsive-nav-link</span> <span class="na">:href</span><span class="o">=</span><span class="s">&quot;route(&#39;logout&#39;)&quot;</span>
                            <span class="na">onclick</span><span class="o">=</span><span class="s">&quot;event.preventDefault();</span>
<span class="s">                                        this.closest(&#39;form&#39;).submit();&quot;</span><span class="p">&gt;</span>
                        {{ __(&#39;Log Out&#39;) }}
                    <span class="p">&lt;/</span><span class="nt">x-responsive-nav-link</span><span class="p">&gt;</span>
                <span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>
            <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">nav</span><span class="p">&gt;</span>
</code></pre></div></p>
<p>Captura de pantalla requerida</p>
<p>Realiza una captura de pantalla de la página <strong><code>/admin/wishlist</code></strong> mostrando:</p>
<ol>
<li>Al menos 2 productos guardados en la lista de deseos</li>
<li>Información completa de los productos (imagen, nombre, precio, oferta si aplica)</li>
<li>Botones "Añadir al Carrito" y "❌" visibles</li>
<li><strong>Menú de navegación superior</strong> con el enlace "❤️ Lista de Deseos" visible y activo</li>
<li>Usuario autenticado (nombre visible en la esquina superior derecha)</li>
<li>URL <code>/admin/wishlist</code> visible en el navegador</li>
</ol>
<h2 id="fase-12-middleware-personalizado">FASE 12: Middleware Personalizado<a class="headerlink" href="#fase-12-middleware-personalizado" title="Permanent link">&para;</a></h2>
<p>Los middleware personalizados permiten añadir lógica adicional que se ejecuta en cada petición. Son útiles para registrar actividad, verificar permisos complejos, etc. Vamos a crear un middleware que registre la actividad de los administradores.</p>
<h3 id="1-crear-el-middleware">1. Crear el Middleware<a class="headerlink" href="#1-crear-el-middleware" title="Permanent link">&para;</a></h3>
<details class="questionlaravel">
<summary>Ejecuta</summary>
<div class="highlight"><pre><span></span><code>sail<span class="w"> </span>artisan<span class="w"> </span>make:middleware<span class="w"> </span>LogUserActivity
</code></pre></div>
</details>
<details class="examplelaravel">
<summary>Ejemplo de respuesta</summary>
<div class="highlight"><pre><span></span><code>artur@pc_classe:~/development/laravel/MyShop$<span class="w"> </span>sail<span class="w"> </span>artisan<span class="w"> </span>make:middleware<span class="w"> </span>LogUserActivity

INFO<span class="w">  </span>Middleware<span class="w"> </span><span class="o">[</span>app/Http/Middleware/LogUserActivity.php<span class="o">]</span><span class="w"> </span>created<span class="w"> </span>successfully.
</code></pre></div>
</details>
<p>Abre <code>app/Http/Middleware/LogUserActivity.php</code> y reemplaza su contenido:</p>
<p>Código PHP (<code>LogUserActivity.php</code>)
<div class="highlight"><pre><span></span><code><span class="cp">&lt;?php</span>

<span class="k">namespace</span> <span class="nx">App\Http\Middleware</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Closure</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\Http\Request</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\Support\Facades\Log</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\HttpFoundation\Response</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">LogUserActivity</span>
<span class="p">{</span>
    <span class="sd">/**</span>
<span class="sd">     * Handle an incoming request.</span>
<span class="sd">     *</span>
<span class="sd">     * @param  \Closure(\Illuminate\Http\Request): (\Symfony\Component\HttpFoundation\Response)  $next</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">handle</span><span class="p">(</span><span class="nx">Request</span> <span class="nv">$request</span><span class="p">,</span> <span class="nx">Closure</span> <span class="nv">$next</span><span class="p">)</span><span class="o">:</span> <span class="nx">Response</span>
    <span class="p">{</span>
        <span class="c1">// Ejecutar la petición y obtener la respuesta</span>
        <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$next</span><span class="p">(</span><span class="nv">$request</span><span class="p">);</span>

        <span class="c1">// Si el usuario está autenticado, registrar su actividad</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">auth</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">check</span><span class="p">())</span> <span class="p">{</span>
            <span class="nx">Log</span><span class="o">::</span><span class="na">info</span><span class="p">(</span><span class="s1">&#39;Actividad de usuario&#39;</span><span class="p">,</span> <span class="p">[</span>
                <span class="s1">&#39;user_id&#39;</span> <span class="o">=&gt;</span> <span class="nx">auth</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">id</span><span class="p">(),</span>
                <span class="s1">&#39;user_name&#39;</span> <span class="o">=&gt;</span> <span class="nx">auth</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">user</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">name</span><span class="p">,</span>
                <span class="s1">&#39;method&#39;</span> <span class="o">=&gt;</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">method</span><span class="p">(),</span>
                <span class="s1">&#39;url&#39;</span> <span class="o">=&gt;</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">fullUrl</span><span class="p">(),</span>
                <span class="s1">&#39;ip&#39;</span> <span class="o">=&gt;</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">ip</span><span class="p">(),</span>
            <span class="p">]);</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="nv">$response</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></p>
<h3 id="2-registrar-el-middleware-con-alias">2. Registrar el Middleware con Alias<a class="headerlink" href="#2-registrar-el-middleware-con-alias" title="Permanent link">&para;</a></h3>
<p>Para aplicar middleware de forma selectiva, Laravel permite crear <strong>alias</strong>. Esto nos permite usar nombres cortos como <code>log.activity</code> en lugar de la ruta completa de la clase.</p>
<p>Abre <code>bootstrap/app.php</code> y registra el middleware como alias:</p>
<p>Código PHP (<code>bootstrap/app.php</code>)
<div class="highlight"><pre><span></span><code><span class="cp">&lt;?php</span>

<span class="k">use</span> <span class="nx">Illuminate\Foundation\Application</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\Foundation\Configuration\Exceptions</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\Foundation\Configuration\Middleware</span><span class="p">;</span>

<span class="k">return</span> <span class="nx">Application</span><span class="o">::</span><span class="na">configure</span><span class="p">(</span><span class="nx">basePath</span><span class="o">:</span> <span class="nb">dirname</span><span class="p">(</span><span class="no">__DIR__</span><span class="p">))</span>
    <span class="o">-&gt;</span><span class="na">withRouting</span><span class="p">(</span>
        <span class="nx">web</span><span class="o">:</span> <span class="no">__DIR__</span><span class="o">.</span><span class="s1">&#39;/../routes/web.php&#39;</span><span class="p">,</span>
        <span class="nx">commands</span><span class="o">:</span> <span class="no">__DIR__</span><span class="o">.</span><span class="s1">&#39;/../routes/console.php&#39;</span><span class="p">,</span>
        <span class="nx">health</span><span class="o">:</span> <span class="s1">&#39;/up&#39;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">withMiddleware</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span><span class="nx">Middleware</span> <span class="nv">$middleware</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// Registrar middleware con alias</span>
        <span class="nv">$middleware</span><span class="o">-&gt;</span><span class="na">alias</span><span class="p">([</span>
            <span class="s1">&#39;log.activity&#39;</span> <span class="o">=&gt;</span> <span class="nx">\App\Http\Middleware\LogUserActivity</span><span class="o">::</span><span class="na">class</span><span class="p">,</span>
        <span class="p">]);</span>
    <span class="p">})</span>
    <span class="o">-&gt;</span><span class="na">withExceptions</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span><span class="nx">Exceptions</span> <span class="nv">$exceptions</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">//</span>
    <span class="p">})</span><span class="o">-&gt;</span><span class="na">create</span><span class="p">();</span>
</code></pre></div></p>
<p>¿Por qué usar alias?</p>
<p>Los alias de middleware ofrecen varias ventajas:</p>
<ul>
<li>✅ <strong>Nombres descriptivos</strong>: <code>log.activity</code> es más claro que la ruta completa de la clase</li>
<li>✅ <strong>Aplicación selectiva</strong>: Puedes aplicarlo solo a rutas específicas</li>
<li>✅ <strong>Reutilizable</strong>: Otros desarrolladores pueden usar el alias sin conocer la implementación</li>
<li>✅ <strong>Estándar de Laravel</strong>: Breeze usa alias como <code>auth</code>, <code>guest</code>, <code>verified</code>, etc.</li>
</ul>
<h3 id="3-aplicar-el-middleware-solo-a-rutas-de-administracion">3. Aplicar el Middleware Solo a Rutas de Administración<a class="headerlink" href="#3-aplicar-el-middleware-solo-a-rutas-de-administracion" title="Permanent link">&para;</a></h3>
<p>Ahora que tenemos el alias registrado, vamos a aplicar el middleware únicamente al grupo de rutas de administración.</p>
<p>Abre <code>routes/web.php</code> y añade el middleware <code>log.activity</code> al grupo admin:</p>
<p>Código PHP (<code>routes/web.php</code> - Fragmento)
<div class="highlight"><pre><span></span><code><span class="x">// ===========================================</span>
<span class="x">// RUTAS DE ADMINISTRACIÓN (Protegidas + Logging)</span>
<span class="x">// ===========================================</span>

<span class="x">Route::middleware([&#39;auth&#39;, &#39;log.activity&#39;])-&gt;prefix(&#39;admin&#39;)-&gt;name(&#39;admin.&#39;)-&gt;group(function () {</span>
<span class="x">    // Rutas de gestión de productos</span>
<span class="x">    Route::get(&#39;/products&#39;, [ProductController::class, &#39;adminIndex&#39;])-&gt;name(&#39;products.index&#39;);</span>
<span class="x">    Route::resource(&#39;products&#39;, ProductController::class)-&gt;except([&#39;index&#39;, &#39;show&#39;]);</span>

<span class="x">    // Rutas para la lista de deseos (Wishlist)</span>
<span class="x">    Route::get(&#39;/wishlist&#39;, [WishlistController::class, &#39;index&#39;])-&gt;name(&#39;wishlist.index&#39;);</span>
<span class="x">    Route::post(&#39;/wishlist/{id}&#39;, [WishlistController::class, &#39;store&#39;])-&gt;name(&#39;wishlist.store&#39;);</span>
<span class="x">    Route::delete(&#39;/wishlist/{id}&#39;, [WishlistController::class, &#39;destroy&#39;])-&gt;name(&#39;wishlist.destroy&#39;);</span>
<span class="x">});</span>
</code></pre></div></p>
<p>Middleware Selectivo</p>
<p>Ahora el middleware <code>LogUserActivity</code> solo registrará actividad en las rutas de administración:</p>
<p>Esto reduce el ruido en los logs y se enfoca en las acciones administrativas críticas.</p>
<h3 id="4-ver-los-logs">4. Ver los Logs <a href="#_4-ver-los-logs">​</a><a class="headerlink" href="#4-ver-los-logs" title="Permanent link">&para;</a></h3>
<p>Navega por tu aplicación como usuario autenticado. Luego, revisa el archivo de logs para ver los registros de actividad.
<div class="highlight"><pre><span></span><code>tail<span class="w"> </span>-f<span class="w"> </span>storage/logs/laravel.log
</code></pre></div></p>
<details class="examplelaravel">
<summary>Ejemplo de respuesta</summary>
<div class="highlight"><pre><span></span><code>artur@pc_classe:~/development/laravel/MyShop$<span class="w"> </span>tail<span class="w"> </span>-f<span class="w"> </span>storage/logs/laravel.log
<span class="o">[</span><span class="m">2025</span>-10-19<span class="w"> </span><span class="m">17</span>:08:19<span class="o">]</span><span class="w"> </span>local.INFO:<span class="w"> </span>Actividad<span class="w"> </span>de<span class="w"> </span>usuario<span class="w"> </span><span class="o">{</span><span class="s2">&quot;user_id&quot;</span>:4,<span class="s2">&quot;user_name&quot;</span>:<span class="s2">&quot;Guillermo Garrido Portes&quot;</span>,<span class="s2">&quot;method&quot;</span>:<span class="s2">&quot;GET&quot;</span>,<span class="s2">&quot;url&quot;</span>:<span class="s2">&quot;http://localhost/admin/products&quot;</span>,<span class="s2">&quot;ip&quot;</span>:<span class="s2">&quot;123.45.67.89&quot;</span><span class="o">}</span><span class="w"> </span>
<span class="o">[</span><span class="m">2025</span>-10-19<span class="w"> </span><span class="m">17</span>:08:22<span class="o">]</span><span class="w"> </span>local.INFO:<span class="w"> </span>Actividad<span class="w"> </span>de<span class="w"> </span>usuario<span class="w"> </span><span class="o">{</span><span class="s2">&quot;user_id&quot;</span>:4,<span class="s2">&quot;user_name&quot;</span>:<span class="s2">&quot;Guillermo Garrido Portes&quot;</span>,<span class="s2">&quot;method&quot;</span>:<span class="s2">&quot;GET&quot;</span>,<span class="s2">&quot;url&quot;</span>:<span class="s2">&quot;http://localhost/admin/wishlist&quot;</span>,<span class="s2">&quot;ip&quot;</span>:<span class="s2">&quot;123.45.67.89&quot;</span><span class="o">}</span>
</code></pre></div>
</details>
<p>Captura de pantalla requerida</p>
<p>Realiza una captura de pantalla del <strong>terminal</strong> mostrando:</p>
<ol>
<li>El comando <code>tail -f storage/logs/laravel.log</code> ejecutándose</li>
<li>Al menos una entrada de log con "Actividad de usuario" que incluya ID, nombre, método HTTP, URL e IP</li>
<li>La entrada debe haberse generado después de navegar a una página de administración como usuario autenticado</li>
</ol>
<h2 id="fase-13-probar-la-aplicacion-completa">FASE 13: Probar la Aplicación Completa<a class="headerlink" href="#fase-13-probar-la-aplicacion-completa" title="Permanent link">&para;</a></h2>
<p>Realiza una verificación final de todas las funcionalidades para asegurar que la aplicación es robusta y funciona como se espera.</p>
<h3 id="1-lista-de-verificacion">1. Lista de Verificación<a class="headerlink" href="#1-lista-de-verificacion" title="Permanent link">&para;</a></h3>
<h4 id="autenticacion">Autenticación<a class="headerlink" href="#autenticacion" title="Permanent link">&para;</a></h4>
<ul>
<li>[ ] Registro, Login, Logout funcionan correctamente.</li>
<li>[ ] Rutas <code>/admin/*</code> son inaccesibles para usuarios no autenticados.</li>
</ul>
<h4 id="crud-de-productos-admin">CRUD de Productos (Admin)<a class="headerlink" href="#crud-de-productos-admin" title="Permanent link">&para;</a></h4>
<ul>
<li>[ ] Crear un producto desde <code>/admin/products/create</code>.</li>
<li>[ ] Editar un producto y guardar los cambios.</li>
<li>[ ] Eliminar un producto desde la tabla de administración.</li>
<li>[ ] La validación de formularios funciona correctamente.</li>
<li>[ ] Las notificaciones de éxito aparecen después de cada operación.</li>
</ul>
<h4 id="carrito-de-compras">Carrito de Compras<a class="headerlink" href="#carrito-de-compras" title="Permanent link">&para;</a></h4>
<ul>
<li>[ ] Añadir productos al carrito desde la vista pública.</li>
<li>[ ] Actualizar cantidades y eliminar productos desde el carrito.</li>
<li>[ ] Finalizar compra vacía el carrito y muestra el mensaje de éxito.</li>
</ul>
<h4 id="lista-de-deseos">Lista de Deseos<a class="headerlink" href="#lista-de-deseos" title="Permanent link">&para;</a></h4>
<ul>
<li>[ ] Añadir productos a la lista de deseos desde la vista pública.</li>
<li>[ ] Eliminar productos de la lista de deseos desde la vista de la lista de deseos.</li>
</ul>
<h4 id="middleware-de-actividad">Middleware de Actividad<a class="headerlink" href="#middleware-de-actividad" title="Permanent link">&para;</a></h4>
<ul>
<li>[ ] El middleware registra la actividad de los usuarios autenticados en el log.</li>
<li>[ ] Las entradas de log contienen ID de usuario, nombre, método, URL e IP.</li>
</ul>
<details class="praclaravel">
<summary>Entrega de la práctica</summary>
<h3 id="requisitos-de-entrega">Requisitos de Entrega<a class="headerlink" href="#requisitos-de-entrega" title="Permanent link">&para;</a></h3>
<p>Para completar esta práctica, debes entregar un <strong>PDF</strong> que incluya las siguientes <strong>9 capturas de pantalla numeradas</strong>:</p>
<hr />
<h4 id="captura-1-preparacion-de-layouts-fase-2">Captura 1: Preparación de Layouts (FASE 2)<a class="headerlink" href="#captura-1-preparacion-de-layouts-fase-2" title="Permanent link">&para;</a></h4>
<ul>
<li>Navegador mostrando la página principal funcionando correctamente.</li>
<li>Terminal con el comando <code>ls -l resources/views/layouts/</code> mostrando la existencia de <code>public.blade.php</code>.</li>
</ul>
<hr />
<h4 id="captura-2-instalacion-de-breeze-fase-3">Captura 2: Instalación de Breeze (FASE 3)<a class="headerlink" href="#captura-2-instalacion-de-breeze-fase-3" title="Permanent link">&para;</a></h4>
<ul>
<li>Navegador mostrando las páginas de <strong>registro</strong> (<code>/register</code>) y <strong>login</strong> (<code>/login</code>).</li>
<li>Terminal mostrando el resultado de <code>sail artisan route:list | grep -E "(login|register|logout)"</code>.</li>
</ul>
<hr />
<h4 id="captura-3-panel-de-administracion-con-navegacion-fase-8">Captura 3: Panel de Administración con Navegación (FASE 8)<a class="headerlink" href="#captura-3-panel-de-administracion-con-navegacion-fase-8" title="Permanent link">&para;</a></h4>
<ul>
<li>Navegador mostrando el panel de <strong>Gestión de Productos</strong> en <code>/admin/products</code>.</li>
<li>Debe ser visible el <strong>menú de navegación superior</strong> con el enlace "Productos" activo.</li>
<li>Al menos un producto debe estar visible en la tabla (creado en FASE 7).</li>
<li>Usuario autenticado visible en la esquina superior derecha.</li>
</ul>
<hr />
<h4 id="captura-4-flujo-de-creacion-completo-fase-7-y-8">Captura 4: Flujo de Creación Completo (FASE 7 y 8)<a class="headerlink" href="#captura-4-flujo-de-creacion-completo-fase-7-y-8" title="Permanent link">&para;</a></h4>
<ul>
<li>Una imagen compuesta o dos capturas mostrando:</li>
<li>El formulario de "Crear Nuevo Producto" relleno (FASE 7).</li>
<li>La tabla de administración con el <strong>nuevo producto ya creado</strong> y la <strong>notificación de éxito</strong> ("¡Producto creado exitosamente!") visible en la parte superior (FASE 8).</li>
</ul>
<hr />
<h4 id="captura-5-flujo-de-edicion-completo-fase-9">Captura 5: Flujo de Edición Completo (FASE 9)<a class="headerlink" href="#captura-5-flujo-de-edicion-completo-fase-9" title="Permanent link">&para;</a></h4>
<ul>
<li>Una imagen compuesta o dos capturas mostrando:</li>
<li>El formulario de "Editar Producto" con los datos de un producto existente y un campo modificado (ej: el precio).</li>
<li>La tabla de administración con el <strong>producto actualizado</strong> y la <strong>notificación de éxito</strong> visible.</li>
</ul>
<hr />
<h4 id="captura-6-flujo-de-eliminacion-fase-9">Captura 6: Flujo de Eliminación (FASE 9)<a class="headerlink" href="#captura-6-flujo-de-eliminacion-fase-9" title="Permanent link">&para;</a></h4>
<ul>
<li>Una imagen compuesta o dos capturas mostrando:</li>
<li>El cuadro de diálogo de confirmación <code>confirm('¿Estás seguro...?')</code> al hacer clic en "Eliminar".</li>
<li>La tabla de administración sin el producto eliminado y con la <strong>notificación de éxito</strong> visible.</li>
</ul>
<hr />
<h4 id="captura-7-carrito-de-compras-con-sesiones-fase-10">Captura 7: Carrito de Compras con Sesiones (Fase 10)<a class="headerlink" href="#captura-7-carrito-de-compras-con-sesiones-fase-10" title="Permanent link">&para;</a></h4>
<ul>
<li>Captura de pantalla de la página del carrito (/cart) funcionando con la lógica de sesiones.</li>
<li>Debe mostrar al menos dos productos diferentes.</li>
<li>Deben ser visibles las imágenes, cantidades, precios, subtotales y el total final calculado.</li>
</ul>
<hr />
<h4 id="captura-8-lista-de-deseos-fase-11">Captura 8: Lista de deseos (Fase 11)<a class="headerlink" href="#captura-8-lista-de-deseos-fase-11" title="Permanent link">&para;</a></h4>
<ul>
<li>Captura de la página <code>/admin/wishlist</code> con al menos 2 productos guardados</li>
<li>Debe mostrar productos con información completa (imagen, nombre, precio, oferta si aplica)</li>
<li>Botones "Añadir al Carrito" y botón "❌" para eliminar visibles</li>
<li>Usuario autenticado (navegación superior debe mostrar el nombre del usuario)</li>
<li>URL <code>/admin/wishlist</code> visible en el navegador</li>
</ul>
<hr />
<h4 id="captura-9-middleware-de-registro-de-actividad-fase-12">Captura 9: Middleware de Registro de Actividad (FASE 12)<a class="headerlink" href="#captura-9-middleware-de-registro-de-actividad-fase-12" title="Permanent link">&para;</a></h4>
<ul>
<li>Terminal ejecutando <code>tail -f storage/logs/laravel.log</code>.</li>
<li>El log debe mostrar al menos una entrada de "Actividad de usuario" después de haber navegado a una página de administración como usuario autenticado.</li>
</ul>
<hr />
<h3 id="instrucciones-de-entrega">📤 Instrucciones de Entrega<a class="headerlink" href="#instrucciones-de-entrega" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>Formato</strong>: Entregar un único archivo PDF con todas las capturas</li>
<li><strong>Organización</strong>: Incluir un título para cada captura explicando qué muestra</li>
<li><strong>Calidad</strong>: Las capturas deben ser claras y legibles</li>
<li><strong>Numeración</strong>: Las capturas deben estar numeradas del 1 al 9 según el orden especificado</li>
<li><strong>Funcionalidad</strong>: Todas las rutas deben funcionar correctamente</li>
<li><strong>Terminal</strong>: Las capturas que requieran terminal deben mostrar el prompt <code>usuario@equipo:~/ruta/proyecto$</code> visible</li>
<li><strong>Autenticación</strong>: Las capturas de áreas protegidas deben mostrar el nombre del usuario autenticado en la navegación</li>
<li><strong>Datos reales</strong>: Utilizar datos reales de tu base de datos, no capturas de ejemplo</li>
</ol>
</details>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Volver al principio
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Pie" >
        
          
          <a href="../407/" class="md-footer__link md-footer__link--prev" aria-label="Anterior: 4.7. Sistema de almacenamiento de archivos">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M9.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L77.3 256l137.3-137.4c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Anterior
              </span>
              <div class="md-ellipsis">
                4.7. Sistema de almacenamiento de archivos
              </div>
            </div>
          </a>
        
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Arturo Blasco - Creative Commons CC BY-NC-SA
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/arturoblasco" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["content.code.copy", "content.code.select", "content.code.annotate", "navigation.footer", "navigation.top"], "search": "../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copiado al portapapeles", "clipboard.copy": "Copiar al portapapeles", "search.result.more.one": "1 m\u00e1s en esta p\u00e1gina", "search.result.more.other": "# m\u00e1s en esta p\u00e1gina", "search.result.none": "No se encontraron documentos", "search.result.one": "1 documento encontrado", "search.result.other": "# documentos encontrados", "search.result.placeholder": "Teclee para comenzar b\u00fasqueda", "search.result.term.missing": "Falta", "select.version": "Seleccionar versi\u00f3n"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.92b07e13.min.js"></script>
      
        <script src="https://unpkg.com/mermaid@10.9.1/dist/mermaid.min.js"></script>
      
    
  </body>
</html>