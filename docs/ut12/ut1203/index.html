
<!doctype html>
<html lang="es" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      
      
      <link rel="icon" href="../../img/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.18">
    
    
      
        <title>Ut1203 - Desarrollo Web en Entorno Servidor (DWES)</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.7e37652d.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="amber" data-md-color-accent="amber">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#1-fundamentos-de-la-autenticacion-basada-en-tokens" class="md-skip">
          Saltar a contenido
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Cabecera">
    <a href="../.." title="Desarrollo Web en Entorno Servidor (DWES)" class="md-header__button md-logo" aria-label="Desarrollo Web en Entorno Servidor (DWES)" data-md-component="logo">
      
  <img src="../../img/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Desarrollo Web en Entorno Servidor (DWES)
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Ut1203
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="amber" data-md-color-accent="amber"  aria-label="Cambia a modo oscuro"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Cambia a modo oscuro" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="amber" data-md-color-accent="amber"  aria-label="Cambia a modo normal"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Cambia a modo normal" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m3.55 19.09 1.41 1.41 1.8-1.79-1.42-1.42M12 6c-3.31 0-6 2.69-6 6s2.69 6 6 6 6-2.69 6-6c0-3.32-2.69-6-6-6m8 7h3v-2h-3m-2.76 7.71 1.8 1.79 1.41-1.41-1.79-1.8M20.45 5l-1.41-1.4-1.8 1.79 1.42 1.42M13 1h-2v3h2M6.76 5.39 4.96 3.6 3.55 5l1.79 1.81zM1 13h3v-2H1m12 9h-2v3h2"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="B煤squeda" placeholder="B煤squeda" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M9.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L77.3 256l137.3-137.4c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Buscar">
        
        <button type="reset" class="md-search__icon md-icon" title="Limpiar" aria-label="Limpiar" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Inicializando b煤squeda
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navegaci贸n" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Desarrollo Web en Entorno Servidor (DWES)" class="md-nav__button md-logo" aria-label="Desarrollo Web en Entorno Servidor (DWES)" data-md-component="logo">
      
  <img src="../../img/logo.png" alt="logo">

    </a>
    Desarrollo Web en Entorno Servidor (DWES)
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../contents/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Contenidos
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
     PHP
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
             PHP
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1" >
        
          
          <label class="md-nav__link" for="__nav_3_1" id="__nav_3_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    UT 1 Arquitectura Web
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1">
            <span class="md-nav__icon md-icon"></span>
            UT 1 Arquitectura Web
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut01/ut0101/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    1.1. Introducci贸n
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut01/ut0102/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    1.2. Arquitecturas web
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut01/ut0103/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    1.3. Generar p谩ginas web
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut01/ut0104/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    1.4. Modelos de programaci贸n
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut01/ut0105/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    1.5. Decisiones de dise帽o
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut01/ut0106/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    1.6. Ejecuci贸n del c贸digo
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut01/ut0107/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    1.7. Herramientas
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut01/ut0108/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    1.8. Tecnolog铆as
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut01/ut0109/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    1.9. Navegadores
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut01/ut0110/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    1.10. Puesta en marcha
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut01/ut01de/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Descargas
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut01/ut01ac/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Ejercicios
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" >
        
          
          <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    UT 2 Lenguaje PHP
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            UT 2 Lenguaje PHP
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut02/ut0201/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2.1. Introducci贸n
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut02/ut0202/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2.2. PHP
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut02/ut0203/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2.3. Operadores
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut02/ut0204/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2.4. Arrays
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut02/ut0205/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2.5. Funciones
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut02/ut0206/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2.6. Funciones predefinidas
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut02/ut0207/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2.7. Expresiones regulares
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut02/ut02ac/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Ejercicios
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_3" >
        
          
          <label class="md-nav__link" for="__nav_3_3" id="__nav_3_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    UT 3 PHP OO
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_3">
            <span class="md-nav__icon md-icon"></span>
            UT 3 PHP OO
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut03/ut0301/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3.1. Introducci贸n
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut03/ut0302/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3.2. Clases y objetos
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut03/ut0303/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3.3. Encapsulaci贸n
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut03/ut0304/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3.4. Constructor
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut03/ut0305/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3.5. Clases est谩ticas
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut03/ut0306/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3.6. Introspecci贸n
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut03/ut0307/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3.7. Herencia
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut03/ut0308/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3.8. Clases abstractas
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut03/ut0309/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3.9. Clases final
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut03/ut0310/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3.10. Interfaces
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut03/ut0311/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3.11. M茅todos encadenados
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut03/ut0312/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3.12. M茅todos m谩gicos
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut03/ut0313/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3.13. Espacio de nombres
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut03/ut0314/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3.14. Gesti贸n de errores
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut03/ut0315/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3.15. Excepciones
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut03/ut0316/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3.16. SPL
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut03/ut03ac/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Ejercicios
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_4" >
        
          
          <label class="md-nav__link" for="__nav_3_4" id="__nav_3_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    UT 4 Programaci贸n web
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_4">
            <span class="md-nav__icon md-icon"></span>
            UT 4 Programaci贸n web
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut04/ut0401/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    4.1. Introducci贸n
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut04/ut0402/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    4.2. Variable de servidor
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut04/ut0403/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    4.3. Formularios
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut04/ut0404/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    4.4.Cabeceras de respuesta
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut04/ut0405/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    4.5. Gesti贸n de estado
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut04/ut0406/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    4.6. Autenticaci贸n de usuarios
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut04/ut04ac/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    4. Ejercicios
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_5" >
        
          
          <label class="md-nav__link" for="__nav_3_5" id="__nav_3_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    UT 5 Acceso a Base de Datos
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_5">
            <span class="md-nav__icon md-icon"></span>
            UT 5 Acceso a Base de Datos
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut05/ut0501/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    5.1. Introducci贸n
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut05/ut0502/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    5.2. Instalaci贸n
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut05/ut0503/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    5.3. Estructura de BD
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut05/ut0504/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    5.4. SQL
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut05/ut0505/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    5.5. phpMyAdmin
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut05/ut0506/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    5.6. MySQLi
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut05/ut0507/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    5.7. Php Data Object
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut05/ut0508/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    5.8. Login & Password
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut05/ut0509/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    5.9. Acceso a ficheros
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut05/ut05ac/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Ejercicios
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
     Laravel
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
             Laravel
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_1" >
        
          
          <label class="md-nav__link" for="__nav_4_1" id="__nav_4_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    UPL 1 ED profesional
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_1">
            <span class="md-nav__icon md-icon"></span>
            UPL 1 ED profesional
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../upl1/100/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    1.0. Introducci贸n
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../upl1/101/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    1.1. Introducci贸n a Laravel12
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../upl1/102/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    1.2. 驴C贸mo Habla una Aplicaci贸n Laravel?
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../upl1/103/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    1.3. 驴D贸nde Vive y Corre Nuestra Aplicaci贸n?
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../upl1/104/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    1.4. Herramientas Esenciales para el Desarrollador
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../upl1/105/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    1.5. El Frontend Moderno: Vite y Tailwind CSS
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../upl1/106/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    1.6. Anatom铆a de una Aplicaci贸n Laravel
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../upl1/10p/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Pr谩ctica guiada
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2" >
        
          
          <label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    UPL 2 Fundamentos
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            UPL 2 Fundamentos
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../upl2/200/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2.0. Introducci贸n
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../upl2/201/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2.1 Viaje Interno de una Petici贸n
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../upl2/202/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2.2. Mapa de la aplicaci贸n
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../upl2/203/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2.3. Vistas din谩micas
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../upl2/204/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2.4. Layouts y herencia en Blade
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../upl2/205/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2.5. Del controlador a la vista
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../upl2/206/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2.6. Datos mock
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../upl2/20p/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Pr谩ctica guiada
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3" >
        
          
          <label class="md-nav__link" for="__nav_4_3" id="__nav_4_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    UPL 3 Gesti贸n de datos
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3">
            <span class="md-nav__icon md-icon"></span>
            UPL 3 Gesti贸n de datos
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../upl3/300/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3.0. Introducci贸n
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../upl3/301/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3.1. Migraciones y Estructura
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../upl3/302/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3.2. Eloquent ORM
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../upl3/303/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3.3. CRUD con Eloquent
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../upl3/304/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3.4. Relaciones Eloquent
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../upl3/305/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3.5. Seeders y Factories
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../upl3/30p/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Pr谩ctica guiada
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_4" >
        
          
          <label class="md-nav__link" for="__nav_4_4" id="__nav_4_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    UPL 4 Interacci贸n con el usuario
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_4">
            <span class="md-nav__icon md-icon"></span>
            UPL 4 Interacci贸n con el usuario
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../upl4/400/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    4.0. Introducci贸n
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../upl4/401/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    4.1. Formularios seguros
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../upl4/402/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    4.2. Sistema de validaci贸n
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../upl4/403/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    4.3. Manejo de sesiones y estado
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../upl4/404/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    4.4. Autenticaci贸n b谩sica
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../upl4/405/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    4.5. Middleware personalizado
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../upl4/406/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    4.6. Blade Components para Layouts
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../upl4/407/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    4.7. Sistema de almacenamiento de archivos
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../upl4/40p/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Pr谩ctica guiada
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_5" >
        
          
          <label class="md-nav__link" for="__nav_4_5" id="__nav_4_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Pruebas
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_5">
            <span class="md-nav__icon md-icon"></span>
            Pruebas
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../pru/pru02/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2. Controladores y Rutas
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../pru/pru03/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3. Desarrollo de un CRUD
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../pru/pru04/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    4. Validaciones, Rutas Resource y Mensajes del Sistema
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../pru/pru05/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    5. Creaci贸n de APIs REST en Laravel
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../pru/pru06/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    6. Autenticaci贸n B谩sica
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../pru/pru07/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    7. Sistema de almacenamiento de archivos
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_5_7" >
        
          
          <label class="md-nav__link" for="__nav_4_5_7" id="__nav_4_5_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Despliegue
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_5_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_5_7">
            <span class="md-nav__icon md-icon"></span>
            Despliegue
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../pru/pru08a/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Introducci贸n al despliegue de aplicaciones web
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../pru/pru08b/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Aplicaci贸n simple con estructura precaria php
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../pru/pru08c/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Aplicaci贸n completa con estructura de laravel
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../pru/pru08d/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Despliegue en PaaS Render
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../pru/examen2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Examen 2 Laravel
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Tabla de contenidos">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Tabla de contenidos
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-fundamentos-de-la-autenticacion-basada-en-tokens" class="md-nav__link">
    <span class="md-ellipsis">
      1. Fundamentos de la autenticaci贸n basada en tokens
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-alternativas-para-la-implementacion-de-la-autenticacion-basada-en-tokens" class="md-nav__link">
    <span class="md-ellipsis">
      2. Alternativas para la implementaci贸n de la autenticaci贸n basada en tokens
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. Alternativas para la implementaci贸n de la autenticaci贸n basada en tokens">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21-preparando-el-ejemplo-base" class="md-nav__link">
    <span class="md-ellipsis">
      2.1. Preparando el ejemplo base
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-autenticacion-basada-en-tokens-nativa" class="md-nav__link">
    <span class="md-ellipsis">
      3. Autenticaci贸n basada en tokens nativa
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3. Autenticaci贸n basada en tokens nativa">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31-configuracion-basica" class="md-nav__link">
    <span class="md-ellipsis">
      3.1. Configuraci贸n b谩sica
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32-proteccion-de-rutas" class="md-nav__link">
    <span class="md-ellipsis">
      3.2. Protecci贸n de rutas
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-autenticacion-basada-en-tokens-usando-laravel-sanctum" class="md-nav__link">
    <span class="md-ellipsis">
      4. Autenticaci贸n basada en tokens usando Laravel Sanctum
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4. Autenticaci贸n basada en tokens usando Laravel Sanctum">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#41-configuracion-de-sanctum" class="md-nav__link">
    <span class="md-ellipsis">
      4.1. Configuraci贸n de Sanctum
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#42-proteccion-de-rutas" class="md-nav__link">
    <span class="md-ellipsis">
      4.2. Protecci贸n de rutas
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-prueba-de-autenticacion-basada-en-tokens" class="md-nav__link">
    <span class="md-ellipsis">
      5. Prueba de autenticaci贸n basada en tokens
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



  <h1>Ut1203</h1>

<p>En una API REST tambi茅n puede ser necesario proteger ciertos servicios, de forma que s贸lo puedan acceder a ellos los usuarios autenticados. Sin embargo, en este caso no tenemos disponible el mecanismo de autenticaci贸n basado en sesiones que vimos antes, ya que la parte cliente que consulta la API REST no tiene por qu茅 estar basada en un navegador. Podr铆amos acceder desde una aplicaci贸n de escritorio hecha en Java, por ejemplo, o desde una aplicaci贸n m贸vil, y en estos casos no podr铆amos disponer de las sesiones, propias de clientes web o navegadores. En su lugar, emplearemos un mecanismo de autenticaci贸n basado en <strong>tokens</strong>.</p>
<h2 id="1-fundamentos-de-la-autenticacion-basada-en-tokens">1. Fundamentos de la autenticaci贸n basada en tokens<a class="headerlink" href="#1-fundamentos-de-la-autenticacion-basada-en-tokens" title="Permanent link">&para;</a></h2>
<p>La autenticaci贸n basada en tokens es un mecanismo de validaci贸n de usuarios en aplicaciones cliente-servidor que podr铆amos decir que es m谩s universal que la autenticaci贸n basada en sesiones, ya que permite autenticar usuarios provenientes de distintos tipos de clientes. Lo que se hace es lo siguiente:</p>
<ul>
<li>El usuario necesita enviar sus credenciales (<em>login</em> y <em>password</em>), de forma similar a como se hace en una aplicaci贸n web normal, aunque esta vez los datos se env铆an normalmente en formato JSON.</li>
<li>El servidor valida esas credenciales y, si son correctas, genera una cadena de texto llamada <em>token</em>, de una cierta longitud, y que servir谩 para identificar un铆vocamente al usuario a partir de ese momento. Dicho <em>token</em> debe ser enviado de vuelta (tambi茅n en formato JSON) al cliente que se valid贸</li>
<li>A partir de este punto, el cliente debe adjuntar el <em>token</em> como parte de la informaci贸n en cada petici贸n que realiza a una zona de acceso restringido, de forma que el servidor pueda consultar el token y comprobar si corresponde con el de alg煤n usuario autorizado. Este token normalmente se env铆a en una cabecera de la petici贸n llamada <em>Authorization</em>, como veremos despu茅s, y el servidor puede consultar el valor de dicha cabecera para verificar el acceso del cliente.</li>
</ul>
<h2 id="2-alternativas-para-la-implementacion-de-la-autenticacion-basada-en-tokens">2. Alternativas para la implementaci贸n de la autenticaci贸n basada en tokens<a class="headerlink" href="#2-alternativas-para-la-implementacion-de-la-autenticacion-basada-en-tokens" title="Permanent link">&para;</a></h2>
<p>Podemos emplear distintas alternativas para la autenticaci贸n basada en tokens bajo Laravel. Comentaremos en esta sesi贸n dos de ellas.</p>
<ul>
<li>Por un lado, podemos emplear el mecanismo nativo de Laravel para autenticaci贸n basada en tokens. Como ventajas principales, no se necesita instalar ninguna dependencia adicional, y es relativamente sencillo de utilizar. Como inconvenientes, requiere a帽adir un campo m谩s a la tabla de usuarios, para almacenar el token generado para cada usuario, y requiere tambi茅n de una gesti贸n manual del token, aunque es sencilla.</li>
<li>Por otro lado podemos valernos de la librer铆a <a href="https://laravel.com/docs/8.x/sanctum" target="_blank">Laravel Sanctum</a>, que proporciona mecanismos de autenticaci贸n para APIs y para SPAs (<em>Single Page Applications</em>, aplicaciones de p谩gina 煤nica). Entre sus ventajas podemos destacar que es sencilla de integrar en la aplicaci贸n y automatiza algunos aspectos de la gesti贸n de tokens, adem谩s de contar con el soporte oficial de Laravel. Como inconvenientes, es una librer铆a m谩s intrusiva que la anterior, ya que requiere crear una tabla adicional donde almacenar los tokens.</li>
</ul>
<p>En los siguientes apartados veremos c贸mo proteger mediante tokens un proyecto sencillo en Laravel empleando cada uno de estos mecanismos. Como ejercicio de este apartado se pide que elij谩is cualquiera de ellos y sig谩is paso a paso el ejemplo para configurar la protecci贸n mediante tokens en 茅l.</p>
<h3 id="21-preparando-el-ejemplo-base">2.1. Preparando el ejemplo base<a class="headerlink" href="#21-preparando-el-ejemplo-base" title="Permanent link">&para;</a></h3>
<p>Partiremos de un mismo proyecto base, que luego adaptaremos en funci贸n del mecanismo de autenticaci贸n elegido. Comenzaremos creando un proyecto llamado <code>pruebaToken</code>, en nuestra carpeta de proyectos:</p>
<div class="highlight"><pre><span></span><code><span class="x">laravel new pruebaToken</span>
</code></pre></div>
<p>Despu茅s, eliminaremos las migraciones que no vamos a utilizar de la carpeta <code>database/migrations</code>: en concreto, eliminaremos los archivos sobre <em>create_password_resets_table</em> y <em>create_failed_jobs_table</em>, y dejaremos el resto. Sobre la migraci贸n de usuarios, editaremos los m茅todos <code>up</code> y <code>down</code> para dejar s贸lo los campos que nos interesen, y renombrar la tabla a <em>usuarios</em>, de este modo:</p>
<div class="highlight"><pre><span></span><code>public<span class="w"> </span><span class="k">function</span><span class="w"> </span>up<span class="o">()</span>
<span class="o">{</span>
<span class="w">    </span>Schema::create<span class="o">(</span><span class="s1">&#39;usuarios&#39;</span>,<span class="w"> </span><span class="k">function</span><span class="w"> </span><span class="o">(</span>Blueprint<span class="w"> </span><span class="nv">$table</span><span class="o">)</span><span class="w"> </span><span class="o">{</span>
<span class="w">        </span><span class="nv">$table</span>-&gt;id<span class="o">()</span><span class="p">;</span>
<span class="w">        </span><span class="nv">$table</span>-&gt;string<span class="o">(</span><span class="s1">&#39;login&#39;</span><span class="o">)</span>-&gt;unique<span class="p">;</span>
<span class="w">        </span><span class="nv">$table</span>-&gt;string<span class="o">(</span><span class="s1">&#39;password&#39;</span><span class="o">)</span><span class="p">;</span>
<span class="w">        </span><span class="nv">$table</span>-&gt;timestamps<span class="o">()</span><span class="p">;</span>
<span class="w">    </span><span class="o">})</span><span class="p">;</span>
<span class="o">}</span>
...
public<span class="w"> </span><span class="k">function</span><span class="w"> </span>down<span class="o">()</span>
<span class="o">{</span>
<span class="w">    </span>Schema::dropIfExists<span class="o">(</span><span class="s1">&#39;usuarios&#39;</span><span class="o">)</span><span class="p">;</span>
<span class="o">}</span>
</code></pre></div>
<p>A continuaci贸n, renombramos el modelo <code>App\Models\User.php</code> a <code>App\Models\Usuario.php</code>, cambiando tambi茅n el nombre de la clase interior:</p>
<div class="highlight"><pre><span></span><code>class<span class="w"> </span>Usuario<span class="w"> </span>extends<span class="w"> </span>Authenticatable
<span class="o">{</span>
<span class="w">    </span>...
</code></pre></div>
<p>Y hacemos lo mismo con el <em>factory</em> y el <em>seeder</em> correspondiente (modificamos directamente el <code>DatabaseSeeder</code> para no crear un <em>seeder</em> espec铆fico, en este caso):</p>
<div class="highlight"><pre><span></span><code>namespace<span class="w"> </span>Database<span class="se">\F</span>actories<span class="p">;</span>

use<span class="w"> </span>Illuminate<span class="se">\D</span>atabase<span class="se">\E</span>loquent<span class="se">\F</span>actories<span class="se">\F</span>actory<span class="p">;</span>

/**
<span class="w"> </span>*<span class="w"> </span>@extends<span class="w"> </span><span class="se">\I</span>lluminate<span class="se">\D</span>atabase<span class="se">\E</span>loquent<span class="se">\F</span>actories<span class="se">\F</span>actory&lt;<span class="se">\A</span>pp<span class="se">\M</span>odels<span class="se">\U</span>suario&gt;
<span class="w"> </span>*/<span class="w"> </span>
class<span class="w"> </span>UsuarioFactory<span class="w"> </span>extends<span class="w"> </span>Factory
<span class="o">{</span>
<span class="w">    </span>/**
<span class="w">     </span>*<span class="w"> </span>Define<span class="w"> </span>the<span class="w"> </span>model<span class="s1">&#39;s default state.</span>
<span class="s1">     *</span>
<span class="s1">     * @return array</span>
<span class="s1">     */</span>
<span class="s1">    public function definition()</span>
<span class="s1">    {</span>
<span class="s1">        return [</span>
<span class="s1">            &#39;</span>login<span class="s1">&#39; =&gt; $this-&gt;faker-&gt;word,</span>
<span class="s1">            &#39;</span>password<span class="s1">&#39; =&gt; bcrypt(&#39;</span><span class="m">1234</span><span class="s1">&#39;)</span>
<span class="s1">        ];</span>
<span class="s1">    }</span>
<span class="s1">}</span>
<span class="s1">class DatabaseSeeder extends Seeder</span>
<span class="s1">{</span>
<span class="s1">    /**</span>
<span class="s1">     * Seed the application&#39;</span>s<span class="w"> </span>database.
<span class="w">     </span>*
<span class="w">     </span>*<span class="w"> </span>@return<span class="w"> </span>void
<span class="w">     </span>*/
<span class="w">    </span>public<span class="w"> </span><span class="k">function</span><span class="w"> </span>run<span class="o">()</span>
<span class="w">    </span><span class="o">{</span>
<span class="w">         </span><span class="se">\A</span>pp<span class="se">\M</span>odels<span class="se">\U</span>suario::factory<span class="o">(</span><span class="m">2</span><span class="o">)</span>-&gt;create<span class="o">()</span><span class="p">;</span>
<span class="w">    </span><span class="o">}</span>
<span class="o">}</span>
</code></pre></div>
<p>Vamos a modificar tambi茅n el archivo <code>.env</code> del proyecto para acceder a una base de datos llamada <code>pruebaToken</code>, que deberemos crear a trav茅s de <em>phpMyAdmin</em>:</p>
<div class="highlight"><pre><span></span><code><span class="nv">DB_CONNECTION</span><span class="o">=</span>mysql
<span class="nv">DB_HOST</span><span class="o">=</span><span class="m">127</span>.0.0.1
<span class="nv">DB_PORT</span><span class="o">=</span><span class="m">3306</span>
<span class="nv">DB_DATABASE</span><span class="o">=</span>pruebaToken
<span class="nv">DB_USERNAME</span><span class="o">=</span>root
<span class="nv">DB_PASSWORD</span><span class="o">=</span>
</code></pre></div>
<p>Necesitamos tambi茅n editar el archivo <code>App\Http\Middleware\Authenticate.php</code> para indicar en el m茅todo <code>redirectTo</code> que s贸lo queremos redirigir al formulario de login cuando la petici贸n no espere una respuesta en formato JSON. En caso contrario, no hay que mostrar dicho formulario, sino enviar una respuesta JSON adecuada. De hecho, si la aplicaci贸n s贸lo va a tener servicios REST podr铆amos eliminar o dejar comentado el c贸digo de este m茅todo para que no trate de redirigir a ning煤n formulario.</p>
<div class="highlight"><pre><span></span><code>class<span class="w"> </span>Authenticate<span class="w"> </span>extends<span class="w"> </span>Middleware
<span class="o">{</span>
<span class="w">    </span>protected<span class="w"> </span><span class="k">function</span><span class="w"> </span>redirectTo<span class="o">(</span><span class="nv">$request</span><span class="o">)</span>
<span class="w">    </span><span class="o">{</span>
<span class="w">        </span>/*
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="o">(</span>!<span class="w"> </span><span class="nv">$request</span>-&gt;expectsJson<span class="o">())</span><span class="w"> </span><span class="o">{</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span>route<span class="o">(</span><span class="s1">&#39;login&#39;</span><span class="o">)</span><span class="p">;</span>
<span class="w">        </span><span class="o">}</span>
<span class="w">        </span>*/
<span class="w">    </span><span class="o">}</span>
<span class="o">}</span>
</code></pre></div>
<p>Por otra parte, debemos editar el archivo <code>App\Exceptions\Handler.php</code>, en concreto su m茅todo <code>register</code> para definir los diferentes errores que pueden producirse y los mensajes que hay que devolver en cada caso:</p>
<div class="highlight"><pre><span></span><code>use<span class="w"> </span>Illuminate<span class="se">\A</span>uth<span class="se">\A</span>uthenticationException<span class="p">;</span>
use<span class="w"> </span>Illuminate<span class="se">\F</span>oundation<span class="se">\E</span>xceptions<span class="se">\H</span>andler<span class="w"> </span>as<span class="w"> </span>ExceptionHandler<span class="p">;</span>
use<span class="w"> </span>Illuminate<span class="se">\D</span>atabase<span class="se">\E</span>loquent<span class="se">\M</span>odelNotFoundException<span class="p">;</span>
use<span class="w"> </span>Illuminate<span class="se">\V</span>alidation<span class="se">\V</span>alidationException<span class="p">;</span>
use<span class="w"> </span>Throwable<span class="p">;</span>

class<span class="w"> </span>Handler<span class="w"> </span>extends<span class="w"> </span>ExceptionHandler
<span class="o">{</span>
<span class="w">    </span>...
<span class="w">    </span>public<span class="w"> </span><span class="k">function</span><span class="w"> </span>register<span class="o">()</span>
<span class="w">    </span><span class="o">{</span>
<span class="w">        </span><span class="nv">$this</span>-&gt;renderable<span class="o">(</span><span class="k">function</span><span class="w"> </span><span class="o">(</span>Throwable<span class="w"> </span><span class="nv">$exception</span><span class="o">)</span><span class="w"> </span><span class="o">{</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="o">(</span>request<span class="o">()</span>-&gt;is<span class="o">(</span><span class="s1">&#39;api*&#39;</span><span class="o">))</span>
<span class="w">            </span><span class="o">{</span>
<span class="w">                </span><span class="k">if</span><span class="w"> </span><span class="o">(</span><span class="nv">$exception</span><span class="w"> </span>instanceof<span class="w"> </span>ModelNotFoundException<span class="o">)</span>
<span class="w">                    </span><span class="k">return</span><span class="w"> </span>response<span class="o">()</span>-&gt;json<span class="o">(</span>
<span class="w">                        </span><span class="o">[</span><span class="s1">&#39;error&#39;</span><span class="w"> </span><span class="o">=</span>&gt;<span class="w"> </span><span class="s1">&#39;Elemento no encontrado&#39;</span><span class="o">]</span>,<span class="w"> </span><span class="m">404</span><span class="o">)</span><span class="p">;</span>
<span class="w">                </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="o">(</span><span class="nv">$exception</span><span class="w"> </span>instanceof<span class="w"> </span>AuthenticationException<span class="o">)</span>
<span class="w">                    </span><span class="k">return</span><span class="w"> </span>response<span class="o">()</span>-&gt;json<span class="o">(</span>
<span class="w">                        </span><span class="o">[</span><span class="s1">&#39;error&#39;</span><span class="w"> </span><span class="o">=</span>&gt;<span class="w"> </span><span class="s1">&#39;Usuario no autenticado&#39;</span><span class="o">]</span>,<span class="w"> </span><span class="m">401</span><span class="o">)</span><span class="p">;</span>
<span class="w">                </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="o">(</span><span class="nv">$exception</span><span class="w"> </span>instanceof<span class="w"> </span>ValidationException<span class="o">)</span>
<span class="w">                    </span><span class="k">return</span><span class="w"> </span>response<span class="o">()</span>-&gt;json<span class="o">(</span>
<span class="w">                        </span><span class="o">[</span><span class="s1">&#39;error&#39;</span><span class="w"> </span><span class="o">=</span>&gt;<span class="w"> </span><span class="s1">&#39;Datos no v谩lidos&#39;</span><span class="o">]</span>,<span class="w"> </span><span class="m">400</span><span class="o">)</span><span class="p">;</span>
<span class="w">                </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="o">(</span>isset<span class="o">(</span><span class="nv">$exception</span><span class="o">))</span>
<span class="w">                    </span><span class="k">return</span><span class="w"> </span>response<span class="o">()</span>-&gt;json<span class="o">(</span>
<span class="w">                        </span><span class="o">[</span><span class="s1">&#39;error&#39;</span><span class="w"> </span><span class="o">=</span>&gt;<span class="w"> </span><span class="s1">&#39;Error en la aplicaci贸n (&#39;</span><span class="w"> </span>.
<span class="w">                        </span>get_class<span class="o">(</span><span class="nv">$exception</span><span class="o">)</span><span class="w"> </span>.<span class="w"> </span><span class="s1">&#39;):&#39;</span><span class="w"> </span>.<span class="w"> </span>
<span class="w">                        </span><span class="nv">$exception</span>-&gt;getMessage<span class="o">()]</span>,<span class="w"> </span><span class="m">500</span><span class="o">)</span><span class="p">;</span>
<span class="w">            </span><span class="o">}</span>
<span class="w">        </span><span class="o">})</span><span class="p">;</span>
<span class="w">    </span><span class="o">}</span>
<span class="o">}</span>
</code></pre></div>
<p>Finalmente, vamos a definir un controlador de API con una serie de m茅todos de prueba. No lo vamos a vincular a ning煤n modelo, porque generaremos unos datos a mano en cada m茅todo para simplificar el c贸digo. Escribimos este comando:</p>
<div class="highlight"><pre><span></span><code>php<span class="w"> </span>artisan<span class="w"> </span>make:controller<span class="w"> </span>Api/PruebaController<span class="w"> </span>--api
</code></pre></div>
<p>Rellenamos el c贸digo de los m茅todos del controlador con alguna respuesta sencilla para cada caso:</p>
<div class="highlight"><pre><span></span><code>class<span class="w"> </span>PruebaController<span class="w"> </span>extends<span class="w"> </span>Controller
<span class="o">{</span>
<span class="w">    </span>public<span class="w"> </span><span class="k">function</span><span class="w"> </span>index<span class="o">()</span>
<span class="w">    </span><span class="o">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span>response<span class="o">()</span>-&gt;json<span class="o">([</span><span class="s1">&#39;mensaje&#39;</span><span class="w"> </span><span class="o">=</span>&gt;<span class="w"> </span><span class="s1">&#39;Accediendo a index&#39;</span><span class="o">])</span><span class="p">;</span>
<span class="w">    </span><span class="o">}</span>

<span class="w">    </span>public<span class="w"> </span><span class="k">function</span><span class="w"> </span>store<span class="o">(</span>Request<span class="w"> </span><span class="nv">$request</span><span class="o">)</span>
<span class="w">    </span><span class="o">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span>response<span class="o">()</span>-&gt;json<span class="o">([</span><span class="s1">&#39;mensaje&#39;</span><span class="w"> </span><span class="o">=</span>&gt;<span class="w"> </span><span class="s1">&#39;Insertando&#39;</span><span class="o">]</span>,<span class="w"> </span><span class="m">201</span><span class="o">)</span><span class="p">;</span>
<span class="w">    </span><span class="o">}</span>

<span class="w">    </span>public<span class="w"> </span><span class="k">function</span><span class="w"> </span>show<span class="o">(</span><span class="nv">$id</span><span class="o">)</span>
<span class="w">    </span><span class="o">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span>response<span class="o">()</span>-&gt;json<span class="o">([</span><span class="s1">&#39;mensaje&#39;</span><span class="w"> </span><span class="o">=</span>&gt;<span class="w"> </span><span class="s1">&#39;Ficha de &#39;</span><span class="w"> </span>.<span class="w"> </span><span class="nv">$id</span><span class="o">])</span><span class="p">;</span>
<span class="w">    </span><span class="o">}</span>

<span class="w">    </span>public<span class="w"> </span><span class="k">function</span><span class="w"> </span>update<span class="o">(</span>Request<span class="w"> </span><span class="nv">$request</span>,<span class="w"> </span><span class="nv">$id</span><span class="o">)</span>
<span class="w">    </span><span class="o">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span>response<span class="o">()</span>-&gt;json<span class="o">([</span><span class="s1">&#39;mensaje&#39;</span><span class="w"> </span><span class="o">=</span>&gt;<span class="w"> </span><span class="s1">&#39;Actualizando elemento&#39;</span><span class="o">])</span><span class="p">;</span>
<span class="w">    </span><span class="o">}</span>

<span class="w">    </span>public<span class="w"> </span><span class="k">function</span><span class="w"> </span>destroy<span class="o">(</span><span class="nv">$id</span><span class="o">)</span>
<span class="w">    </span><span class="o">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span>response<span class="o">()</span>-&gt;json<span class="o">([</span><span class="s1">&#39;mensaje&#39;</span><span class="w"> </span><span class="o">=</span>&gt;<span class="w"> </span><span class="s1">&#39;Borrando elemento&#39;</span><span class="o">])</span><span class="p">;</span>
<span class="w">    </span><span class="o">}</span>
<span class="o">}</span>
</code></pre></div>
<p>Y a帽adimos las rutas correspondientes en el archivo <code>routes/api.php</code>:</p>
<div class="highlight"><pre><span></span><code>Route::apiResource<span class="o">(</span><span class="s1">&#39;prueba&#39;</span>,<span class="w"> </span>PruebaController::class<span class="o">)</span><span class="p">;</span>
</code></pre></div>
<p>A partir de este punto, vamos a proteger el acceso a alguno de estos m茅todos. Escoge uno de los siguientes apartados (3 o 4) para definir el mecanismo de autenticaci贸n basado en tokens correspondiente. Tambi茅n puedes intentar hacerlos todos; en este caso, copia y pega otra vez el proyecto Laravel, para trabajar por separado en cada carpeta con un mecanismo diferente.</p>
<h2 id="3-autenticacion-basada-en-tokens-nativa">3. Autenticaci贸n basada en tokens nativa<a class="headerlink" href="#3-autenticacion-basada-en-tokens-nativa" title="Permanent link">&para;</a></h2>
<p>Vamos a emplear en esta secci贸n la autenticaci贸n nativa por tokens que ofrece Laravel. Los pasos a seguir los indicamos a continuaci贸n.</p>
<h3 id="31-configuracion-basica">3.1. Configuraci贸n b谩sica<a class="headerlink" href="#31-configuracion-basica" title="Permanent link">&para;</a></h3>
<p>En primer lugar, modificamos la migraci贸n de la tabla de usuarios para a帽adir un nuevo campo donde almacenar el token. Dicho campo basta con que tenga 60 caracteres de longitud, y ser谩 necesario tambi茅n que sea 煤nico para cada usuario:</p>
<div class="highlight"><pre><span></span><code>public<span class="w"> </span><span class="k">function</span><span class="w"> </span>up<span class="o">()</span>
<span class="o">{</span>
<span class="w">    </span>Schema::create<span class="o">(</span><span class="s1">&#39;usuarios&#39;</span>,<span class="w"> </span><span class="k">function</span><span class="w"> </span><span class="o">(</span>Blueprint<span class="w"> </span><span class="nv">$table</span><span class="o">)</span><span class="w"> </span><span class="o">{</span>
<span class="w">        </span><span class="nv">$table</span>-&gt;id<span class="o">()</span><span class="p">;</span>
<span class="w">        </span><span class="nv">$table</span>-&gt;string<span class="o">(</span><span class="s1">&#39;login&#39;</span><span class="o">)</span>-&gt;unique<span class="p">;</span>
<span class="w">        </span><span class="nv">$table</span>-&gt;string<span class="o">(</span><span class="s1">&#39;password&#39;</span><span class="o">)</span><span class="p">;</span>
<span class="w">        </span><span class="nv">$table</span>-&gt;string<span class="o">(</span><span class="s1">&#39;api_token&#39;</span>,<span class="w"> </span><span class="m">60</span><span class="o">)</span>-&gt;unique<span class="o">()</span>-&gt;nullable<span class="o">()</span><span class="p">;</span>
<span class="w">        </span><span class="nv">$table</span>-&gt;timestamps<span class="o">()</span><span class="p">;</span>
<span class="w">    </span><span class="o">})</span><span class="p">;</span>
<span class="o">}</span>
</code></pre></div>
<p>Podemos lanzar ya la migraci贸n para que se cree la tabla y se rellene con los usuarios que hayamos indicado en el <em>seeder</em>.</p>
<div class="highlight"><pre><span></span><code>php<span class="w"> </span>artisan<span class="w"> </span>migrate:fresh<span class="w"> </span>--seed
</code></pre></div>
<p>Tambi茅n debemos modificar el archivo <code>config/auth.php</code> para indicar cu谩l es el modelo de usuarios que vamos a utilizar:</p>
<div class="highlight"><pre><span></span><code><span class="s1">&#39;providers&#39;</span><span class="w"> </span><span class="o">=</span>&gt;<span class="w"> </span><span class="o">[</span>
<span class="w">    </span><span class="s1">&#39;users&#39;</span><span class="w"> </span><span class="o">=</span>&gt;<span class="w"> </span><span class="o">[</span>
<span class="w">        </span><span class="s1">&#39;driver&#39;</span><span class="w"> </span><span class="o">=</span>&gt;<span class="w"> </span><span class="s1">&#39;eloquent&#39;</span>,
<span class="w">        </span><span class="s1">&#39;model&#39;</span><span class="w"> </span><span class="o">=</span>&gt;<span class="w"> </span>App<span class="se">\M</span>odels<span class="se">\U</span>suario::class,
<span class="w">    </span><span class="o">]</span>,
</code></pre></div>
<p>En este mismo fichero, tambi茅n podemos modificar el <em>guard</em> por defecto, que es <em>web</em>, para que sea <em>api</em>, si nuestra aplicaci贸n no va a tener autenticaci贸n web:</p>
<div class="highlight"><pre><span></span><code><span class="s1">&#39;defaults&#39;</span><span class="w"> </span><span class="o">=</span>&gt;<span class="w"> </span><span class="o">[</span>
<span class="w">    </span><span class="s1">&#39;guard&#39;</span><span class="w"> </span><span class="o">=</span>&gt;<span class="w"> </span><span class="s1">&#39;api&#39;</span>,
<span class="w">    </span>...
<span class="o">]</span>,
</code></pre></div>
<p>En la secci贸n de <code>guards</code>, a帽adimos el nuevo <em>guard</em> <code>api</code>, si no est谩 ya definido:</p>
<div class="highlight"><pre><span></span><code><span class="s1">&#39;guards&#39;</span><span class="w"> </span><span class="o">=</span>&gt;<span class="w"> </span><span class="o">[</span>
<span class="w">    </span><span class="s1">&#39;web&#39;</span><span class="w"> </span><span class="o">=</span>&gt;<span class="w"> </span><span class="o">[</span>
<span class="w">        </span>...<span class="w"> </span>
<span class="w">    </span><span class="o">]</span>,
<span class="w">    </span><span class="s1">&#39;api&#39;</span><span class="w"> </span><span class="o">=</span>&gt;<span class="w"> </span><span class="o">[</span>
<span class="w">        </span><span class="s1">&#39;driver&#39;</span><span class="w"> </span><span class="o">=</span>&gt;<span class="w"> </span><span class="s1">&#39;token&#39;</span>,
<span class="w">        </span><span class="s1">&#39;provider&#39;</span><span class="w"> </span><span class="o">=</span>&gt;<span class="w"> </span><span class="s1">&#39;users&#39;</span>
<span class="w">    </span><span class="o">]</span>
<span class="o">]</span>
</code></pre></div>
<h3 id="32-proteccion-de-rutas">3.2. Protecci贸n de rutas<a class="headerlink" href="#32-proteccion-de-rutas" title="Permanent link">&para;</a></h3>
<p>Para proteger las rutas de acceso restringido, primero crearemos un controlador que se encargue de validar las credenciales del usuario:</p>
<div class="highlight"><pre><span></span><code><span class="x">php artisan make:controller Api/LoginController</span>
</code></pre></div>
<p>Definimos un m茅todo <code>login</code>, por ejemplo, que validar谩 las credenciales que le lleguen (login y password). Si son correctas, generar谩 una cadena de texto aleatoria de 60 caracteres y la almacenar谩 en el campo <code>api_token</code> del usuario validado. Tambi茅n devolver谩 dicho token como respuesta en formato JSON. En caso de que haya un error en la autenticaci贸n, enviar谩 de vuelta un mensaje de error, con el c贸digo 401 de acceso no autorizado.</p>
<div class="highlight"><pre><span></span><code>use<span class="w"> </span>App<span class="se">\H</span>ttp<span class="se">\C</span>ontrollers<span class="se">\C</span>ontroller<span class="p">;</span>
use<span class="w"> </span>Illuminate<span class="se">\H</span>ttp<span class="se">\R</span>equest<span class="p">;</span>
use<span class="w"> </span>Illuminate<span class="se">\S</span>upport<span class="se">\S</span>tr<span class="p">;</span>
use<span class="w"> </span>Illuminate<span class="se">\S</span>upport<span class="se">\F</span>acades<span class="se">\H</span>ash<span class="p">;</span>
use<span class="w"> </span>App<span class="se">\M</span>odels<span class="se">\U</span>suario<span class="p">;</span>

class<span class="w"> </span>LoginController<span class="w"> </span>extends<span class="w"> </span>Controller
<span class="o">{</span>
<span class="w">    </span>public<span class="w"> </span><span class="k">function</span><span class="w"> </span>login<span class="o">(</span>Request<span class="w"> </span><span class="nv">$request</span><span class="o">)</span>
<span class="w">    </span><span class="o">{</span>
<span class="w">        </span><span class="nv">$usuario</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>Usuario::where<span class="o">(</span><span class="s1">&#39;login&#39;</span>,<span class="w"> </span><span class="nv">$request</span>-&gt;login<span class="o">)</span>-&gt;first<span class="o">()</span><span class="p">;</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="o">(</span>!<span class="nv">$usuario</span><span class="w"> </span><span class="o">||</span><span class="w"> </span>
<span class="w">            </span>!Hash::check<span class="o">(</span><span class="nv">$request</span>-&gt;password,<span class="w"> </span><span class="nv">$usuario</span>-&gt;password<span class="o">))</span>
<span class="w">        </span><span class="o">{</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span>response<span class="o">()</span>-&gt;json<span class="o">(</span>
<span class="w">                </span><span class="o">[</span><span class="s1">&#39;error&#39;</span><span class="w"> </span><span class="o">=</span>&gt;<span class="w"> </span><span class="s1">&#39;Credenciales no v谩lidas&#39;</span><span class="o">]</span>,<span class="w"> </span><span class="m">401</span><span class="o">)</span><span class="p">;</span>
<span class="w">        </span><span class="o">}</span>
<span class="w">        </span><span class="k">else</span>
<span class="w">        </span><span class="o">{</span>
<span class="w">            </span><span class="nv">$usuario</span>-&gt;api_token<span class="w"> </span><span class="o">=</span><span class="w"> </span>Str::random<span class="o">(</span><span class="m">60</span><span class="o">)</span><span class="p">;</span>
<span class="w">            </span><span class="nv">$usuario</span>-&gt;save<span class="o">()</span><span class="p">;</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span>response<span class="o">()</span>-&gt;json<span class="o">([</span><span class="s1">&#39;token&#39;</span><span class="w"> </span><span class="o">=</span>&gt;<span class="w"> </span><span class="nv">$usuario</span>-&gt;api_token<span class="o">])</span><span class="p">;</span>
<span class="w">        </span><span class="o">}</span>
<span class="w">    </span><span class="o">}</span>
<span class="o">}</span>
</code></pre></div>
<p>Definimos en el archivo <code>routes/api.php</code> una ruta que redirija a este m茅todo, para cuando el usuario quiera autenticarse (recuerda a帽adir con <code>use</code> la correspondiente clase):</p>
<div class="highlight"><pre><span></span><code>Route::post<span class="o">(</span><span class="s1">&#39;login&#39;</span>,<span class="w"> </span><span class="o">[</span>LoginController::class,<span class="w"> </span><span class="s1">&#39;login&#39;</span><span class="o">])</span><span class="p">;</span>
</code></pre></div>
<p>Tambi茅n podemos eliminar en este caso la ruta predefinida de este archivo:</p>
<div class="highlight"><pre><span></span><code>//<span class="w"> </span>Eliminar<span class="w"> </span>esta<span class="w"> </span>ruta:
Route::middleware<span class="o">(</span><span class="s1">&#39;auth:sanctum&#39;</span><span class="o">)</span>-&gt;get<span class="o">(</span><span class="s1">&#39;/user&#39;</span>,<span class="w"> </span><span class="k">function</span><span class="w"> </span><span class="o">(</span>Request<span class="w"> </span><span class="nv">$request</span><span class="o">)</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nv">$request</span>-&gt;user<span class="o">()</span><span class="p">;</span>
<span class="o">})</span><span class="p">;</span>
</code></pre></div>
<p>Para proteger las rutas que necesitemos en los controladores API, las especificamos en el constructor del controlador. Por ejemplo, as铆 proteger铆amos todas las rutas de nuestro controlador <code>PruebaController</code>, salvo <code>index</code> y <code>show</code>:</p>
<div class="highlight"><pre><span></span><code>class<span class="w"> </span>PruebaController<span class="w"> </span>extends<span class="w"> </span>Controller
<span class="o">{</span>
<span class="w">    </span>public<span class="w"> </span><span class="k">function</span><span class="w"> </span>__construct<span class="o">()</span>
<span class="w">    </span><span class="o">{</span>
<span class="w">        </span><span class="nv">$this</span>-&gt;middleware<span class="o">(</span><span class="s1">&#39;auth:api&#39;</span>,
<span class="w">            </span><span class="o">[</span><span class="s1">&#39;except&#39;</span><span class="w"> </span><span class="o">=</span>&gt;<span class="w"> </span><span class="o">[</span><span class="s1">&#39;index&#39;</span>,<span class="w"> </span><span class="s1">&#39;show&#39;</span><span class="o">]])</span><span class="p">;</span>
<span class="w">    </span><span class="o">}</span>
<span class="w">    </span>...
</code></pre></div>
<p>Alternativamente, tambi茅n podemos emplear el modificador <code>only</code> en lugar de <code>except</code> para indicar las rutas concretas que queremos proteger.</p>
<p>Con esto ya tenemos el mecanismo de autenticaci贸n por token establecido, y las rutas protegidas. Echa un vistazo al <a href="https://nachoiborraies.github.io/laravel/md/es/07b#5-prueba-de-autenticaci贸n-basada-en-tokens">apartado 5</a> para ver c贸mo probarlo todo desde <em>Thunder Client</em> o Postman.</p>
<h2 id="4-autenticacion-basada-en-tokens-usando-laravel-sanctum">4. Autenticaci贸n basada en tokens usando Laravel Sanctum<a class="headerlink" href="#4-autenticacion-basada-en-tokens-usando-laravel-sanctum" title="Permanent link">&para;</a></h2>
<p>Como hemos comentado anteriormente, Laravel Sanctum es una librer铆a que proporciona mecanismos de autenticaci贸n para SPAs (<em>Single Page Applications</em>, aplicaciones de p谩gina 煤nica), y APIs. En nuestro caso, la emplearemos para autenticarnos mediante tokens en nuestras APIs. Los pasos a seguir para la configuraci贸n son los siguientes</p>
<h3 id="41-configuracion-de-sanctum">4.1. Configuraci贸n de Sanctum<a class="headerlink" href="#41-configuracion-de-sanctum" title="Permanent link">&para;</a></h3>
<p>En primer lugar, debemos incorporar Laravel Sanctum a nuestro proyecto. <strong>En las 煤ltimas versiones de Laravel aparece incorporado por defecto</strong> (lo podemos comprobar en el archivo <code>composer.json</code>, en la secci贸n de <em>require</em>). Si no es as铆, podemos instalarlo escribiendo este comando desde la ra铆z del proyecto:</p>
<div class="highlight"><pre><span></span><code><span class="x">composer require laravel/sanctum</span>
</code></pre></div>
<p>Si nos diera alg煤n problema de incompatibilidad con la versi贸n de proyecto que tengamos, podemos probar a ejecutar <code>composer require laravel/sanctum:*</code> para solucionarlo, e instalar la 煤ltima versi贸n compatible.</p>
<p>Despu茅s, debemos publicar la configuraci贸n de Sanctum y su fichero de migraci贸n, que generar谩 una tabla adicional donde almacenar los tokens. Escribimos el siguiente comando (todo en una l铆nea, aunque aqu铆 se divide en dos para poderlo ver completo):</p>
<div class="highlight"><pre><span></span><code>php<span class="w"> </span>artisan<span class="w"> </span>vendor:publish<span class="w"> </span>
--provider<span class="o">=</span><span class="s2">&quot;Laravel\Sanctum\SanctumServiceProvider&quot;</span>
</code></pre></div>
<p>Al finalizar este paso, tendremos la migraci贸n creada y un archivo de configuraci贸n <code>config/sanctum.php</code> disponible, para editar la configuraci贸n por defecto de la librer铆a. Por ejemplo, podemos editarlo para especificar el tiempo de vida (TTL) de los tokens. El siguiente ejemplo establece un tiempo de vida de 5 minutos, por ejemplo, aunque en el caso de aplicaciones basadas en tokens es habitual dejar tiempos mucho mayores (o indefinidos, seg煤n el caso, dejando esta propiedad a <code>null</code>):</p>
<div class="highlight"><pre><span></span><code><span class="s1">&#39;expiration&#39;</span><span class="w"> </span><span class="o">=</span>&gt;<span class="w"> </span><span class="m">5</span>,
</code></pre></div>
<p>Despu茅s, debemos lanzar la migraci贸n que se ha creado, junto con las que tengamos pendientes (la de la tabla de usuarios, por ejemplo). Se a帽adir谩 una tabla llamada <em>personal_access_tokens</em> a nuestra base de datos.</p>
<div class="highlight"><pre><span></span><code>php<span class="w"> </span>artisan<span class="w"> </span>migrate:fresh<span class="w"> </span>--seed
</code></pre></div>
<p>Finalmente, debemos verificar que el modelo de usuarios (<code>App\Models\Usuario</code>) incluya el <em>trait</em> <code>HasApiTokens</code>. De este modo se vincula el modelo de usuario con los tokens que se vayan a generar para los mismos.</p>
<div class="highlight"><pre><span></span><code>...
use<span class="w"> </span>Laravel<span class="se">\S</span>anctum<span class="se">\H</span>asApiTokens<span class="p">;</span>

class<span class="w"> </span>Usuario<span class="w"> </span>extends<span class="w"> </span>Authenticatable
<span class="o">{</span>
<span class="w">    </span>use<span class="w"> </span>HasApiTokens,<span class="w"> </span>HasFactory,<span class="w"> </span>Notifiable<span class="p">;</span>
<span class="w">    </span>...
</code></pre></div>
<h3 id="42-proteccion-de-rutas">4.2. Protecci贸n de rutas<a class="headerlink" href="#42-proteccion-de-rutas" title="Permanent link">&para;</a></h3>
<p>Para proteger las rutas de acceso restringido, primero crearemos un controlador que se encargue de validar las credenciales del usuario:</p>
<div class="highlight"><pre><span></span><code>php<span class="w"> </span>artisan<span class="w"> </span>make:controller<span class="w"> </span>Api/LoginController
</code></pre></div>
<p>Definimos un m茅todo <code>login</code>, por ejemplo, que validar谩 las credenciales que le lleguen (login y password). Si son correctas, llamar谩 al m茅todo <code>createToken</code> de Sanctum (incorporado al usuario a trav茅s del <em>trait</em> <code>HasApiTokens</code>), asoci谩ndolo al login del usuario entrante, y le devolver谩 el token en formato texto plano, como un objeto JSON. En caso de que haya un error en la autenticaci贸n, enviar谩 de vuelta un mensaje de error, con el c贸digo 401 de acceso no autorizado.</p>
<div class="highlight"><pre><span></span><code>use<span class="w"> </span>App<span class="se">\H</span>ttp<span class="se">\C</span>ontrollers<span class="se">\C</span>ontroller<span class="p">;</span>
use<span class="w"> </span>Illuminate<span class="se">\H</span>ttp<span class="se">\R</span>equest<span class="p">;</span>
use<span class="w"> </span>Illuminate<span class="se">\S</span>upport<span class="se">\F</span>acades<span class="se">\H</span>ash<span class="p">;</span>
use<span class="w"> </span>App<span class="se">\M</span>odels<span class="se">\U</span>suario<span class="p">;</span>

class<span class="w"> </span>LoginController<span class="w"> </span>extends<span class="w"> </span>Controller
<span class="o">{</span>
<span class="w">    </span>public<span class="w"> </span><span class="k">function</span><span class="w"> </span>login<span class="o">(</span>Request<span class="w"> </span><span class="nv">$request</span><span class="o">)</span>
<span class="w">    </span><span class="o">{</span>
<span class="w">        </span><span class="nv">$usuario</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>Usuario::where<span class="o">(</span><span class="s1">&#39;login&#39;</span>,<span class="w"> </span><span class="nv">$request</span>-&gt;login<span class="o">)</span>-&gt;first<span class="o">()</span><span class="p">;</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="o">(</span>!<span class="nv">$usuario</span><span class="w"> </span><span class="o">||</span><span class="w"> </span>
<span class="w">            </span>!Hash::check<span class="o">(</span><span class="nv">$request</span>-&gt;password,<span class="w"> </span><span class="nv">$usuario</span>-&gt;password<span class="o">))</span>
<span class="w">        </span><span class="o">{</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span>response<span class="o">()</span>-&gt;json<span class="o">(</span>
<span class="w">                </span><span class="o">[</span><span class="s1">&#39;error&#39;</span><span class="w"> </span><span class="o">=</span>&gt;<span class="w"> </span><span class="s1">&#39;Credenciales no v谩lidas&#39;</span><span class="o">]</span>,<span class="w"> </span><span class="m">401</span><span class="o">)</span><span class="p">;</span>
<span class="w">        </span><span class="o">}</span>
<span class="w">        </span><span class="k">else</span>
<span class="w">        </span><span class="o">{</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span>response<span class="o">()</span>-&gt;json<span class="o">([</span><span class="s1">&#39;token&#39;</span><span class="w"> </span><span class="o">=</span>&gt;
<span class="w">                </span><span class="nv">$usuario</span>-&gt;createToken<span class="o">(</span><span class="nv">$usuario</span>-&gt;login<span class="o">)</span>-&gt;plainTextToken<span class="o">])</span><span class="p">;</span>
<span class="w">        </span><span class="o">}</span>
<span class="w">    </span><span class="o">}</span>
<span class="o">}</span>
</code></pre></div>
<p>Definimos en el archivo <code>routes/api.php</code> una ruta que redirija a este m茅todo, para cuando el usuario quiera autenticarse (recuerda a帽adir con <code>use</code> la correspondiente clase):</p>
<div class="highlight"><pre><span></span><code>Route::post<span class="o">(</span><span class="s1">&#39;login&#39;</span>,<span class="w"> </span><span class="o">[</span>LoginController::class,<span class="w"> </span><span class="s1">&#39;login&#39;</span><span class="o">])</span><span class="p">;</span>
</code></pre></div>
<p>Tambi茅n podemos eliminar en este caso la ruta predefinida de este archivo:</p>
<div class="highlight"><pre><span></span><code>//<span class="w"> </span>Eliminar<span class="w"> </span>esta<span class="w"> </span>ruta:
Route::middleware<span class="o">(</span><span class="s1">&#39;auth:sanctum&#39;</span><span class="o">)</span>-&gt;get<span class="o">(</span><span class="s1">&#39;/user&#39;</span>,<span class="w"> </span><span class="k">function</span><span class="w"> </span><span class="o">(</span>Request<span class="w"> </span><span class="nv">$request</span><span class="o">)</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nv">$request</span>-&gt;user<span class="o">()</span><span class="p">;</span>
<span class="o">})</span><span class="p">;</span>
</code></pre></div>
<p>Para proteger las rutas que necesitemos en los controladores API, las especificamos en el constructor del controlador. Por ejemplo, as铆 proteger铆amos todas las rutas de nuestro controlador <code>PruebaController</code>, salvo <code>index</code> y <code>show</code>:</p>
<div class="highlight"><pre><span></span><code>class<span class="w"> </span>PruebaController<span class="w"> </span>extends<span class="w"> </span>Controller
<span class="o">{</span>
<span class="w">    </span>public<span class="w"> </span><span class="k">function</span><span class="w"> </span>__construct<span class="o">()</span>
<span class="w">    </span><span class="o">{</span>
<span class="w">        </span><span class="nv">$this</span>-&gt;middleware<span class="o">(</span><span class="s1">&#39;auth:sanctum&#39;</span>,
<span class="w">            </span><span class="o">[</span><span class="s1">&#39;except&#39;</span><span class="w"> </span><span class="o">=</span>&gt;<span class="w"> </span><span class="o">[</span><span class="s1">&#39;index&#39;</span>,<span class="w"> </span><span class="s1">&#39;show&#39;</span><span class="o">]])</span><span class="p">;</span>
<span class="w">    </span><span class="o">}</span>
<span class="w">    </span>...
</code></pre></div>
<div class="admonition note">
<p class="admonition-title"> </p>
<p>Oserva c贸mo se invoca al middleware <code>auth:sanctum</code>, que es un mecanismo de autenticaci贸n por defecto incorporado en Laravel. Esto hace que no tengamos que tocar la configuraci贸n de <code>config/auth.php</code> para nada en este caso. Al usar <em>Sanctum</em> ya se sabe en qu茅 tabla est谩n los <em>tokens</em> almacenados, y vinculados a qu茅 <em>login</em>.</p>
</div>
<p>Alternativamente, tambi茅n podemos emplear el modificador <code>only</code> en lugar de <code>except</code> para indicar las rutas concretas que queremos proteger.</p>
<p>En el caso de Sanctum, cada vez que validemos un usuario a trav茅s de la ruta de <em>login</em>, se guardar谩 su <em>token</em> (encriptado) en la tabla <em>personal_access_tokens</em> de nuestra base de datos MySQL. Podemos comprobarlo con <em>phpMyAdmin</em>.</p>
<p>Echa ahora un vistazo al <a href="https://nachoiborraies.github.io/laravel/md/es/07b#5-prueba-de-autenticaci贸n-basada-en-tokens">apartado 5</a> para ver c贸mo probarlo todo desde <em>Thunder Client</em> o Postman.</p>
<h2 id="5-prueba-de-autenticacion-basada-en-tokens">5. Prueba de autenticaci贸n basada en tokens<a class="headerlink" href="#5-prueba-de-autenticacion-basada-en-tokens" title="Permanent link">&para;</a></h2>
<p>Veamos ahora c贸mo probar la autenticaci贸n basada en tokens desde una herramienta como <em>ThunderClient</em>, para lo que veremos c贸mo obtener y enviar el token de acceso desde esta herramienta. Lo primero que deberemos hacer es una petici贸n POST para loguearnos. Recibiremos como respuesta el <em>token</em> que se haya generado:</p>
<div style="text-align: center;"><figure><img src="../../img/ut12/peticion_token01.png" alt="peticion_token01" style="zoom:90%; border: 2px solid #fff2c9;" /><figcaption style="font-size: 13px; color: #bd8f04;">Prueba de autenticaci贸n basada en tokens (con Thunder Client)</figcaption></figure></div>

<div class="admonition note">
<p class="admonition-title"> </p>
<p>En el ejemplo que hemos estado haciendo, los campos a enviar ser铆an <em>login</em> y <em>password</em>. Echa un vistazo a <em>phpMyAdmin</em> para ver qu茅 <em>logins</em> se han generado, y el password, siguiendo el ejemplo, deber铆a ser 1234.</p>
</div>
<p>Ahora, s贸lo nos queda adjuntar este token en la cabecera <em>Authorization</em> de las peticiones que lo necesiten. Para ello, vamos a la secci贸n <em>Authorization</em> bajo la URL de la petici贸n, y elegimos que queremos enviar un <em>Bearer token</em>. En el cuadro inferior nos dejar谩 copiar dicho token:</p>
<div style="text-align: center;"><figure><img src="../../img/ut12/peticion_token02.png" alt="peticion_token02" style="zoom:90%; border: 2px solid #fff2c9;" /><figcaption style="font-size: 13px; color: #bd8f04;">Pasar Bearer token desde Auth-Bearer (con Thunder Client)</figcaption></figure></div>

<details class="ies">
<summary>Ejercicios a realizar</summary>
<ul>
<li><code>Ejercicio 3</code>.<br /></li>
</ul>
</details>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Volver al principio
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Arturo Blasco - Creative Commons CC BY-NC-SA
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/arturoblasco" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["content.code.copy", "content.code.select", "content.code.annotate", "navigation.footer", "navigation.top"], "search": "../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copiado al portapapeles", "clipboard.copy": "Copiar al portapapeles", "search.result.more.one": "1 m\u00e1s en esta p\u00e1gina", "search.result.more.other": "# m\u00e1s en esta p\u00e1gina", "search.result.none": "No se encontraron documentos", "search.result.one": "1 documento encontrado", "search.result.other": "# documentos encontrados", "search.result.placeholder": "Teclee para comenzar b\u00fasqueda", "search.result.term.missing": "Falta", "select.version": "Seleccionar versi\u00f3n"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.92b07e13.min.js"></script>
      
        <script src="https://unpkg.com/mermaid@10.9.1/dist/mermaid.min.js"></script>
      
    
  </body>
</html>