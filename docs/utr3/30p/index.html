
<!doctype html>
<html lang="es" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../305/">
      
      
      
      <link rel="icon" href="../../img/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.18">
    
    
      
        <title>UD.3 Pr√°ctica Guiada: Persistencia de Datos con Laravel - Desarrollo Web en Entorno Servidor (DWES)</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.7e37652d.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="amber" data-md-color-accent="amber">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#ud3-practica-guiada-persistencia-de-datos-con-laravel" class="md-skip">
          Saltar a contenido
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Cabecera">
    <a href="../.." title="Desarrollo Web en Entorno Servidor (DWES)" class="md-header__button md-logo" aria-label="Desarrollo Web en Entorno Servidor (DWES)" data-md-component="logo">
      
  <img src="../../img/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Desarrollo Web en Entorno Servidor (DWES)
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              UD.3 Pr√°ctica Guiada: Persistencia de Datos con Laravel
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="amber" data-md-color-accent="amber"  aria-label="Cambia a modo oscuro"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Cambia a modo oscuro" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="amber" data-md-color-accent="amber"  aria-label="Cambia a modo normal"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Cambia a modo normal" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m3.55 19.09 1.41 1.41 1.8-1.79-1.42-1.42M12 6c-3.31 0-6 2.69-6 6s2.69 6 6 6 6-2.69 6-6c0-3.32-2.69-6-6-6m8 7h3v-2h-3m-2.76 7.71 1.8 1.79 1.41-1.41-1.79-1.8M20.45 5l-1.41-1.4-1.8 1.79 1.42 1.42M13 1h-2v3h2M6.76 5.39 4.96 3.6 3.55 5l1.79 1.81zM1 13h3v-2H1m12 9h-2v3h2"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="B√∫squeda" placeholder="B√∫squeda" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M9.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L77.3 256l137.3-137.4c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Buscar">
        
        <button type="reset" class="md-search__icon md-icon" title="Limpiar" aria-label="Limpiar" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Inicializando b√∫squeda
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navegaci√≥n" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Desarrollo Web en Entorno Servidor (DWES)" class="md-nav__button md-logo" aria-label="Desarrollo Web en Entorno Servidor (DWES)" data-md-component="logo">
      
  <img src="../../img/logo.png" alt="logo">

    </a>
    Desarrollo Web en Entorno Servidor (DWES)
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Inicio
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../contents/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Contenidos
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    PHP
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            PHP
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1" >
        
          
          <label class="md-nav__link" for="__nav_3_1" id="__nav_3_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    UT 1 Arquitectura Web
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1">
            <span class="md-nav__icon md-icon"></span>
            UT 1 Arquitectura Web
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut01/ut0101/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    1.1. Introducci√≥n
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut01/ut0102/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    1.2. Arquitecturas web
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut01/ut0103/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    1.3. Generar p√°ginas web
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut01/ut0104/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    1.4. Modelos de programaci√≥n
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut01/ut0105/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    1.5. Decisiones de dise√±o
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut01/ut0106/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    1.6. Ejecuci√≥n del c√≥digo
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut01/ut0107/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    1.7. Herramientas
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut01/ut0108/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    1.8. Tecnolog√≠as
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut01/ut0109/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    1.9. Navegadores
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut01/ut0110/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    1.10. Puesta en marcha
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut01/ut01de/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Descargas
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut01/ut01ac/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Ejercicios
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" >
        
          
          <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    UT 2 Lenguaje PHP
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            UT 2 Lenguaje PHP
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut02/ut0201/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2.1. Introducci√≥n
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut02/ut0202/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2.2. PHP
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut02/ut0203/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2.3. Operadores
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut02/ut0204/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2.4. Arrays
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut02/ut0205/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2.5. Funciones
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut02/ut0206/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2.6. Funciones predefinidas
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut02/ut0207/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2.7. Expresiones regulares
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut02/ut02ac/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Ejercicios
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_3" >
        
          
          <label class="md-nav__link" for="__nav_3_3" id="__nav_3_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    UT 3 PHP OO
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_3">
            <span class="md-nav__icon md-icon"></span>
            UT 3 PHP OO
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut03/ut0301/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3.1. Introducci√≥n
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut03/ut0302/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3.2. Clases y objetos
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut03/ut0303/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3.3. Encapsulaci√≥n
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut03/ut0304/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3.4. Constructor
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut03/ut0305/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3.5. Clases est√°ticas
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut03/ut0306/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3.6. Introspecci√≥n
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut03/ut0307/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3.7. Herencia
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut03/ut0308/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3.8. Clases abstractas
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut03/ut0309/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3.9. Clases final
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut03/ut0310/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3.10. Interfaces
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut03/ut0311/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3.11. M√©todos encadenados
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut03/ut0312/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3.12. M√©todos m√°gicos
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut03/ut0313/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3.13. Espacio de nombres
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut03/ut0314/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3.14. Gesti√≥n de errores
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut03/ut0315/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3.15. Excepciones
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut03/ut0316/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3.16. SPL
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut03/ut03ac/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Ejercicios
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_4" >
        
          
          <label class="md-nav__link" for="__nav_3_4" id="__nav_3_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    UT 4 Programaci√≥n web
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_4">
            <span class="md-nav__icon md-icon"></span>
            UT 4 Programaci√≥n web
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut04/ut0401/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    4.1. Introducci√≥n
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut04/ut0402/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    4.2. Variable de servidor
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut04/ut0403/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    4.3. Formularios
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut04/ut0404/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    4.4.Cabeceras de respuesta
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut04/ut0405/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    4.5. Gesti√≥n de estado
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut04/ut0406/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    4.6. Autenticaci√≥n de usuarios
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut04/ut04ac/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    4. Ejercicios
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Laravel
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Laravel
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_1" >
        
          
          <label class="md-nav__link" for="__nav_4_1" id="__nav_4_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    UT 7 Framework
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_1">
            <span class="md-nav__icon md-icon"></span>
            UT 7 Framework
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut07/ut0701/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    7.1. Introducci√≥n
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut07/ut0702/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    7.2. Framework
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut07/ut0703/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    7.3. Software necesario
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut07/ut0704/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    7.4. Primeros pasos
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut07/ut0705/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    7.5. Rutas
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut07/ut0706/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    7.6. Vistas con Blade
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut07/ut0707/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    7.7. Estilos y Javascript
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ut07/ut07ac/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Ejercicios propuestos
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2" >
        
          
          <label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    UTR 1
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            UTR 1
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../utr1/100/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    100
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../utr1/101/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    101
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../utr1/102/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    102
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../utr1/103/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    103
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../utr1/104/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    104
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../utr1/105/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    105
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../utr1/106/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    106
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../utr1/10p/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    UD.1 Pr√°ctica Guiada: Configuraci√≥n de un Entorno de Desarrollo Moderno con Docker y Laravel | Introducci√≥n a Laravel
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3" >
        
          
          <label class="md-nav__link" for="__nav_4_3" id="__nav_4_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    UTR 2
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3">
            <span class="md-nav__icon md-icon"></span>
            UTR 2
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../utr2/200/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2.0 Fundamentos
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../utr2/201/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2.1 Viaje Interno de una Petici√≥n
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../utr2/202/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2.2. Mapa de la aplicaci√≥n
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../utr2/203/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2.3. Vistas din√°micas
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../utr2/204/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2.4. Layouts y herencia en Blade
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../utr2/205/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2.5. Del controlador a la vista
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../utr2/206/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2.6. Datos mock
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../utr2/20p/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Pr√°ctica guiada
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4_4" id="__nav_4_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    UTR 3
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4_4">
            <span class="md-nav__icon md-icon"></span>
            UTR 3
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../300/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    300
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../301/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    301
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../302/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2. Eloquent ORM: Hablando con la Base de Datos en tu Idioma
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../303/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3. CRUD con Eloquent: Las Cuatro Operaciones Maestras de los Datos
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../304/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    4. Relaciones Eloquent: Conectando el Universo de tus Datos** üåê
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../305/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    5. Seeders y Factories: Poblando tu Base de Datos con Datos Realistas** üå±
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    UD.3 Pr√°ctica Guiada: Persistencia de Datos con Laravel
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    UD.3 Pr√°ctica Guiada: Persistencia de Datos con Laravel
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Tabla de contenidos">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Tabla de contenidos
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#objetivo" class="md-nav__link">
    <span class="md-ellipsis">
      Objetivo
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Objetivo">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#continuidad-con-la-practica-2" class="md-nav__link">
    <span class="md-ellipsis">
      Continuidad con la Pr√°ctica 2
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#que-vamos-a-hacer" class="md-nav__link">
    <span class="md-ellipsis">
      ¬øQu√© vamos a hacer?
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fase-1-configurar-la-base-de-datos" class="md-nav__link">
    <span class="md-ellipsis">
      FASE 1: Configurar la Base de Datos
    </span>
  </a>
  
    <nav class="md-nav" aria-label="FASE 1: Configurar la Base de Datos">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-verificar-la-configuracion-de-la-base-de-datos" class="md-nav__link">
    <span class="md-ellipsis">
      1. Verificar la Configuraci√≥n de la Base de Datos
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-iniciar-laravel-sail" class="md-nav__link">
    <span class="md-ellipsis">
      2. Iniciar Laravel Sail
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-verificar-la-conexion-a-la-base-de-datos" class="md-nav__link">
    <span class="md-ellipsis">
      3. Verificar la Conexi√≥n a la Base de Datos
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fase-2-crear-las-migraciones" class="md-nav__link">
    <span class="md-ellipsis">
      FASE 2: Crear las Migraciones
    </span>
  </a>
  
    <nav class="md-nav" aria-label="FASE 2: Crear las Migraciones">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-que-son-las-migraciones" class="md-nav__link">
    <span class="md-ellipsis">
      1. ¬øQu√© son las Migraciones?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-crear-la-migracion-de-categorias" class="md-nav__link">
    <span class="md-ellipsis">
      2. Crear la Migraci√≥n de Categor√≠as
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-crear-la-migracion-de-ofertas" class="md-nav__link">
    <span class="md-ellipsis">
      3. Crear la Migraci√≥n de Ofertas
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-crear-la-migracion-de-productos" class="md-nav__link">
    <span class="md-ellipsis">
      4. Crear la Migraci√≥n de Productos
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-crear-la-migracion-de-la-tabla-pivot-product-user" class="md-nav__link">
    <span class="md-ellipsis">
      5. Crear la Migraci√≥n de la Tabla Pivot Product-User
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6-ejecutar-las-migraciones" class="md-nav__link">
    <span class="md-ellipsis">
      6. Ejecutar las Migraciones
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fase-3-crear-los-modelos-eloquent" class="md-nav__link">
    <span class="md-ellipsis">
      FASE 3: Crear los Modelos Eloquent
    </span>
  </a>
  
    <nav class="md-nav" aria-label="FASE 3: Crear los Modelos Eloquent">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-que-son-los-modelos-eloquent" class="md-nav__link">
    <span class="md-ellipsis">
      1. ¬øQu√© son los Modelos Eloquent?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-crear-el-modelo-user" class="md-nav__link">
    <span class="md-ellipsis">
      2. Crear el Modelo User
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-crear-el-modelo-category" class="md-nav__link">
    <span class="md-ellipsis">
      3. Crear el Modelo Category
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-crear-el-modelo-offer" class="md-nav__link">
    <span class="md-ellipsis">
      4. Crear el Modelo Offer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-crear-el-modelo-product" class="md-nav__link">
    <span class="md-ellipsis">
      5. Crear el Modelo Product
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fase-4-crear-los-seeders" class="md-nav__link">
    <span class="md-ellipsis">
      FASE 4: Crear los Seeders
    </span>
  </a>
  
    <nav class="md-nav" aria-label="FASE 4: Crear los Seeders">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-que-son-los-seeders" class="md-nav__link">
    <span class="md-ellipsis">
      1. ¬øQu√© son los Seeders?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-crear-el-seeder-de-usuarios" class="md-nav__link">
    <span class="md-ellipsis">
      2. Crear el Seeder de Usuarios
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. Crear el Seeder de Usuarios">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ejemplo-de-userfactory-ya-incluida-en-laravel" class="md-nav__link">
    <span class="md-ellipsis">
      Ejemplo de UserFactory (ya incluida en Laravel)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-crear-el-seeder-de-categorias" class="md-nav__link">
    <span class="md-ellipsis">
      3. Crear el Seeder de Categor√≠as
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-crear-el-seeder-de-ofertas" class="md-nav__link">
    <span class="md-ellipsis">
      4. Crear el Seeder de Ofertas
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-crear-el-seeder-de-productos" class="md-nav__link">
    <span class="md-ellipsis">
      5. Crear el Seeder de Productos
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6-crear-el-seeder-del-carrito" class="md-nav__link">
    <span class="md-ellipsis">
      6. Crear el Seeder del Carrito
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#7-actualiza-el-seeder-principal" class="md-nav__link">
    <span class="md-ellipsis">
      7. Actualiza el Seeder Principal
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#8-ejecutar-los-seeders" class="md-nav__link">
    <span class="md-ellipsis">
      8. Ejecutar los Seeders
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fase-5-actualizar-los-controladores" class="md-nav__link">
    <span class="md-ellipsis">
      FASE 5: Actualizar los Controladores
    </span>
  </a>
  
    <nav class="md-nav" aria-label="FASE 5: Actualizar los Controladores">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-por-que-actualizar-los-controladores" class="md-nav__link">
    <span class="md-ellipsis">
      1. ¬øPor qu√© Actualizar los Controladores?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-actualizar-productcontroller" class="md-nav__link">
    <span class="md-ellipsis">
      2. Actualizar ProductController
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-actualizar-categorycontroller" class="md-nav__link">
    <span class="md-ellipsis">
      3. Actualizar CategoryController
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-actualizar-offercontroller" class="md-nav__link">
    <span class="md-ellipsis">
      4. Actualizar OfferController ‚Äã
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-actualizar-welcomecontroller" class="md-nav__link">
    <span class="md-ellipsis">
      5. Actualizar WelcomeController ‚Äã
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6-actualizar-cartcontroller" class="md-nav__link">
    <span class="md-ellipsis">
      6. Actualizar CartController ‚Äã
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#7-actualizar-la-ruta-de-contacto" class="md-nav__link">
    <span class="md-ellipsis">
      7. Actualizar la Ruta de Contacto
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#8-limpiar-el-trait-loadsmockdata" class="md-nav__link">
    <span class="md-ellipsis">
      8. Limpiar el Trait LoadsMockData
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fase-6-actualizar-las-vistas" class="md-nav__link">
    <span class="md-ellipsis">
      FASE 6: Actualizar las Vistas
    </span>
  </a>
  
    <nav class="md-nav" aria-label="FASE 6: Actualizar las Vistas">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-por-que-actualizar-las-vistas" class="md-nav__link">
    <span class="md-ellipsis">
      1. ¬øPor qu√© Actualizar las Vistas?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-actualizar-la-vista-del-carrito" class="md-nav__link">
    <span class="md-ellipsis">
      2. Actualizar la Vista del Carrito
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-actualizar-las-clases-php-de-los-componentes" class="md-nav__link">
    <span class="md-ellipsis">
      3. Actualizar las Clases PHP de los Componentes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3. Actualizar las Clases PHP de los Componentes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31-actualizar-la-clase-productcard" class="md-nav__link">
    <span class="md-ellipsis">
      3.1. Actualizar la Clase ProductCard
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32-actualizar-la-clase-categorycard" class="md-nav__link">
    <span class="md-ellipsis">
      3.2. Actualizar la Clase CategoryCard
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-actualizar-las-vistas-blade-de-los-componentes" class="md-nav__link">
    <span class="md-ellipsis">
      4. Actualizar las Vistas Blade de los Componentes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4. Actualizar las Vistas Blade de los Componentes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#41-actualizar-la-vista-del-componente-categorycard" class="md-nav__link">
    <span class="md-ellipsis">
      4.1. Actualizar la Vista del Componente CategoryCard
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#42-actualizar-la-vista-del-componente-productcard" class="md-nav__link">
    <span class="md-ellipsis">
      4.2. Actualizar la Vista del Componente ProductCard
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-actualizar-la-vista-de-detalle-de-producto" class="md-nav__link">
    <span class="md-ellipsis">
      5. Actualizar la Vista de Detalle de Producto
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6-actualizar-la-vista-de-productos-por-categoria" class="md-nav__link">
    <span class="md-ellipsis">
      6. Actualizar la Vista de Productos por Categor√≠a
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#7-actualizar-la-vista-de-lista-de-ofertas" class="md-nav__link">
    <span class="md-ellipsis">
      7. Actualizar la Vista de Lista de Ofertas
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#8-actualizar-la-vista-de-detalle-de-oferta" class="md-nav__link">
    <span class="md-ellipsis">
      8. Actualizar la Vista de Detalle de Oferta
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fase-7-probar-la-aplicacion" class="md-nav__link">
    <span class="md-ellipsis">
      FASE 7: Probar la Aplicaci√≥n
    </span>
  </a>
  
    <nav class="md-nav" aria-label="FASE 7: Probar la Aplicaci√≥n">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-verificar-que-la-base-de-datos-este-poblada" class="md-nav__link">
    <span class="md-ellipsis">
      1. Verificar que la Base de Datos Est√© Poblada
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-probar-las-rutas-en-el-navegador" class="md-nav__link">
    <span class="md-ellipsis">
      2. Probar las Rutas en el Navegador
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fase-8-introduccion-a-operaciones-crud" class="md-nav__link">
    <span class="md-ellipsis">
      FASE 8: Introducci√≥n a Operaciones CRUD
    </span>
  </a>
  
    <nav class="md-nav" aria-label="FASE 8: Introducci√≥n a Operaciones CRUD">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-que-son-las-operaciones-crud" class="md-nav__link">
    <span class="md-ellipsis">
      1. ¬øQu√© son las Operaciones CRUD?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-probar-operaciones-crud-con-tinker" class="md-nav__link">
    <span class="md-ellipsis">
      2. Probar Operaciones CRUD con Tinker
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-eliminacion-en-cascada" class="md-nav__link">
    <span class="md-ellipsis">
      3. Eliminaci√≥n en Cascada
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#entrega-de-la-practica" class="md-nav__link">
    <span class="md-ellipsis">
      üìã ENTREGA DE LA PR√ÅCTICA
    </span>
  </a>
  
    <nav class="md-nav" aria-label="üìã ENTREGA DE LA PR√ÅCTICA">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#requisitos-de-entrega" class="md-nav__link">
    <span class="md-ellipsis">
      Requisitos de Entrega
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Requisitos de Entrega">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#captura-1-migraciones-y-seeders-ejecutados" class="md-nav__link">
    <span class="md-ellipsis">
      Captura 1: Migraciones y Seeders Ejecutados
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#captura-2-verificacion-de-datos-en-tinker" class="md-nav__link">
    <span class="md-ellipsis">
      Captura 2: Verificaci√≥n de Datos en Tinker
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#captura-3-pagina-de-inicio-con-datos-reales" class="md-nav__link">
    <span class="md-ellipsis">
      Captura 3: P√°gina de Inicio con Datos Reales
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#captura-4-lista-de-todos-los-productos" class="md-nav__link">
    <span class="md-ellipsis">
      Captura 4: Lista de Todos los Productos
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#captura-5-productos-en-oferta" class="md-nav__link">
    <span class="md-ellipsis">
      Captura 5: Productos en Oferta
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#captura-6-detalle-de-un-producto" class="md-nav__link">
    <span class="md-ellipsis">
      Captura 6: Detalle de un Producto
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#captura-7-productos-por-categoria" class="md-nav__link">
    <span class="md-ellipsis">
      Captura 7: Productos por Categor√≠a
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#captura-8-lista-de-ofertas" class="md-nav__link">
    <span class="md-ellipsis">
      Captura 8: Lista de Ofertas
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#captura-9-detalle-de-una-oferta" class="md-nav__link">
    <span class="md-ellipsis">
      Captura 9: Detalle de una Oferta
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#captura-10-carrito-de-compras" class="md-nav__link">
    <span class="md-ellipsis">
      Captura 10: Carrito de Compras
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#captura-11-verificacion-de-relaciones-en-tinker" class="md-nav__link">
    <span class="md-ellipsis">
      Captura 11: Verificaci√≥n de Relaciones en Tinker
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#captura-12-verificacion-de-relacion-nm-del-carrito" class="md-nav__link">
    <span class="md-ellipsis">
      Captura 12: Verificaci√≥n de Relaci√≥n N:M del Carrito
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#captura-13-operacion-crud-crear-producto-en-tinker" class="md-nav__link">
    <span class="md-ellipsis">
      Captura 13: Operaci√≥n CRUD - Crear Producto en Tinker
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#instrucciones-de-entrega" class="md-nav__link">
    <span class="md-ellipsis">
      üì§ Instrucciones de Entrega
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Tabla de contenidos">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Tabla de contenidos
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#objetivo" class="md-nav__link">
    <span class="md-ellipsis">
      Objetivo
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Objetivo">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#continuidad-con-la-practica-2" class="md-nav__link">
    <span class="md-ellipsis">
      Continuidad con la Pr√°ctica 2
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#que-vamos-a-hacer" class="md-nav__link">
    <span class="md-ellipsis">
      ¬øQu√© vamos a hacer?
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fase-1-configurar-la-base-de-datos" class="md-nav__link">
    <span class="md-ellipsis">
      FASE 1: Configurar la Base de Datos
    </span>
  </a>
  
    <nav class="md-nav" aria-label="FASE 1: Configurar la Base de Datos">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-verificar-la-configuracion-de-la-base-de-datos" class="md-nav__link">
    <span class="md-ellipsis">
      1. Verificar la Configuraci√≥n de la Base de Datos
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-iniciar-laravel-sail" class="md-nav__link">
    <span class="md-ellipsis">
      2. Iniciar Laravel Sail
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-verificar-la-conexion-a-la-base-de-datos" class="md-nav__link">
    <span class="md-ellipsis">
      3. Verificar la Conexi√≥n a la Base de Datos
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fase-2-crear-las-migraciones" class="md-nav__link">
    <span class="md-ellipsis">
      FASE 2: Crear las Migraciones
    </span>
  </a>
  
    <nav class="md-nav" aria-label="FASE 2: Crear las Migraciones">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-que-son-las-migraciones" class="md-nav__link">
    <span class="md-ellipsis">
      1. ¬øQu√© son las Migraciones?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-crear-la-migracion-de-categorias" class="md-nav__link">
    <span class="md-ellipsis">
      2. Crear la Migraci√≥n de Categor√≠as
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-crear-la-migracion-de-ofertas" class="md-nav__link">
    <span class="md-ellipsis">
      3. Crear la Migraci√≥n de Ofertas
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-crear-la-migracion-de-productos" class="md-nav__link">
    <span class="md-ellipsis">
      4. Crear la Migraci√≥n de Productos
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-crear-la-migracion-de-la-tabla-pivot-product-user" class="md-nav__link">
    <span class="md-ellipsis">
      5. Crear la Migraci√≥n de la Tabla Pivot Product-User
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6-ejecutar-las-migraciones" class="md-nav__link">
    <span class="md-ellipsis">
      6. Ejecutar las Migraciones
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fase-3-crear-los-modelos-eloquent" class="md-nav__link">
    <span class="md-ellipsis">
      FASE 3: Crear los Modelos Eloquent
    </span>
  </a>
  
    <nav class="md-nav" aria-label="FASE 3: Crear los Modelos Eloquent">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-que-son-los-modelos-eloquent" class="md-nav__link">
    <span class="md-ellipsis">
      1. ¬øQu√© son los Modelos Eloquent?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-crear-el-modelo-user" class="md-nav__link">
    <span class="md-ellipsis">
      2. Crear el Modelo User
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-crear-el-modelo-category" class="md-nav__link">
    <span class="md-ellipsis">
      3. Crear el Modelo Category
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-crear-el-modelo-offer" class="md-nav__link">
    <span class="md-ellipsis">
      4. Crear el Modelo Offer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-crear-el-modelo-product" class="md-nav__link">
    <span class="md-ellipsis">
      5. Crear el Modelo Product
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fase-4-crear-los-seeders" class="md-nav__link">
    <span class="md-ellipsis">
      FASE 4: Crear los Seeders
    </span>
  </a>
  
    <nav class="md-nav" aria-label="FASE 4: Crear los Seeders">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-que-son-los-seeders" class="md-nav__link">
    <span class="md-ellipsis">
      1. ¬øQu√© son los Seeders?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-crear-el-seeder-de-usuarios" class="md-nav__link">
    <span class="md-ellipsis">
      2. Crear el Seeder de Usuarios
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. Crear el Seeder de Usuarios">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ejemplo-de-userfactory-ya-incluida-en-laravel" class="md-nav__link">
    <span class="md-ellipsis">
      Ejemplo de UserFactory (ya incluida en Laravel)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-crear-el-seeder-de-categorias" class="md-nav__link">
    <span class="md-ellipsis">
      3. Crear el Seeder de Categor√≠as
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-crear-el-seeder-de-ofertas" class="md-nav__link">
    <span class="md-ellipsis">
      4. Crear el Seeder de Ofertas
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-crear-el-seeder-de-productos" class="md-nav__link">
    <span class="md-ellipsis">
      5. Crear el Seeder de Productos
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6-crear-el-seeder-del-carrito" class="md-nav__link">
    <span class="md-ellipsis">
      6. Crear el Seeder del Carrito
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#7-actualiza-el-seeder-principal" class="md-nav__link">
    <span class="md-ellipsis">
      7. Actualiza el Seeder Principal
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#8-ejecutar-los-seeders" class="md-nav__link">
    <span class="md-ellipsis">
      8. Ejecutar los Seeders
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fase-5-actualizar-los-controladores" class="md-nav__link">
    <span class="md-ellipsis">
      FASE 5: Actualizar los Controladores
    </span>
  </a>
  
    <nav class="md-nav" aria-label="FASE 5: Actualizar los Controladores">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-por-que-actualizar-los-controladores" class="md-nav__link">
    <span class="md-ellipsis">
      1. ¬øPor qu√© Actualizar los Controladores?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-actualizar-productcontroller" class="md-nav__link">
    <span class="md-ellipsis">
      2. Actualizar ProductController
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-actualizar-categorycontroller" class="md-nav__link">
    <span class="md-ellipsis">
      3. Actualizar CategoryController
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-actualizar-offercontroller" class="md-nav__link">
    <span class="md-ellipsis">
      4. Actualizar OfferController ‚Äã
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-actualizar-welcomecontroller" class="md-nav__link">
    <span class="md-ellipsis">
      5. Actualizar WelcomeController ‚Äã
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6-actualizar-cartcontroller" class="md-nav__link">
    <span class="md-ellipsis">
      6. Actualizar CartController ‚Äã
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#7-actualizar-la-ruta-de-contacto" class="md-nav__link">
    <span class="md-ellipsis">
      7. Actualizar la Ruta de Contacto
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#8-limpiar-el-trait-loadsmockdata" class="md-nav__link">
    <span class="md-ellipsis">
      8. Limpiar el Trait LoadsMockData
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fase-6-actualizar-las-vistas" class="md-nav__link">
    <span class="md-ellipsis">
      FASE 6: Actualizar las Vistas
    </span>
  </a>
  
    <nav class="md-nav" aria-label="FASE 6: Actualizar las Vistas">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-por-que-actualizar-las-vistas" class="md-nav__link">
    <span class="md-ellipsis">
      1. ¬øPor qu√© Actualizar las Vistas?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-actualizar-la-vista-del-carrito" class="md-nav__link">
    <span class="md-ellipsis">
      2. Actualizar la Vista del Carrito
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-actualizar-las-clases-php-de-los-componentes" class="md-nav__link">
    <span class="md-ellipsis">
      3. Actualizar las Clases PHP de los Componentes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3. Actualizar las Clases PHP de los Componentes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31-actualizar-la-clase-productcard" class="md-nav__link">
    <span class="md-ellipsis">
      3.1. Actualizar la Clase ProductCard
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32-actualizar-la-clase-categorycard" class="md-nav__link">
    <span class="md-ellipsis">
      3.2. Actualizar la Clase CategoryCard
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-actualizar-las-vistas-blade-de-los-componentes" class="md-nav__link">
    <span class="md-ellipsis">
      4. Actualizar las Vistas Blade de los Componentes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4. Actualizar las Vistas Blade de los Componentes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#41-actualizar-la-vista-del-componente-categorycard" class="md-nav__link">
    <span class="md-ellipsis">
      4.1. Actualizar la Vista del Componente CategoryCard
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#42-actualizar-la-vista-del-componente-productcard" class="md-nav__link">
    <span class="md-ellipsis">
      4.2. Actualizar la Vista del Componente ProductCard
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-actualizar-la-vista-de-detalle-de-producto" class="md-nav__link">
    <span class="md-ellipsis">
      5. Actualizar la Vista de Detalle de Producto
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6-actualizar-la-vista-de-productos-por-categoria" class="md-nav__link">
    <span class="md-ellipsis">
      6. Actualizar la Vista de Productos por Categor√≠a
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#7-actualizar-la-vista-de-lista-de-ofertas" class="md-nav__link">
    <span class="md-ellipsis">
      7. Actualizar la Vista de Lista de Ofertas
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#8-actualizar-la-vista-de-detalle-de-oferta" class="md-nav__link">
    <span class="md-ellipsis">
      8. Actualizar la Vista de Detalle de Oferta
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fase-7-probar-la-aplicacion" class="md-nav__link">
    <span class="md-ellipsis">
      FASE 7: Probar la Aplicaci√≥n
    </span>
  </a>
  
    <nav class="md-nav" aria-label="FASE 7: Probar la Aplicaci√≥n">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-verificar-que-la-base-de-datos-este-poblada" class="md-nav__link">
    <span class="md-ellipsis">
      1. Verificar que la Base de Datos Est√© Poblada
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-probar-las-rutas-en-el-navegador" class="md-nav__link">
    <span class="md-ellipsis">
      2. Probar las Rutas en el Navegador
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fase-8-introduccion-a-operaciones-crud" class="md-nav__link">
    <span class="md-ellipsis">
      FASE 8: Introducci√≥n a Operaciones CRUD
    </span>
  </a>
  
    <nav class="md-nav" aria-label="FASE 8: Introducci√≥n a Operaciones CRUD">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-que-son-las-operaciones-crud" class="md-nav__link">
    <span class="md-ellipsis">
      1. ¬øQu√© son las Operaciones CRUD?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-probar-operaciones-crud-con-tinker" class="md-nav__link">
    <span class="md-ellipsis">
      2. Probar Operaciones CRUD con Tinker
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-eliminacion-en-cascada" class="md-nav__link">
    <span class="md-ellipsis">
      3. Eliminaci√≥n en Cascada
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#entrega-de-la-practica" class="md-nav__link">
    <span class="md-ellipsis">
      üìã ENTREGA DE LA PR√ÅCTICA
    </span>
  </a>
  
    <nav class="md-nav" aria-label="üìã ENTREGA DE LA PR√ÅCTICA">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#requisitos-de-entrega" class="md-nav__link">
    <span class="md-ellipsis">
      Requisitos de Entrega
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Requisitos de Entrega">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#captura-1-migraciones-y-seeders-ejecutados" class="md-nav__link">
    <span class="md-ellipsis">
      Captura 1: Migraciones y Seeders Ejecutados
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#captura-2-verificacion-de-datos-en-tinker" class="md-nav__link">
    <span class="md-ellipsis">
      Captura 2: Verificaci√≥n de Datos en Tinker
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#captura-3-pagina-de-inicio-con-datos-reales" class="md-nav__link">
    <span class="md-ellipsis">
      Captura 3: P√°gina de Inicio con Datos Reales
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#captura-4-lista-de-todos-los-productos" class="md-nav__link">
    <span class="md-ellipsis">
      Captura 4: Lista de Todos los Productos
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#captura-5-productos-en-oferta" class="md-nav__link">
    <span class="md-ellipsis">
      Captura 5: Productos en Oferta
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#captura-6-detalle-de-un-producto" class="md-nav__link">
    <span class="md-ellipsis">
      Captura 6: Detalle de un Producto
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#captura-7-productos-por-categoria" class="md-nav__link">
    <span class="md-ellipsis">
      Captura 7: Productos por Categor√≠a
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#captura-8-lista-de-ofertas" class="md-nav__link">
    <span class="md-ellipsis">
      Captura 8: Lista de Ofertas
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#captura-9-detalle-de-una-oferta" class="md-nav__link">
    <span class="md-ellipsis">
      Captura 9: Detalle de una Oferta
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#captura-10-carrito-de-compras" class="md-nav__link">
    <span class="md-ellipsis">
      Captura 10: Carrito de Compras
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#captura-11-verificacion-de-relaciones-en-tinker" class="md-nav__link">
    <span class="md-ellipsis">
      Captura 11: Verificaci√≥n de Relaciones en Tinker
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#captura-12-verificacion-de-relacion-nm-del-carrito" class="md-nav__link">
    <span class="md-ellipsis">
      Captura 12: Verificaci√≥n de Relaci√≥n N:M del Carrito
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#captura-13-operacion-crud-crear-producto-en-tinker" class="md-nav__link">
    <span class="md-ellipsis">
      Captura 13: Operaci√≥n CRUD - Crear Producto en Tinker
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#instrucciones-de-entrega" class="md-nav__link">
    <span class="md-ellipsis">
      üì§ Instrucciones de Entrega
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="ud3-practica-guiada-persistencia-de-datos-con-laravel">UD.3 Pr√°ctica Guiada: Persistencia de Datos con Laravel<a class="headerlink" href="#ud3-practica-guiada-persistencia-de-datos-con-laravel" title="Permanent link">&para;</a></h1>
<h2 id="objetivo">Objetivo<a class="headerlink" href="#objetivo" title="Permanent link">&para;</a></h2>
<p>El objetivo de esta pr√°ctica es migrar la tienda online de la Pr√°ctica 2 de datos mock a una base de datos real usando Laravel. Se implementar√°n migraciones para definir la estructura de la base de datos, modelos Eloquent para interactuar con los datos, operaciones CRUD completas, relaciones entre modelos y seeders para poblar la base de datos con datos iniciales.</p>
<h3 id="continuidad-con-la-practica-2">Continuidad con la Pr√°ctica 2<a class="headerlink" href="#continuidad-con-la-practica-2" title="Permanent link">&para;</a></h3>
<p>Continuaci√≥n de la Pr√°ctica 2</p>
<p>Esta pr√°ctica est√° basada en la tienda online creada en la <strong>Pr√°ctica 2</strong>. Se migrar√°n los datos mock (categor√≠as, productos, ofertas, carrito) a una base de datos real manteniendo la misma funcionalidad y estructura.</p>
<p><strong>Base de Datos</strong>: Se utilizar√° MySQL a trav√©s de Laravel Sail para la persistencia de datos.</p>
<p><strong>Datos Mock</strong>: Los archivos mock creados en la Pr√°ctica 2 (<code>mock-categories.php</code>, <code>mock-products.php</code>, <code>mock-offers.php</code>, <code>mock-cart.php</code>) se reutilizar√°n en los seeders para poblar la base de datos.</p>
<h3 id="que-vamos-a-hacer">¬øQu√© vamos a hacer?<a class="headerlink" href="#que-vamos-a-hacer" title="Permanent link">&para;</a></h3>
<p>En esta pr√°ctica aprender√°s a:</p>
<ul>
<li><strong>Migrar de datos mock a base de datos real</strong>: Transformar los arrays PHP en tablas MySQL</li>
<li><strong>Crear migraciones</strong>: Definir la estructura de las tablas (categor√≠as, productos, ofertas, carrito)</li>
<li><strong>Implementar modelos Eloquent</strong>: Crear modelos con relaciones entre entidades</li>
<li><strong>Realizar operaciones CRUD completas</strong>: Crear, leer, actualizar y eliminar datos</li>
<li><strong>Crear seeders</strong>: Poblar la base de datos reutilizando los datos mock de la Pr√°ctica 2</li>
<li><strong>Actualizar controladores</strong>: Reemplazar el trait <code>LoadsMockData</code> por consultas Eloquent</li>
</ul>
<hr />
<h2 id="fase-1-configurar-la-base-de-datos">FASE 1: Configurar la Base de Datos<a class="headerlink" href="#fase-1-configurar-la-base-de-datos" title="Permanent link">&para;</a></h2>
<h3 id="1-verificar-la-configuracion-de-la-base-de-datos">1. Verificar la Configuraci√≥n de la Base de Datos<a class="headerlink" href="#1-verificar-la-configuracion-de-la-base-de-datos" title="Permanent link">&para;</a></h3>
<p>Antes de empezar a trabajar con la base de datos, es fundamental asegurarse de que Laravel Sail est√© configurado correctamente para trabajar con MySQL.</p>
<p>Como ya se vio en la pr√°cica 1, Laravel utiliza el archivo <code>.env</code> para almacenar la configuraci√≥n de la aplicaci√≥n, incluyendo los datos de conexi√≥n a la base de datos.</p>
<p>Abre el archivo <code>.env</code> y verifica que contenga la siguiente configuraci√≥n:</p>
<p>Configuraci√≥n de la base de datos</p>
<div class="highlight"><pre><span></span><code>DB_CONNECTION=mysql
DB_HOST=mysql
DB_PORT=3306
DB_DATABASE=laravel
DB_USERNAME=sail
DB_PASSWORD=password
</code></pre></div>
<p>¬øQu√© significa cada par√°metro?</p>
<ul>
<li><strong>DB_CONNECTION</strong>: El tipo de base de datos que usaremos (MySQL en este caso)</li>
<li><strong>DB_HOST</strong>: La direcci√≥n del servidor de base de datos (127.0.0.1 es localhost)</li>
<li><strong>DB_PORT</strong>: El puerto donde MySQL est√° escuchando (3306 es el puerto por defecto)</li>
<li><strong>DB_DATABASE</strong>: El nombre de la base de datos que usaremos</li>
<li><strong>DB_USERNAME</strong>: El usuario para conectarse a MySQL</li>
<li><strong>DB_PASSWORD</strong>: La contrase√±a del usuario</li>
</ul>
<h3 id="2-iniciar-laravel-sail">2. Iniciar Laravel Sail<a class="headerlink" href="#2-iniciar-laravel-sail" title="Permanent link">&para;</a></h3>
<p>Laravel Sail utiliza Docker para crear contenedores que incluyen todos los servicios necesarios (PHP, MySQL, Redis, etc.). Antes de trabajar con la base de datos, necesitamos asegurarnos de que estos servicios est√©n en funcionamiento.</p>
<p>Ejecuta el siguiente comando para iniciar los contenedores:</p>
<div class="highlight"><pre><span></span><code>sail<span class="w"> </span>up<span class="w"> </span>-d
</code></pre></div>
<p>Ejemplo de respuesta</p>
<div class="highlight"><pre><span></span><code>ggarrido@mi-equipo:~/development/laravel/MyShop$<span class="w"> </span>sail<span class="w"> </span>up<span class="w"> </span>-d
<span class="o">[</span>+<span class="o">]</span><span class="w"> </span>Running<span class="w"> </span><span class="m">7</span>/7
<span class="w"> </span>‚úî<span class="w"> </span>sail-8.4/app<span class="w">                     </span>Built<span class="w">                          </span><span class="m">0</span>.0s
<span class="w"> </span>‚úî<span class="w"> </span>Network<span class="w"> </span>myshop_sail<span class="w">              </span>Created<span class="w">                        </span><span class="m">0</span>.0s
<span class="w"> </span>‚úî<span class="w"> </span>Volume<span class="w"> </span>myshop_sail-redis<span class="w">         </span>Created<span class="w">                        </span><span class="m">0</span>.0s
<span class="w"> </span>‚úî<span class="w"> </span>Volume<span class="w"> </span>myshop_sail-mysql<span class="w">         </span>Created<span class="w">                        </span><span class="m">0</span>.0s
<span class="w"> </span>‚úî<span class="w"> </span>Container<span class="w"> </span>myshop-mysql-1<span class="w">         </span>Started<span class="w">                        </span><span class="m">0</span>.8s
<span class="w"> </span>‚úî<span class="w"> </span>Container<span class="w"> </span>myshop-redis-1<span class="w">         </span>Started<span class="w">                        </span><span class="m">0</span>.8s
<span class="w"> </span>‚úî<span class="w"> </span>Container<span class="w"> </span>myshop-laravel.test-1<span class="w">  </span>Started<span class="w">                        </span><span class="m">1</span>.0s
</code></pre></div>
<h3 id="3-verificar-la-conexion-a-la-base-de-datos">3. Verificar la Conexi√≥n a la Base de Datos<a class="headerlink" href="#3-verificar-la-conexion-a-la-base-de-datos" title="Permanent link">&para;</a></h3>
<p>Una vez que los contenedores est√°n en funcionamiento, podemos verificar que Laravel puede conectarse correctamente a la base de datos MySQL.</p>
<p>Ejecuta el siguiente comando:</p>
<div class="highlight"><pre><span></span><code>sail<span class="w"> </span>artisan<span class="w"> </span>migrate:status
</code></pre></div>
<p>Ejemplo de respuesta</p>
<div class="highlight"><pre><span></span><code>ggarrido@mi-equipo:~/development/laravel/MyShop$<span class="w"> </span>sail<span class="w"> </span>artisan<span class="w"> </span>migrate:status

<span class="w">  </span>Migration<span class="w"> </span>name<span class="w"> </span>................................................<span class="w"> </span>Batch<span class="w"> </span>/<span class="w"> </span>Status
<span class="w">  </span>0001_01_01_000000_create_users_table<span class="w"> </span>..............................<span class="w"> </span><span class="o">[</span><span class="m">1</span><span class="o">]</span><span class="w"> </span>Ran
<span class="w">  </span>0001_01_01_000001_create_cache_table<span class="w"> </span>..............................<span class="w"> </span><span class="o">[</span><span class="m">1</span><span class="o">]</span><span class="w"> </span>Ran
<span class="w">  </span>0001_01_01_000002_create_jobs_table<span class="w"> </span>...............................<span class="w"> </span><span class="o">[</span><span class="m">1</span><span class="o">]</span><span class="w"> </span>Ran
<span class="w">  </span>2025_09_30_140225_create_telescope_entries_table<span class="w"> </span>..................<span class="w"> </span><span class="o">[</span><span class="m">1</span><span class="o">]</span><span class="w"> </span>Ran
</code></pre></div>
<h2 id="fase-2-crear-las-migraciones">FASE 2: Crear las Migraciones<a class="headerlink" href="#fase-2-crear-las-migraciones" title="Permanent link">&para;</a></h2>
<h3 id="1-que-son-las-migraciones">1. ¬øQu√© son las Migraciones?<a class="headerlink" href="#1-que-son-las-migraciones" title="Permanent link">&para;</a></h3>
<p>Las migraciones son como un "control de versiones" para la base de datos. Permiten definir y modificar la estructura de las tablas de forma program√°tica, manteniendo un historial de cambios.</p>
<p>En la Pr√°ctica 2 creamos archivos mock (<code>mock-categories.php</code>, <code>mock-products.php</code>, <code>mock-offers.php</code>) que conten√≠an arrays con datos de prueba. Ahora vamos a crear <strong>migraciones</strong> que definir√°n las <strong>tablas reales</strong> en MySQL con la misma estructura que ten√≠an esos arrays.</p>
<p>De Arrays a Tablas</p>
<p><strong>Antes (Pr√°ctica 2)</strong>:</p>
<p>php</p>
<div class="highlight"><pre><span></span><code>// database/data/mock-categories.php
return [
    1 =&gt; [&#39;id&#39; =&gt; 1, &#39;name&#39; =&gt; &#39;Categor√≠a 1&#39;, &#39;slug&#39; =&gt; &#39;categoria-1&#39;]
];
</code></pre></div>
<p><strong>Ahora (Pr√°ctica 3)</strong>:</p>
<p>php</p>
<div class="highlight"><pre><span></span><code>// database/migrations/xxxx_create_categories_table.php
Schema::create(&#39;categories&#39;, function (Blueprint $table) {
    $table-&gt;id();
    $table-&gt;string(&#39;name&#39;);
    $table-&gt;string(&#39;slug&#39;)-&gt;unique();
});
</code></pre></div>
<h3 id="2-crear-la-migracion-de-categorias">2. Crear la Migraci√≥n de Categor√≠as<a class="headerlink" href="#2-crear-la-migracion-de-categorias" title="Permanent link">&para;</a></h3>
<p>La tabla <code>categories</code> almacenar√° las categor√≠as de productos. Esta tabla corresponde al archivo <code>database/data/mock-categories.php</code> que creaste en la Pr√°ctica 2.</p>
<p>Los atributos de la tabla ser√°n los mismos que ten√≠as en el array mock:</p>
<ul>
<li><strong>id</strong>: Identificador √∫nico de la categor√≠a</li>
<li><strong>name</strong>: Nombre de la categor√≠a</li>
<li><strong>slug</strong>: Identificador amigable para URLs (por ejemplo, "electronica", "ropa-hombre")</li>
<li><strong>description</strong>: Descripci√≥n breve de la categor√≠a (puede ser null)</li>
<li><strong>timestamps</strong>: Laravel a√±ade autom√°ticamente <code>created_at</code> y <code>updated_at</code></li>
</ul>
<p>Ejecuta el siguiente comando para crear la migraci√≥n:</p>
<div class="highlight"><pre><span></span><code>sail<span class="w"> </span>artisan<span class="w"> </span>make:migration<span class="w"> </span>create_categories_table
</code></pre></div>
<p>Ejemplo de respuesta</p>
<div class="highlight"><pre><span></span><code>ggarrido@mi-equipo:~/development/laravel/MyShop$<span class="w"> </span>sail<span class="w"> </span>artisan<span class="w"> </span>make:migration<span class="w"> </span>create_categories_table

<span class="w">   </span>INFO<span class="w">  </span>Migration<span class="w"> </span><span class="o">[</span>database/migrations/2025_01_15_103045_create_categories_table.php<span class="o">]</span><span class="w"> </span>created<span class="w"> </span>successfully.
</code></pre></div>
<p>Abre el archivo generado en <code>database/migrations/</code> (el nombre incluir√° la fecha y hora) y reemplaza su contenido:</p>
<p>C√≥digo PHP</p>
<div class="highlight"><pre><span></span><code><span class="cp">&lt;?php</span>

<span class="k">use</span> <span class="nx">Illuminate\Database\Migrations\Migration</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\Database\Schema\Blueprint</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\Support\Facades\Schema</span><span class="p">;</span>

<span class="k">return</span> <span class="k">new</span> <span class="k">class</span> <span class="k">extends</span> <span class="nx">Migration</span>
<span class="p">{</span>
    <span class="sd">/**</span>
<span class="sd">     * Run the migrations.</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">up</span><span class="p">()</span><span class="o">:</span> <span class="nx">void</span>
    <span class="p">{</span>
        <span class="nx">Schema</span><span class="o">::</span><span class="na">create</span><span class="p">(</span><span class="s1">&#39;categories&#39;</span><span class="p">,</span> <span class="k">function</span> <span class="p">(</span><span class="nx">Blueprint</span> <span class="nv">$table</span><span class="p">)</span> <span class="p">{</span>
            <span class="nv">$table</span><span class="o">-&gt;</span><span class="na">id</span><span class="p">();</span>
            <span class="nv">$table</span><span class="o">-&gt;</span><span class="na">string</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">);</span>
            <span class="nv">$table</span><span class="o">-&gt;</span><span class="na">string</span><span class="p">(</span><span class="s1">&#39;slug&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">unique</span><span class="p">();</span>
            <span class="nv">$table</span><span class="o">-&gt;</span><span class="na">text</span><span class="p">(</span><span class="s1">&#39;description&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">nullable</span><span class="p">();</span>
            <span class="nv">$table</span><span class="o">-&gt;</span><span class="na">timestamps</span><span class="p">();</span>
        <span class="p">});</span>
    <span class="p">}</span>

    <span class="sd">/**</span>
<span class="sd">     * Reverse the migrations.</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">down</span><span class="p">()</span><span class="o">:</span> <span class="nx">void</span>
    <span class="p">{</span>
        <span class="nx">Schema</span><span class="o">::</span><span class="na">dropIfExists</span><span class="p">(</span><span class="s1">&#39;categories&#39;</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">};</span>
</code></pre></div>
<p>M√©todos up() y down()</p>
<ul>
<li><strong>up()</strong>: Define qu√© hacer cuando se ejecuta la migraci√≥n (crear la tabla)</li>
<li><strong>down()</strong>: Define c√≥mo revertir la migraci√≥n (eliminar la tabla)</li>
</ul>
<p>Esto permite hacer y deshacer cambios en la base de datos f√°cilmente.</p>
<h3 id="3-crear-la-migracion-de-ofertas">3. Crear la Migraci√≥n de Ofertas<a class="headerlink" href="#3-crear-la-migracion-de-ofertas" title="Permanent link">&para;</a></h3>
<p>La tabla <code>offers</code> almacenar√° las ofertas especiales con descuentos. Esta tabla corresponde al archivo <code>database/data/mock-offers.php</code> que creaste en la Pr√°ctica 2.</p>
<p>En la Pr√°ctica 2, una oferta ten√≠a los siguientes atributos:</p>
<ul>
<li><strong>id</strong>: Identificador √∫nico de la oferta</li>
<li><strong>name</strong>: Nombre de la oferta (por ejemplo, "Descuento Primavera")</li>
<li><strong>slug</strong>: Identificador amigable para URLs</li>
<li><strong>discount_percentage</strong>: Porcentaje de descuento (por ejemplo, 20 para un 20%)</li>
<li><strong>description</strong>: Descripci√≥n breve de la oferta</li>
</ul>
<p>Ejecuta el siguiente comando para crear la migraci√≥n:</p>
<div class="highlight"><pre><span></span><code>sail<span class="w"> </span>artisan<span class="w"> </span>make:migration<span class="w"> </span>create_offers_table
</code></pre></div>
<p>Ejemplo de respuesta</p>
<p>bash
<div class="highlight"><pre><span></span><code>ggarrido@mi-equipo:~/development/laravel/MyShop$ sail artisan make:migration create_offers_table

   INFO  Migration [database/migrations/2025_01_15_103112_create_offers_table.php] created successfully.
</code></pre></div></p>
<p>Abre el archivo generado y reemplaza su contenido:</p>
<p>C√≥digo PHP</p>
<div class="highlight"><pre><span></span><code><span class="cp">&lt;?php</span>

<span class="k">use</span> <span class="nx">Illuminate\Database\Migrations\Migration</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\Database\Schema\Blueprint</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\Support\Facades\Schema</span><span class="p">;</span>

<span class="k">return</span> <span class="k">new</span> <span class="k">class</span> <span class="k">extends</span> <span class="nx">Migration</span>
<span class="p">{</span>
    <span class="sd">/**</span>
<span class="sd">     * Run the migrations.</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">up</span><span class="p">()</span><span class="o">:</span> <span class="nx">void</span>
    <span class="p">{</span>
        <span class="nx">Schema</span><span class="o">::</span><span class="na">create</span><span class="p">(</span><span class="s1">&#39;offers&#39;</span><span class="p">,</span> <span class="k">function</span> <span class="p">(</span><span class="nx">Blueprint</span> <span class="nv">$table</span><span class="p">)</span> <span class="p">{</span>
            <span class="nv">$table</span><span class="o">-&gt;</span><span class="na">id</span><span class="p">();</span>
            <span class="nv">$table</span><span class="o">-&gt;</span><span class="na">string</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">);</span>
            <span class="nv">$table</span><span class="o">-&gt;</span><span class="na">string</span><span class="p">(</span><span class="s1">&#39;slug&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">unique</span><span class="p">();</span>
            <span class="nv">$table</span><span class="o">-&gt;</span><span class="na">integer</span><span class="p">(</span><span class="s1">&#39;discount_percentage&#39;</span><span class="p">);</span>
            <span class="nv">$table</span><span class="o">-&gt;</span><span class="na">text</span><span class="p">(</span><span class="s1">&#39;description&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">nullable</span><span class="p">();</span>
            <span class="nv">$table</span><span class="o">-&gt;</span><span class="na">timestamps</span><span class="p">();</span>
        <span class="p">});</span>
    <span class="p">}</span>

    <span class="sd">/**</span>
<span class="sd">     * Reverse the migrations.</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">down</span><span class="p">()</span><span class="o">:</span> <span class="nx">void</span>
    <span class="p">{</span>
        <span class="nx">Schema</span><span class="o">::</span><span class="na">dropIfExists</span><span class="p">(</span><span class="s1">&#39;offers&#39;</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">};</span>
</code></pre></div>
<p>Tipos de Datos en Migraciones</p>
<ul>
<li><code>id()</code>: Crea un campo auto-incremental (equivalente a BIGINT UNSIGNED)</li>
<li><code>string()</code>: Crea un campo VARCHAR (por defecto 255 caracteres)</li>
<li><code>integer()</code>: Crea un campo INT</li>
<li><code>text()</code>: Crea un campo TEXT (para textos largos)</li>
<li><code>nullable()</code>: Permite valores NULL en el campo</li>
<li><code>unique()</code>: A√±ade un √≠ndice √∫nico al campo</li>
<li><code>timestamps()</code>: Crea autom√°ticamente <code>created_at</code> y <code>updated_at</code></li>
</ul>
<h3 id="4-crear-la-migracion-de-productos">4. Crear la Migraci√≥n de Productos<a class="headerlink" href="#4-crear-la-migracion-de-productos" title="Permanent link">&para;</a></h3>
<p>La tabla <code>products</code> es el coraz√≥n de nuestra tienda. Almacenar√° todos los productos con sus detalles y relaciones con categor√≠as y ofertas. Esta tabla corresponde al archivo <code>database/data/mock-products.php</code> que creaste en la Pr√°ctica 2.</p>
<p>En la Pr√°ctica 2, un producto ten√≠a estos atributos:</p>
<ul>
<li><strong>id</strong>: Identificador √∫nico del producto</li>
<li><strong>name</strong>: Nombre del producto</li>
<li><strong>description</strong>: Descripci√≥n del producto</li>
<li><strong>price</strong>: Precio del producto</li>
<li><strong>category_id</strong>: ID de la categor√≠a a la que pertenece</li>
<li><strong>offer_id</strong>: ID de la oferta aplicable (puede ser null si no tiene oferta)</li>
</ul>
<p>Reglas de Negocio (de la Pr√°ctica 2)</p>
<ul>
<li><strong>Una oferta</strong> puede aplicarse a <strong>m√∫ltiples productos</strong> (relaci√≥n 1:N)</li>
<li><strong>Un producto</strong> solo puede tener <strong>una oferta activa</strong> a la vez (o ninguna)</li>
<li>No todos los productos tienen ofertas (en ese caso <code>offer_id</code> es <code>null</code>)</li>
</ul>
<p>Ejecuta el siguiente comando para crear la migraci√≥n:</p>
<div class="highlight"><pre><span></span><code>sail<span class="w"> </span>artisan<span class="w"> </span>make:migration<span class="w"> </span>create_products_table
</code></pre></div>
<p>Ejemplo de respuesta</p>
<p>bash
<div class="highlight"><pre><span></span><code>ggarrido@mi-equipo:~/development/laravel/MyShop$ sail artisan make:migration create_products_table

   INFO  Migration [database/migrations/2025_01_15_103145_create_products_table.php] created successfully.
</code></pre></div></p>
<p>Abre el archivo generado y reemplaza su contenido:</p>
<p>C√≥digo PHP</p>
<div class="highlight"><pre><span></span><code><span class="cp">&lt;?php</span>

<span class="k">use</span> <span class="nx">Illuminate\Database\Migrations\Migration</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\Database\Schema\Blueprint</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\Support\Facades\Schema</span><span class="p">;</span>

<span class="k">return</span> <span class="k">new</span> <span class="k">class</span> <span class="k">extends</span> <span class="nx">Migration</span>
<span class="p">{</span>
    <span class="sd">/**</span>
<span class="sd">     * Run the migrations.</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">up</span><span class="p">()</span><span class="o">:</span> <span class="nx">void</span>
    <span class="p">{</span>
        <span class="nx">Schema</span><span class="o">::</span><span class="na">create</span><span class="p">(</span><span class="s1">&#39;products&#39;</span><span class="p">,</span> <span class="k">function</span> <span class="p">(</span><span class="nx">Blueprint</span> <span class="nv">$table</span><span class="p">)</span> <span class="p">{</span>
            <span class="nv">$table</span><span class="o">-&gt;</span><span class="na">id</span><span class="p">();</span>
            <span class="nv">$table</span><span class="o">-&gt;</span><span class="na">string</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">);</span>
            <span class="nv">$table</span><span class="o">-&gt;</span><span class="na">text</span><span class="p">(</span><span class="s1">&#39;description&#39;</span><span class="p">);</span>
            <span class="nv">$table</span><span class="o">-&gt;</span><span class="na">decimal</span><span class="p">(</span><span class="s1">&#39;price&#39;</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
            <span class="nv">$table</span><span class="o">-&gt;</span><span class="na">foreignId</span><span class="p">(</span><span class="s1">&#39;category_id&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">constrained</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">onDelete</span><span class="p">(</span><span class="s1">&#39;cascade&#39;</span><span class="p">);</span>
            <span class="nv">$table</span><span class="o">-&gt;</span><span class="na">foreignId</span><span class="p">(</span><span class="s1">&#39;offer_id&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">nullable</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">constrained</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">onDelete</span><span class="p">(</span><span class="s1">&#39;set null&#39;</span><span class="p">);</span>
            <span class="nv">$table</span><span class="o">-&gt;</span><span class="na">timestamps</span><span class="p">();</span>
        <span class="p">});</span>
    <span class="p">}</span>

    <span class="sd">/**</span>
<span class="sd">     * Reverse the migrations.</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">down</span><span class="p">()</span><span class="o">:</span> <span class="nx">void</span>
    <span class="p">{</span>
        <span class="nx">Schema</span><span class="o">::</span><span class="na">dropIfExists</span><span class="p">(</span><span class="s1">&#39;products&#39;</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">};</span>
</code></pre></div>
<p>Claves For√°neas y Restricciones</p>
<ul>
<li><code>foreignId('category_id')</code>: Crea un campo BIGINT UNSIGNED para la relaci√≥n</li>
<li><code>constrained()</code>: Crea autom√°ticamente la clave for√°nea a la tabla <code>categories</code></li>
<li><code>onDelete('cascade')</code>: Si se elimina la categor√≠a, se eliminan todos sus productos</li>
<li><code>nullable()</code>: Permite que <code>offer_id</code> sea NULL (productos sin oferta)</li>
<li><code>onDelete('set null')</code>: Si se elimina la oferta, el campo se pone a NULL</li>
</ul>
<p><strong>Importante</strong>: Las migraciones deben ejecutarse en orden. Por eso creamos primero <code>categories</code> y <code>offers</code>, y luego <code>products</code> que las referencia.</p>
<h3 id="5-crear-la-migracion-de-la-tabla-pivot-product-user">5. Crear la Migraci√≥n de la Tabla Pivot Product-User<a class="headerlink" href="#5-crear-la-migracion-de-la-tabla-pivot-product-user" title="Permanent link">&para;</a></h3>
<p>La tabla <code>product_user</code> implementa una relaci√≥n <strong>N:M</strong> directa entre productos y usuarios. Esta tabla corresponde al archivo <code>database/data/mock-cart.php</code> que creaste en la Pr√°ctica 2, pero ahora con una estructura m√°s clara siguiendo las convenciones de Laravel.</p>
<p>En la Pr√°ctica 2, el carrito ten√≠a esta estructura:</p>
<ul>
<li><strong>id</strong>: Identificador √∫nico del item en el carrito</li>
<li><strong>user_id</strong>: ID del usuario propietario del carrito</li>
<li><strong>product_id</strong>: ID del producto a√±adido al carrito</li>
<li><strong>quantity</strong>: Cantidad de unidades de ese producto</li>
</ul>
<p>Producto-Usuario (Tabla Pivot)</p>
<p><strong>Relaci√≥n N:M</strong>: Un producto puede estar en m√∫ltiples carritos (diferentes usuarios) y un usuario puede tener m√∫ltiples productos en su carrito.</p>
<p>La tabla <code>product_user</code> act√∫a como <strong>tabla pivot enriquecida</strong> entre productos y usuarios:</p>
<ul>
<li><strong>product_id</strong>: Referencia al producto (primero por orden alfab√©tico)</li>
<li><strong>user_id</strong>: Identifica el usuario propietario del carrito</li>
<li><strong>quantity</strong>: Cantidad espec√≠fica de ese producto en ese carrito (campo adicional)</li>
</ul>
<p><strong>Convenci√≥n de Laravel</strong>: Las tablas pivot siguen el orden alfab√©tico de los nombres de las tablas en singular: <code>product_user</code> (no <code>user_product</code>).</p>
<p><strong>¬øPor qu√© no es una tabla pivot simple?</strong> Una tabla pivot b√°sica solo tendr√≠a <code>product_id</code> y <code>user_id</code>. Pero necesitamos el campo adicional <code>quantity</code>, por eso <code>product_user</code> es una tabla pivot <strong>enriquecida</strong>.</p>
<p>Ejecuta el siguiente comando para crear la migraci√≥n:</p>
<div class="highlight"><pre><span></span><code>sail<span class="w"> </span>artisan<span class="w"> </span>make:migration<span class="w"> </span>create_product_user_table
</code></pre></div>
<p>Ejemplo de respuesta</p>
<div class="highlight"><pre><span></span><code>ggarrido@mi-equipo:~/development/laravel/MyShop$<span class="w"> </span>sail<span class="w"> </span>artisan<span class="w"> </span>make:migration<span class="w"> </span>create_product_user_table

<span class="w">   </span>INFO<span class="w">  </span>Migration<span class="w"> </span><span class="o">[</span>database/migrations/2025_01_15_103212_create_product_user_table.php<span class="o">]</span><span class="w"> </span>created<span class="w"> </span>successfully.
</code></pre></div>
<p>Abre el archivo generado y reemplaza su contenido:</p>
<p>C√≥digo PHP</p>
<div class="highlight"><pre><span></span><code><span class="cp">&lt;?php</span>

<span class="k">use</span> <span class="nx">Illuminate\Database\Migrations\Migration</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\Database\Schema\Blueprint</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\Support\Facades\Schema</span><span class="p">;</span>

<span class="k">return</span> <span class="k">new</span> <span class="k">class</span> <span class="k">extends</span> <span class="nx">Migration</span>
<span class="p">{</span>
    <span class="sd">/**</span>
<span class="sd">     * Run the migrations.</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">up</span><span class="p">()</span><span class="o">:</span> <span class="nx">void</span>
    <span class="p">{</span>
        <span class="nx">Schema</span><span class="o">::</span><span class="na">create</span><span class="p">(</span><span class="s1">&#39;product_user&#39;</span><span class="p">,</span> <span class="k">function</span> <span class="p">(</span><span class="nx">Blueprint</span> <span class="nv">$table</span><span class="p">)</span> <span class="p">{</span>
            <span class="nv">$table</span><span class="o">-&gt;</span><span class="na">id</span><span class="p">();</span>
            <span class="nv">$table</span><span class="o">-&gt;</span><span class="na">foreignId</span><span class="p">(</span><span class="s1">&#39;product_id&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">constrained</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">onDelete</span><span class="p">(</span><span class="s1">&#39;cascade&#39;</span><span class="p">);</span>
            <span class="nv">$table</span><span class="o">-&gt;</span><span class="na">foreignId</span><span class="p">(</span><span class="s1">&#39;user_id&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">constrained</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">onDelete</span><span class="p">(</span><span class="s1">&#39;cascade&#39;</span><span class="p">);</span>
            <span class="nv">$table</span><span class="o">-&gt;</span><span class="na">integer</span><span class="p">(</span><span class="s1">&#39;quantity&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">default</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
            <span class="nv">$table</span><span class="o">-&gt;</span><span class="na">timestamps</span><span class="p">();</span>
        <span class="p">});</span>
    <span class="p">}</span>

    <span class="sd">/**</span>
<span class="sd">     * Reverse the migrations.</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">down</span><span class="p">()</span><span class="o">:</span> <span class="nx">void</span>
    <span class="p">{</span>
        <span class="nx">Schema</span><span class="o">::</span><span class="na">dropIfExists</span><span class="p">(</span><span class="s1">&#39;product_user&#39;</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">};</span>
</code></pre></div>
<p>Valores por Defecto y Tabla Pivot Enriquecida</p>
<ul>
<li><code>default(1)</code>: Si no se especifica cantidad, se asigna 1</li>
<li><code>useCurrent()</code>: Usa la fecha/hora actual como valor por defecto</li>
<li><code>timestamp()</code>: Similar a <code>timestamps()</code> pero para un solo campo</li>
<li><code>product_id</code>: Clave for√°nea que referencia al producto (primero por orden alfab√©tico)</li>
<li><code>user_id</code>: Clave for√°nea que identifica el usuario propietario del carrito</li>
</ul>
<h3 id="6-ejecutar-las-migraciones">6. Ejecutar las Migraciones<a class="headerlink" href="#6-ejecutar-las-migraciones" title="Permanent link">&para;</a></h3>
<p>Ahora que hemos creado todas las migraciones, es el momento de aplicarlas a la base de datos para crear las tablas reales.</p>
<p>Las migraciones se ejecutan en el orden en que fueron creadas (seg√∫n la fecha en el nombre del archivo). Laravel se encarga de mantener un registro de qu√© migraciones ya se han ejecutado.</p>
<p>Ejecuta el siguiente comando para aplicar todas las migraciones:</p>
<div class="highlight"><pre><span></span><code>sail<span class="w"> </span>artisan<span class="w"> </span>migrate
</code></pre></div>
<p>Ejemplo de respuesta</p>
<div class="highlight"><pre><span></span><code>ggarrido@mi-equipo:~/development/laravel/MyShop$<span class="w"> </span>sail<span class="w"> </span>artisan<span class="w"> </span>migrate

<span class="w">   </span>INFO<span class="w"> </span>Running<span class="w"> </span>migrations.

<span class="w">   </span>2025_10_01_163110_create_categories_table<span class="w"> </span>..............................<span class="w"> </span><span class="m">215</span>.03ms<span class="w"> </span>DONE
<span class="w">   </span>2025_10_01_163209_create_offers_table<span class="w"> </span>..................................<span class="w"> </span><span class="m">119</span>.43ms<span class="w"> </span>DONE
<span class="w">   </span>2025_10_01_163250_create_products_table<span class="w"> </span>................................<span class="w"> </span>1s<span class="w"> </span>DONE
<span class="w">   </span>2025_10_01_081337_create_product_user_table<span class="w"> </span>............................<span class="w"> </span><span class="m">307</span>.25ms<span class="w"> </span>DONE
</code></pre></div>
<p>Verifica que las tablas se hayan creado correctamente:</p>
<div class="highlight"><pre><span></span><code>sail<span class="w"> </span>artisan<span class="w"> </span>migrate:status
</code></pre></div>
<p>Ejemplo de respuesta</p>
<div class="highlight"><pre><span></span><code>ggarrido@mi-equipo:~/development/laravel/MyShop$<span class="w"> </span>sail<span class="w"> </span>artisan<span class="w"> </span>migrate:status

<span class="w">  </span>Migration<span class="w"> </span>name<span class="w"> </span>................................................<span class="w"> </span>Batch<span class="w"> </span>/<span class="w"> </span>Status
<span class="w">  </span>0001_01_01_000000_create_users_table<span class="w"> </span>...........................<span class="w"> </span><span class="o">[</span><span class="m">1</span><span class="o">]</span><span class="w"> </span>Ran
<span class="w">  </span>0001_01_01_000001_create_cache_table<span class="w"> </span>...........................<span class="w"> </span><span class="o">[</span><span class="m">1</span><span class="o">]</span><span class="w"> </span>Ran
<span class="w">  </span>0001_01_01_000002_create_jobs_table<span class="w"> </span>............................<span class="w"> </span><span class="o">[</span><span class="m">1</span><span class="o">]</span><span class="w"> </span>Ran
<span class="w">  </span>2025_09_30_140225_create_telescope_entries_table<span class="w"> </span>...............<span class="w"> </span><span class="o">[</span><span class="m">2</span><span class="o">]</span><span class="w"> </span>Ran
<span class="w">  </span>2025_10_01_163110_create_categories_table<span class="w"> </span>......................<span class="w"> </span><span class="o">[</span><span class="m">3</span><span class="o">]</span><span class="w"> </span>Ran
<span class="w">  </span>2025_10_01_163209_create_offers_table<span class="w"> </span>..........................<span class="w"> </span><span class="o">[</span><span class="m">3</span><span class="o">]</span><span class="w"> </span>Ran
<span class="w">  </span>2025_10_01_163250_create_products_table<span class="w"> </span>........................<span class="w"> </span><span class="o">[</span><span class="m">3</span><span class="o">]</span><span class="w"> </span>Ran
<span class="w">  </span>2025_10_01_081337_create_product_user_table<span class="w"> </span>....................<span class="w"> </span><span class="o">[</span><span class="m">3</span><span class="o">]</span><span class="w"> </span>Ran
</code></pre></div>
<h2 id="fase-3-crear-los-modelos-eloquent">FASE 3: Crear los Modelos Eloquent<a class="headerlink" href="#fase-3-crear-los-modelos-eloquent" title="Permanent link">&para;</a></h2>
<h3 id="1-que-son-los-modelos-eloquent">1. ¬øQu√© son los Modelos Eloquent?<a class="headerlink" href="#1-que-son-los-modelos-eloquent" title="Permanent link">&para;</a></h3>
<p>Los modelos Eloquent son la capa de abstracci√≥n que Laravel proporciona para interactuar con la base de datos. Cada modelo representa una tabla y permite realizar operaciones CRUD (Crear, Leer, Actualizar, Eliminar) de forma sencilla.</p>
<p>En la Pr√°ctica 2, usabas el trait <code>LoadsMockData</code> para cargar arrays desde archivos PHP. Ahora, los modelos Eloquent reemplazar√°n esa funcionalidad, permitiendo trabajar con datos reales de la base de datos.</p>
<p>De Arrays a Modelos</p>
<p><strong>Antes (Pr√°ctica 2)</strong>:</p>
<div class="highlight"><pre><span></span><code><span class="x">// Cargar datos mock</span>
<span class="x">$categories = $this-&gt;getCategories(); // Array desde archivo PHP</span>
</code></pre></div>
<p><strong>Ahora (Pr√°ctica 3)</strong>:</p>
<div class="highlight"><pre><span></span><code><span class="x">// Cargar datos reales</span>
<span class="x">$categories = Category::all(); // Consulta a la base de datos</span>
</code></pre></div>
<h3 id="2-crear-el-modelo-user">2. Crear el Modelo User<a class="headerlink" href="#2-crear-el-modelo-user" title="Permanent link">&para;</a></h3>
<p>El modelo <code>User</code> ya existe en Laravel por defecto, pero necesitamos actualizarlo para incluir la relaci√≥n con el carrito. Este modelo representa a los usuarios de la tienda.</p>
<p>Abre el archivo <code>app/Models/User.php</code> y a√±ade la relaci√≥n con el carrito:</p>
<p>C√≥digo PHP</p>
<div class="highlight"><pre><span></span><code><span class="cp">&lt;?php</span>

<span class="k">namespace</span> <span class="nx">App\Models</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Illuminate\Database\Eloquent\Factories\HasFactory</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\Foundation\Auth\User</span> <span class="k">as</span> <span class="nx">Authenticatable</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\Notifications\Notifiable</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\Database\Eloquent\Relations\HasMany</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">User</span> <span class="k">extends</span> <span class="nx">Authenticatable</span>
<span class="p">{</span>
    <span class="k">use</span> <span class="nx">HasFactory</span><span class="p">,</span> <span class="nx">Notifiable</span><span class="p">;</span>

    <span class="k">protected</span> <span class="nv">$fillable</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s1">&#39;name&#39;</span><span class="p">,</span>
        <span class="s1">&#39;email&#39;</span><span class="p">,</span>
        <span class="s1">&#39;password&#39;</span><span class="p">,</span>
    <span class="p">];</span>

    <span class="k">protected</span> <span class="nv">$hidden</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s1">&#39;password&#39;</span><span class="p">,</span>
        <span class="s1">&#39;remember_token&#39;</span><span class="p">,</span>
    <span class="p">];</span>

    <span class="k">protected</span> <span class="k">function</span> <span class="nf">casts</span><span class="p">()</span><span class="o">:</span> <span class="k">array</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="p">[</span>
            <span class="s1">&#39;email_verified_at&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;datetime&#39;</span><span class="p">,</span>
            <span class="s1">&#39;password&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;hashed&#39;</span><span class="p">,</span>
        <span class="p">];</span>
    <span class="p">}</span>

    <span class="sd">/**</span>
<span class="sd">     * Get the products in the user&#39;s cart (N:M relationship).</span>
<span class="sd">     */</span>
      <span class="k">public</span> <span class="k">function</span> <span class="nf">products</span><span class="p">()</span>
      <span class="p">{</span>
          <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">belongsToMany</span><span class="p">(</span><span class="nx">Product</span><span class="o">::</span><span class="na">class</span><span class="p">,</span> <span class="s1">&#39;product_user&#39;</span><span class="p">)</span>
              <span class="o">-&gt;</span><span class="na">withPivot</span><span class="p">(</span><span class="s1">&#39;quantity&#39;</span><span class="p">)</span>
              <span class="o">-&gt;</span><span class="na">withTimestamps</span><span class="p">();</span>
      <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>Relaciones del Modelo User</p>
<ul>
<li><strong><code>products()</code></strong>: Relaci√≥n N:M con productos a trav√©s de la tabla pivot <code>product_user</code></li>
<li><strong><code>withPivot('quantity')</code></strong>: Incluye el campo adicional <code>quantity</code> de la tabla pivot</li>
<li><strong><code>withTimestamps()</code></strong>: Incluye los timestamps de la tabla pivot (<code>created_at</code>, <code>updated_at</code>)</li>
</ul>
<p><strong>Acceso al carrito</strong>: <code>$user-&gt;products</code> devuelve los productos en el carrito del usuario.</p>
<h3 id="3-crear-el-modelo-category">3. Crear el Modelo Category<a class="headerlink" href="#3-crear-el-modelo-category" title="Permanent link">&para;</a></h3>
<p>El modelo <code>Category</code> representa la tabla <code>categories</code> y define la relaci√≥n con los productos. Este modelo reemplazar√° el uso del array mock <code>mock-categories.php</code> de la Pr√°ctica 2.</p>
<p>Ejecuta el siguiente comando para crear el modelo:</p>
<div class="highlight"><pre><span></span><code>sail<span class="w"> </span>artisan<span class="w"> </span>make:model<span class="w"> </span>Category
</code></pre></div>
<p>Ejemplo de respuesta</p>
<div class="highlight"><pre><span></span><code>ggarrido@mi-equipo:~/development/laravel/MyShop$<span class="w"> </span>sail<span class="w"> </span>artisan<span class="w"> </span>make:model<span class="w"> </span>Category

<span class="w">   </span>INFO<span class="w">  </span>Model<span class="w"> </span><span class="o">[</span>app/Models/Category.php<span class="o">]</span><span class="w"> </span>created<span class="w"> </span>successfully.
</code></pre></div>
<p>Abre el archivo <code>app/Models/Category.php</code> y reemplaza su contenido:</p>
<p>C√≥digo PHP</p>
<div class="highlight"><pre><span></span><code><span class="cp">&lt;?php</span>

<span class="k">namespace</span> <span class="nx">App\Models</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Illuminate\Database\Eloquent\Factories\HasFactory</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\Database\Eloquent\Model</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\Database\Eloquent\Relations\HasMany</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">Category</span> <span class="k">extends</span> <span class="nx">Model</span>
<span class="p">{</span>
    <span class="k">use</span> <span class="nx">HasFactory</span><span class="p">;</span>

    <span class="k">protected</span> <span class="nv">$fillable</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s1">&#39;name&#39;</span><span class="p">,</span>
        <span class="s1">&#39;slug&#39;</span><span class="p">,</span>
        <span class="s1">&#39;description&#39;</span><span class="p">,</span>
    <span class="p">];</span>

    <span class="sd">/**</span>
<span class="sd">     * Get the products for the category.</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">products</span><span class="p">()</span><span class="o">:</span> <span class="nx">HasMany</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">hasMany</span><span class="p">(</span><span class="nx">Product</span><span class="o">::</span><span class="na">class</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>Propiedades del Modelo</p>
<ul>
<li><strong><code>$fillable</code></strong>: Define qu√© campos pueden ser asignados masivamente (importante para seguridad)</li>
<li><strong><code>HasFactory</code></strong>: Permite usar factories para generar datos de prueba</li>
<li><strong><code>products()</code></strong>: Define la relaci√≥n "una categor√≠a tiene muchos productos"</li>
</ul>
<p><strong>Relaci√≥n HasMany</strong>: Una categor√≠a puede tener m√∫ltiples productos, pero cada producto pertenece a una sola categor√≠a.</p>
<h3 id="4-crear-el-modelo-offer">4. Crear el Modelo Offer<a class="headerlink" href="#4-crear-el-modelo-offer" title="Permanent link">&para;</a></h3>
<p>El modelo <code>Offer</code> representa la tabla <code>offers</code> y define la relaci√≥n con los productos. Este modelo reemplazar√° el uso del array mock <code>mock-offers.php</code> de la Pr√°ctica 2.</p>
<p>Ejecuta el siguiente comando para crear el modelo:</p>
<div class="highlight"><pre><span></span><code>sail<span class="w"> </span>artisan<span class="w"> </span>make:model<span class="w"> </span>Offer
</code></pre></div>
<p>Ejemplo de respuesta</p>
<div class="highlight"><pre><span></span><code>ggarrido@mi-equipo:~/development/laravel/MyShop$<span class="w"> </span>sail<span class="w"> </span>artisan<span class="w"> </span>make:model<span class="w"> </span>Offer

<span class="w">   </span>INFO<span class="w">  </span>Model<span class="w"> </span><span class="o">[</span>app/Models/Offer.php<span class="o">]</span><span class="w"> </span>created<span class="w"> </span>successfully.
</code></pre></div>
<p>Abre el archivo <code>app/Models/Offer.php</code> y reemplaza su contenido:</p>
<p>C√≥digo PHP</p>
<div class="highlight"><pre><span></span><code><span class="cp">&lt;?php</span>

<span class="k">namespace</span> <span class="nx">App\Models</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Illuminate\Database\Eloquent\Factories\HasFactory</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\Database\Eloquent\Model</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\Database\Eloquent\Relations\HasMany</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">Offer</span> <span class="k">extends</span> <span class="nx">Model</span>
<span class="p">{</span>
    <span class="k">use</span> <span class="nx">HasFactory</span><span class="p">;</span>

    <span class="k">protected</span> <span class="nv">$fillable</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s1">&#39;name&#39;</span><span class="p">,</span>
        <span class="s1">&#39;slug&#39;</span><span class="p">,</span>
        <span class="s1">&#39;discount_percentage&#39;</span><span class="p">,</span>
        <span class="s1">&#39;description&#39;</span><span class="p">,</span>
    <span class="p">];</span>

    <span class="sd">/**</span>
<span class="sd">     * Get the products that have this offer.</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">products</span><span class="p">()</span><span class="o">:</span> <span class="nx">HasMany</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">hasMany</span><span class="p">(</span><span class="nx">Product</span><span class="o">::</span><span class="na">class</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>Relaci√≥n con Productos</p>
<p>Seg√∫n las reglas de negocio de la Pr√°ctica 2:</p>
<ul>
<li><strong>Una oferta</strong> puede aplicarse a <strong>m√∫ltiples productos</strong> (relaci√≥n 1:N)</li>
<li><strong>Un producto</strong> solo puede tener <strong>una oferta activa</strong> a la vez</li>
<li>Por eso usamos <code>HasMany</code> en el modelo <code>Offer</code></li>
</ul>
<h3 id="5-crear-el-modelo-product">5. Crear el Modelo Product<a class="headerlink" href="#5-crear-el-modelo-product" title="Permanent link">&para;</a></h3>
<p>El modelo <code>Product</code> es el m√°s importante de nuestra tienda. Representa la tabla <code>products</code> y define todas las relaciones con categor√≠as, ofertas y usuarios. Este modelo reemplazar√° el uso del array mock <code>mock-products.php</code> de la Pr√°ctica 2.</p>
<p>Ejecuta el siguiente comando para crear el modelo:</p>
<div class="highlight"><pre><span></span><code>sail<span class="w"> </span>artisan<span class="w"> </span>make:model<span class="w"> </span>Product
</code></pre></div>
<p>Ejemplo de respuesta</p>
<div class="highlight"><pre><span></span><code>ggarrido@mi-equipo:~/development/laravel/MyShop$<span class="w"> </span>sail<span class="w"> </span>artisan<span class="w"> </span>make:model<span class="w"> </span>Product

<span class="w">   </span>INFO<span class="w">  </span>Model<span class="w"> </span><span class="o">[</span>app/Models/Product.php<span class="o">]</span><span class="w"> </span>created<span class="w"> </span>successfully.
</code></pre></div>
<p>Abre el archivo <code>app/Models/Product.php</code> y reemplaza su contenido:</p>
<p>C√≥digo PHP</p>
<div class="highlight"><pre><span></span><code><span class="cp">&lt;?php</span>

<span class="k">namespace</span> <span class="nx">App\Models</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Illuminate\Database\Eloquent\Casts\Attribute</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\Database\Eloquent\Factories\HasFactory</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\Database\Eloquent\Model</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\Database\Eloquent\Relations\BelongsTo</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\Database\Eloquent\Relations\HasMany</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">Product</span> <span class="k">extends</span> <span class="nx">Model</span>
<span class="p">{</span>
    <span class="k">use</span> <span class="nx">HasFactory</span><span class="p">;</span>

    <span class="k">protected</span> <span class="nv">$fillable</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s1">&#39;name&#39;</span><span class="p">,</span>
        <span class="s1">&#39;description&#39;</span><span class="p">,</span>
        <span class="s1">&#39;price&#39;</span><span class="p">,</span>
        <span class="s1">&#39;category_id&#39;</span><span class="p">,</span>
        <span class="s1">&#39;offer_id&#39;</span><span class="p">,</span>
    <span class="p">];</span>

    <span class="sd">/**</span>
<span class="sd">     * Get the attributes that should be cast.</span>
<span class="sd">     */</span>
    <span class="k">protected</span> <span class="k">function</span> <span class="nf">casts</span><span class="p">()</span><span class="o">:</span> <span class="k">array</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="p">[</span>
            <span class="s1">&#39;price&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;decimal:2&#39;</span><span class="p">,</span>
        <span class="p">];</span>
    <span class="p">}</span>

    <span class="sd">/**</span>
<span class="sd">     * Get the category that owns the product.</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">category</span><span class="p">()</span><span class="o">:</span> <span class="nx">BelongsTo</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">belongsTo</span><span class="p">(</span><span class="nx">Category</span><span class="o">::</span><span class="na">class</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="sd">/**</span>
<span class="sd">     * Get the offer that applies to this product.</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">offer</span><span class="p">()</span><span class="o">:</span> <span class="nx">BelongsTo</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">belongsTo</span><span class="p">(</span><span class="nx">Offer</span><span class="o">::</span><span class="na">class</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="sd">/**</span>
<span class="sd">     * Get the users who have this product in their cart (N:M relationship).</span>
<span class="sd">     */</span>
      <span class="k">public</span> <span class="k">function</span> <span class="nf">users</span><span class="p">()</span>
    <span class="p">{</span>
          <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">belongsToMany</span><span class="p">(</span><span class="nx">User</span><span class="o">::</span><span class="na">class</span><span class="p">,</span> <span class="s1">&#39;product_user&#39;</span><span class="p">)</span>
              <span class="o">-&gt;</span><span class="na">withPivot</span><span class="p">(</span><span class="s1">&#39;quantity&#39;</span><span class="p">)</span>
              <span class="o">-&gt;</span><span class="na">withTimestamps</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="sd">/**</span>
<span class="sd">     * Get the product&#39;s final price after applying discounts.</span>
<span class="sd">     */</span>
    <span class="k">protected</span> <span class="k">function</span> <span class="nf">finalPrice</span><span class="p">()</span><span class="o">:</span> <span class="nx">Attribute</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="nx">Attribute</span><span class="o">::</span><span class="na">make</span><span class="p">(</span>
            <span class="nx">get</span><span class="o">:</span> <span class="k">function</span> <span class="p">()</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">offer</span> <span class="o">&amp;&amp;</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">offer</span><span class="o">-&gt;</span><span class="na">discount_percentage</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nv">$discount</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">price</span> <span class="o">*</span> <span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">offer</span><span class="o">-&gt;</span><span class="na">discount_percentage</span> <span class="o">/</span> <span class="mi">100</span><span class="p">);</span>
                    <span class="k">return</span> <span class="nb">round</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">price</span> <span class="o">-</span> <span class="nv">$discount</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
                <span class="p">}</span>
                <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">price</span><span class="p">;</span>
            <span class="p">},</span>
        <span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>Accessor finalPrice()</p>
<p>Hemos a√±adido un <strong>accessor</strong> <code>finalPrice()</code> que calcula autom√°ticamente el precio final del producto aplicando el descuento de la oferta si existe. Esto simplifica enormemente el c√≥digo en las vistas, eliminando la necesidad de bloques <code>@php</code> para calcular precios.</p>
<p>Relaciones del Modelo Product</p>
<ul>
<li><strong><code>category()</code></strong>: Cada producto pertenece a una categor√≠a (BelongsTo)</li>
<li><strong><code>offer()</code></strong>: Cada producto puede tener una oferta (BelongsTo, nullable)</li>
<li><strong><code>users()</code></strong>: Relaci√≥n N:M con usuarios a trav√©s de la tabla pivot <code>product_user</code></li>
</ul>
<p><strong><code>$casts</code></strong>: Convierte autom√°ticamente el campo <code>price</code> a decimal con 2 decimales.</p>
<p><strong>Acceso a carritos</strong>: <code>$product-&gt;users</code> devuelve los usuarios que tienen este producto en su carrito.</p>
<h2 id="fase-4-crear-los-seeders">FASE 4: Crear los Seeders<a class="headerlink" href="#fase-4-crear-los-seeders" title="Permanent link">&para;</a></h2>
<h3 id="1-que-son-los-seeders">1. ¬øQu√© son los Seeders?<a class="headerlink" href="#1-que-son-los-seeders" title="Permanent link">&para;</a></h3>
<p>Los seeders son clases que permiten poblar la base de datos con datos iniciales. En lugar de insertar datos manualmente en MySQL, los seeders automatizan este proceso.</p>
<p>En la Pr√°ctica 2 creaste archivos mock con datos de prueba (<code>mock-categories.php</code>, <code>mock-products.php</code>, <code>mock-offers.php</code>, <code>mock-cart.php</code>). Ahora vamos a <strong>reutilizar esos mismos datos</strong> en los seeders para poblar la base de datos real.</p>
<p>Reutilizando Datos Mock</p>
<p>En lugar de duplicar los datos en los seeders, reutilizaremos el trait <code>LoadsMockData</code> creado en la Pr√°ctica 2. Esto mantiene la consistencia de datos y evita duplicaci√≥n de c√≥digo.</p>
<p><strong>Ventajas</strong>:</p>
<ul>
<li><strong>Consistencia</strong>: Los mismos datos en desarrollo y en la base de datos</li>
<li><strong>Mantenimiento</strong>: Un solo lugar para modificar los datos</li>
<li><strong>DRY</strong>: No se duplica c√≥digo ni informaci√≥n</li>
<li><strong>Migraci√≥n suave</strong>: Transici√≥n transparente de mock a base de datos real</li>
</ul>
<h3 id="2-crear-el-seeder-de-usuarios">2. Crear el Seeder de Usuarios<a class="headerlink" href="#2-crear-el-seeder-de-usuarios" title="Permanent link">&para;</a></h3>
<p>Como no tenemos datos mock de usuarios en la Pr√°ctica 2, crearemos algunos usuarios de prueba para la funcionalidad del carrito usando el sistema de Factories de Laravel.</p>
<p>Ejecuta el siguiente comando para crear el seeder:</p>
<div class="highlight"><pre><span></span><code>sail<span class="w"> </span>artisan<span class="w"> </span>make:seeder<span class="w"> </span>UserSeeder
</code></pre></div>
<p>Ejemplo de respuesta</p>
<div class="highlight"><pre><span></span><code>ggarrido@mi-equipo:~/development/laravel/MyShop$<span class="w"> </span>sail<span class="w"> </span>artisan<span class="w"> </span>make:seeder<span class="w"> </span>UserSeeder

<span class="w">   </span>INFO<span class="w">  </span>Seeder<span class="w"> </span><span class="o">[</span>database/seeders/UserSeeder.php<span class="o">]</span><span class="w"> </span>created<span class="w"> </span>successfully.
</code></pre></div>
<p>Abre el archivo <code>database/seeders/UserSeeder.php</code> y reemplaza su contenido:</p>
<p>C√≥digo PHP</p>
<div class="highlight"><pre><span></span><code><span class="cp">&lt;?php</span>

<span class="k">namespace</span> <span class="nx">Database\Seeders</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">App\Models\User</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\Database\Seeder</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">UserSeeder</span> <span class="k">extends</span> <span class="nx">Seeder</span>
<span class="p">{</span>
    <span class="sd">/**</span>
<span class="sd">     * Run the database seeds.</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">run</span><span class="p">()</span><span class="o">:</span> <span class="nx">void</span>
    <span class="p">{</span>
        <span class="c1">// Crear un usuario espec√≠fico con datos conocidos</span>
        <span class="nx">User</span><span class="o">::</span><span class="na">factory</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">create</span><span class="p">([</span>
            <span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Usuario Demo&#39;</span><span class="p">,</span>
            <span class="s1">&#39;email&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;demo@example.com&#39;</span><span class="p">,</span>
        <span class="p">]);</span>

        <span class="c1">// Crear usuarios adicionales con datos aleatorios</span>
        <span class="nx">User</span><span class="o">::</span><span class="na">factory</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">create</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>¬øC√≥mo funciona?</p>
<ol>
<li><strong><code>User::factory()</code></strong>: Usa la factory predefinida de Laravel para generar usuarios</li>
<li><strong><code>create([...])</code></strong>: Crea un usuario con datos espec√≠ficos (sobrescribe los valores por defecto)</li>
<li><strong><code>factory(2)-&gt;create()</code></strong>: Crea 2 usuarios adicionales con datos aleatorios generados por Faker</li>
</ol>
<p><strong>Resultado</strong>: Se crean 3 usuarios en total (1 con email conocido + 2 aleatorios)</p>
<h4 id="ejemplo-de-userfactory-ya-incluida-en-laravel">Ejemplo de UserFactory (ya incluida en Laravel)<a class="headerlink" href="#ejemplo-de-userfactory-ya-incluida-en-laravel" title="Permanent link">&para;</a></h4>
<p>Laravel incluye por defecto una factory para usuarios en <code>database/factories/UserFactory.php</code>:</p>
<p>C√≥digo de UserFactory (Referencia)</p>
<div class="highlight"><pre><span></span><code><span class="cp">&lt;?php</span>

<span class="k">namespace</span> <span class="nx">Database\Factories</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Illuminate\Database\Eloquent\Factories\Factory</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\Support\Facades\Hash</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\Support\Str</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">UserFactory</span> <span class="k">extends</span> <span class="nx">Factory</span>
<span class="p">{</span>
    <span class="k">protected</span> <span class="k">static</span> <span class="o">?</span><span class="nx">string</span> <span class="nv">$password</span><span class="p">;</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">definition</span><span class="p">()</span><span class="o">:</span> <span class="k">array</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="p">[</span>
            <span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="nx">fake</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">name</span><span class="p">(),</span>
            <span class="s1">&#39;email&#39;</span> <span class="o">=&gt;</span> <span class="nx">fake</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">unique</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">safeEmail</span><span class="p">(),</span>
            <span class="s1">&#39;email_verified_at&#39;</span> <span class="o">=&gt;</span> <span class="nx">now</span><span class="p">(),</span>
            <span class="s1">&#39;password&#39;</span> <span class="o">=&gt;</span> <span class="k">static</span><span class="o">::</span><span class="nv">$password</span> <span class="o">??=</span> <span class="nx">Hash</span><span class="o">::</span><span class="na">make</span><span class="p">(</span><span class="s1">&#39;password&#39;</span><span class="p">),</span>
            <span class="s1">&#39;remember_token&#39;</span> <span class="o">=&gt;</span> <span class="nx">Str</span><span class="o">::</span><span class="na">random</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span>
        <span class="p">];</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">unverified</span><span class="p">()</span><span class="o">:</span> <span class="k">static</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">state</span><span class="p">(</span><span class="nx">fn</span> <span class="p">(</span><span class="k">array</span> <span class="nv">$attributes</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">[</span>
            <span class="s1">&#39;email_verified_at&#39;</span> <span class="o">=&gt;</span> <span class="k">null</span><span class="p">,</span>
        <span class="p">]);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>¬øC√≥mo funciona la UserFactory?</p>
<ol>
<li><strong>name</strong>: Genera un nombre aleatorio usando Faker (<code>fake()-&gt;name()</code>).</li>
<li><strong>email</strong>: Genera un email √∫nico y seguro con Faker (<code>fake()-&gt;unique()-&gt;safeEmail()</code>).</li>
<li><strong>email_verified_at</strong>: Asigna la fecha y hora actual para indicar que el email est√° verificado (<code>now()</code>).</li>
<li><strong>password</strong>: Cifra la contrase√±a por defecto usando el helper de Laravel <code>Hash::make('password')</code>.</li>
<li><strong>remember_token</strong>: Genera un token aleatorio de 10 caracteres para la funcionalidad de "recordar sesi√≥n" (<code>Str::random(10)</code>).</li>
<li><strong>unverified()</strong>: Permite crear usuarios con el email sin verificar, sobreescribiendo el campo <code>email_verified_at</code> a <code>null</code>.</li>
</ol>
<h3 id="3-crear-el-seeder-de-categorias">3. Crear el Seeder de Categor√≠as<a class="headerlink" href="#3-crear-el-seeder-de-categorias" title="Permanent link">&para;</a></h3>
<p>El <code>CategorySeeder</code> poblar√° la tabla <code>categories</code> con datos iniciales reutilizando los datos del archivo <code>database/data/mock-categories.php</code> de la Pr√°ctica 2.</p>
<p>Ejecuta el siguiente comando para crear el seeder:</p>
<div class="highlight"><pre><span></span><code>sail<span class="w"> </span>artisan<span class="w"> </span>make:seeder<span class="w"> </span>CategorySeeder
</code></pre></div>
<p>Ejemplo de respuesta</p>
<div class="highlight"><pre><span></span><code>ggarrido@mi-equipo:~/development/laravel/MyShop$<span class="w"> </span>sail<span class="w"> </span>artisan<span class="w"> </span>make:seeder<span class="w"> </span>CategorySeeder

<span class="w">   </span>INFO<span class="w">  </span>Seeder<span class="w"> </span><span class="o">[</span>database/seeders/CategorySeeder.php<span class="o">]</span><span class="w"> </span>created<span class="w"> </span>successfully.
</code></pre></div>
<p>Abre el archivo <code>database/seeders/CategorySeeder.php</code> y reemplaza su contenido:</p>
<p>C√≥digo PHP</p>
<div class="highlight"><pre><span></span><code><span class="cp">&lt;?php</span>

<span class="k">namespace</span> <span class="nx">Database\Seeders</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">App\Models\Category</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">App\Traits\LoadsMockData</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\Database\Seeder</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">CategorySeeder</span> <span class="k">extends</span> <span class="nx">Seeder</span>
<span class="p">{</span>
    <span class="k">use</span> <span class="nx">LoadsMockData</span><span class="p">;</span>

    <span class="sd">/**</span>
<span class="sd">     * Run the database seeds.</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">run</span><span class="p">()</span><span class="o">:</span> <span class="nx">void</span>
    <span class="p">{</span>
        <span class="nv">$categories</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">getCategories</span><span class="p">();</span>

        <span class="k">foreach</span> <span class="p">(</span><span class="nv">$categories</span> <span class="k">as</span> <span class="nv">$category</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">Category</span><span class="o">::</span><span class="na">create</span><span class="p">(</span><span class="nv">$category</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>¬øC√≥mo funciona?</p>
<ol>
<li><strong><code>use LoadsMockData</code></strong>: Reutiliza el trait de la Pr√°ctica 2</li>
<li><strong><code>$this-&gt;getCategories()</code></strong>: Carga los datos desde <code>database/data/mock-categories.php</code></li>
<li><strong><code>Category::create($category)</code></strong>: Inserta cada categor√≠a en la base de datos</li>
</ol>
<p><strong>Resultado</strong>: Las categor√≠as de tu archivo mock se insertan autom√°ticamente en la tabla <code>categories</code>.</p>
<h3 id="4-crear-el-seeder-de-ofertas">4. Crear el Seeder de Ofertas<a class="headerlink" href="#4-crear-el-seeder-de-ofertas" title="Permanent link">&para;</a></h3>
<p>El <code>OfferSeeder</code> poblar√° la tabla <code>offers</code> con datos iniciales reutilizando los datos del archivo <code>database/data/mock-offers.php</code> de la Pr√°ctica 2.</p>
<p>Ejecuta el siguiente comando para crear el seeder:</p>
<div class="highlight"><pre><span></span><code>sail<span class="w"> </span>artisan<span class="w"> </span>make:seeder<span class="w"> </span>OfferSeeder
</code></pre></div>
<p>Ejemplo de respuesta</p>
<div class="highlight"><pre><span></span><code>ggarrido@mi-equipo:~/development/laravel/MyShop$<span class="w"> </span>sail<span class="w"> </span>artisan<span class="w"> </span>make:seeder<span class="w"> </span>OfferSeeder

<span class="w">   </span>INFO<span class="w">  </span>Seeder<span class="w"> </span><span class="o">[</span>database/seeders/OfferSeeder.php<span class="o">]</span><span class="w"> </span>created<span class="w"> </span>successfully.
</code></pre></div>
<p>Abre el archivo <code>database/seeders/OfferSeeder.php</code> y reemplaza su contenido:</p>
<p>C√≥digo PHP</p>
<div class="highlight"><pre><span></span><code><span class="cp">&lt;?php</span>

<span class="k">namespace</span> <span class="nx">Database\Seeders</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">App\Models\Offer</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">App\Traits\LoadsMockData</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\Database\Seeder</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">OfferSeeder</span> <span class="k">extends</span> <span class="nx">Seeder</span>
<span class="p">{</span>
    <span class="k">use</span> <span class="nx">LoadsMockData</span><span class="p">;</span>

    <span class="sd">/**</span>
<span class="sd">     * Run the database seeds.</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">run</span><span class="p">()</span><span class="o">:</span> <span class="nx">void</span>
    <span class="p">{</span>
        <span class="nv">$offers</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">getOffers</span><span class="p">();</span>

        <span class="k">foreach</span> <span class="p">(</span><span class="nv">$offers</span> <span class="k">as</span> <span class="nv">$offer</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">Offer</span><span class="o">::</span><span class="na">create</span><span class="p">(</span><span class="nv">$offer</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>¬øC√≥mo funciona?</p>
<ol>
<li><strong><code>use LoadsMockData</code></strong>: Reutiliza el trait de la Pr√°ctica 2</li>
<li><strong><code>$this-&gt;getOffers()</code></strong>: Carga los datos desde <code>database/data/mock-offers.php</code></li>
<li><strong><code>Offer::create($offer)</code></strong>: Inserta cada oferta en la base de datos</li>
</ol>
<p><strong>Resultado</strong>: Las ofertas de tu archivo mock se insertan autom√°ticamente en la tabla <code>offers</code>.</p>
<h3 id="5-crear-el-seeder-de-productos">5. Crear el Seeder de Productos<a class="headerlink" href="#5-crear-el-seeder-de-productos" title="Permanent link">&para;</a></h3>
<p>El <code>ProductSeeder</code> poblar√° la tabla <code>products</code> con datos iniciales reutilizando los datos del archivo <code>database/data/mock-products.php</code> de la Pr√°ctica 2.</p>
<p><strong>Importante</strong>: Los productos deben crearse <strong>despu√©s</strong> de las categor√≠as y ofertas, ya que tienen claves for√°neas que referencian esas tablas.</p>
<p>Ejecuta el siguiente comando para crear el seeder:</p>
<div class="highlight"><pre><span></span><code>sail<span class="w"> </span>artisan<span class="w"> </span>make:seeder<span class="w"> </span>ProductSeeder
</code></pre></div>
<p>Ejemplo de respuesta</p>
<div class="highlight"><pre><span></span><code>ggarrido@mi-equipo:~/development/laravel/MyShop$<span class="w"> </span>sail<span class="w"> </span>artisan<span class="w"> </span>make:seeder<span class="w"> </span>ProductSeeder

<span class="w">   </span>INFO<span class="w">  </span>Seeder<span class="w"> </span><span class="o">[</span>database/seeders/ProductSeeder.php<span class="o">]</span><span class="w"> </span>created<span class="w"> </span>successfully.
</code></pre></div>
<p>Abre el archivo <code>database/seeders/ProductSeeder.php</code> y reemplaza su contenido:</p>
<p>C√≥digo PHP</p>
<div class="highlight"><pre><span></span><code><span class="cp">&lt;?php</span>

<span class="k">namespace</span> <span class="nx">Database\Seeders</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">App\Models\Product</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">App\Traits\LoadsMockData</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\Database\Seeder</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">ProductSeeder</span> <span class="k">extends</span> <span class="nx">Seeder</span>
<span class="p">{</span>
    <span class="k">use</span> <span class="nx">LoadsMockData</span><span class="p">;</span>

    <span class="sd">/**</span>
<span class="sd">     * Run the database seeds.</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">run</span><span class="p">()</span><span class="o">:</span> <span class="nx">void</span>
    <span class="p">{</span>
        <span class="nv">$products</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">getProducts</span><span class="p">();</span>

        <span class="k">foreach</span> <span class="p">(</span><span class="nv">$products</span> <span class="k">as</span> <span class="nv">$product</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">Product</span><span class="o">::</span><span class="na">create</span><span class="p">(</span><span class="nv">$product</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>¬øC√≥mo funciona?</p>
<ol>
<li><strong><code>use LoadsMockData</code></strong>: Reutiliza el trait de la Pr√°ctica 2</li>
<li><strong><code>$this-&gt;getProducts()</code></strong>: Carga los datos desde <code>database/data/mock-products.php</code></li>
<li><strong><code>Product::create($product)</code></strong>: Inserta cada producto en la base de datos</li>
</ol>
<p><strong>Resultado</strong>: Los productos de tu archivo mock se insertan autom√°ticamente en la tabla <code>products</code> con sus relaciones a categor√≠as y ofertas.</p>
<p><strong>Importante</strong>: Laravel maneja autom√°ticamente las claves for√°neas (<code>category_id</code>, <code>offer_id</code>) bas√°ndose en los IDs de los datos mock.</p>
<h3 id="6-crear-el-seeder-del-carrito">6. Crear el Seeder del Carrito<a class="headerlink" href="#6-crear-el-seeder-del-carrito" title="Permanent link">&para;</a></h3>
<p>El <code>ProductUserSeeder</code> poblar√° la tabla <code>product_user</code> con datos iniciales reutilizando los datos del archivo <code>database/data/mock-cart.php</code> de la Pr√°ctica 2, pero adapt√°ndolos para usar la relaci√≥n N:M entre usuarios y productos.</p>
<p><strong>Importante</strong>: Los items del carrito deben crearse <strong>despu√©s</strong> de los usuarios y productos, ya que la tabla pivot referencia ambas tablas.</p>
<p>Ejecuta el siguiente comando para crear el seeder:</p>
<div class="highlight"><pre><span></span><code>sail<span class="w"> </span>artisan<span class="w"> </span>make:seeder<span class="w"> </span>ProductUserSeeder
</code></pre></div>
<p>Ejemplo de respuesta</p>
<div class="highlight"><pre><span></span><code>ggarrido@mi-equipo:~/development/laravel/MyShop$<span class="w"> </span>sail<span class="w"> </span>artisan<span class="w"> </span>make:seeder<span class="w"> </span>ProductUserSeeder

<span class="w">   </span>INFO<span class="w">  </span>Seeder<span class="w"> </span><span class="o">[</span>database/seeders/ProductUserSeeder.php<span class="o">]</span><span class="w"> </span>created<span class="w"> </span>successfully.
</code></pre></div>
<p>Abre el archivo <code>database/seeders/ProductUserSeeder.php</code> y reemplaza su contenido:</p>
<p>C√≥digo PHP</p>
<div class="highlight"><pre><span></span><code><span class="cp">&lt;?php</span>

<span class="k">namespace</span> <span class="nx">Database\Seeders</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">App\Models\User</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">App\Traits\LoadsMockData</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\Database\Seeder</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">ProductUserSeeder</span> <span class="k">extends</span> <span class="nx">Seeder</span>
<span class="p">{</span>
    <span class="k">use</span> <span class="nx">LoadsMockData</span><span class="p">;</span>

    <span class="sd">/**</span>
<span class="sd">     * Run the database seeds.</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">run</span><span class="p">()</span><span class="o">:</span> <span class="nx">void</span>
    <span class="p">{</span>
        <span class="nv">$cartItems</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">getCart</span><span class="p">();</span>

        <span class="c1">// Obtener el primer usuario</span>
        <span class="nv">$user</span> <span class="o">=</span> <span class="nx">User</span><span class="o">::</span><span class="na">first</span><span class="p">();</span>

        <span class="k">foreach</span> <span class="p">(</span><span class="nv">$cartItems</span> <span class="k">as</span> <span class="nv">$item</span><span class="p">)</span> <span class="p">{</span>
            <span class="c1">// Usar attach() para a√±adir productos al carrito del usuario</span>
            <span class="nv">$user</span><span class="o">-&gt;</span><span class="na">products</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">attach</span><span class="p">(</span><span class="nv">$item</span><span class="p">[</span><span class="s1">&#39;product_id&#39;</span><span class="p">],</span> <span class="p">[</span>
                <span class="s1">&#39;quantity&#39;</span> <span class="o">=&gt;</span> <span class="nv">$item</span><span class="p">[</span><span class="s1">&#39;quantity&#39;</span><span class="p">],</span>
            <span class="p">]);</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>¬øC√≥mo funciona?</p>
<ol>
<li><strong><code>use LoadsMockData</code></strong>: Reutiliza el trait de la Pr√°ctica 2</li>
<li><strong><code>$this-&gt;getCart()</code></strong>: Carga los datos desde <code>database/data/mock-cart.php</code></li>
<li><strong><code>User::first()</code></strong>: Obtiene el primer usuario creado</li>
<li><strong><code>attach()</code></strong>: M√©todo de Laravel para a√±adir registros a una tabla pivot</li>
<li><strong>Campo adicional</strong>: <code>quantity</code> se pasa como segundo par√°metro</li>
</ol>
<p><strong>Resultado</strong>: Los items del carrito de tu archivo mock se insertan autom√°ticamente en la tabla <code>product_user</code> usando la relaci√≥n N:M.</p>
<h3 id="7-actualiza-el-seeder-principal">7. Actualiza el Seeder Principal<a class="headerlink" href="#7-actualiza-el-seeder-principal" title="Permanent link">&para;</a></h3>
<p>El <code>DatabaseSeeder</code> es el seeder principal que ejecuta todos los dem√°s seeders en el orden correcto. Es importante ejecutarlos en el orden adecuado para respetar las claves for√°neas.</p>
<p>Abre el archivo <code>database/seeders/DatabaseSeeder.php</code> y reemplaza su contenido:</p>
<p>C√≥digo PHP</p>
<div class="highlight"><pre><span></span><code><span class="cp">&lt;?php</span>

<span class="k">namespace</span> <span class="nx">Database\Seeders</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Illuminate\Database\Seeder</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">DatabaseSeeder</span> <span class="k">extends</span> <span class="nx">Seeder</span>
<span class="p">{</span>
    <span class="sd">/**</span>
<span class="sd">     * Seed the application&#39;s database.</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">run</span><span class="p">()</span><span class="o">:</span> <span class="nx">void</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">call</span><span class="p">([</span>
            <span class="nx">UserSeeder</span><span class="o">::</span><span class="na">class</span><span class="p">,</span>
            <span class="nx">CategorySeeder</span><span class="o">::</span><span class="na">class</span><span class="p">,</span>
            <span class="nx">OfferSeeder</span><span class="o">::</span><span class="na">class</span><span class="p">,</span>
            <span class="nx">ProductSeeder</span><span class="o">::</span><span class="na">class</span><span class="p">,</span>
            <span class="nx">ProductUserSeeder</span><span class="o">::</span><span class="na">class</span><span class="p">,</span>
        <span class="p">]);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>Orden de Ejecuci√≥n</p>
<p>Los seeders se ejecutan en este orden para respetar las claves for√°neas:</p>
<ol>
<li><strong>UserSeeder</strong>: Crea los usuarios</li>
<li><strong>CategorySeeder</strong>: Crea las categor√≠as</li>
<li><strong>OfferSeeder</strong>: Crea las ofertas</li>
<li><strong>ProductSeeder</strong>: Crea los productos (referencia categor√≠as y ofertas)</li>
<li><strong>ProductUserSeeder</strong>: Puebla la tabla pivot <code>product_user</code> (referencia usuarios y productos)</li>
</ol>
<h3 id="8-ejecutar-los-seeders">8. Ejecutar los Seeders<a class="headerlink" href="#8-ejecutar-los-seeders" title="Permanent link">&para;</a></h3>
<p>Ahora que tenemos todos los seeders configurados, es el momento de poblar la base de datos con datos iniciales reutilizando los datos mock de la Pr√°ctica 2.</p>
<p>Ejecuta el siguiente comando para ejecutar todos los seeders:</p>
<div class="highlight"><pre><span></span><code>sail<span class="w"> </span>artisan<span class="w"> </span>migrate:refresh<span class="w"> </span>--seed
</code></pre></div>
<p>Ejemplo de respuesta</p>
<div class="highlight"><pre><span></span><code>ggarrido@mi-equipo:~/development/laravel/MyShop$<span class="w"> </span>sail<span class="w"> </span>artisan<span class="w"> </span>db:seed

<span class="w">    </span>INFO<span class="w">  </span>Rolling<span class="w"> </span>back<span class="w"> </span>migrations.

<span class="w">    </span>2025_10_02_081337_create_product_user_table<span class="w"> </span>...............<span class="w"> </span><span class="m">70</span>.39ms<span class="w"> </span>DONE
<span class="w">    </span>2025_10_01_163250_create_products_table<span class="w"> </span>...................<span class="w"> </span><span class="m">44</span>.02ms<span class="w"> </span>DONE
<span class="w">    </span>2025_10_01_163209_create_offers_table<span class="w"> </span>.....................<span class="w"> </span><span class="m">46</span>.77ms<span class="w"> </span>DONE
<span class="w">    </span>2025_10_01_163110_create_categories_table<span class="w"> </span>.................<span class="w"> </span><span class="m">40</span>.00ms<span class="w"> </span>DONE
<span class="w">    </span>2025_09_30_140225_create_telescope_entries_table<span class="w"> </span>..........<span class="w"> </span><span class="m">162</span>.68ms<span class="w"> </span>DONE
<span class="w">    </span>0001_01_01_000002_create_jobs_table<span class="w"> </span>.......................<span class="w"> </span><span class="m">126</span>.48ms<span class="w"> </span>DONE
<span class="w">    </span>0001_01_01_000001_create_cache_table<span class="w"> </span>......................<span class="w"> </span><span class="m">87</span>.49ms<span class="w"> </span>DONE
<span class="w">    </span>0001_01_01_000000_create_users_table<span class="w"> </span>......................<span class="w"> </span><span class="m">244</span>.69ms<span class="w"> </span>DONE

<span class="w">   </span>INFO<span class="w">  </span>Running<span class="w"> </span>migrations.

<span class="w">   </span>0001_01_01_000000_create_users_table<span class="w"> </span>........................<span class="w"> </span><span class="m">506</span>.17ms<span class="w"> </span>DONE
<span class="w">   </span>0001_01_01_000001_create_cache_table<span class="w"> </span>........................<span class="w"> </span><span class="m">127</span>.41ms<span class="w"> </span>DONE
<span class="w">   </span>0001_01_01_000002_create_jobs_table<span class="w"> </span>.........................<span class="w"> </span><span class="m">325</span>.37ms<span class="w"> </span>DONE
<span class="w">   </span>2025_09_30_140225_create_telescope_entries_table<span class="w"> </span>............<span class="w"> </span><span class="m">655</span>.89ms<span class="w"> </span>DONE
<span class="w">   </span>2025_10_01_163110_create_categories_table<span class="w"> </span>...................<span class="w"> </span><span class="m">126</span>.18ms<span class="w"> </span>DONE
<span class="w">   </span>2025_10_01_163209_create_offers_table<span class="w"> </span>.......................<span class="w"> </span><span class="m">115</span>.36ms<span class="w"> </span>DONE
<span class="w">   </span>2025_10_01_163250_create_products_table<span class="w"> </span>.....................<span class="w"> </span><span class="m">384</span>.76ms<span class="w"> </span>DONE
<span class="w">   </span>2025_10_02_081337_create_product_user_table<span class="w"> </span>.................<span class="w"> </span><span class="m">217</span>.65ms<span class="w"> </span>DONE

<span class="w">   </span>INFO<span class="w">  </span>Seeding<span class="w"> </span>database.

<span class="w">   </span>Database<span class="se">\S</span>eeders<span class="se">\U</span>serSeeder<span class="w"> </span>.............................<span class="w"> </span>RUNNING
<span class="w">   </span>Database<span class="se">\S</span>eeders<span class="se">\U</span>serSeeder<span class="w"> </span>.............................<span class="w"> </span><span class="m">68</span><span class="w"> </span>ms<span class="w"> </span>DONE
<span class="w">   </span>Database<span class="se">\S</span>eeders<span class="se">\C</span>ategorySeeder<span class="w"> </span>.............................<span class="w"> </span>RUNNING
<span class="w">   </span>Database<span class="se">\S</span>eeders<span class="se">\C</span>ategorySeeder<span class="w"> </span>.............................<span class="w"> </span><span class="m">68</span><span class="w"> </span>ms<span class="w"> </span>DONE
<span class="w">   </span>Database<span class="se">\S</span>eeders<span class="se">\O</span>fferSeeder<span class="w"> </span>................................<span class="w"> </span>RUNNING
<span class="w">   </span>Database<span class="se">\S</span>eeders<span class="se">\O</span>fferSeeder<span class="w"> </span>................................<span class="w"> </span><span class="m">38</span><span class="w"> </span>ms<span class="w"> </span>DONE
<span class="w">   </span>Database<span class="se">\S</span>eeders<span class="se">\P</span>roductSeeder<span class="w"> </span>..............................<span class="w"> </span>RUNNING
<span class="w">   </span>Database<span class="se">\S</span>eeders<span class="se">\P</span>roductSeeder<span class="w"> </span>..............................<span class="w"> </span><span class="m">79</span><span class="w"> </span>ms<span class="w"> </span>DONE
<span class="w">   </span>Database<span class="se">\S</span>eeders<span class="se">\P</span>roductUserSeeder<span class="w"> </span>..........................<span class="w"> </span>RUNNING
<span class="w">   </span>Database<span class="se">\S</span>eeders<span class="se">\P</span>roductUserSeeder<span class="w"> </span>..........................<span class="w"> </span><span class="m">50</span><span class="w"> </span>ms<span class="w"> </span>DONE
</code></pre></div>
<h2 id="fase-5-actualizar-los-controladores">FASE 5: Actualizar los Controladores<a class="headerlink" href="#fase-5-actualizar-los-controladores" title="Permanent link">&para;</a></h2>
<h3 id="1-por-que-actualizar-los-controladores">1. ¬øPor qu√© Actualizar los Controladores?<a class="headerlink" href="#1-por-que-actualizar-los-controladores" title="Permanent link">&para;</a></h3>
<p>En la Pr√°ctica 2, los controladores usaban el trait <code>LoadsMockData</code> para cargar datos desde archivos PHP. Ahora que tenemos una base de datos real con modelos Eloquent, necesitamos <strong>eliminar completamente</strong> el uso del trait <code>LoadsMockData</code> en los controladores y usar consultas a la base de datos.</p>
<p>Eliminaci√≥n del Trait en Controladores</p>
<p>El trait <code>LoadsMockData</code> <strong>SOLO</strong> debe usarse en los seeders para reutilizar los datos mock. Los controladores deben usar <strong>exclusivamente</strong> modelos Eloquent. Elimina <code>use App\Traits\LoadsMockData;</code> y <code>use LoadsMockData;</code> de los controladores.</p>
<h3 id="2-actualizar-productcontroller">2. Actualizar ProductController<a class="headerlink" href="#2-actualizar-productcontroller" title="Permanent link">&para;</a></h3>
<p>El <code>ProductController</code> es el controlador m√°s importante de nuestra tienda. Necesitamos reemplazar el uso del trait <code>LoadsMockData</code> por consultas Eloquent directas.</p>
<p>Abre el archivo <code>app/Http/Controllers/ProductController.php</code> y reemplaza su contenido:</p>
<p>C√≥digo PHP</p>
<div class="highlight"><pre><span></span><code><span class="cp">&lt;?php</span>

<span class="k">namespace</span> <span class="nx">App\Http\Controllers</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">App\Models\Product</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">App\Models\Category</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">App\Models\Offer</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\Http\Request</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\View\View</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">ProductController</span> <span class="k">extends</span> <span class="nx">Controller</span>
<span class="p">{</span>
    <span class="sd">/**</span>
<span class="sd">     * Display a listing of the resource.</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">index</span><span class="p">()</span><span class="o">:</span> <span class="nx">View</span>
    <span class="p">{</span>
        <span class="nv">$products</span> <span class="o">=</span> <span class="nx">Product</span><span class="o">::</span><span class="na">with</span><span class="p">([</span><span class="s1">&#39;category&#39;</span><span class="p">,</span> <span class="s1">&#39;offer&#39;</span><span class="p">])</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">();</span>

        <span class="k">return</span> <span class="nx">view</span><span class="p">(</span><span class="s1">&#39;products.index&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;products&#39;</span> <span class="o">=&gt;</span> <span class="nv">$products</span><span class="p">]);</span>
    <span class="p">}</span>

    <span class="sd">/**</span>
<span class="sd">     * Display only products that have an active offer</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">onSale</span><span class="p">()</span><span class="o">:</span> <span class="nx">View</span>
    <span class="p">{</span>
        <span class="nv">$products</span> <span class="o">=</span> <span class="nx">Product</span><span class="o">::</span><span class="na">with</span><span class="p">([</span><span class="s1">&#39;category&#39;</span><span class="p">,</span> <span class="s1">&#39;offer&#39;</span><span class="p">])</span>
            <span class="o">-&gt;</span><span class="na">whereNotNull</span><span class="p">(</span><span class="s1">&#39;offer_id&#39;</span><span class="p">)</span>
            <span class="o">-&gt;</span><span class="na">get</span><span class="p">();</span>

        <span class="k">return</span> <span class="nx">view</span><span class="p">(</span><span class="s1">&#39;products.index&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;products&#39;</span> <span class="o">=&gt;</span> <span class="nv">$products</span><span class="p">]);</span>
    <span class="p">}</span>

    <span class="sd">/**</span>
<span class="sd">     * Show the form for creating a new resource.</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">create</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="c1">// En una aplicaci√≥n real, aqu√≠ se mostrar√≠a un formulario para crear un nuevo producto.</span>
        <span class="c1">// En este ejemplo, simplemente redirigimos a la lista de productos.</span>
        <span class="k">return</span> <span class="nx">redirect</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">route</span><span class="p">(</span><span class="s1">&#39;products.index&#39;</span><span class="p">)</span>
            <span class="o">-&gt;</span><span class="na">with</span><span class="p">(</span><span class="s1">&#39;success&#39;</span><span class="p">,</span> <span class="s1">&#39;Formulario de creaci√≥n de producto (simulado)&#39;</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="sd">/**</span>
<span class="sd">     * Store a newly created resource in storage.</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">store</span><span class="p">(</span><span class="nx">Request</span> <span class="nv">$request</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="c1">// En una aplicaci√≥n real, aqu√≠ se guardar√≠a en la base de datos</span>
        <span class="c1">// Por ahora, solo redirigimos a la lista de productos</span>
        <span class="k">return</span> <span class="nx">redirect</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">route</span><span class="p">(</span><span class="s1">&#39;products.index&#39;</span><span class="p">)</span>
            <span class="o">-&gt;</span><span class="na">with</span><span class="p">(</span><span class="s1">&#39;success&#39;</span><span class="p">,</span> <span class="s1">&#39;Producto creado exitosamente&#39;</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="sd">/**</span>
<span class="sd">     * Display the specified resource.</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">show</span><span class="p">(</span><span class="nx">string</span> <span class="nv">$id</span><span class="p">)</span><span class="o">:</span> <span class="nx">View</span>
    <span class="p">{</span>
        <span class="c1">// Validate ID format</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nb">is_numeric</span><span class="p">(</span><span class="nv">$id</span><span class="p">)</span> <span class="o">||</span> <span class="nv">$id</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">abort</span><span class="p">(</span><span class="mi">404</span><span class="p">,</span> <span class="s1">&#39;ID de producto inv√°lido&#39;</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="nv">$product</span> <span class="o">=</span> <span class="nx">Product</span><span class="o">::</span><span class="na">with</span><span class="p">([</span><span class="s1">&#39;category&#39;</span><span class="p">,</span> <span class="s1">&#39;offer&#39;</span><span class="p">])</span><span class="o">-&gt;</span><span class="na">find</span><span class="p">(</span><span class="nv">$id</span><span class="p">);</span>

        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nv">$product</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">abort</span><span class="p">(</span><span class="mi">404</span><span class="p">,</span> <span class="s1">&#39;Producto no encontrado&#39;</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="nv">$category</span> <span class="o">=</span> <span class="nv">$product</span><span class="o">-&gt;</span><span class="na">category</span><span class="p">;</span>

        <span class="k">return</span> <span class="nx">view</span><span class="p">(</span><span class="s1">&#39;products.show&#39;</span><span class="p">,</span> <span class="nb">compact</span><span class="p">(</span><span class="s1">&#39;product&#39;</span><span class="p">,</span> <span class="s1">&#39;category&#39;</span><span class="p">));</span>
    <span class="p">}</span>

    <span class="sd">/**</span>
<span class="sd">     * Show the form for editing the specified resource.</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">edit</span><span class="p">(</span><span class="nx">string</span> <span class="nv">$id</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="c1">// En una aplicaci√≥n real, aqu√≠ se obtendr√≠an los datos del producto correspondiente al id recibido,</span>
        <span class="c1">// as√≠ como las listas necesarias (por ejemplo, categor√≠as, ofertas, etc.) para mostrarlas en un formulario de edici√≥n.</span>
        <span class="c1">// En este ejemplo, simplemente redirigimos al detalle del producto.</span>
        <span class="k">return</span> <span class="nx">redirect</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">route</span><span class="p">(</span><span class="s1">&#39;products.show&#39;</span><span class="p">,</span> <span class="nv">$id</span><span class="p">)</span>
            <span class="o">-&gt;</span><span class="na">with</span><span class="p">(</span><span class="s1">&#39;success&#39;</span><span class="p">,</span> <span class="s1">&#39;Producto editado&#39;</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="sd">/**</span>
<span class="sd">     * Update the specified resource in storage.</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">update</span><span class="p">(</span><span class="nx">Request</span> <span class="nv">$request</span><span class="p">,</span> <span class="nx">string</span> <span class="nv">$id</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="c1">// En una aplicaci√≥n real, aqu√≠ se actualizar√≠a en la base de datos</span>
        <span class="c1">// Por ahora, solo redirigimos al detalle del producto</span>
        <span class="k">return</span> <span class="nx">redirect</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">route</span><span class="p">(</span><span class="s1">&#39;products.show&#39;</span><span class="p">,</span> <span class="nv">$id</span><span class="p">)</span>
            <span class="o">-&gt;</span><span class="na">with</span><span class="p">(</span><span class="s1">&#39;success&#39;</span><span class="p">,</span> <span class="s1">&#39;Producto actualizado exitosamente&#39;</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="sd">/**</span>
<span class="sd">     * Remove the specified resource from storage.</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">destroy</span><span class="p">(</span><span class="nx">string</span> <span class="nv">$id</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="c1">// En una aplicaci√≥n real, aqu√≠ se eliminar√≠a de la base de datos</span>
        <span class="c1">// Por ahora, solo redirigimos a la lista de productos</span>
        <span class="k">return</span> <span class="nx">redirect</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">route</span><span class="p">(</span><span class="s1">&#39;products.index&#39;</span><span class="p">)</span>
            <span class="o">-&gt;</span><span class="na">with</span><span class="p">(</span><span class="s1">&#39;success&#39;</span><span class="p">,</span> <span class="s1">&#39;Producto eliminado exitosamente&#39;</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>Cambios Principales</p>
<ul>
<li><strong>Eliminado</strong>: <code>use App\Traits\LoadsMockData;</code> y <code>use LoadsMockData;</code> (trait completamente removido)</li>
<li><strong>A√±adido</strong>: <code>use App\Models\Product;</code>, <code>use App\Models\Category;</code>, <code>use App\Models\Offer;</code></li>
<li><strong>Reemplazado</strong>: <code>$this-&gt;getProducts()</code> por <code>Product::with(['category', 'offer'])-&gt;get()</code></li>
<li><strong>Eliminado</strong>: <code>$this-&gt;enrichProductsWithOffers()</code> (m√©todo innecesario con Eloquent)</li>
<li><strong>Mantenido</strong>: La misma l√≥gica de negocio y estructura de m√©todos</li>
</ul>
<p><strong><code>with(['category', 'offer'])</code></strong>: Carga las relaciones de forma eficiente (Eager Loading) para evitar el problema N+1.</p>
<h3 id="3-actualizar-categorycontroller">3. Actualizar CategoryController<a class="headerlink" href="#3-actualizar-categorycontroller" title="Permanent link">&para;</a></h3>
<p>El <code>CategoryController</code> gestiona las categor√≠as de productos. Necesitamos actualizarlo para usar consultas Eloquent en lugar del trait <code>LoadsMockData</code>.</p>
<p>Abre el archivo <code>app/Http/Controllers/CategoryController.php</code> y reemplaza su contenido:</p>
<p>C√≥digo PHP</p>
<div class="highlight"><pre><span></span><code><span class="cp">&lt;?php</span>

<span class="k">namespace</span> <span class="nx">App\Http\Controllers</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">App\Models\Category</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">App\Models\Product</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\Http\Request</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\View\View</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">CategoryController</span> <span class="k">extends</span> <span class="nx">Controller</span>
<span class="p">{</span>
    <span class="sd">/**</span>
<span class="sd">     * Show all categories</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">index</span><span class="p">()</span><span class="o">:</span> <span class="nx">View</span>
    <span class="p">{</span>
        <span class="nv">$categories</span> <span class="o">=</span> <span class="nx">Category</span><span class="o">::</span><span class="na">all</span><span class="p">();</span>

        <span class="k">return</span> <span class="nx">view</span><span class="p">(</span><span class="s1">&#39;categories.index&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;categories&#39;</span> <span class="o">=&gt;</span> <span class="nv">$categories</span><span class="p">]);</span>
    <span class="p">}</span>

    <span class="sd">/**</span>
<span class="sd">     * Show products from a specific category</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">show</span><span class="p">(</span><span class="nx">string</span> <span class="nv">$id</span><span class="p">)</span><span class="o">:</span> <span class="nx">View</span>
    <span class="p">{</span>
        <span class="c1">// Validate ID format</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nb">is_numeric</span><span class="p">(</span><span class="nv">$id</span><span class="p">)</span> <span class="o">||</span> <span class="nv">$id</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">abort</span><span class="p">(</span><span class="mi">404</span><span class="p">,</span> <span class="s1">&#39;ID de categor√≠a inv√°lido&#39;</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="nv">$category</span> <span class="o">=</span> <span class="nx">Category</span><span class="o">::</span><span class="na">find</span><span class="p">(</span><span class="nv">$id</span><span class="p">);</span>

        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nv">$category</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">abort</span><span class="p">(</span><span class="mi">404</span><span class="p">,</span> <span class="s1">&#39;Categor√≠a no encontrada&#39;</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="nv">$categoryProducts</span> <span class="o">=</span> <span class="nv">$category</span><span class="o">-&gt;</span><span class="na">products</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">with</span><span class="p">([</span><span class="s1">&#39;offer&#39;</span><span class="p">])</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">();</span>

        <span class="k">return</span> <span class="nx">view</span><span class="p">(</span><span class="s1">&#39;categories.show&#39;</span><span class="p">,</span> <span class="nb">compact</span><span class="p">(</span><span class="s1">&#39;category&#39;</span><span class="p">,</span> <span class="s1">&#39;categoryProducts&#39;</span><span class="p">));</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>Cambios Principales</p>
<ul>
<li><strong>Eliminado</strong>: <code>use App\Traits\LoadsMockData;</code> y <code>use LoadsMockData;</code> (trait completamente removido)</li>
<li><strong>A√±adido</strong>: <code>use App\Models\Category;</code>, <code>use App\Models\Product;</code></li>
<li><strong>Reemplazado</strong>: <code>$this-&gt;getCategories()</code> por <code>Category::all()</code></li>
<li><strong>Reemplazado</strong>: <code>$this-&gt;getProducts()</code> por <code>$category-&gt;products()-&gt;with(['offer'])-&gt;get()</code></li>
<li><strong>Mantenido</strong>: La misma l√≥gica de validaci√≥n y manejo de errores</li>
</ul>
<p><strong><code>$category-&gt;products()</code></strong>: Utiliza la relaci√≥n definida en el modelo <code>Category</code> para obtener los productos de esa categor√≠a.</p>
<h3 id="4-actualizar-offercontroller"><strong>4. Actualizar OfferController</strong> <a href="#_4-actualizar-offercontroller">‚Äã</a><a class="headerlink" href="#4-actualizar-offercontroller" title="Permanent link">&para;</a></h3>
<p>El <code>OfferController</code> gestiona las ofertas especiales. Necesitamos actualizarlo para usar consultas Eloquent en lugar del trait <code>LoadsMockData</code>.</p>
<p>Abre el archivo <code>app/Http/Controllers/OfferController.php</code> y reemplaza su contenido:</p>
<p>C√≥digo PHP</p>
<div class="highlight"><pre><span></span><code><span class="cp">&lt;?php</span>

<span class="k">namespace</span> <span class="nx">App\Http\Controllers</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">App\Models\Offer</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">App\Models\Product</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\Http\Request</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\View\View</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">OfferController</span> <span class="k">extends</span> <span class="nx">Controller</span>
<span class="p">{</span>
    <span class="sd">/**</span>
<span class="sd">     * Show all offers</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">index</span><span class="p">()</span><span class="o">:</span> <span class="nx">View</span>
    <span class="p">{</span>
        <span class="nv">$offers</span> <span class="o">=</span> <span class="nx">Offer</span><span class="o">::</span><span class="na">all</span><span class="p">();</span>

        <span class="k">return</span> <span class="nx">view</span><span class="p">(</span><span class="s1">&#39;offers.index&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;offers&#39;</span> <span class="o">=&gt;</span> <span class="nv">$offers</span><span class="p">]);</span>
    <span class="p">}</span>

    <span class="sd">/**</span>
<span class="sd">     * Show products with a specific offer</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">show</span><span class="p">(</span><span class="nx">string</span> <span class="nv">$id</span><span class="p">)</span><span class="o">:</span> <span class="nx">View</span>
    <span class="p">{</span>
        <span class="c1">// Validate ID format</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nb">is_numeric</span><span class="p">(</span><span class="nv">$id</span><span class="p">)</span> <span class="o">||</span> <span class="nv">$id</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">abort</span><span class="p">(</span><span class="mi">404</span><span class="p">,</span> <span class="s1">&#39;ID de oferta inv√°lido&#39;</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="nv">$offer</span> <span class="o">=</span> <span class="nx">Offer</span><span class="o">::</span><span class="na">find</span><span class="p">(</span><span class="nv">$id</span><span class="p">);</span>

        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nv">$offer</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">abort</span><span class="p">(</span><span class="mi">404</span><span class="p">,</span> <span class="s1">&#39;Oferta no encontrada&#39;</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="nv">$offerProducts</span> <span class="o">=</span> <span class="nv">$offer</span><span class="o">-&gt;</span><span class="na">products</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">with</span><span class="p">([</span><span class="s1">&#39;category&#39;</span><span class="p">])</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">();</span>

        <span class="k">return</span> <span class="nx">view</span><span class="p">(</span><span class="s1">&#39;offers.show&#39;</span><span class="p">,</span> <span class="nb">compact</span><span class="p">(</span><span class="s1">&#39;offer&#39;</span><span class="p">,</span> <span class="s1">&#39;offerProducts&#39;</span><span class="p">));</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>Cambios Principales</p>
<ul>
<li><strong>Eliminado</strong>: <code>use App\Traits\LoadsMockData;</code> y <code>use LoadsMockData;</code> (trait completamente removido)</li>
<li><strong>A√±adido</strong>: <code>use App\Models\Offer;</code>, <code>use App\Models\Product;</code></li>
<li><strong>Reemplazado</strong>: <code>$this-&gt;getOffers()</code> por <code>Offer::all()</code></li>
<li><strong>Reemplazado</strong>: <code>$this-&gt;getProducts()</code> por <code>$offer-&gt;products()-&gt;with(['category'])-&gt;get()</code></li>
<li><strong>Mantenido</strong>: La misma l√≥gica de validaci√≥n y manejo de errores</li>
</ul>
<p><strong><code>$offer-&gt;products()</code></strong>: Utiliza la relaci√≥n definida en el modelo <code>Offer</code> para obtener los productos con esa oferta.</p>
<h3 id="5-actualizar-welcomecontroller"><strong>5. Actualizar WelcomeController</strong> <a href="#_5-actualizar-welcomecontroller">‚Äã</a><a class="headerlink" href="#5-actualizar-welcomecontroller" title="Permanent link">&para;</a></h3>
<p>El <code>WelcomeController</code> gestiona la p√°gina de inicio. Necesitamos actualizarlo para usar consultas Eloquent en lugar del trait <code>LoadsMockData</code>.</p>
<p>Abre el archivo <code>app/Http/Controllers/WelcomeController.php</code> y reemplaza su contenido:</p>
<p>C√≥digo PHP</p>
<div class="highlight"><pre><span></span><code><span class="cp">&lt;?php</span>

<span class="k">namespace</span> <span class="nx">App\Http\Controllers</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">App\Models\Product</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">App\Models\Category</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\Http\Request</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\View\View</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">WelcomeController</span> <span class="k">extends</span> <span class="nx">Controller</span>
<span class="p">{</span>
    <span class="sd">/**</span>
<span class="sd">     * Show the welcome page with featured content</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">index</span><span class="p">()</span><span class="o">:</span> <span class="nx">View</span>
    <span class="p">{</span>
        <span class="c1">// Get featured products (first 3 products with offers for the featured section)</span>
        <span class="nv">$featuredProducts</span> <span class="o">=</span> <span class="nx">Product</span><span class="o">::</span><span class="na">with</span><span class="p">([</span><span class="s1">&#39;category&#39;</span><span class="p">,</span> <span class="s1">&#39;offer&#39;</span><span class="p">])</span>
            <span class="o">-&gt;</span><span class="na">whereNotNull</span><span class="p">(</span><span class="s1">&#39;offer_id&#39;</span><span class="p">)</span>
            <span class="o">-&gt;</span><span class="na">take</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
            <span class="o">-&gt;</span><span class="na">get</span><span class="p">();</span>

        <span class="c1">// Get featured categories (first 4 categories for the categories section)</span>
        <span class="nv">$featuredCategories</span> <span class="o">=</span> <span class="nx">Category</span><span class="o">::</span><span class="na">take</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">();</span>

        <span class="k">return</span> <span class="nx">view</span><span class="p">(</span><span class="s1">&#39;welcome&#39;</span><span class="p">,</span> <span class="nb">compact</span><span class="p">(</span><span class="s1">&#39;featuredProducts&#39;</span><span class="p">,</span> <span class="s1">&#39;featuredCategories&#39;</span><span class="p">));</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>Cambios Principales</p>
<ul>
<li><strong>Eliminado</strong>: <code>use App\Traits\LoadsMockData;</code> y <code>use LoadsMockData;</code> (trait completamente removido)</li>
<li><strong>A√±adido</strong>: <code>use App\Models\Product;</code>, <code>use App\Models\Category;</code></li>
<li><strong>Reemplazado</strong>: <code>$this-&gt;getProducts()</code> por <code>Product::with(['category', 'offer'])-&gt;whereNotNull('offer_id')-&gt;take(3)-&gt;get()</code></li>
<li><strong>Reemplazado</strong>: <code>$this-&gt;getCategories()</code> por <code>Category::take(4)-&gt;get()</code></li>
<li><strong>Mantenido</strong>: La misma l√≥gica de negocio para mostrar productos destacados y categor√≠as</li>
</ul>
<h3 id="6-actualizar-cartcontroller"><strong>6. Actualizar CartController</strong> <a href="#_6-actualizar-cartcontroller">‚Äã</a><a class="headerlink" href="#6-actualizar-cartcontroller" title="Permanent link">&para;</a></h3>
<p>El <code>CartController</code> gestiona el carrito de compras. Necesitamos actualizarlo para usar consultas Eloquent en lugar del trait <code>LoadsMockData</code>.</p>
<p>Abre el archivo <code>app/Http/Controllers/CartController.php</code> y reemplaza su contenido:</p>
<p>C√≥digo PHP</p>
<div class="highlight"><pre><span></span><code><span class="cp">&lt;?php</span>

<span class="k">namespace</span> <span class="nx">App\Http\Controllers</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">App\Models\User</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\Http\Request</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\View\View</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">CartController</span> <span class="k">extends</span> <span class="nx">Controller</span>
<span class="p">{</span>
    <span class="sd">/**</span>
<span class="sd">     * Show cart overview</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">index</span><span class="p">()</span><span class="o">:</span> <span class="nx">View</span>
    <span class="p">{</span>
        <span class="c1">// Por ahora, mostramos el carrito del primer usuario</span>
        <span class="c1">// En la Pr√°ctica 4 se implementar√° la autenticaci√≥n</span>
        <span class="nv">$userId</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="c1">// Usuario por defecto</span>

        <span class="nv">$user</span> <span class="o">=</span> <span class="nx">User</span><span class="o">::</span><span class="na">find</span><span class="p">(</span><span class="nv">$userId</span><span class="p">);</span>
        <span class="nv">$cartProducts</span> <span class="o">=</span> <span class="nv">$user</span><span class="o">-&gt;</span><span class="na">products</span><span class="p">;</span> <span class="c1">// Obtiene productos con datos pivot</span>

        <span class="k">return</span> <span class="nx">view</span><span class="p">(</span><span class="s1">&#39;cart.index&#39;</span><span class="p">,</span> <span class="p">[</span>
            <span class="s1">&#39;cartProducts&#39;</span> <span class="o">=&gt;</span> <span class="nv">$cartProducts</span>
        <span class="p">]);</span>
    <span class="p">}</span>

    <span class="sd">/**</span>
<span class="sd">     * Store a newly created cart item</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">store</span><span class="p">(</span><span class="nx">Request</span> <span class="nv">$request</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="c1">// En una aplicaci√≥n real, aqu√≠ se guardar√≠a el producto en el carrito</span>
        <span class="c1">// Por ahora, solo redirigimos al carrito con un mensaje</span>
        <span class="k">return</span> <span class="nx">redirect</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">route</span><span class="p">(</span><span class="s1">&#39;cart.index&#39;</span><span class="p">)</span>
            <span class="o">-&gt;</span><span class="na">with</span><span class="p">(</span><span class="s1">&#39;success&#39;</span><span class="p">,</span> <span class="s1">&#39;Producto a√±adido al carrito exitosamente&#39;</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="sd">/**</span>
<span class="sd">     * Update the specified cart item</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">update</span><span class="p">(</span><span class="nx">Request</span> <span class="nv">$request</span><span class="p">,</span> <span class="nx">string</span> <span class="nv">$id</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="c1">// En una aplicaci√≥n real, aqu√≠ se actualizar√≠a la cantidad del producto en el carrito</span>
        <span class="c1">// Por ahora, solo redirigimos al carrito con un mensaje</span>
        <span class="k">return</span> <span class="nx">redirect</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">route</span><span class="p">(</span><span class="s1">&#39;cart.index&#39;</span><span class="p">)</span>
            <span class="o">-&gt;</span><span class="na">with</span><span class="p">(</span><span class="s1">&#39;success&#39;</span><span class="p">,</span> <span class="s1">&#39;Cantidad actualizada exitosamente&#39;</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>Cambios Principales</p>
<ul>
<li><strong>Eliminado</strong>: <code>use App\Traits\LoadsMockData;</code> y <code>use LoadsMockData;</code> (trait completamente removido)</li>
<li><strong>A√±adido</strong>: <code>use App\Models\User;</code></li>
<li><strong>Reemplazado</strong>: <code>$this-&gt;getCart()</code> por <code>$user-&gt;products</code> (relaci√≥n N:M)</li>
<li><strong>Simplificado</strong>: Usa directamente la relaci√≥n <code>belongsToMany</code> sin modelo intermedio</li>
<li><strong>Mantenido</strong>: La misma l√≥gica de negocio y estructura de m√©todos</li>
</ul>
<p><strong><code>$user-&gt;products</code></strong>: Obtiene los productos del carrito del usuario usando la relaci√≥n N:M. Los datos pivot (<code>quantity</code>) est√°n disponibles en <code>$product-&gt;pivot</code>.</p>
<h3 id="7-actualizar-la-ruta-de-contacto">7. Actualizar la Ruta de Contacto<a class="headerlink" href="#7-actualizar-la-ruta-de-contacto" title="Permanent link">&para;</a></h3>
<p>En la Pr√°ctica 2, la ruta de contacto se defini√≥ como una funci√≥n an√≥nima. Para mantener la consistencia, vamos a crear un controlador para la p√°gina de contacto.</p>
<p>Crea el controlador de contacto:</p>
<div class="highlight"><pre><span></span><code>sail<span class="w"> </span>artisan<span class="w"> </span>make:controller<span class="w"> </span>ContactController
</code></pre></div>
<p>Abre el archivo <code>app/Http/Controllers/ContactController.php</code> y reemplaza su contenido:</p>
<p>C√≥digo PHP</p>
<div class="highlight"><pre><span></span><code><span class="cp">&lt;?php</span>

<span class="k">namespace</span> <span class="nx">App\Http\Controllers</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Illuminate\Http\Request</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\View\View</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">ContactController</span> <span class="k">extends</span> <span class="nx">Controller</span>
<span class="p">{</span>
    <span class="sd">/**</span>
<span class="sd">     * Show the contact page</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">index</span><span class="p">()</span><span class="o">:</span> <span class="nx">View</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="nx">view</span><span class="p">(</span><span class="s1">&#39;contact&#39;</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>Ahora actualiza la ruta en <code>routes/web.php</code>:</p>
<p>C√≥digo PHP</p>
<div class="highlight"><pre><span></span><code><span class="x">// Contact page</span>
<span class="x">Route::get(&#39;/contact&#39;, [ContactController::class, &#39;index&#39;])-&gt;name(&#39;contact&#39;);</span>
</code></pre></div>
<p>Cambios en la Ruta de Contacto</p>
<ul>
<li><strong>Antes</strong>: Funci√≥n an√≥nima <code>function () { return view('contact'); }</code></li>
<li><strong>Ahora</strong>: Controlador dedicado <code>[ContactController::class, 'index']</code></li>
<li><strong>Ventaja</strong>: Consistencia con el resto de controladores y facilita futuras extensiones</li>
</ul>
<h3 id="8-limpiar-el-trait-loadsmockdata">8. Limpiar el Trait LoadsMockData<a class="headerlink" href="#8-limpiar-el-trait-loadsmockdata" title="Permanent link">&para;</a></h3>
<p>Ahora que los controladores ya no usan el trait <code>LoadsMockData</code>, debemos limpiarlo para que solo contenga los m√©todos necesarios para los seeders.</p>
<p>Abre el archivo <code>app/Traits/LoadsMockData.php</code> y elimina los m√©todos innecesarios:</p>
<p>C√≥digo PHP actualizado</p>
<div class="highlight"><pre><span></span><code><span class="cp">&lt;?php</span>

<span class="k">namespace</span> <span class="nx">App\Traits</span><span class="p">;</span>

<span class="k">trait</span> <span class="nx">LoadsMockData</span>
<span class="p">{</span>
    <span class="sd">/**</span>
<span class="sd">     * Load categories from mock file</span>
<span class="sd">     */</span>
    <span class="k">protected</span> <span class="k">function</span> <span class="nf">getCategories</span><span class="p">()</span><span class="o">:</span> <span class="k">array</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="k">require</span> <span class="nx">database_path</span><span class="p">(</span><span class="s1">&#39;data/mock-categories.php&#39;</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="sd">/**</span>
<span class="sd">     * Load offers from mock file</span>
<span class="sd">     */</span>
    <span class="k">protected</span> <span class="k">function</span> <span class="nf">getOffers</span><span class="p">()</span><span class="o">:</span> <span class="k">array</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="k">require</span> <span class="nx">database_path</span><span class="p">(</span><span class="s1">&#39;data/mock-offers.php&#39;</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="sd">/**</span>
<span class="sd">     * Load products from mock file</span>
<span class="sd">     */</span>
    <span class="k">protected</span> <span class="k">function</span> <span class="nf">getProducts</span><span class="p">()</span><span class="o">:</span> <span class="k">array</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="k">require</span> <span class="nx">database_path</span><span class="p">(</span><span class="s1">&#39;data/mock-products.php&#39;</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="sd">/**</span>
<span class="sd">     * Load cart items from mock file</span>
<span class="sd">     */</span>
    <span class="k">protected</span> <span class="k">function</span> <span class="nf">getCart</span><span class="p">()</span><span class="o">:</span> <span class="k">array</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="k">require</span> <span class="nx">database_path</span><span class="p">(</span><span class="s1">&#39;data/mock-cart.php&#39;</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>M√©todos Eliminados</p>
<p>Se han eliminado los siguientes m√©todos que ya no son necesarios:</p>
<ul>
<li><strong><code>enrichProductsWithOffers()</code></strong>: Ya no es necesario porque Eloquent maneja las relaciones autom√°ticamente</li>
<li><strong><code>getAllMockData()</code></strong>: No se usa en los seeders individuales</li>
</ul>
<h2 id="fase-6-actualizar-las-vistas">FASE 6: Actualizar las Vistas<a class="headerlink" href="#fase-6-actualizar-las-vistas" title="Permanent link">&para;</a></h2>
<h3 id="1-por-que-actualizar-las-vistas">1. ¬øPor qu√© Actualizar las Vistas?<a class="headerlink" href="#1-por-que-actualizar-las-vistas" title="Permanent link">&para;</a></h3>
<p>En la Pr√°ctica 2, las vistas recib√≠an arrays desde los controladores (datos mock). Ahora que los controladores usan modelos Eloquent, las vistas necesitan adaptarse para trabajar con objetos en lugar de arrays.</p>
<p>De Arrays a Objetos Eloquent</p>
<p><strong>Antes (Pr√°ctica 2)</strong>:</p>
<div class="highlight"><pre><span></span><code><span class="x">// En el controlador</span>
<span class="x">$products = $this-&gt;getProducts(); // Array</span>
<span class="x">$enrichedProducts = $this-&gt;enrichProductsWithOffers($products); // ‚ùå M√©todo innecesario</span>
<span class="x">return view(&#39;products.index&#39;, [&#39;products&#39; =&gt; $enrichedProducts]);</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="cm">&lt;!-- En la vista --&gt;</span>
@foreach($products as $product)
    <span class="p">&lt;</span><span class="nt">h4</span><span class="p">&gt;</span>{{ $product[&#39;name&#39;] }}<span class="p">&lt;/</span><span class="nt">h4</span><span class="p">&gt;</span> <span class="cm">&lt;!-- ‚ùå Array access --&gt;</span>
    <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>‚Ç¨{{ $product[&#39;final_price&#39;] }}<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span> <span class="cm">&lt;!-- ‚ùå Campo calculado manualmente --&gt;</span>
@endforeach
</code></pre></div>
<p><strong>Ahora (Pr√°ctica 3)</strong>:</p>
<div class="highlight"><pre><span></span><code><span class="x">// En el controlador</span>
<span class="x">$products = Product::with([&#39;category&#39;, &#39;offer&#39;])-&gt;get(); // ‚úÖ Collection de objetos</span>
<span class="x">return view(&#39;products.index&#39;, [&#39;products&#39; =&gt; $products]);</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="cm">&lt;!-- En la vista --&gt;</span>
@foreach($products as $product)
    <span class="p">&lt;</span><span class="nt">h4</span><span class="p">&gt;</span>{{ $product-&gt;name }}<span class="p">&lt;/</span><span class="nt">h4</span><span class="p">&gt;</span> <span class="cm">&lt;!-- ‚úÖ Object property --&gt;</span>
    <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>‚Ç¨{{ $product-&gt;price }}<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span> <span class="cm">&lt;!-- ‚úÖ Precio directo del modelo --&gt;</span>
@endforeach
</code></pre></div>
<h3 id="2-actualizar-la-vista-del-carrito">2. Actualizar la Vista del Carrito<a class="headerlink" href="#2-actualizar-la-vista-del-carrito" title="Permanent link">&para;</a></h3>
<p>La vista del carrito necesita actualizarse para trabajar con la relaci√≥n N:M. Ahora <code>$cartProducts</code> contiene productos con datos pivot en lugar de un array de items.</p>
<p>Abre el archivo <code>resources/views/cart/index.blade.php</code> y actualiza el contenido:</p>
<p>C√≥digo HTML actualizado</p>
<div class="highlight"><pre><span></span><code>@extends(&#39;layouts.app&#39;)

@section(&#39;content&#39;)
<span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;container mx-auto px-4 py-8&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">h1</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;text-3xl font-bold mb-8&quot;</span><span class="p">&gt;</span>üõí Carrito de Compras<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>

    @if($cartProducts-&gt;isEmpty())
        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;bg-white rounded-lg shadow-lg p-8 text-center&quot;</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;text-6xl mb-4&quot;</span><span class="p">&gt;</span>üõí<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">h2</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;text-2xl font-bold text-gray-800 mb-2&quot;</span><span class="p">&gt;</span>Tu carrito est√° vac√≠o<span class="p">&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">p</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;text-gray-600 mb-6&quot;</span><span class="p">&gt;</span>¬°A√±ade productos para comenzar tu compra!<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;{{ route(&#39;products.index&#39;) }}&quot;</span> 
               <span class="na">class</span><span class="o">=</span><span class="s">&quot;inline-block bg-primary-600 text-white px-6 py-3 rounded-lg hover:bg-primary-700 transition&quot;</span><span class="p">&gt;</span>
                Ver Productos
            <span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    @else
        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;bg-white rounded-lg shadow-lg overflow-hidden&quot;</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">table</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;w-full&quot;</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">thead</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;bg-gray-50&quot;</span><span class="p">&gt;</span>
                    <span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
                        <span class="p">&lt;</span><span class="nt">th</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;px-6 py-4 text-left text-sm font-semibold text-gray-700&quot;</span><span class="p">&gt;</span>Producto<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
                        <span class="p">&lt;</span><span class="nt">th</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;px-6 py-4 text-left text-sm font-semibold text-gray-700&quot;</span><span class="p">&gt;</span>Precio<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
                        <span class="p">&lt;</span><span class="nt">th</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;px-6 py-4 text-left text-sm font-semibold text-gray-700&quot;</span><span class="p">&gt;</span>Cantidad<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
                        <span class="p">&lt;</span><span class="nt">th</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;px-6 py-4 text-left text-sm font-semibold text-gray-700&quot;</span><span class="p">&gt;</span>Subtotal<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
                    <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
                <span class="p">&lt;/</span><span class="nt">thead</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">tbody</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;divide-y divide-gray-200&quot;</span><span class="p">&gt;</span>
                    @php
                        $total = 0;
                    @endphp

                    @foreach($cartProducts as $product)
                        @php
                            $subtotal = $product-&gt;final_price * $product-&gt;pivot-&gt;quantity;
                            $total += $subtotal;
                        @endphp

                        <span class="p">&lt;</span><span class="nt">tr</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;hover:bg-gray-50&quot;</span><span class="p">&gt;</span>
                            <span class="p">&lt;</span><span class="nt">td</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;px-6 py-4&quot;</span><span class="p">&gt;</span>
                                <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;flex items-center&quot;</span><span class="p">&gt;</span>
                                    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;text-3xl mr-4&quot;</span><span class="p">&gt;</span>üì¶<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
                                    <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
                                        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;font-semibold text-gray-900&quot;</span><span class="p">&gt;</span>{{ $product-&gt;name }}<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
                                        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;text-sm text-gray-600&quot;</span><span class="p">&gt;</span>{{ $product-&gt;category-&gt;name }}<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
                                        @if($product-&gt;offer)
                                            <span class="p">&lt;</span><span class="nt">span</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;inline-block bg-orange-100 text-orange-800 text-xs px-2 py-1 rounded-full mt-1&quot;</span><span class="p">&gt;</span>
                                                üè∑Ô∏è -{{ $product-&gt;offer-&gt;discount_percentage }}%
            <span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
                                        @endif
                                    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
                                <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
                            <span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
                            <span class="p">&lt;</span><span class="nt">td</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;px-6 py-4&quot;</span><span class="p">&gt;</span>
                                @if($product-&gt;offer)
                                    <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
                                        <span class="p">&lt;</span><span class="nt">span</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;text-sm text-gray-400 line-through&quot;</span><span class="p">&gt;</span>‚Ç¨{{ number_format($product-&gt;price, 2) }}<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
                                        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;font-semibold text-orange-600&quot;</span><span class="p">&gt;</span>‚Ç¨{{ number_format($product-&gt;final_price, 2) }}<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
                                    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
        @else
                                    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;font-semibold text-gray-900&quot;</span><span class="p">&gt;</span>‚Ç¨{{ number_format($product-&gt;price, 2) }}<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
        @endif
                            <span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
                            <span class="p">&lt;</span><span class="nt">td</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;px-6 py-4&quot;</span><span class="p">&gt;</span>
                                <span class="p">&lt;</span><span class="nt">span</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;inline-block bg-gray-100 px-3 py-1 rounded&quot;</span><span class="p">&gt;</span>
                                    {{ $product-&gt;pivot-&gt;quantity }}
                                <span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
                            <span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
                            <span class="p">&lt;</span><span class="nt">td</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;px-6 py-4 font-semibold text-gray-900&quot;</span><span class="p">&gt;</span>
                                ‚Ç¨{{ number_format($subtotal, 2) }}
                            <span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
                        <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
                    @endforeach
                <span class="p">&lt;/</span><span class="nt">tbody</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">tfoot</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;bg-gray-50&quot;</span><span class="p">&gt;</span>
                    <span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
                        <span class="p">&lt;</span><span class="nt">td</span> <span class="na">colspan</span><span class="o">=</span><span class="s">&quot;3&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;px-6 py-4 text-right font-semibold text-gray-700&quot;</span><span class="p">&gt;</span>Total:<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
                        <span class="p">&lt;</span><span class="nt">td</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;px-6 py-4 font-bold text-xl text-primary-600&quot;</span><span class="p">&gt;</span>‚Ç¨{{ number_format($total, 2) }}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
                    <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
                <span class="p">&lt;/</span><span class="nt">tfoot</span><span class="p">&gt;</span>
            <span class="p">&lt;/</span><span class="nt">table</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;mt-6 flex justify-between&quot;</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;{{ route(&#39;products.index&#39;) }}&quot;</span> 
               <span class="na">class</span><span class="o">=</span><span class="s">&quot;bg-gray-200 text-gray-700 px-6 py-3 rounded-lg hover:bg-gray-300 transition&quot;</span><span class="p">&gt;</span>
                ‚Üê Seguir Comprando
            <span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">button</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;bg-primary-600 text-white px-6 py-3 rounded-lg hover:bg-primary-700 transition&quot;</span><span class="p">&gt;</span>
                Proceder al Pago ‚Üí
            <span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
@endif
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
@endsection
</code></pre></div>
<p>Cambios en la Vista del Carrito</p>
<ul>
<li><strong><code>$cartProducts</code></strong>: Ahora es una Collection de productos con datos pivot</li>
<li><strong><code>$product-&gt;pivot-&gt;quantity</code></strong>: Acceso a la cantidad desde la tabla pivot</li>
<li><strong><code>$product-&gt;category-&gt;name</code></strong>: Acceso directo a la categor√≠a relacionada</li>
<li><strong><code>$product-&gt;offer</code></strong>: Acceso directo a la oferta relacionada</li>
<li><strong><code>$product-&gt;final_price</code></strong>: Uso del accessor para obtener el precio final con descuentos aplicados autom√°ticamente</li>
<li><strong>C√°lculo simplificado</strong>: Solo necesitamos calcular el subtotal, el precio final ya viene del accessor</li>
</ul>
<h3 id="3-actualizar-las-clases-php-de-los-componentes">3. Actualizar las Clases PHP de los Componentes<a class="headerlink" href="#3-actualizar-las-clases-php-de-los-componentes" title="Permanent link">&para;</a></h3>
<p>Antes de actualizar las vistas de los componentes, necesitamos actualizar sus <strong>clases PHP</strong> para que acepten objetos Eloquent en lugar de arrays.</p>
<h4 id="31-actualizar-la-clase-productcard">3.1. Actualizar la Clase ProductCard<a class="headerlink" href="#31-actualizar-la-clase-productcard" title="Permanent link">&para;</a></h4>
<p>Abre el archivo <code>app/View/Components/ProductCard.php</code> y actualiza el tipo de dato:</p>
<p>C√≥digo PHP actualizado</p>
<div class="highlight"><pre><span></span><code><span class="cp">&lt;?php</span>

<span class="k">namespace</span> <span class="nx">App\View\Components</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">App\Models\Product</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Closure</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\Contracts\View\View</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\View\Component</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">ProductCard</span> <span class="k">extends</span> <span class="nx">Component</span>
<span class="p">{</span>
    <span class="sd">/**</span>
<span class="sd">     * Create a new component instance.</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="fm">__construct</span><span class="p">(</span>
        <span class="k">public</span> <span class="nx">Product</span> <span class="nv">$product</span><span class="p">,</span>
        <span class="k">public</span> <span class="nx">string</span> <span class="nv">$class</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
    <span class="p">)</span> <span class="p">{}</span>

    <span class="sd">/**</span>
<span class="sd">     * Get the view / contents that represent the component.</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">render</span><span class="p">()</span><span class="o">:</span> <span class="nx">View</span><span class="o">|</span><span class="nx">Closure</span><span class="o">|</span><span class="nx">string</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="nx">view</span><span class="p">(</span><span class="s1">&#39;components.product-card&#39;</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>Cambio Importante</p>
<ul>
<li><strong>Antes</strong>: <code>public array $product</code></li>
<li><strong>Ahora</strong>: <code>public Product $product</code></li>
<li>Se importa el modelo: <code>use App\Models\Product;</code></li>
</ul>
<h4 id="32-actualizar-la-clase-categorycard">3.2. Actualizar la Clase CategoryCard<a class="headerlink" href="#32-actualizar-la-clase-categorycard" title="Permanent link">&para;</a></h4>
<p>Abre el archivo <code>app/View/Components/CategoryCard.php</code> y actualiza el tipo de dato:</p>
<p>C√≥digo PHP actualizado</p>
<div class="highlight"><pre><span></span><code><span class="cp">&lt;?php</span>

<span class="k">namespace</span> <span class="nx">App\View\Components</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">App\Models\Category</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Closure</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\Contracts\View\View</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\View\Component</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">CategoryCard</span> <span class="k">extends</span> <span class="nx">Component</span>
<span class="p">{</span>
    <span class="sd">/**</span>
<span class="sd">     * Create a new component instance.</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="fm">__construct</span><span class="p">(</span>
        <span class="k">public</span> <span class="nx">Category</span> <span class="nv">$category</span><span class="p">,</span>
        <span class="k">public</span> <span class="nx">string</span> <span class="nv">$class</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
    <span class="p">)</span> <span class="p">{}</span>

    <span class="sd">/**</span>
<span class="sd">     * Get the view / contents that represent the component.</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">render</span><span class="p">()</span><span class="o">:</span> <span class="nx">View</span><span class="o">|</span><span class="nx">Closure</span><span class="o">|</span><span class="nx">string</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="nx">view</span><span class="p">(</span><span class="s1">&#39;components.category-card&#39;</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>Cambio Importante</p>
<ul>
<li><strong>Antes</strong>: <code>public array $category</code></li>
<li><strong>Ahora</strong>: <code>public Category $category</code></li>
<li>Se importa el modelo: <code>use App\Models\Category;</code></li>
</ul>
<h3 id="4-actualizar-las-vistas-blade-de-los-componentes">4. Actualizar las Vistas Blade de los Componentes<a class="headerlink" href="#4-actualizar-las-vistas-blade-de-los-componentes" title="Permanent link">&para;</a></h3>
<p>Ahora que las clases PHP est√°n actualizadas, podemos actualizar las vistas Blade.</p>
<h4 id="41-actualizar-la-vista-del-componente-categorycard">4.1. Actualizar la Vista del Componente CategoryCard<a class="headerlink" href="#41-actualizar-la-vista-del-componente-categorycard" title="Permanent link">&para;</a></h4>
<p>El componente <code>CategoryCard</code> necesita actualizarse para trabajar con objetos Eloquent en lugar de arrays.</p>
<p>Abre el archivo <code>resources/views/components/category-card.blade.php</code> y actualiza el contenido:</p>
<p>C√≥digo HTML actualizado</p>
<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;bg-white rounded-lg shadow-lg p-6 product-card cursor-pointer {{ $class }}&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;text-4xl text-primary-500 mb-4&quot;</span><span class="p">&gt;</span>üì¶<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">h4</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;text-xl font-bold mb-2 text-gray-900&quot;</span><span class="p">&gt;</span>{{ $category-&gt;name }}<span class="p">&lt;/</span><span class="nt">h4</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">p</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;text-gray-600 mb-4&quot;</span><span class="p">&gt;</span>{{ $category-&gt;description }}<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;{{ route(&#39;categories.show&#39;, $category-&gt;id) }}&quot;</span> 
       <span class="na">class</span><span class="o">=</span><span class="s">&quot;text-primary-600 font-semibold hover:text-primary-700 transition&quot;</span><span class="p">&gt;</span>
        Ver Productos ‚Üí
    <span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</code></pre></div>
<p>Cambios en CategoryCard</p>
<ul>
<li><strong><code>$category['name']</code></strong> ‚Üí <strong><code>$category-&gt;name</code></strong>: Acceso a propiedades del objeto</li>
<li><strong><code>$category['description']</code></strong> ‚Üí <strong><code>$category-&gt;description</code></strong>: Propiedad del modelo</li>
<li><strong><code>$category['id']</code></strong> ‚Üí <strong><code>$category-&gt;id</code></strong>: ID del modelo Eloquent</li>
</ul>
<h4 id="42-actualizar-la-vista-del-componente-productcard">4.2. Actualizar la Vista del Componente ProductCard<a class="headerlink" href="#42-actualizar-la-vista-del-componente-productcard" title="Permanent link">&para;</a></h4>
<p>El componente <code>ProductCard</code> es el m√°s importante ya que se usa en m√∫ltiples vistas. Necesitamos actualizarlo para trabajar con objetos Eloquent.</p>
<p>Abre el archivo <code>resources/views/components/product-card.blade.php</code> y actualiza las secciones que usan datos:</p>
<p>C√≥digo HTML actualizado</p>
<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;bg-white rounded-lg shadow-lg overflow-hidden product-card {{ $class }} relative {{ $product-&gt;offer ? &#39;ring-2 ring-orange-400&#39; : &#39;&#39; }}&quot;</span><span class="p">&gt;</span>
    <span class="cm">&lt;!-- Badge de oferta destacado (esquina superior derecha) --&gt;</span>
    @if($product-&gt;offer)
        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;absolute top-0 right-0 bg-gradient-to-r from-orange-500 to-red-500 text-white px-4 py-2 rounded-bl-lg font-bold shadow-lg z-10&quot;</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">span</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;text-lg&quot;</span><span class="p">&gt;</span>
                -{{ $product-&gt;offer-&gt;discount_percentage }}%
            <span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    @endif

    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;h-48 bg-gray-200 flex items-center justify-center {{ $product-&gt;offer ? &#39;bg-gradient-to-br from-orange-50 to-red-50&#39; : &#39;&#39; }}&quot;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">span</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;text-4xl&quot;</span><span class="p">&gt;</span>üì¶<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;p-6&quot;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">h4</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;text-xl font-bold mb-2 text-gray-900&quot;</span><span class="p">&gt;</span>{{ $product-&gt;name }}<span class="p">&lt;/</span><span class="nt">h4</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">p</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;text-gray-600 mb-4&quot;</span><span class="p">&gt;</span>{{ $product-&gt;description }}<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>

        <span class="cm">&lt;!-- Badge de oferta adicional (nombre de la oferta) --&gt;</span>
        @if($product-&gt;offer)
            <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;mb-4&quot;</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">span</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;inline-block bg-orange-100 text-orange-800 text-xs px-3 py-1 rounded-full font-semibold&quot;</span><span class="p">&gt;</span>
                    üè∑Ô∏è {{ $product-&gt;offer-&gt;name }}
                <span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
            <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
        @endif

        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;flex items-center justify-between flex-wrap gap-2&quot;</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;flex flex-col&quot;</span><span class="p">&gt;</span>
                @if($product-&gt;offer)
                    <span class="p">&lt;</span><span class="nt">span</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;text-sm text-gray-400 line-through&quot;</span><span class="p">&gt;</span>‚Ç¨{{ number_format($product-&gt;price, 2) }}<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
                    <span class="p">&lt;</span><span class="nt">span</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;text-2xl font-bold text-orange-600&quot;</span><span class="p">&gt;</span>‚Ç¨{{ number_format($product-&gt;final_price, 2) }}<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
                @else
                    <span class="p">&lt;</span><span class="nt">span</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;text-2xl font-bold text-primary-600&quot;</span><span class="p">&gt;</span>‚Ç¨{{ number_format($product-&gt;price, 2) }}<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
                @endif
            <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;{{ route(&#39;products.show&#39;, $product-&gt;id) }}&quot;</span> 
               <span class="na">class</span><span class="o">=</span><span class="s">&quot;bg-primary-600 text-white px-4 py-2 rounded-lg hover:bg-primary-700 transition&quot;</span><span class="p">&gt;</span>
                Ver Detalles
            <span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</code></pre></div>
<p>Cambios Principales</p>
<ul>
<li><strong><code>$product['name']</code></strong> ‚Üí <strong><code>$product-&gt;name</code></strong>: Acceso a propiedades de objeto</li>
<li><strong><code>$product['offer']</code></strong> ‚Üí <strong><code>$product-&gt;offer</code></strong>: Acceso a relaci√≥n Eloquent</li>
<li><strong><code>$product['offer']['discount_percentage']</code></strong> ‚Üí <strong><code>$product-&gt;offer-&gt;discount_percentage</code></strong>: Acceso anidado</li>
<li><strong><code>$product-&gt;final_price</code></strong>: Uso del accessor para obtener el precio final con descuentos autom√°ticamente</li>
<li><strong>C√≥digo m√°s limpio</strong>: Eliminado el bloque <code>@php</code> para c√°lculo de descuentos</li>
<li><strong>Mantenido</strong>: La misma l√≥gica visual y estructura del componente</li>
</ul>
<h3 id="5-actualizar-la-vista-de-detalle-de-producto">5. Actualizar la Vista de Detalle de Producto<a class="headerlink" href="#5-actualizar-la-vista-de-detalle-de-producto" title="Permanent link">&para;</a></h3>
<p>Esta vista muestra la informaci√≥n completa de un producto y necesita usar objetos Eloquent para acceder a las relaciones.</p>
<p>Abre el archivo <code>resources/views/products/show.blade.php</code> y actualiza el contenido:</p>
<p>C√≥digo HTML actualizado</p>
<div class="highlight"><pre><span></span><code>@extends(&#39;layouts.app&#39;)

@section(&#39;title&#39;, $product-&gt;name . &#39; - Mi Tienda&#39;)

@section(&#39;content&#39;)
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;container mx-auto px-6 py-8&quot;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;grid grid-cols-1 lg:grid-cols-2 gap-8&quot;</span><span class="p">&gt;</span>
            <span class="cm">&lt;!-- Imagen del Producto --&gt;</span>
            <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;bg-white rounded-lg shadow-lg p-6&quot;</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;h-96 bg-gray-200 flex items-center justify-center&quot;</span><span class="p">&gt;</span>
                    <span class="p">&lt;</span><span class="nt">span</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;text-8xl&quot;</span><span class="p">&gt;</span>üì¶<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
                <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
            <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

            <span class="cm">&lt;!-- Informaci√≥n del Producto --&gt;</span>
            <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;bg-white rounded-lg shadow-lg p-6&quot;</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">h1</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;text-3xl font-bold text-gray-900 mb-4&quot;</span><span class="p">&gt;</span>{{ $product-&gt;name }}<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">p</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;text-gray-600 mb-6&quot;</span><span class="p">&gt;</span>{{ $product-&gt;description }}<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>

                <span class="cm">&lt;!-- Precio --&gt;</span>
                <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;mb-6&quot;</span><span class="p">&gt;</span>
                    @if($product-&gt;offer)
                        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;flex items-baseline gap-3&quot;</span><span class="p">&gt;</span>
                            <span class="p">&lt;</span><span class="nt">span</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;text-2xl text-gray-400 line-through&quot;</span><span class="p">&gt;</span>‚Ç¨{{ number_format($product-&gt;price, 2) }}<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
                            <span class="p">&lt;</span><span class="nt">span</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;text-4xl font-bold text-orange-600&quot;</span><span class="p">&gt;</span>‚Ç¨{{ number_format($product-&gt;final_price, 2) }}<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
                        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
                        <span class="p">&lt;</span><span class="nt">p</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;text-sm text-orange-600 mt-2&quot;</span><span class="p">&gt;</span>
                            ¬°Ahorra ‚Ç¨{{ number_format($product-&gt;price - $product-&gt;final_price, 2) }}!
                        <span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
                @else
                        <span class="p">&lt;</span><span class="nt">span</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;text-4xl font-bold text-primary-600&quot;</span><span class="p">&gt;</span>‚Ç¨{{ number_format($product-&gt;price, 2) }}<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
                @endif
            <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

                <span class="cm">&lt;!-- Categor√≠a --&gt;</span>
                @if($product-&gt;category)
                    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;mb-6&quot;</span><span class="p">&gt;</span>
                        <span class="p">&lt;</span><span class="nt">span</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;text-sm text-gray-500&quot;</span><span class="p">&gt;</span>Categor√≠a:<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
                        <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;{{ route(&#39;categories.show&#39;, $product-&gt;category-&gt;id) }}&quot;</span> 
                           <span class="na">class</span><span class="o">=</span><span class="s">&quot;ml-2 bg-primary-100 text-primary-800 px-3 py-1 rounded-full text-sm hover:bg-primary-200 transition&quot;</span><span class="p">&gt;</span>
                            {{ $product-&gt;category-&gt;name }}
                        <span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
                    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
                @endif

                <span class="cm">&lt;!-- Oferta --&gt;</span>
                @if($product-&gt;offer)
                    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;mb-6&quot;</span><span class="p">&gt;</span>
                        <span class="p">&lt;</span><span class="nt">span</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;text-sm text-gray-500&quot;</span><span class="p">&gt;</span>Oferta activa:<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
                        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;mt-2&quot;</span><span class="p">&gt;</span>
                            <span class="p">&lt;</span><span class="nt">span</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;inline-block bg-orange-100 text-orange-800 text-sm px-3 py-1 rounded-full&quot;</span><span class="p">&gt;</span>
                                üè∑Ô∏è {{ $product-&gt;offer-&gt;name }} (-{{ $product-&gt;offer-&gt;discount_percentage }}%)
                            <span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
@endif

                <span class="cm">&lt;!-- Botones de Acci√≥n --&gt;</span>
<span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;flex space-x-4&quot;</span><span class="p">&gt;</span>
                    <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;{{ route(&#39;cart.store&#39;) }}&quot;</span> 
                       <span class="na">class</span><span class="o">=</span><span class="s">&quot;bg-primary-600 text-white px-6 py-3 rounded-lg hover:bg-primary-700 transition&quot;</span><span class="p">&gt;</span>
            üõí A√±adir al Carrito
                    <span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
                    <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;{{ route(&#39;products.index&#39;) }}&quot;</span> 
                       <span class="na">class</span><span class="o">=</span><span class="s">&quot;border border-primary-600 text-primary-600 px-6 py-3 rounded-lg hover:bg-primary-50 transition&quot;</span><span class="p">&gt;</span>
                        ‚Üê Volver a Productos
                    <span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
                <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
            <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
@endsection
</code></pre></div>
<p>Cambios en la Vista de Detalle de Producto</p>
<ul>
<li><strong><code>$product-&gt;name</code></strong>: Acceso directo a las propiedades del modelo</li>
<li><strong><code>$product-&gt;offer</code></strong>: Relaci√≥n cargada con eager loading</li>
<li><strong><code>$product-&gt;category</code></strong>: Relaci√≥n con la categor√≠a</li>
<li><strong><code>$product-&gt;final_price</code></strong>: Uso del accessor para obtener el precio final autom√°ticamente</li>
<li><strong><code>@if($product-&gt;offer)</code></strong>: Verifica si existe la relaci√≥n (no si es <code>!== null</code>)</li>
</ul>
<h3 id="6-actualizar-la-vista-de-productos-por-categoria">6. Actualizar la Vista de Productos por Categor√≠a<a class="headerlink" href="#6-actualizar-la-vista-de-productos-por-categoria" title="Permanent link">&para;</a></h3>
<p>Esta vista muestra todos los productos de una categor√≠a espec√≠fica.</p>
<p>Abre el archivo <code>resources/views/categories/show.blade.php</code> y actualiza el contenido:</p>
<p>C√≥digo HTML actualizado</p>
<div class="highlight"><pre><span></span><code>@extends(&#39;layouts.app&#39;)

@section(&#39;title&#39;, $category-&gt;name . &#39; - Mi Tienda&#39;)

@section(&#39;content&#39;)
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;container mx-auto px-6 py-8&quot;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;mb-8&quot;</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">h1</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;text-3xl font-bold text-gray-900 mb-4&quot;</span><span class="p">&gt;</span>{{ $category-&gt;name }}<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">p</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;text-gray-600 mb-4&quot;</span><span class="p">&gt;</span>{{ $category-&gt;description }}<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;{{ route(&#39;categories.index&#39;) }}&quot;</span> 
               <span class="na">class</span><span class="o">=</span><span class="s">&quot;text-primary-600 hover:text-primary-700 transition&quot;</span><span class="p">&gt;</span>
                ‚Üê Volver a Categor√≠as
            <span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

        @if($categoryProducts-&gt;isNotEmpty())
            <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6&quot;</span><span class="p">&gt;</span>
                @foreach($categoryProducts as $product)
                    <span class="p">&lt;</span><span class="nt">x-product-card</span> <span class="na">:product</span><span class="o">=</span><span class="s">&quot;$product&quot;</span> <span class="p">/&gt;</span>
                @endforeach
            <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    @else
            <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;text-center py-12&quot;</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">p</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;text-gray-500 text-lg&quot;</span><span class="p">&gt;</span>No hay productos en esta categor√≠a.<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
            <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    @endif
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
@endsection
</code></pre></div>
<p>Cambios en la Vista de Categor√≠a</p>
<ul>
<li><strong><code>$category-&gt;name</code></strong>: Propiedad del modelo Eloquent</li>
<li><strong><code>$category-&gt;description</code></strong>: Descripci√≥n de la categor√≠a</li>
<li><strong><code>$categoryProducts-&gt;isNotEmpty()</code></strong>: M√©todo de Collection en lugar de <code>!empty()</code></li>
<li>Los productos se pasan directamente al componente <code>ProductCard</code></li>
</ul>
<h3 id="7-actualizar-la-vista-de-lista-de-ofertas">7. Actualizar la Vista de Lista de Ofertas<a class="headerlink" href="#7-actualizar-la-vista-de-lista-de-ofertas" title="Permanent link">&para;</a></h3>
<p>Esta vista muestra todas las ofertas disponibles en la tienda.</p>
<p>Abre el archivo <code>resources/views/offers/index.blade.php</code> y actualiza el contenido:</p>
<p>C√≥digo HTML actualizado</p>
<div class="highlight"><pre><span></span><code>@extends(&#39;layouts.app&#39;)

@section(&#39;title&#39;, &#39;Ofertas - Mi Tienda&#39;)

@section(&#39;content&#39;)
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;container mx-auto px-6 py-8&quot;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;mb-8&quot;</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">h1</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;text-3xl font-bold text-gray-900 mb-4&quot;</span><span class="p">&gt;</span>Ofertas Especiales<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">p</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;text-gray-600&quot;</span><span class="p">&gt;</span>Descubre nuestras mejores ofertas y descuentos.<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6&quot;</span><span class="p">&gt;</span>
            @forelse($offers as $offer)
                <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;bg-white rounded-lg shadow-lg p-6 border-l-4 border-orange-500&quot;</span><span class="p">&gt;</span>
                    <span class="p">&lt;</span><span class="nt">h3</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;text-xl font-bold text-gray-900 mb-2&quot;</span><span class="p">&gt;</span>{{ $offer-&gt;name }}<span class="p">&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span>
                    <span class="p">&lt;</span><span class="nt">p</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;text-gray-600 mb-4&quot;</span><span class="p">&gt;</span>{{ $offer-&gt;description }}<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
                    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;text-2xl font-bold text-orange-600 mb-4&quot;</span><span class="p">&gt;</span>
                        {{ $offer-&gt;discount_percentage }}% de descuento
                    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
                    <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;{{ route(&#39;offers.show&#39;, $offer-&gt;id) }}&quot;</span> 
                       <span class="na">class</span><span class="o">=</span><span class="s">&quot;bg-orange-600 text-white px-4 py-2 rounded-lg hover:bg-orange-700 transition&quot;</span><span class="p">&gt;</span>
                        Ver Productos
                    <span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
                <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
            @empty
                <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;col-span-full text-center py-12&quot;</span><span class="p">&gt;</span>
                    <span class="p">&lt;</span><span class="nt">p</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;text-gray-500 text-lg&quot;</span><span class="p">&gt;</span>No hay ofertas disponibles.<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
                <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
            @endforelse
        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
@endsection
</code></pre></div>
<p>Cambios en la Vista de Ofertas</p>
<ul>
<li><strong><code>$offer-&gt;name</code></strong>: Propiedad del modelo Offer</li>
<li><strong><code>$offer-&gt;description</code></strong>: Descripci√≥n de la oferta</li>
<li><strong><code>$offer-&gt;discount_percentage</code></strong>: Porcentaje de descuento</li>
<li><strong><code>$offer-&gt;id</code></strong>: ID del modelo para la ruta</li>
</ul>
<h3 id="8-actualizar-la-vista-de-detalle-de-oferta">8. Actualizar la Vista de Detalle de Oferta<a class="headerlink" href="#8-actualizar-la-vista-de-detalle-de-oferta" title="Permanent link">&para;</a></h3>
<p>Esta vista muestra los detalles de una oferta espec√≠fica y todos los productos que tienen aplicada esa oferta.</p>
<p>Abre el archivo <code>resources/views/offers/show.blade.php</code> y actualiza el contenido:</p>
<p>C√≥digo HTML actualizado</p>
<div class="highlight"><pre><span></span><code>@extends(&#39;layouts.app&#39;)

@section(&#39;title&#39;, $offer-&gt;name . &#39; - Mi Tienda&#39;)

@section(&#39;content&#39;)
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;container mx-auto px-6 py-8&quot;</span><span class="p">&gt;</span>
        <span class="cm">&lt;!-- Header de la Oferta --&gt;</span>
        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;bg-gradient-to-r from-orange-500 to-red-500 rounded-lg shadow-lg p-8 mb-8 text-white&quot;</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;flex items-center justify-between&quot;</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
                    <span class="p">&lt;</span><span class="nt">h1</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;text-4xl font-bold mb-2&quot;</span><span class="p">&gt;</span>{{ $offer-&gt;name }}<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
                    <span class="p">&lt;</span><span class="nt">p</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;text-xl&quot;</span><span class="p">&gt;</span>{{ $offer-&gt;description }}<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
                <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;bg-white text-orange-600 rounded-full w-32 h-32 flex items-center justify-center&quot;</span><span class="p">&gt;</span>
                    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;text-center&quot;</span><span class="p">&gt;</span>
                        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;text-4xl font-bold&quot;</span><span class="p">&gt;</span>{{ $offer-&gt;discount_percentage }}%<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
                        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;text-sm&quot;</span><span class="p">&gt;</span>OFF<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
                    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
                <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
            <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

        <span class="cm">&lt;!-- Productos con esta oferta --&gt;</span>
        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;mb-8&quot;</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">h2</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;text-2xl font-bold text-gray-900 mb-6&quot;</span><span class="p">&gt;</span>Productos en Oferta<span class="p">&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>

            @if($offerProducts-&gt;isNotEmpty())
                <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6&quot;</span><span class="p">&gt;</span>
                    @foreach($offerProducts as $product)
                        <span class="p">&lt;</span><span class="nt">x-product-card</span> <span class="na">:product</span><span class="o">=</span><span class="s">&quot;$product&quot;</span> <span class="p">/&gt;</span>
                    @endforeach
                <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
            @else
                <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;text-center py-12 bg-gray-100 rounded-lg&quot;</span><span class="p">&gt;</span>
                    <span class="p">&lt;</span><span class="nt">p</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;text-gray-500 text-lg&quot;</span><span class="p">&gt;</span>No hay productos con esta oferta actualmente.<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
                <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
            @endif
        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

        <span class="cm">&lt;!-- Bot√≥n volver --&gt;</span>
        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;mt-8&quot;</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;{{ route(&#39;offers.index&#39;) }}&quot;</span> 
               <span class="na">class</span><span class="o">=</span><span class="s">&quot;inline-block bg-gray-600 text-white px-6 py-3 rounded-lg hover:bg-gray-700 transition&quot;</span><span class="p">&gt;</span>
                ‚Üê Volver a Ofertas
            <span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
@endsection
</code></pre></div>
<p>Cambios en la Vista de Detalle de Oferta</p>
<ul>
<li><strong><code>$offer-&gt;name</code></strong>: Nombre de la oferta desde el modelo</li>
<li><strong><code>$offer-&gt;description</code></strong>: Descripci√≥n de la oferta</li>
<li><strong><code>$offer-&gt;discount_percentage</code></strong>: Porcentaje de descuento</li>
<li><strong><code>$offerProducts-&gt;isNotEmpty()</code></strong>: M√©todo de Collection en lugar de <code>!empty()</code></li>
<li>Los productos se pasan al componente <code>ProductCard</code> que ya est√° actualizado</li>
</ul>
<h2 id="fase-7-probar-la-aplicacion">FASE 7: Probar la Aplicaci√≥n<a class="headerlink" href="#fase-7-probar-la-aplicacion" title="Permanent link">&para;</a></h2>
<h3 id="1-verificar-que-la-base-de-datos-este-poblada">1. Verificar que la Base de Datos Est√© Poblada<a class="headerlink" href="#1-verificar-que-la-base-de-datos-este-poblada" title="Permanent link">&para;</a></h3>
<p>Antes de probar la aplicaci√≥n en el navegador, es importante verificar que los seeders se ejecutaron correctamente y que la base de datos contiene los datos esperados.</p>
<p>Laravel Tinker es una herramienta interactiva que permite ejecutar c√≥digo PHP directamente en el contexto de la aplicaci√≥n, ideal para probar consultas y verificar datos.</p>
<p>Ejecuta el siguiente comando para abrir Tinker:</p>
<div class="highlight"><pre><span></span><code>sail<span class="w"> </span>artisan<span class="w"> </span>tinker
</code></pre></div>
<p>En Tinker, ejecuta los siguientes comandos para verificar que los datos se insertaron correctamente:</p>
<ul>
<li>Verificar cantidad de registros en cada tabla:</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="x">        App\Models\User::count()</span>
<span class="x">App\Models\Category::count()</span>
<span class="x">        App\Models\Offer::count()</span>
<span class="x">        App\Models\Product::count()</span>
</code></pre></div>
<p>Ejemplo de respuesta en Tinker</p>
<div class="highlight"><pre><span></span><code><span class="x">&gt; App\Models\User::count()</span>
<span class="x">= 3</span>

<span class="x">&gt; App\Models\Category::count()</span>
<span class="x">= 5</span>

<span class="x">&gt; App\Models\Offer::count()</span>
<span class="x">= 3</span>

<span class="x">&gt; App\Models\Product::count()</span>
<span class="x">= 6</span>
</code></pre></div>
<ul>
<li>Verificar que las relaciones funcionan</li>
</ul>
<p><strong>Producto con categoria y oferta:</strong></p>
<div class="highlight"><pre><span></span><code><span class="x">$product = App\Models\Product::with([&#39;category&#39;, &#39;offer&#39;])-&gt;first();</span>
</code></pre></div>
<p>Ejemplo de respuesta en Tinker</p>
<div class="highlight"><pre><span></span><code><span class="x">&gt; $product = App\Models\Product::with([&#39;category&#39;, &#39;offer&#39;])-&gt;first();</span>
<span class="x">= App\Models\Product {#6158ducts&#39;)-&gt;first();</span>
<span class="x">    id: 1,</span>
<span class="x">    name: &quot;Producto 1&quot;,</span>
<span class="x">    description: &quot;Descripci&lt;C3&gt;&lt;B3&gt;n del producto 1&quot;,</span>
<span class="x">    price: &quot;29.99&quot;,</span>
<span class="x">    category_id: 1,</span>
<span class="x">    offer_id: 1,</span>
<span class="x">    created_at: &quot;2025-10-02 08:54:44&quot;,</span>
<span class="x">    updated_at: &quot;2025-10-02 08:54:44&quot;,</span>
<span class="x">    category: App\Models\Category {#6192</span>
<span class="x">        id: 1,</span>
<span class="x">        name: &quot;Categor&lt;C3&gt;&lt;AD&gt;a 1&quot;,</span>
<span class="x">        slug: &quot;categoria-1&quot;,</span>
<span class="x">        description: &quot;Descripci&lt;C3&gt;&lt;B3&gt;n de la categor&lt;C3&gt;&lt;AD&gt;a 1&quot;,</span>
<span class="x">        created_at: &quot;2025-10-02 08:54:44&quot;,</span>
<span class="x">        updated_at: &quot;2025-10-02 08:54:44&quot;,</span>
<span class="x">    },</span>
<span class="x">    offer: App\Models\Offer {#6161</span>
<span class="x">        id: 1,</span>
<span class="x">        name: &quot;Oferta 1&quot;,</span>
<span class="x">        slug: &quot;oferta-1&quot;,</span>
<span class="x">        discount_percentage: 20,</span>
<span class="x">        description: &quot;Descuento especial del 20%&quot;,</span>
<span class="x">        created_at: &quot;2025-10-02 08:54:44&quot;,</span>
<span class="x">        updated_at: &quot;2025-10-02 08:54:44&quot;,</span>
<span class="x">    },</span>
<span class="x">}</span>
</code></pre></div>
<p><strong>Usuario con producto:</strong></p>
<div class="highlight"><pre><span></span><code><span class="x">$user = App\Models\User::with(&#39;products&#39;)-&gt;first();</span>
</code></pre></div>
<p>Ejemplo de respuesta en Tinker</p>
<div class="highlight"><pre><span></span><code><span class="x">&gt; $user = App\Models\User::with(&#39;products&#39;)-&gt;first();</span>
<span class="x">= App\Models\User {#6770</span>
<span class="x">    id: 1,</span>
<span class="x">    name: &quot;Usuario Demo&quot;,</span>
<span class="x">    email: &quot;demo@example.com&quot;,</span>
<span class="x">    email_verified_at: &quot;2025-10-02 08:54:43&quot;,</span>
<span class="x">    #password: &quot;$2y$12$eXBoAA87wjdZ2sny/PWTkeOor2Z/SvbYbzIiGepRvXKALWs0cvngu&quot;,</span>
<span class="x">    #remember_token: &quot;EdO89iK9Jq&quot;,</span>
<span class="x">    created_at: &quot;2025-10-02 08:54:44&quot;,</span>
<span class="x">    updated_at: &quot;2025-10-02 08:54:44&quot;,</span>
<span class="x">    products: Illuminate\Database\Eloquent\Collection {#6788</span>
<span class="x">    all: [</span>
<span class="x">        App\Models\Product {#6750</span>
<span class="x">        id: 1,</span>
<span class="x">        name: &quot;Producto 1&quot;,</span>
<span class="x">        description: &quot;Descripci&lt;C3&gt;&lt;B3&gt;n del producto 1&quot;,</span>
<span class="x">        price: &quot;29.99&quot;,</span>
<span class="x">        category_id: 1,</span>
<span class="x">        offer_id: 1,</span>
<span class="x">        created_at: &quot;2025-10-02 08:54:44&quot;,</span>
<span class="x">        updated_at: &quot;2025-10-02 08:54:44&quot;,</span>
<span class="x">        pivot: Illuminate\Database\Eloquent\Relations\Pivot {#6742</span>
<span class="x">            user_id: 1,</span>
<span class="x">            product_id: 1,</span>
<span class="x">            quantity: 2,</span>
<span class="x">            added_at: &quot;2025-01-15 10:30:00&quot;,</span>
<span class="x">            created_at: &quot;2025-10-02 08:54:44&quot;,</span>
<span class="x">            updated_at: &quot;2025-10-02 08:54:44&quot;,</span>
<span class="x">        },</span>
<span class="x">        },</span>
<span class="x">        App\Models\Product {#6763</span>
<span class="x">        id: 3,</span>
<span class="x">        name: &quot;Producto 3&quot;,</span>
<span class="x">        description: &quot;Descripci&lt;C3&gt;&lt;B3&gt;n del producto 3&quot;,</span>
<span class="x">        price: &quot;19.99&quot;,</span>
<span class="x">        category_id: 2,</span>
<span class="x">        offer_id: 2,</span>
<span class="x">        created_at: &quot;2025-10-02 08:54:44&quot;,</span>
<span class="x">        updated_at: &quot;2025-10-02 08:54:44&quot;,</span>
<span class="x">        pivot: Illuminate\Database\Eloquent\Relations\Pivot {#6792</span>
<span class="x">            user_id: 1,</span>
<span class="x">            product_id: 3,</span>
<span class="x">            quantity: 1,</span>
<span class="x">            added_at: &quot;2025-01-15 11:15:00&quot;,</span>
<span class="x">            created_at: &quot;2025-10-02 08:54:44&quot;,</span>
<span class="x">            updated_at: &quot;2025-10-02 08:54:44&quot;,</span>
<span class="x">        },</span>
<span class="x">        },</span>
<span class="x">        App\Models\Product {#6752</span>
<span class="x">        id: 5,</span>
<span class="x">        name: &quot;Producto 5&quot;,</span>
<span class="x">        description: &quot;Descripci&lt;C3&gt;&lt;B3&gt;n del producto 5&quot;,</span>
<span class="x">        price: &quot;34.99&quot;,</span>
<span class="x">        category_id: 3,</span>
<span class="x">        offer_id: 3,</span>
<span class="x">        created_at: &quot;2025-10-02 08:54:44&quot;,</span>
<span class="x">        updated_at: &quot;2025-10-02 08:54:44&quot;,</span>
<span class="x">        pivot: Illuminate\Database\Eloquent\Relations\Pivot {#6793</span>
<span class="x">            user_id: 1,</span>
<span class="x">            product_id: 5,</span>
<span class="x">            quantity: 3,</span>
<span class="x">            added_at: &quot;2025-01-15 12:00:00&quot;,</span>
<span class="x">            created_at: &quot;2025-10-02 08:54:44&quot;,</span>
<span class="x">            updated_at: &quot;2025-10-02 08:54:44&quot;,</span>
<span class="x">        },</span>
<span class="x">        },</span>
<span class="x">        App\Models\Product {#6755</span>
<span class="x">        id: 2,</span>
<span class="x">        name: &quot;Producto 2&quot;,</span>
<span class="x">        description: &quot;Descripci&lt;C3&gt;&lt;B3&gt;n del producto 2&quot;,</span>
<span class="x">        price: &quot;39.99&quot;,</span>
<span class="x">        category_id: 1,</span>
<span class="x">        offer_id: null,</span>
<span class="x">        created_at: &quot;2025-10-02 08:54:44&quot;,</span>
<span class="x">        updated_at: &quot;2025-10-02 08:54:44&quot;,</span>
<span class="x">        pivot: Illuminate\Database\Eloquent\Relations\Pivot {#6791</span>
<span class="x">            user_id: 1,</span>
<span class="x">            product_id: 2,</span>
<span class="x">            quantity: 1,</span>
<span class="x">            added_at: &quot;2025-01-15 14:30:00&quot;,</span>
<span class="x">            created_at: &quot;2025-10-02 08:54:44&quot;,</span>
<span class="x">            updated_at: &quot;2025-10-02 08:54:44&quot;,</span>
<span class="x">        },</span>
<span class="x">        },</span>
<span class="x">    ],</span>
<span class="x">    },</span>
<span class="x">}</span>
<span class="x">(END)</span>
</code></pre></div>
<p>Nota</p>
<p>Cuando ejecutas comandos o consultas largas en la consola de Tinker, a veces no se muestra todo el contenido de inmediato. Si ves el s√≠mbolo <code>:</code>, significa que hay m√°s contenido por mostrar. Pulsa <code>Enter</code> para seguir viendo el resto hasta llegar a la etiqueta <code>(END)</code>, que indica que ya se mostr√≥ todo.</p>
<p>Para salir de la visualizaci√≥n y volver a la l√≠nea de comandos de Tinker, simplemente pulsa la tecla <code>q</code>.</p>
<ul>
<li>Verificar los datos de un producto y carrito del usuario:</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="x">$product-&gt;name</span>
<span class="x">$product-&gt;category-&gt;name</span>
<span class="x">$product-&gt;offer ? $product-&gt;offer-&gt;name : &#39;Sin oferta&#39;</span>
<span class="x">$user-&gt;name</span>
<span class="x">$user-&gt;products-&gt;first()-&gt;name</span>
<span class="x">$user-&gt;products-&gt;first()-&gt;pivot-&gt;quantity</span>
</code></pre></div>
<p>Ejemplo de respuesta en Tinker</p>
<div class="highlight"><pre><span></span><code><span class="x">&gt; $product-&gt;name</span>
<span class="x">= &quot;Producto 1&quot;</span>

<span class="x">&gt; $product-&gt;category-&gt;name</span>
<span class="x">= &quot;Categor√≠a 1&quot;</span>

<span class="x">&gt; $product-&gt;offer ? $product-&gt;offer-&gt;name : &#39;Sin oferta&#39;</span>
<span class="x">= &quot;Oferta 1&quot;</span>

<span class="x">&gt; $user-&gt;name</span>
<span class="x">= &quot;Usuario Demo&quot;</span>

<span class="x">&gt; $user-&gt;products-&gt;first()-&gt;name</span>
<span class="x">= &quot;Producto 1&quot;</span>

<span class="x">&gt; $user-&gt;products-&gt;first()-&gt;pivot-&gt;quantity</span>
<span class="x">= 2</span>
</code></pre></div>
<ul>
<li>Verificar la relaci√≥n N:M completa:</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="x">foreach ($user-&gt;products as $product) {</span>
<span class="x">    echo $product-&gt;name . &quot; - Cantidad: &quot; . $product-&gt;pivot-&gt;quantity . &quot;\n&quot;;</span>
<span class="x">}</span>
</code></pre></div>
<p>Ejemplo de respuesta en Tinker</p>
<div class="highlight"><pre><span></span><code><span class="x">&gt; foreach ($user-&gt;products as $product) {</span>
<span class="x">    echo $product-&gt;name . &quot; - Cantidad: &quot; . $product-&gt;pivot-&gt;quantity . &quot;\n&quot;;</span>
<span class="x">}</span>
<span class="x">Producto 1 - Cantidad: 2</span>
<span class="x">Producto 2 - Cantidad: 1</span>
<span class="x">Producto 3 - Cantidad: 3</span>
</code></pre></div>
<h3 id="2-probar-las-rutas-en-el-navegador">2. Probar las Rutas en el Navegador<a class="headerlink" href="#2-probar-las-rutas-en-el-navegador" title="Permanent link">&para;</a></h3>
<p>Ahora que hemos verificado que la base de datos est√° poblada correctamente, es el momento de probar la aplicaci√≥n en el navegador para asegurarnos de que todo funciona como se espera.</p>
<p>Visita las siguientes URLs y verifica que cada p√°gina carga correctamente:</p>
<ul>
<li><strong>P√°gina de inicio</strong>: <code>http://localhost</code> (WelcomeController)</li>
<li><strong>Lista de productos</strong>: <code>http://localhost/products</code></li>
<li><strong>Productos en oferta</strong>: <code>http://localhost/products-on-sale</code></li>
<li><strong>Producto espec√≠fico</strong>: <code>http://localhost/products/1</code></li>
<li><strong>Lista de categor√≠as</strong>: <code>http://localhost/categories</code></li>
<li><strong>Categor√≠a espec√≠fica</strong>: <code>http://localhost/categories/1</code></li>
<li><strong>Lista de ofertas</strong>: <code>http://localhost/offers</code></li>
<li><strong>Oferta espec√≠fica</strong>: <code>http://localhost/offers/1</code></li>
<li><strong>Carrito</strong>: <code>http://localhost/cart</code></li>
<li><strong>Contacto</strong>: <code>http://localhost/contact</code> (ContactController)</li>
</ul>
<h2 id="fase-8-introduccion-a-operaciones-crud">FASE 8: Introducci√≥n a Operaciones CRUD<a class="headerlink" href="#fase-8-introduccion-a-operaciones-crud" title="Permanent link">&para;</a></h2>
<h3 id="1-que-son-las-operaciones-crud">1. ¬øQu√© son las Operaciones CRUD?<a class="headerlink" href="#1-que-son-las-operaciones-crud" title="Permanent link">&para;</a></h3>
<p>CRUD es un acr√≥nimo que significa <strong>Create, Read, Update, Delete</strong> (Crear, Leer, Actualizar, Eliminar). Estas son las operaciones b√°sicas que se pueden realizar sobre cualquier entidad en una aplicaci√≥n.</p>
<p>Hasta ahora, en esta pr√°ctica solo hemos implementado la operaci√≥n <strong>Read</strong> (leer datos) en los controladores. Las operaciones de escritura (Create, Update, Delete) se pueden probar usando Tinker.</p>
<h3 id="2-probar-operaciones-crud-con-tinker">2. Probar Operaciones CRUD con Tinker<a class="headerlink" href="#2-probar-operaciones-crud-con-tinker" title="Permanent link">&para;</a></h3>
<p>Aunque no implementaremos formularios en esta pr√°ctica, puedes probar todas las operaciones CRUD usando Tinker:</p>
<div class="highlight"><pre><span></span><code>sail<span class="w"> </span>artisan<span class="w"> </span>tinker
</code></pre></div>
<p>Ejemplos de operaciones CRUD en Tinker</p>
<p><strong>Crear un producto (Create)</strong>:</p>
<div class="highlight"><pre><span></span><code><span class="x">$product = App\Models\Product::create([</span>
<span class="x">    &#39;name&#39; =&gt; &#39;Producto de Prueba&#39;,</span>
<span class="x">    &#39;description&#39; =&gt; &#39;Descripci√≥n del producto de prueba&#39;,</span>
<span class="x">    &#39;price&#39; =&gt; 99.99,</span>
<span class="x">    &#39;category_id&#39; =&gt; 1,</span>
<span class="x">    &#39;offer_id&#39; =&gt; null</span>
<span class="x">]);</span>

<span class="x">echo &quot;Producto creado con ID: &quot; . $product-&gt;id;</span>
</code></pre></div>
<p><strong>Leer productos (Read)</strong>:</p>
<div class="highlight"><pre><span></span><code><span class="x">// Obtener todos los productos</span>
<span class="x">$products = App\Models\Product::all();</span>

<span class="x">// Obtener un producto espec√≠fico</span>
<span class="x">$product = App\Models\Product::find(1);</span>
<span class="x">echo $product-&gt;name;</span>

<span class="x">// Obtener productos con relaciones</span>
<span class="x">$product = App\Models\Product::with([&#39;category&#39;, &#39;offer&#39;])-&gt;first();</span>
<span class="x">echo $product-&gt;category-&gt;name;</span>
</code></pre></div>
<p><strong>Actualizar un producto (Update)</strong>:</p>
<div class="highlight"><pre><span></span><code><span class="x">$product = App\Models\Product::find(1);</span>
<span class="x">$product-&gt;update([</span>
<span class="x">    &#39;price&#39; =&gt; 89.99,</span>
<span class="x">    &#39;description&#39; =&gt; &#39;Nueva descripci√≥n actualizada&#39;</span>
<span class="x">]);</span>

<span class="x">echo &quot;Precio actualizado: ‚Ç¨&quot; . $product-&gt;price;</span>
</code></pre></div>
<p><strong>Eliminar un producto (Delete)</strong>:</p>
<div class="highlight"><pre><span></span><code><span class="x">$product = App\Models\Product::find(1);</span>
<span class="x">$product-&gt;delete();</span>

<span class="x">echo &quot;Producto eliminado&quot;;</span>
</code></pre></div>
<p>Verificar las Operaciones</p>
<p>Despu√©s de cada operaci√≥n, puedes verificar los cambios en la base de datos:</p>
<div class="highlight"><pre><span></span><code><span class="x">App\Models\Product::count()  // Ver total de productos</span>
<span class="x">App\Models\Product::find(1)  // Verificar si existe</span>
</code></pre></div>
<h3 id="3-eliminacion-en-cascada">3. Eliminaci√≥n en Cascada<a class="headerlink" href="#3-eliminacion-en-cascada" title="Permanent link">&para;</a></h3>
<p>Gracias a las claves for√°neas definidas en las migraciones con <code>-&gt;onDelete('cascade')</code>, cuando eliminas una entidad, se eliminan autom√°ticamente las entidades relacionadas:</p>
<p>Ejemplos de eliminaci√≥n en cascada</p>
<div class="highlight"><pre><span></span><code><span class="x">// Si eliminas una categor√≠a, se eliminan todos sus productos</span>
<span class="x">$category = App\Models\Category::find(1);</span>
<span class="x">$category-&gt;delete(); // Elimina la categor√≠a y todos sus productos</span>

<span class="x">// Si eliminas un producto, se eliminan sus relaciones en el carrito</span>
<span class="x">$product = App\Models\Product::find(1);</span>
<span class="x">$product-&gt;delete(); // Elimina el producto y sus entradas en product_user</span>

<span class="x">// Si eliminas una oferta, los productos quedan sin oferta (set null)</span>
<span class="x">$offer = App\Models\Offer::find(1);</span>
<span class="x">$offer-&gt;delete(); // Los productos quedan con offer_id = null</span>
</code></pre></div>
<p>Cuidado con las Eliminaciones</p>
<p>La eliminaci√≥n en cascada es potente pero peligrosa:</p>
<ul>
<li>Eliminar una categor√≠a borra TODOS sus productos</li>
<li>Eliminar un usuario borra TODOS los items de su carrito</li>
<li>Siempre verifica las relaciones antes de eliminar</li>
</ul>
<h2 id="entrega-de-la-practica">üìã ENTREGA DE LA PR√ÅCTICA<a class="headerlink" href="#entrega-de-la-practica" title="Permanent link">&para;</a></h2>
<h3 id="requisitos-de-entrega">Requisitos de Entrega<a class="headerlink" href="#requisitos-de-entrega" title="Permanent link">&para;</a></h3>
<p>Para completar esta pr√°ctica, debes entregar un <strong>PDF</strong> que incluya las siguientes <strong>13 capturas de pantalla numeradas</strong>:</p>
<hr />
<h4 id="captura-1-migraciones-y-seeders-ejecutados">Captura 1: Migraciones y Seeders Ejecutados<a class="headerlink" href="#captura-1-migraciones-y-seeders-ejecutados" title="Permanent link">&para;</a></h4>
<p>Ejecuta el comando para refrescar la base de datos y poblarla:</p>
<div class="highlight"><pre><span></span><code>sail<span class="w"> </span>artisan<span class="w"> </span>migrate:refresh<span class="w"> </span>--seed
</code></pre></div>
<p><strong>Requisitos</strong>:</p>
<ul>
<li>Terminal mostrando la ejecuci√≥n completa del comando</li>
<li>Todas las migraciones siendo revertidas y ejecutadas</li>
<li>Todos los seeders ejecut√°ndose (UserSeeder, CategorySeeder, OfferSeeder, ProductSeeder, ProductUserSeeder)</li>
<li>Prompt del terminal <code>usuario@equipo:~/ruta/proyecto$</code> visible</li>
</ul>
<hr />
<h4 id="captura-2-verificacion-de-datos-en-tinker">Captura 2: Verificaci√≥n de Datos en Tinker<a class="headerlink" href="#captura-2-verificacion-de-datos-en-tinker" title="Permanent link">&para;</a></h4>
<p>Abre Tinker y verifica los datos:</p>
<div class="highlight"><pre><span></span><code>sail<span class="w"> </span>artisan<span class="w"> </span>tinker
</code></pre></div>
<p>Ejecuta los siguientes comandos:</p>
<div class="highlight"><pre><span></span><code><span class="x">App\Models\User::count()</span>
<span class="x">App\Models\Category::count()</span>
<span class="x">App\Models\Offer::count()</span>
<span class="x">App\Models\Product::count()</span>
</code></pre></div>
<p><strong>Requisitos</strong>:</p>
<ul>
<li>Terminal mostrando Tinker abierto</li>
<li>Los 4 comandos ejecutados con sus resultados</li>
<li>Cantidades &gt; 0 en todas las tablas</li>
<li>Prompt visible</li>
</ul>
<hr />
<h4 id="captura-3-pagina-de-inicio-con-datos-reales">Captura 3: P√°gina de Inicio con Datos Reales<a class="headerlink" href="#captura-3-pagina-de-inicio-con-datos-reales" title="Permanent link">&para;</a></h4>
<p>Visita <code>http://localhost</code> en tu navegador.</p>
<p><strong>Requisitos</strong>:</p>
<ul>
<li>P√°gina de bienvenida funcionando</li>
<li>Productos destacados con datos de la base de datos</li>
<li>Categor√≠as destacadas visibles</li>
<li>Productos con ofertas mostrando badges naranjas y descuentos</li>
<li>URL visible en la barra del navegador</li>
</ul>
<hr />
<h4 id="captura-4-lista-de-todos-los-productos">Captura 4: Lista de Todos los Productos<a class="headerlink" href="#captura-4-lista-de-todos-los-productos" title="Permanent link">&para;</a></h4>
<p>Visita <code>http://localhost/products</code> en tu navegador.</p>
<p><strong>Requisitos</strong>:</p>
<ul>
<li>Todos los productos de tu tienda</li>
<li>Productos con oferta mostrando badge de descuento</li>
<li>Precios originales y con descuento visibles</li>
<li>Datos adaptados a tu tem√°tica elegida</li>
<li>URL <code>http://localhost/products</code> visible</li>
</ul>
<hr />
<h4 id="captura-5-productos-en-oferta">Captura 5: Productos en Oferta<a class="headerlink" href="#captura-5-productos-en-oferta" title="Permanent link">&para;</a></h4>
<p>Visita <code>http://localhost/products-on-sale</code> en tu navegador.</p>
<p><strong>Requisitos</strong>:</p>
<ul>
<li><strong>Solo</strong> productos que tienen oferta activa</li>
<li>Todos los productos con badge naranja de descuento</li>
<li>Precios tachados y precios finales en naranja</li>
<li>URL <code>http://localhost/products-on-sale</code> visible</li>
</ul>
<hr />
<h4 id="captura-6-detalle-de-un-producto">Captura 6: Detalle de un Producto<a class="headerlink" href="#captura-6-detalle-de-un-producto" title="Permanent link">&para;</a></h4>
<p>Visita <code>http://localhost/products/1</code> (o cualquier ID v√°lido) en tu navegador.</p>
<p><strong>Requisitos</strong>:</p>
<ul>
<li>Informaci√≥n completa del producto</li>
<li>Categor√≠a del producto visible y enlazada</li>
<li>Si tiene oferta, mostrar informaci√≥n completa de la oferta</li>
<li>Precios correctos (con o sin descuento)</li>
<li>URL <code>http://localhost/products/X</code> visible</li>
</ul>
<hr />
<h4 id="captura-7-productos-por-categoria">Captura 7: Productos por Categor√≠a<a class="headerlink" href="#captura-7-productos-por-categoria" title="Permanent link">&para;</a></h4>
<p>Visita <code>http://localhost/categories/1</code> (o cualquier ID v√°lido) en tu navegador.</p>
<p><strong>Requisitos</strong>:</p>
<ul>
<li>Nombre y descripci√≥n de la categor√≠a</li>
<li>Solo productos de esa categor√≠a</li>
<li>Productos con ofertas mostrando descuentos</li>
<li>Enlace "Volver a Categor√≠as" visible</li>
<li>URL <code>http://localhost/categories/X</code> visible</li>
</ul>
<hr />
<h4 id="captura-8-lista-de-ofertas">Captura 8: Lista de Ofertas<a class="headerlink" href="#captura-8-lista-de-ofertas" title="Permanent link">&para;</a></h4>
<p>Visita <code>http://localhost/offers</code> en tu navegador.</p>
<p><strong>Requisitos</strong>:</p>
<ul>
<li>Todas las ofertas disponibles</li>
<li>Nombre, descripci√≥n y porcentaje de descuento de cada oferta</li>
<li>Enlaces "Ver Productos" visibles</li>
<li>URL <code>http://localhost/offers</code> visible</li>
</ul>
<hr />
<h4 id="captura-9-detalle-de-una-oferta">Captura 9: Detalle de una Oferta<a class="headerlink" href="#captura-9-detalle-de-una-oferta" title="Permanent link">&para;</a></h4>
<p>Visita <code>http://localhost/offers/1</code> (o cualquier ID v√°lido) en tu navegador.</p>
<p><strong>Requisitos</strong>:</p>
<ul>
<li>Header destacado con el porcentaje de descuento</li>
<li>Productos que tienen esa oferta aplicada</li>
<li>Informaci√≥n de la oferta visible</li>
<li>URL <code>http://localhost/offers/X</code> visible</li>
</ul>
<hr />
<h4 id="captura-10-carrito-de-compras">Captura 10: Carrito de Compras<a class="headerlink" href="#captura-10-carrito-de-compras" title="Permanent link">&para;</a></h4>
<p>Visita <code>http://localhost/cart</code> en tu navegador.</p>
<p><strong>Requisitos</strong>:</p>
<ul>
<li>Items del carrito desde la base de datos (tabla <code>product_user</code>)</li>
<li>Informaci√≥n de cada producto (nombre, categor√≠a, precio, cantidad)</li>
<li>Productos con oferta mostrando descuento aplicado</li>
<li>Subtotales y total calculados correctamente</li>
<li>URL <code>http://localhost/cart</code> visible</li>
</ul>
<hr />
<h4 id="captura-11-verificacion-de-relaciones-en-tinker">Captura 11: Verificaci√≥n de Relaciones en Tinker<a class="headerlink" href="#captura-11-verificacion-de-relaciones-en-tinker" title="Permanent link">&para;</a></h4>
<p>En Tinker, ejecuta:</p>
<p>php</p>
<div class="highlight"><pre><span></span><code>$product = App\Models\Product::with([&#39;category&#39;, &#39;offer&#39;])-&gt;first();
$product-&gt;name
$product-&gt;category-&gt;name
$product-&gt;offer ? $product-&gt;offer-&gt;name : &#39;Sin oferta&#39;
</code></pre></div>
<p><strong>Requisitos</strong>:</p>
<ul>
<li>Terminal con Tinker mostrando los comandos ejecutados</li>
<li>Relaciones funcionando correctamente (sin errores)</li>
<li>Acceso a <code>$product-&gt;category-&gt;name</code> exitoso</li>
<li>Verificaci√≥n de oferta funcionando</li>
</ul>
<hr />
<h4 id="captura-12-verificacion-de-relacion-nm-del-carrito">Captura 12: Verificaci√≥n de Relaci√≥n N:M del Carrito<a class="headerlink" href="#captura-12-verificacion-de-relacion-nm-del-carrito" title="Permanent link">&para;</a></h4>
<p>En Tinker, ejecuta:</p>
<p>php</p>
<div class="highlight"><pre><span></span><code>$user = App\Models\User::first();
$user-&gt;products-&gt;count()
$product = $user-&gt;products-&gt;first();
$product-&gt;pivot-&gt;quantity
</code></pre></div>
<p><strong>Requisitos</strong>:</p>
<ul>
<li>Terminal con Tinker mostrando los comandos ejecutados</li>
<li>Relaci√≥n N:M funcionando (<code>$user-&gt;products</code>)</li>
<li>Acceso a datos pivot exitoso (<code>$product-&gt;pivot-&gt;quantity</code>)</li>
<li>Sin errores</li>
</ul>
<hr />
<h4 id="captura-13-operacion-crud-crear-producto-en-tinker">Captura 13: Operaci√≥n CRUD - Crear Producto en Tinker<a class="headerlink" href="#captura-13-operacion-crud-crear-producto-en-tinker" title="Permanent link">&para;</a></h4>
<p>En Tinker, crea un nuevo producto:</p>
<div class="highlight"><pre><span></span><code><span class="x">$product = App\Models\Product::create([</span>
<span class="x">    &#39;name&#39; =&gt; &#39;Producto de Prueba CRUD&#39;,</span>
<span class="x">    &#39;description&#39; =&gt; &#39;Este producto fue creado para probar CRUD&#39;,</span>
<span class="x">    &#39;price&#39; =&gt; 49.99,</span>
<span class="x">    &#39;category_id&#39; =&gt; 1,</span>
<span class="x">    &#39;offer_id&#39; =&gt; null</span>
<span class="x">]);</span>

<span class="x">echo &quot;Producto creado con ID: &quot; . $product-&gt;id;</span>
<span class="x">App\Models\Product::count()</span>
</code></pre></div>
<p><strong>Requisitos</strong>:</p>
<ul>
<li>Terminal mostrando la creaci√≥n del producto</li>
<li>ID del producto creado visible</li>
<li>Contador de productos incrementado</li>
<li>Sin errores</li>
</ul>
<h3 id="instrucciones-de-entrega">üì§ Instrucciones de Entrega<a class="headerlink" href="#instrucciones-de-entrega" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>Formato</strong>: Entregar un √∫nico archivo PDF con todas las capturas</li>
<li><strong>Organizaci√≥n</strong>: Incluir un t√≠tulo para cada captura explicando qu√© muestra</li>
<li><strong>Calidad</strong>: Las capturas deben ser claras y legibles</li>
<li><strong>Funcionalidad</strong>: Todas las rutas deben funcionar con la base de datos real</li>
<li><strong>Relaciones</strong>: Verificar que las relaciones entre modelos funcionen correctamente</li>
<li><strong>Terminal</strong>: Todas las capturas deben incluir el prompt del terminal visible</li>
<li><strong>Datos personalizados</strong>: Los productos, categor√≠as y ofertas deben estar adaptados a tu tem√°tica espec√≠fica</li>
</ol>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Volver al principio
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Pie" >
        
          
          <a href="../305/" class="md-footer__link md-footer__link--prev" aria-label="Anterior: 5. Seeders y Factories: Poblando tu Base de Datos con Datos Realistas** üå±">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M9.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L77.3 256l137.3-137.4c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Anterior
              </span>
              <div class="md-ellipsis">
                5. Seeders y Factories: Poblando tu Base de Datos con Datos Realistas** üå±
              </div>
            </div>
          </a>
        
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Arturo Blasco - Creative Commons CC BY-NC-SA
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/arturoblasco" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["content.code.copy", "content.code.select", "content.code.annotate", "navigation.footer", "navigation.top"], "search": "../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copiado al portapapeles", "clipboard.copy": "Copiar al portapapeles", "search.result.more.one": "1 m\u00e1s en esta p\u00e1gina", "search.result.more.other": "# m\u00e1s en esta p\u00e1gina", "search.result.none": "No se encontraron documentos", "search.result.one": "1 documento encontrado", "search.result.other": "# documentos encontrados", "search.result.placeholder": "Teclee para comenzar b\u00fasqueda", "search.result.term.missing": "Falta", "select.version": "Seleccionar versi\u00f3n"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.92b07e13.min.js"></script>
      
        <script src="https://unpkg.com/mermaid@10.9.1/dist/mermaid.min.js"></script>
      
    
  </body>
</html>